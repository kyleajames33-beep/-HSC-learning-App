@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  @keyframes shimmer {
    0% {
      transform: translateX(-100%);
    }
    100% {
      transform: translateX(100%);
    }
  }

  .animate-shimmer {
    animation: shimmer 2s infinite;
  }
}

@layer base {
  html {
    @apply antialiased;
    font-feature-settings: "cv03", "cv04", "cv11";
  }

  body {
    @apply bg-white text-gray-900;
    font-family: 'Inter', system-ui, sans-serif;
  }
}

@layer components {
  .btn {
    @apply inline-flex items-center justify-center rounded-lg px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50;
  }

  .btn-primary {
    @apply btn bg-primary-600 text-white hover:bg-primary-700 active:bg-primary-800;
  }

  .btn-secondary {
    @apply btn bg-secondary-100 text-secondary-900 hover:bg-secondary-200 active:bg-secondary-300;
  }

  .btn-outline {
    @apply btn border border-gray-300 bg-transparent hover:bg-gray-50 active:bg-gray-100;
  }

  .input {
    @apply flex h-12 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50;
  }

  .input-error {
    @apply input border-red-500 focus:ring-red-500;
  }

  .card {
    @apply rounded-xl bg-white p-6 shadow-lg border border-gray-100;
  }

  .gradient-bg {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }

  .text-gradient {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .gaming-gradient {
    background: linear-gradient(135deg, #8b5cf6 0%, #3b82f6 50%, #10b981 100%);
  }

  .xp-gradient {
    background: linear-gradient(90deg, #fbbf24 0%, #f59e0b 100%);
  }

  .biology-gradient {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  }

  .chemistry-gradient {
    background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
  }

  .boss-gradient {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 50%, #b91c1c 100%);
  }

  .achievement-glow {
    box-shadow: 0 0 20px rgba(251, 191, 36, 0.4), 0 0 40px rgba(251, 191, 36, 0.2);
  }

  .gaming-card {
    @apply bg-white/80 backdrop-blur-sm rounded-2xl border border-white/30 shadow-lg;
  }

  .gaming-button {
    @apply inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold transition-all duration-200 transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .gaming-button-primary {
    @apply gaming-button bg-gradient-to-r from-primary-500 to-primary-600 text-white hover:from-primary-600 hover:to-primary-700 shadow-lg hover:shadow-xl;
  }

  .gaming-button-secondary {
    @apply gaming-button bg-gradient-to-r from-secondary-500 to-secondary-600 text-white hover:from-secondary-600 hover:to-secondary-700 shadow-lg hover:shadow-xl;
  }

  .gaming-button-success {
    @apply gaming-button bg-gradient-to-r from-green-500 to-green-600 text-white hover:from-green-600 hover:to-green-700 shadow-lg hover:shadow-xl;
  }

  .gaming-button-warning {
    @apply gaming-button bg-gradient-to-r from-yellow-500 to-orange-500 text-white hover:from-yellow-600 hover:to-orange-600 shadow-lg hover:shadow-xl;
  }

  .level-badge {
    @apply inline-flex items-center justify-center w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-sm font-bold rounded-full shadow-lg;
  }

  .xp-bar {
    @apply w-full bg-gray-200 rounded-full h-3 overflow-hidden;
  }

  .xp-bar-fill {
    @apply h-full xp-gradient transition-all duration-500 ease-out rounded-full;
  }

  .skill-tree-node {
    @apply relative w-16 h-16 rounded-xl border-4 flex items-center justify-center text-2xl font-bold transition-all duration-200;
  }

  .skill-tree-node.unlocked {
    @apply border-green-400 bg-gradient-to-br from-green-400 to-green-600 text-white shadow-lg;
  }

  .skill-tree-node.locked {
    @apply border-gray-300 bg-gray-100 text-gray-400;
  }

  .analytics-metric {
    @apply bg-white/70 backdrop-blur-sm rounded-xl p-4 border border-white/30;
  }

  .streak-flame {
    animation: flicker 2s ease-in-out infinite alternate;
  }

  @keyframes flicker {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.8; transform: scale(1.05); }
  }
}

@layer utilities {
  .animate-in {
    animation: fadeIn 0.5s ease-in-out;
  }

  .slide-in-from-bottom {
    animation: slideUp 0.3s ease-out;
  }

  /* Mobile Performance Optimizations */
  .mobile-optimized {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
  }

  .smooth-scroll {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }

  .no-select {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  .touch-optimized {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    min-height: 44px;
    min-width: 44px;
  }

  .hardware-accelerated {
    transform: translateZ(0);
    will-change: transform;
  }

  .gpu-layer {
    transform: translate3d(0, 0, 0);
    will-change: transform, opacity;
  }

  /* Low-power mode optimizations */
  .low-power .animate-pulse,
  .low-power .animate-spin,
  .low-power .animate-bounce {
    animation: none;
  }

  .low-power .transition-all {
    transition: none;
  }

  /* High contrast mode */
  @media (prefers-contrast: high) {
    .gaming-gradient,
    .xp-gradient,
    .biology-gradient,
    .chemistry-gradient {
      background: none;
      border: 2px solid currentColor;
    }
  }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .animate-pulse,
    .animate-spin,
    .animate-bounce,
    .animate-float,
    .animate-glow {
      animation: none;
    }

    .transition-all,
    .transition-colors,
    .transition-transform {
      transition: none;
    }
  }

  /* Dark mode optimizations */
  @media (prefers-color-scheme: dark) {
    .card {
      @apply bg-gray-800 border-gray-700;
    }

    .gaming-card {
      @apply bg-gray-800/80 border-gray-700/30;
    }
  }

  /* iOS specific optimizations */
  @supports (-webkit-touch-callout: none) {
    .ios-safe-area {
      padding-top: env(safe-area-inset-top);
      padding-bottom: env(safe-area-inset-bottom);
      padding-left: env(safe-area-inset-left);
      padding-right: env(safe-area-inset-right);
    }
    
    .ios-keyboard-padding {
      padding-bottom: env(keyboard-inset-height, 0px);
    }
    
    /* Disable iOS rubber band effect */
    body {
      overscroll-behavior: none;
    }
  }

  /* Android specific optimizations */
  @media screen and (max-device-width: 480px) {
    /* Improve touch targets on small screens */
    button, .btn, .touch-optimized {
      min-height: 48px;
      min-width: 48px;
    }
    
    /* Optimize scroll performance */
    .scroll-container {
      -webkit-overflow-scrolling: touch;
      overflow-scrolling: touch;
    }
  }

  /* High DPI screen optimizations */
  @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .crisp-edges {
      image-rendering: -webkit-optimize-contrast;
      image-rendering: crisp-edges;
    }
  }

  /* Landscape orientation adjustments */
  @media screen and (orientation: landscape) and (max-height: 500px) {
    .mobile-landscape {
      padding-top: 0.5rem;
      padding-bottom: 0.5rem;
    }
    
    .header-mobile {
      height: 3rem;
    }
    
    .nav-mobile {
      height: 3.5rem;
    }
  }

  /* Network-based optimizations */
  @media (prefers-reduced-data: reduce) {
    .data-saver img {
      content: attr(alt);
      background: #f3f4f6;
      border: 1px solid #d1d5db;
    }
    
    .data-saver .animation,
    .data-saver .gradient-bg {
      animation: none;
      background: #6b7280;
    }
  }

  /* Focus improvements for better accessibility */
  .focus-visible:focus {
    outline: 2px solid #3b82f6;
    outline-offset: 2px;
  }

  /* Custom scrollbar for webkit browsers */
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: #d1d5db;
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #9ca3af;
  }
}