
> hsc-learning-mobile@0.0.0 lint
> eslint . --ext js,jsx --report-unused-disable-directives --max-warnings 0 --format json

[{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\public\\sw.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\scripts\\syncLearnSectionsFromSheets.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\scripts\\validateQuestions.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\App.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\AccessibilityProvider.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":6,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":6,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useEffect, useState } from 'react';\nimport { useMobileOptimization } from '../hooks/useMobileOptimization';\n\nconst AccessibilityContext = createContext();\n\nexport const useAccessibility = () => {\n  const context = useContext(AccessibilityContext);\n  if (!context) {\n    throw new Error('useAccessibility must be used within AccessibilityProvider');\n  }\n  return context;\n};\n\nexport const AccessibilityProvider = ({ children }) => {\n  const [settings, setSettings] = useState({\n    fontSize: 'medium',\n    highContrast: false,\n    reduceMotion: false,\n    screenReader: false,\n    voiceNavigation: false,\n    keyboardNavigation: false,\n    focusVisible: true,\n    announcements: true\n  });\n\n  const { triggerHaptic } = useMobileOptimization();\n\n  // Detect system preferences\n  useEffect(() => {\n    const detectSystemPreferences = () => {\n      // Detect reduced motion preference\n      const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n\n      // Detect high contrast preference\n      const prefersHighContrast = window.matchMedia('(prefers-contrast: high)').matches;\n\n      // Detect screen reader\n      const hasScreenReader = 'speechSynthesis' in window || navigator.userAgent.includes('NVDA') || navigator.userAgent.includes('JAWS');\n\n      // Detect keyboard navigation\n      const hasKeyboard = window.matchMedia('(pointer: fine)').matches;\n\n      setSettings(prev => ({\n        ...prev,\n        reduceMotion: prefersReducedMotion,\n        highContrast: prefersHighContrast,\n        screenReader: hasScreenReader,\n        keyboardNavigation: hasKeyboard\n      }));\n    };\n\n    detectSystemPreferences();\n\n    // Listen for changes\n    const reducedMotionQuery = window.matchMedia('(prefers-reduced-motion: reduce)');\n    const highContrastQuery = window.matchMedia('(prefers-contrast: high)');\n\n    reducedMotionQuery.addEventListener('change', detectSystemPreferences);\n    highContrastQuery.addEventListener('change', detectSystemPreferences);\n\n    return () => {\n      reducedMotionQuery.removeEventListener('change', detectSystemPreferences);\n      highContrastQuery.removeEventListener('change', detectSystemPreferences);\n    };\n  }, []);\n\n  // Apply accessibility settings to document\n  useEffect(() => {\n    const root = document.documentElement;\n\n    // Font size\n    root.style.setProperty('--base-font-size', {\n      small: '14px',\n      medium: '16px',\n      large: '18px',\n      'extra-large': '20px'\n    }[settings.fontSize]);\n\n    // High contrast\n    if (settings.highContrast) {\n      root.classList.add('high-contrast');\n    } else {\n      root.classList.remove('high-contrast');\n    }\n\n    // Reduced motion\n    if (settings.reduceMotion) {\n      root.classList.add('reduce-motion');\n    } else {\n      root.classList.remove('reduce-motion');\n    }\n\n    // Focus visible\n    if (settings.focusVisible) {\n      root.classList.add('focus-visible');\n    } else {\n      root.classList.remove('focus-visible');\n    }\n  }, [settings]);\n\n  // Screen reader announcements\n  const announce = (message, priority = 'polite') => {\n    if (!settings.announcements) return;\n\n    const announcement = document.createElement('div');\n    announcement.setAttribute('aria-live', priority);\n    announcement.setAttribute('aria-atomic', 'true');\n    announcement.className = 'sr-only';\n    announcement.textContent = message;\n\n    document.body.appendChild(announcement);\n\n    setTimeout(() => {\n      document.body.removeChild(announcement);\n    }, 1000);\n  };\n\n  // Text-to-speech for mobile devices\n  const speak = (text, options = {}) => {\n    if (!settings.screenReader || !('speechSynthesis' in window)) return;\n\n    const utterance = new SpeechSynthesisUtterance(text);\n    utterance.rate = options.rate || 1;\n    utterance.pitch = options.pitch || 1;\n    utterance.volume = options.volume || 1;\n    utterance.lang = options.lang || 'en-US';\n\n    speechSynthesis.speak(utterance);\n  };\n\n  // Keyboard navigation helpers\n  const handleKeyboardNavigation = (event, callbacks = {}) => {\n    if (!settings.keyboardNavigation) return;\n\n    const { key } = event;\n\n    switch (key) {\n      case 'ArrowUp':\n        callbacks.up?.();\n        event.preventDefault();\n        break;\n      case 'ArrowDown':\n        callbacks.down?.();\n        event.preventDefault();\n        break;\n      case 'ArrowLeft':\n        callbacks.left?.();\n        event.preventDefault();\n        break;\n      case 'ArrowRight':\n        callbacks.right?.();\n        event.preventDefault();\n        break;\n      case 'Enter':\n      case ' ':\n        callbacks.select?.();\n        event.preventDefault();\n        break;\n      case 'Escape':\n        callbacks.escape?.();\n        event.preventDefault();\n        break;\n      case 'Tab':\n        callbacks.tab?.(event.shiftKey ? 'previous' : 'next');\n        break;\n    }\n  };\n\n  // Focus management\n  const focusElement = (selector, options = {}) => {\n    const element = document.querySelector(selector);\n    if (element) {\n      element.focus(options);\n\n      // Haptic feedback for mobile\n      if (triggerHaptic) {\n        triggerHaptic('light');\n      }\n\n      // Announce focus change\n      if (settings.announcements && element.getAttribute('aria-label')) {\n        announce(`Focused on ${element.getAttribute('aria-label')}`);\n      }\n    }\n  };\n\n  // Skip links for keyboard navigation\n  const SkipLinks = () => (\n    <div className=\"sr-only\">\n      <a\n        href=\"#main-content\"\n        className=\"fixed top-0 left-0 z-50 bg-blue-600 text-white p-2 rounded-br transform -translate-y-full focus:translate-y-0 transition-transform\"\n        onFocus={() => announce('Skip to main content')}\n      >\n        Skip to main content\n      </a>\n      <a\n        href=\"#navigation\"\n        className=\"fixed top-0 left-20 z-50 bg-blue-600 text-white p-2 rounded-br transform -translate-y-full focus:translate-y-0 transition-transform\"\n        onFocus={() => announce('Skip to navigation')}\n      >\n        Skip to navigation\n      </a>\n    </div>\n  );\n\n  // Accessibility settings panel\n  const AccessibilitySettings = ({ isOpen, onClose }) => {\n    if (!isOpen) return null;\n\n    return (\n      <div className=\"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4\">\n        <div className=\"bg-white rounded-xl p-6 max-w-md w-full max-h-[80vh] overflow-y-auto\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-lg font-semibold\">Accessibility Settings</h2>\n            <button\n              onClick={onClose}\n              className=\"p-2 hover:bg-gray-100 rounded-lg touch-optimized\"\n              aria-label=\"Close accessibility settings\"\n            >\n              <span className=\"sr-only\">Close</span>\n              \n            </button>\n          </div>\n\n          <div className=\"space-y-4\">\n            {/* Font Size */}\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Font Size</label>\n              <select\n                value={settings.fontSize}\n                onChange={(e) => setSettings(prev => ({ ...prev, fontSize: e.target.value }))}\n                className=\"w-full p-2 border rounded-lg touch-optimized\"\n                aria-label=\"Select font size\"\n              >\n                <option value=\"small\">Small</option>\n                <option value=\"medium\">Medium</option>\n                <option value=\"large\">Large</option>\n                <option value=\"extra-large\">Extra Large</option>\n              </select>\n            </div>\n\n            {/* High Contrast */}\n            <div className=\"flex items-center justify-between\">\n              <label className=\"text-sm font-medium\">High Contrast</label>\n              <button\n                onClick={() => setSettings(prev => ({ ...prev, highContrast: !prev.highContrast }))}\n                className={`w-12 h-6 rounded-full transition-colors touch-optimized ${\n                  settings.highContrast ? 'bg-blue-600' : 'bg-gray-300'\n                }`}\n                aria-label={`Turn ${settings.highContrast ? 'off' : 'on'} high contrast`}\n              >\n                <div className={`w-5 h-5 bg-white rounded-full transition-transform ${\n                  settings.highContrast ? 'translate-x-6' : 'translate-x-0.5'\n                }`} />\n              </button>\n            </div>\n\n            {/* Reduce Motion */}\n            <div className=\"flex items-center justify-between\">\n              <label className=\"text-sm font-medium\">Reduce Motion</label>\n              <button\n                onClick={() => setSettings(prev => ({ ...prev, reduceMotion: !prev.reduceMotion }))}\n                className={`w-12 h-6 rounded-full transition-colors touch-optimized ${\n                  settings.reduceMotion ? 'bg-blue-600' : 'bg-gray-300'\n                }`}\n                aria-label={`Turn ${settings.reduceMotion ? 'off' : 'on'} reduced motion`}\n              >\n                <div className={`w-5 h-5 bg-white rounded-full transition-transform ${\n                  settings.reduceMotion ? 'translate-x-6' : 'translate-x-0.5'\n                }`} />\n              </button>\n            </div>\n\n            {/* Screen Reader */}\n            <div className=\"flex items-center justify-between\">\n              <label className=\"text-sm font-medium\">Screen Reader Support</label>\n              <button\n                onClick={() => setSettings(prev => ({ ...prev, screenReader: !prev.screenReader }))}\n                className={`w-12 h-6 rounded-full transition-colors touch-optimized ${\n                  settings.screenReader ? 'bg-blue-600' : 'bg-gray-300'\n                }`}\n                aria-label={`Turn ${settings.screenReader ? 'off' : 'on'} screen reader support`}\n              >\n                <div className={`w-5 h-5 bg-white rounded-full transition-transform ${\n                  settings.screenReader ? 'translate-x-6' : 'translate-x-0.5'\n                }`} />\n              </button>\n            </div>\n\n            {/* Announcements */}\n            <div className=\"flex items-center justify-between\">\n              <label className=\"text-sm font-medium\">Voice Announcements</label>\n              <button\n                onClick={() => setSettings(prev => ({ ...prev, announcements: !prev.announcements }))}\n                className={`w-12 h-6 rounded-full transition-colors touch-optimized ${\n                  settings.announcements ? 'bg-blue-600' : 'bg-gray-300'\n                }`}\n                aria-label={`Turn ${settings.announcements ? 'off' : 'on'} voice announcements`}\n              >\n                <div className={`w-5 h-5 bg-white rounded-full transition-transform ${\n                  settings.announcements ? 'translate-x-6' : 'translate-x-0.5'\n                }`} />\n              </button>\n            </div>\n          </div>\n\n          <div className=\"mt-6 flex space-x-3\">\n            <button\n              onClick={() => {\n                // Reset to defaults\n                setSettings({\n                  fontSize: 'medium',\n                  highContrast: false,\n                  reduceMotion: false,\n                  screenReader: false,\n                  voiceNavigation: false,\n                  keyboardNavigation: false,\n                  focusVisible: true,\n                  announcements: true\n                });\n                announce('Accessibility settings reset to defaults');\n              }}\n              className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 touch-optimized\"\n            >\n              Reset\n            </button>\n            <button\n              onClick={onClose}\n              className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 touch-optimized\"\n            >\n              Done\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  const value = {\n    settings,\n    setSettings,\n    announce,\n    speak,\n    handleKeyboardNavigation,\n    focusElement,\n    SkipLinks,\n    AccessibilitySettings\n  };\n\n  return (\n    <AccessibilityContext.Provider value={value}>\n      <SkipLinks />\n      {children}\n    </AccessibilityContext.Provider>\n  );\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\AchievementBadge.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\AchievementSystem.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'newAchievements' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":10,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":25},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'checkAchievements' and 'loadUserAchievements'. Either include them or remove the dependency array.","line":242,"column":6,"nodeType":"ArrayExpression","endLine":242,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [checkAchievements, loadUserAchievements, userProgress]","fix":{"range":[6973,6987],"text":"[checkAchievements, loadUserAchievements, userProgress]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport './AchievementSystem.css';\r\n\r\nconst AchievementSystem = ({ onClose, userProgress }) => {\r\n  const [achievements, setAchievements] = useState([]);\r\n  const [selectedCategory, setSelectedCategory] = useState('all');\r\n  const [showUnlocked, setShowUnlocked] = useState(false);\r\n  const [totalXP, setTotalXP] = useState(0);\r\n  const [newAchievements, setNewAchievements] = useState([]);\r\n\r\n  const achievementCategories = {\r\n    all: ' All',\r\n    knowledge: ' Knowledge',\r\n    streak: ' Consistency', \r\n    speed: ' Speed',\r\n    mastery: ' Mastery',\r\n    social: ' Social',\r\n    challenge: ' Challenge',\r\n    exploration: ' Explorer'\r\n  };\r\n\r\n  const achievementDatabase = {\r\n    // Knowledge Achievements\r\n    'first-question': {\r\n      id: 'first-question',\r\n      name: 'First Steps',\r\n      description: 'Answer your first question correctly',\r\n      icon: '',\r\n      category: 'knowledge',\r\n      xpReward: 10,\r\n      rarity: 'common',\r\n      condition: (stats) => stats.correctAnswers >= 1\r\n    },\r\n    'century-club': {\r\n      id: 'century-club',\r\n      name: 'Century Club',\r\n      description: 'Answer 100 questions correctly',\r\n      icon: '',\r\n      category: 'knowledge',\r\n      xpReward: 100,\r\n      rarity: 'rare',\r\n      condition: (stats) => stats.correctAnswers >= 100\r\n    },\r\n    'knowledge-seeker': {\r\n      id: 'knowledge-seeker',\r\n      name: 'Knowledge Seeker',\r\n      description: 'Complete 500 questions',\r\n      icon: '',\r\n      category: 'knowledge',\r\n      xpReward: 250,\r\n      rarity: 'epic',\r\n      condition: (stats) => stats.totalQuestions >= 500\r\n    },\r\n    'perfectionist': {\r\n      id: 'perfectionist',\r\n      name: 'Perfectionist',\r\n      description: 'Get 10 questions in a row correct',\r\n      icon: '',\r\n      category: 'knowledge',\r\n      xpReward: 50,\r\n      rarity: 'uncommon',\r\n      condition: (stats) => stats.longestStreak >= 10\r\n    },\r\n\r\n    // Streak Achievements\r\n    'daily-warrior': {\r\n      id: 'daily-warrior',\r\n      name: 'Daily Warrior',\r\n      description: 'Study for 7 days in a row',\r\n      icon: '',\r\n      category: 'streak',\r\n      xpReward: 70,\r\n      rarity: 'uncommon',\r\n      condition: (stats) => stats.studyStreak >= 7\r\n    },\r\n    'dedication-master': {\r\n      id: 'dedication-master',\r\n      name: 'Dedication Master',\r\n      description: 'Study for 30 days in a row',\r\n      icon: '',\r\n      category: 'streak',\r\n      xpReward: 300,\r\n      rarity: 'legendary',\r\n      condition: (stats) => stats.studyStreak >= 30\r\n    },\r\n    'weekend-warrior': {\r\n      id: 'weekend-warrior',\r\n      name: 'Weekend Warrior',\r\n      description: 'Study on both weekend days',\r\n      icon: '',\r\n      category: 'streak',\r\n      xpReward: 25,\r\n      rarity: 'common',\r\n      condition: (stats) => stats.weekendStudySessions >= 2\r\n    },\r\n\r\n    // Speed Achievements\r\n    'lightning-fast': {\r\n      id: 'lightning-fast',\r\n      name: 'Lightning Fast',\r\n      description: 'Answer a question in under 10 seconds',\r\n      icon: '',\r\n      category: 'speed',\r\n      xpReward: 20,\r\n      rarity: 'common',\r\n      condition: (stats) => stats.fastestAnswer <= 10000\r\n    },\r\n    'speed-demon': {\r\n      id: 'speed-demon',\r\n      name: 'Speed Demon',\r\n      description: 'Complete 20 questions in under 5 minutes',\r\n      icon: '',\r\n      category: 'speed',\r\n      xpReward: 100,\r\n      rarity: 'rare',\r\n      condition: (stats) => stats.speedChallengeRecord <= 300000\r\n    },\r\n    'flash-thinker': {\r\n      id: 'flash-thinker',\r\n      name: 'Flash Thinker',\r\n      description: 'Average under 15 seconds per question',\r\n      icon: '',\r\n      category: 'speed',\r\n      xpReward: 75,\r\n      rarity: 'uncommon',\r\n      condition: (stats) => stats.averageAnswerTime <= 15000\r\n    },\r\n\r\n    // Mastery Achievements\r\n    'module-master': {\r\n      id: 'module-master',\r\n      name: 'Module Master',\r\n      description: 'Get 90%+ on all topics in a module',\r\n      icon: '',\r\n      category: 'mastery',\r\n      xpReward: 200,\r\n      rarity: 'epic',\r\n      condition: (stats) => stats.modulesCompleted >= 1\r\n    },\r\n    'expert-level': {\r\n      id: 'expert-level',\r\n      name: 'Expert Level',\r\n      description: 'Achieve expert mastery in 5 different topics',\r\n      icon: '',\r\n      category: 'mastery',\r\n      xpReward: 500,\r\n      rarity: 'legendary',\r\n      condition: (stats) => stats.expertTopics >= 5\r\n    },\r\n    'difficulty-crusher': {\r\n      id: 'difficulty-crusher',\r\n      name: 'Difficulty Crusher',\r\n      description: 'Get 80%+ accuracy on hard questions',\r\n      icon: '',\r\n      category: 'mastery',\r\n      xpReward: 150,\r\n      rarity: 'rare',\r\n      condition: (stats) => stats.hardQuestionAccuracy >= 80\r\n    },\r\n\r\n    // Challenge Achievements\r\n    'boss-slayer': {\r\n      id: 'boss-slayer',\r\n      name: 'Boss Slayer',\r\n      description: 'Defeat 10 boss battles',\r\n      icon: '',\r\n      category: 'challenge',\r\n      xpReward: 300,\r\n      rarity: 'epic',\r\n      condition: (stats) => stats.bossesDefeated >= 10\r\n    },\r\n    'challenger': {\r\n      id: 'challenger',\r\n      name: 'Challenger',\r\n      description: 'Complete 50 challenge questions',\r\n      icon: '',\r\n      category: 'challenge',\r\n      xpReward: 100,\r\n      rarity: 'rare',\r\n      condition: (stats) => stats.challengeQuestionsCompleted >= 50\r\n    },\r\n    'olympian': {\r\n      id: 'olympian',\r\n      name: 'Olympian',\r\n      description: 'Win 5 speed quiz competitions',\r\n      icon: '',\r\n      category: 'challenge',\r\n      xpReward: 250,\r\n      rarity: 'epic',\r\n      condition: (stats) => stats.speedQuizWins >= 5\r\n    },\r\n\r\n    // Social Achievements\r\n    'helpful-peer': {\r\n      id: 'helpful-peer',\r\n      name: 'Helpful Peer',\r\n      description: 'Help 10 other students',\r\n      icon: '',\r\n      category: 'social',\r\n      xpReward: 75,\r\n      rarity: 'uncommon',\r\n      condition: (stats) => stats.studentsHelped >= 10\r\n    },\r\n    'study-buddy': {\r\n      id: 'study-buddy',\r\n      name: 'Study Buddy',\r\n      description: 'Join a study group session',\r\n      icon: '',\r\n      category: 'social',\r\n      xpReward: 25,\r\n      rarity: 'common',\r\n      condition: (stats) => stats.studyGroupSessions >= 1\r\n    },\r\n\r\n    // Exploration Achievements\r\n    'curious-mind': {\r\n      id: 'curious-mind',\r\n      name: 'Curious Mind',\r\n      description: 'Try all question types',\r\n      icon: '',\r\n      category: 'exploration',\r\n      xpReward: 100,\r\n      rarity: 'rare',\r\n      condition: (stats) => stats.questionTypesAttempted >= 10\r\n    },\r\n    'subject-hopper': {\r\n      id: 'subject-hopper',\r\n      name: 'Subject Hopper',\r\n      description: 'Study 3 different subjects',\r\n      icon: '',\r\n      category: 'exploration',\r\n      xpReward: 150,\r\n      rarity: 'rare',\r\n      condition: (stats) => stats.subjectsStudied >= 3\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    checkAchievements();\r\n    loadUserAchievements();\r\n  }, [userProgress]);\r\n\r\n  const loadUserAchievements = () => {\r\n    try {\r\n      const saved = JSON.parse(localStorage.getItem('userAchievements') || '[]');\r\n      const achievementList = Object.values(achievementDatabase).map(achievement => ({\r\n        ...achievement,\r\n        unlocked: saved.includes(achievement.id),\r\n        unlockedAt: saved.find(a => a.id === achievement.id)?.unlockedAt || null\r\n      }));\r\n      \r\n      setAchievements(achievementList);\r\n      \r\n      const unlockedXP = achievementList\r\n        .filter(a => a.unlocked)\r\n        .reduce((total, a) => total + a.xpReward, 0);\r\n      setTotalXP(unlockedXP);\r\n    } catch (error) {\r\n      console.error('Error loading achievements:', error);\r\n    }\r\n  };\r\n\r\n  const checkAchievements = () => {\r\n    if (!userProgress) return;\r\n\r\n    const stats = calculateUserStats(userProgress);\r\n    const savedAchievements = JSON.parse(localStorage.getItem('userAchievements') || '[]');\r\n    const newlyUnlocked = [];\r\n\r\n    Object.values(achievementDatabase).forEach(achievement => {\r\n      if (!savedAchievements.includes(achievement.id) && achievement.condition(stats)) {\r\n        newlyUnlocked.push({\r\n          ...achievement,\r\n          unlockedAt: new Date().toISOString()\r\n        });\r\n      }\r\n    });\r\n\r\n    if (newlyUnlocked.length > 0) {\r\n      const updatedSaved = [\r\n        ...savedAchievements,\r\n        ...newlyUnlocked.map(a => a.id)\r\n      ];\r\n      \r\n      localStorage.setItem('userAchievements', JSON.stringify(updatedSaved));\r\n      setNewAchievements(newlyUnlocked);\r\n      \r\n      // Show achievement notifications\r\n      newlyUnlocked.forEach((achievement, index) => {\r\n        setTimeout(() => {\r\n          showAchievementNotification(achievement);\r\n        }, index * 1000);\r\n      });\r\n    }\r\n  };\r\n\r\n  const calculateUserStats = (progress) => {\r\n    // Mock stats calculation - replace with real data\r\n    return {\r\n      correctAnswers: progress.correctAnswers || Math.floor(Math.random() * 150),\r\n      totalQuestions: progress.totalQuestions || Math.floor(Math.random() * 200),\r\n      studyStreak: progress.studyStreak || Math.floor(Math.random() * 15),\r\n      longestStreak: progress.longestStreak || Math.floor(Math.random() * 20),\r\n      fastestAnswer: progress.fastestAnswer || Math.floor(Math.random() * 30000) + 5000,\r\n      averageAnswerTime: progress.averageAnswerTime || Math.floor(Math.random() * 20000) + 10000,\r\n      speedChallengeRecord: progress.speedChallengeRecord || Math.floor(Math.random() * 400000) + 200000,\r\n      modulesCompleted: progress.modulesCompleted || Math.floor(Math.random() * 3),\r\n      expertTopics: progress.expertTopics || Math.floor(Math.random() * 8),\r\n      hardQuestionAccuracy: progress.hardQuestionAccuracy || Math.floor(Math.random() * 100),\r\n      bossesDefeated: progress.bossesDefeated || Math.floor(Math.random() * 15),\r\n      challengeQuestionsCompleted: progress.challengeQuestionsCompleted || Math.floor(Math.random() * 100),\r\n      speedQuizWins: progress.speedQuizWins || Math.floor(Math.random() * 10),\r\n      studentsHelped: progress.studentsHelped || Math.floor(Math.random() * 20),\r\n      studyGroupSessions: progress.studyGroupSessions || Math.floor(Math.random() * 5),\r\n      questionTypesAttempted: progress.questionTypesAttempted || Math.floor(Math.random() * 12),\r\n      subjectsStudied: progress.subjectsStudied || Math.floor(Math.random() * 4),\r\n      weekendStudySessions: progress.weekendStudySessions || Math.floor(Math.random() * 10)\r\n    };\r\n  };\r\n\r\n  const showAchievementNotification = (achievement) => {\r\n    // Create a floating achievement notification\r\n    const notification = document.createElement('div');\r\n    notification.className = 'achievement-notification';\r\n    notification.innerHTML = `\r\n      <div class=\"achievement-notification-content\">\r\n        <div class=\"achievement-icon\">${achievement.icon}</div>\r\n        <div class=\"achievement-details\">\r\n          <h3>Achievement Unlocked!</h3>\r\n          <p>${achievement.name}</p>\r\n          <span class=\"xp-reward\">+${achievement.xpReward} XP</span>\r\n        </div>\r\n      </div>\r\n    `;\r\n    \r\n    document.body.appendChild(notification);\r\n    \r\n    setTimeout(() => {\r\n      notification.classList.add('show');\r\n    }, 100);\r\n    \r\n    setTimeout(() => {\r\n      notification.classList.add('hide');\r\n      setTimeout(() => {\r\n        document.body.removeChild(notification);\r\n      }, 300);\r\n    }, 4000);\r\n  };\r\n\r\n  const getRarityColor = (rarity) => {\r\n    const colors = {\r\n      common: '#94a3b8',\r\n      uncommon: '#10b981',\r\n      rare: '#3b82f6',\r\n      epic: '#8b5cf6',\r\n      legendary: '#f59e0b'\r\n    };\r\n    return colors[rarity] || colors.common;\r\n  };\r\n\r\n  const getRarityGlow = (rarity) => {\r\n    const glows = {\r\n      common: 'none',\r\n      uncommon: '0 0 10px rgba(16, 185, 129, 0.5)',\r\n      rare: '0 0 15px rgba(59, 130, 246, 0.5)',\r\n      epic: '0 0 20px rgba(139, 92, 246, 0.5)',\r\n      legendary: '0 0 25px rgba(245, 158, 11, 0.7)'\r\n    };\r\n    return glows[rarity] || glows.common;\r\n  };\r\n\r\n  const filteredAchievements = achievements.filter(achievement => {\r\n    if (selectedCategory !== 'all' && achievement.category !== selectedCategory) {\r\n      return false;\r\n    }\r\n    if (showUnlocked && !achievement.unlocked) {\r\n      return false;\r\n    }\r\n    return true;\r\n  });\r\n\r\n  const categoryStats = Object.keys(achievementCategories).reduce((stats, category) => {\r\n    if (category === 'all') return stats;\r\n    \r\n    const categoryAchievements = achievements.filter(a => a.category === category);\r\n    const unlockedCount = categoryAchievements.filter(a => a.unlocked).length;\r\n    \r\n    stats[category] = {\r\n      total: categoryAchievements.length,\r\n      unlocked: unlockedCount,\r\n      percentage: categoryAchievements.length > 0 \r\n        ? Math.round((unlockedCount / categoryAchievements.length) * 100)\r\n        : 0\r\n    };\r\n    \r\n    return stats;\r\n  }, {});\r\n\r\n  const overallProgress = achievements.length > 0 \r\n    ? Math.round((achievements.filter(a => a.unlocked).length / achievements.length) * 100)\r\n    : 0;\r\n\r\n  return (\r\n    <div className=\"achievement-system-overlay\">\r\n      <motion.div\r\n        initial={{ opacity: 0, scale: 0.9 }}\r\n        animate={{ opacity: 1, scale: 1 }}\r\n        exit={{ opacity: 0, scale: 0.9 }}\r\n        className=\"achievement-system-modal\"\r\n      >\r\n        <header className=\"achievement-header\">\r\n          <div className=\"header-content\">\r\n            <h1> Achievements</h1>\r\n            <button onClick={onClose} className=\"close-button\">\r\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n          \r\n          <div className=\"progress-summary\">\r\n            <div className=\"overall-progress\">\r\n              <div className=\"progress-circle\">\r\n                <svg className=\"progress-ring\" width=\"80\" height=\"80\">\r\n                  <circle\r\n                    className=\"progress-ring-bg\"\r\n                    stroke=\"#e5e7eb\"\r\n                    strokeWidth=\"8\"\r\n                    fill=\"transparent\"\r\n                    r=\"32\"\r\n                    cx=\"40\"\r\n                    cy=\"40\"\r\n                  />\r\n                  <circle\r\n                    className=\"progress-ring-fill\"\r\n                    stroke=\"#10b981\"\r\n                    strokeWidth=\"8\"\r\n                    fill=\"transparent\"\r\n                    r=\"32\"\r\n                    cx=\"40\"\r\n                    cy=\"40\"\r\n                    strokeDasharray={`${2 * Math.PI * 32}`}\r\n                    strokeDashoffset={`${2 * Math.PI * 32 * (1 - overallProgress / 100)}`}\r\n                    transform=\"rotate(-90 40 40)\"\r\n                  />\r\n                </svg>\r\n                <div className=\"progress-text\">\r\n                  <span className=\"progress-percentage\">{overallProgress}%</span>\r\n                </div>\r\n              </div>\r\n              <div className=\"progress-details\">\r\n                <h3>Overall Progress</h3>\r\n                <p>{achievements.filter(a => a.unlocked).length} of {achievements.length} unlocked</p>\r\n                <div className=\"xp-total\">\r\n                  <span className=\"xp-icon\"></span>\r\n                  <span>{totalXP} Total XP</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        <div className=\"achievement-controls\">\r\n          <div className=\"category-filters\">\r\n            {Object.entries(achievementCategories).map(([key, label]) => (\r\n              <button\r\n                key={key}\r\n                onClick={() => setSelectedCategory(key)}\r\n                className={`category-filter ${selectedCategory === key ? 'active' : ''}`}\r\n              >\r\n                <span>{label}</span>\r\n                {key !== 'all' && categoryStats[key] && (\r\n                  <span className=\"category-count\">\r\n                    {categoryStats[key].unlocked}/{categoryStats[key].total}\r\n                  </span>\r\n                )}\r\n              </button>\r\n            ))}\r\n          </div>\r\n          \r\n          <div className=\"view-options\">\r\n            <label className=\"toggle-switch\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={showUnlocked}\r\n                onChange={(e) => setShowUnlocked(e.target.checked)}\r\n              />\r\n              <span className=\"toggle-slider\"></span>\r\n              <span className=\"toggle-label\">Unlocked Only</span>\r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"achievements-grid\">\r\n          <AnimatePresence>\r\n            {filteredAchievements.map((achievement, index) => (\r\n              <motion.div\r\n                key={achievement.id}\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: -20 }}\r\n                transition={{ delay: index * 0.05 }}\r\n                className={`achievement-card ${achievement.unlocked ? 'unlocked' : 'locked'} ${achievement.rarity}`}\r\n                style={{\r\n                  borderColor: getRarityColor(achievement.rarity),\r\n                  boxShadow: achievement.unlocked ? getRarityGlow(achievement.rarity) : 'none'\r\n                }}\r\n              >\r\n                <div className=\"achievement-icon-container\">\r\n                  <div \r\n                    className=\"achievement-icon\"\r\n                    style={{ \r\n                      filter: achievement.unlocked ? 'none' : 'grayscale(100%) brightness(0.5)' \r\n                    }}\r\n                  >\r\n                    {achievement.icon}\r\n                  </div>\r\n                  {!achievement.unlocked && (\r\n                    <div className=\"lock-overlay\">\r\n                      <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                        <path d=\"M12 2C13.1046 2 14 2.89543 14 4V6H18C18.5523 6 19 6.44772 19 7V19C19 19.5523 18.5523 20 18 20H6C5.44772 20 5 19.5523 5 19V7C5 6.44772 5.44772 6 6 6H10V4C10 2.89543 10.8954 2 12 2ZM12 4V6H12V4ZM12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10Z\"/>\r\n                      </svg>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                \r\n                <div className=\"achievement-details\">\r\n                  <h3 className=\"achievement-name\">{achievement.name}</h3>\r\n                  <p className=\"achievement-description\">{achievement.description}</p>\r\n                  \r\n                  <div className=\"achievement-meta\">\r\n                    <span className={`rarity-badge ${achievement.rarity}`}>\r\n                      {achievement.rarity.toUpperCase()}\r\n                    </span>\r\n                    <span className=\"xp-reward\">+{achievement.xpReward} XP</span>\r\n                  </div>\r\n                  \r\n                  {achievement.unlocked && achievement.unlockedAt && (\r\n                    <div className=\"unlock-date\">\r\n                      Unlocked {new Date(achievement.unlockedAt).toLocaleDateString()}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </motion.div>\r\n            ))}\r\n          </AnimatePresence>\r\n        </div>\r\n\r\n        {filteredAchievements.length === 0 && (\r\n          <div className=\"empty-state\">\r\n            <div className=\"empty-icon\"></div>\r\n            <h3>No achievements found</h3>\r\n            <p>Try adjusting your filters or unlock more achievements!</p>\r\n          </div>\r\n        )}\r\n      </motion.div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AchievementSystem;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\Animations.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":6,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":6,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useMobileOptimization } from '../hooks/useMobileOptimization';\n\n// Animation variants and presets\nexport const animationVariants = {\n  // Fade animations\n  fadeIn: {\n    initial: { opacity: 0 },\n    animate: { opacity: 1 },\n    exit: { opacity: 0 }\n  },\n  \n  fadeInUp: {\n    initial: { opacity: 0, y: 20 },\n    animate: { opacity: 1, y: 0 },\n    exit: { opacity: 0, y: -20 }\n  },\n  \n  fadeInDown: {\n    initial: { opacity: 0, y: -20 },\n    animate: { opacity: 1, y: 0 },\n    exit: { opacity: 0, y: 20 }\n  },\n  \n  fadeInLeft: {\n    initial: { opacity: 0, x: -20 },\n    animate: { opacity: 1, x: 0 },\n    exit: { opacity: 0, x: 20 }\n  },\n  \n  fadeInRight: {\n    initial: { opacity: 0, x: 20 },\n    animate: { opacity: 1, x: 0 },\n    exit: { opacity: 0, x: -20 }\n  },\n\n  // Scale animations\n  scaleIn: {\n    initial: { opacity: 0, scale: 0.8 },\n    animate: { opacity: 1, scale: 1 },\n    exit: { opacity: 0, scale: 0.8 }\n  },\n  \n  scaleUp: {\n    initial: { scale: 0 },\n    animate: { scale: 1 },\n    exit: { scale: 0 }\n  },\n\n  // Slide animations\n  slideInUp: {\n    initial: { y: '100%' },\n    animate: { y: 0 },\n    exit: { y: '100%' }\n  },\n  \n  slideInDown: {\n    initial: { y: '-100%' },\n    animate: { y: 0 },\n    exit: { y: '-100%' }\n  },\n  \n  slideInLeft: {\n    initial: { x: '-100%' },\n    animate: { x: 0 },\n    exit: { x: '-100%' }\n  },\n  \n  slideInRight: {\n    initial: { x: '100%' },\n    animate: { x: 0 },\n    exit: { x: '100%' }\n  },\n\n  // Rotate animations\n  rotateIn: {\n    initial: { opacity: 0, rotate: -180 },\n    animate: { opacity: 1, rotate: 0 },\n    exit: { opacity: 0, rotate: 180 }\n  },\n\n  // Bounce animations\n  bounceIn: {\n    initial: { opacity: 0, scale: 0.3 },\n    animate: { \n      opacity: 1, \n      scale: 1,\n      transition: {\n        type: \"spring\",\n        stiffness: 300,\n        damping: 20\n      }\n    },\n    exit: { opacity: 0, scale: 0.3 }\n  },\n\n  // Flip animations\n  flipIn: {\n    initial: { opacity: 0, rotateY: -90 },\n    animate: { opacity: 1, rotateY: 0 },\n    exit: { opacity: 0, rotateY: 90 }\n  },\n\n  // Shake animation\n  shake: {\n    animate: {\n      x: [0, -10, 10, -10, 10, 0],\n      transition: { duration: 0.5 }\n    }\n  },\n\n  // Pulse animation\n  pulse: {\n    animate: {\n      scale: [1, 1.05, 1],\n      transition: { \n        duration: 2,\n        repeat: Infinity,\n        ease: \"easeInOut\"\n      }\n    }\n  },\n\n  // Floating animation\n  float: {\n    animate: {\n      y: [0, -10, 0],\n      transition: {\n        duration: 3,\n        repeat: Infinity,\n        ease: \"easeInOut\"\n      }\n    }\n  },\n\n  // List stagger\n  listContainer: {\n    initial: {},\n    animate: {\n      transition: {\n        staggerChildren: 0.1\n      }\n    }\n  },\n  \n  listItem: {\n    initial: { opacity: 0, y: 20 },\n    animate: { opacity: 1, y: 0 }\n  }\n};\n\n// Base animated component\nexport const Animated = ({ \n  children, \n  variant = 'fadeIn',\n  duration = 0.3,\n  delay = 0,\n  className = '',\n  ...props \n}) => {\n  const { getPerformanceConfig } = useMobileOptimization();\n  const performanceConfig = getPerformanceConfig();\n\n  // Disable animations if performance is low\n  if (!performanceConfig.enableAnimations) {\n    return <div className={className} {...props}>{children}</div>;\n  }\n\n  const animation = animationVariants[variant] || animationVariants.fadeIn;\n  \n  return (\n    <motion.div\n      className={className}\n      initial={animation.initial}\n      animate={animation.animate}\n      exit={animation.exit}\n      transition={{ \n        duration: performanceConfig.animationDuration / 1000 || duration,\n        delay \n      }}\n      {...props}\n    >\n      {children}\n    </motion.div>\n  );\n};\n\n// Page transition wrapper\nexport const PageTransition = ({ children, className = '' }) => {\n  const { getPerformanceConfig } = useMobileOptimization();\n  const performanceConfig = getPerformanceConfig();\n\n  if (!performanceConfig.enableAnimations) {\n    return <div className={className}>{children}</div>;\n  }\n\n  return (\n    <motion.div\n      className={className}\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: -20 }}\n      transition={{ \n        duration: performanceConfig.animationDuration / 1000 || 0.3,\n        ease: \"easeOut\"\n      }}\n    >\n      {children}\n    </motion.div>\n  );\n};\n\n// Modal animation wrapper\nexport const ModalAnimation = ({ children, isOpen, onClose }) => {\n  const { getPerformanceConfig } = useMobileOptimization();\n  const performanceConfig = getPerformanceConfig();\n\n  if (!performanceConfig.enableAnimations) {\n    return isOpen ? children : null;\n  }\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          transition={{ duration: 0.2 }}\n          onClick={onClose}\n        >\n          <motion.div\n            initial={{ scale: 0.9, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            exit={{ scale: 0.9, opacity: 0 }}\n            transition={{ \n              type: \"spring\", \n              stiffness: 300, \n              damping: 30,\n              duration: performanceConfig.animationDuration / 1000 || 0.3\n            }}\n            onClick={(e) => e.stopPropagation()}\n          >\n            {children}\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n};\n\n// List animation component\nexport const AnimatedList = ({ \n  children, \n  staggerDelay = 0.1,\n  className = '' \n}) => {\n  const { getPerformanceConfig } = useMobileOptimization();\n  const performanceConfig = getPerformanceConfig();\n\n  if (!performanceConfig.enableAnimations) {\n    return <div className={className}>{children}</div>;\n  }\n\n  return (\n    <motion.div\n      className={className}\n      variants={animationVariants.listContainer}\n      initial=\"initial\"\n      animate=\"animate\"\n      transition={{ staggerChildren: staggerDelay }}\n    >\n      {React.Children.map(children, (child, index) => (\n        <motion.div\n          key={index}\n          variants={animationVariants.listItem}\n          transition={{ \n            duration: performanceConfig.animationDuration / 1000 || 0.3\n          }}\n        >\n          {child}\n        </motion.div>\n      ))}\n    </motion.div>\n  );\n};\n\n// Hover animation wrapper\nexport const HoverAnimation = ({ \n  children, \n  scale = 1.05,\n  rotate = 0,\n  y = -2,\n  className = '',\n  disabled = false,\n  ...props \n}) => {\n  const { getPerformanceConfig } = useMobileOptimization();\n  const performanceConfig = getPerformanceConfig();\n\n  if (!performanceConfig.enableAnimations || disabled) {\n    return <div className={className} {...props}>{children}</div>;\n  }\n\n  return (\n    <motion.div\n      className={className}\n      whileHover={{ \n        scale, \n        rotate, \n        y,\n        transition: { type: \"spring\", stiffness: 400, damping: 25 }\n      }}\n      whileTap={{ scale: 0.98 }}\n      {...props}\n    >\n      {children}\n    </motion.div>\n  );\n};\n\n// Progress animation component\nexport const ProgressAnimation = ({ \n  progress = 0, \n  className = '',\n  color = 'bg-blue-600' \n}) => {\n  const { getPerformanceConfig } = useMobileOptimization();\n  const performanceConfig = getPerformanceConfig();\n\n  return (\n    <div className={`w-full bg-gray-200 rounded-full h-2 ${className}`}>\n      <motion.div\n        className={`h-2 rounded-full ${color}`}\n        initial={{ width: 0 }}\n        animate={{ width: `${progress}%` }}\n        transition={{ \n          duration: performanceConfig.enableAnimations ? 0.5 : 0,\n          ease: \"easeOut\"\n        }}\n      />\n    </div>\n  );\n};\n\n// Loading dots animation\nexport const LoadingDots = ({ size = 'md', color = 'bg-blue-600' }) => {\n  const { getPerformanceConfig } = useMobileOptimization();\n  const performanceConfig = getPerformanceConfig();\n\n  const sizes = {\n    sm: 'w-1 h-1',\n    md: 'w-2 h-2',\n    lg: 'w-3 h-3'\n  };\n\n  if (!performanceConfig.enableAnimations) {\n    return (\n      <div className=\"flex space-x-1\">\n        {[0, 1, 2].map(i => (\n          <div key={i} className={`${sizes[size]} ${color} rounded-full`} />\n        ))}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex space-x-1\">\n      {[0, 1, 2].map(i => (\n        <motion.div\n          key={i}\n          className={`${sizes[size]} ${color} rounded-full`}\n          animate={{\n            scale: [1, 1.5, 1],\n            opacity: [1, 0.5, 1]\n          }}\n          transition={{\n            duration: 1,\n            repeat: Infinity,\n            delay: i * 0.2,\n            ease: \"easeInOut\"\n          }}\n        />\n      ))}\n    </div>\n  );\n};\n\n// Count up animation\nexport const CountUpAnimation = ({ \n  from = 0, \n  to, \n  duration = 1,\n  className = '' \n}) => {\n  const [count, setCount] = React.useState(from);\n  const { getPerformanceConfig } = useMobileOptimization();\n  const performanceConfig = getPerformanceConfig();\n\n  React.useEffect(() => {\n    if (!performanceConfig.enableAnimations) {\n      setCount(to);\n      return;\n    }\n\n    const increment = (to - from) / (duration * 60); // 60fps\n    const timer = setInterval(() => {\n      setCount(prev => {\n        const next = prev + increment;\n        if (next >= to) {\n          clearInterval(timer);\n          return to;\n        }\n        return next;\n      });\n    }, 1000 / 60);\n\n    return () => clearInterval(timer);\n  }, [from, to, duration, performanceConfig.enableAnimations]);\n\n  return (\n    <span className={className}>\n      {Math.round(count)}\n    </span>\n  );\n};\n\n// Parallax scrolling component\nexport const ParallaxScroll = ({ \n  children, \n  speed = 0.5,\n  className = '' \n}) => {\n  const [offsetY, setOffsetY] = React.useState(0);\n  const { getPerformanceConfig } = useMobileOptimization();\n  const performanceConfig = getPerformanceConfig();\n\n  React.useEffect(() => {\n    if (!performanceConfig.enableAnimations) return;\n\n    const handleScroll = () => setOffsetY(window.pageYOffset);\n    \n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, [performanceConfig.enableAnimations]);\n\n  if (!performanceConfig.enableAnimations) {\n    return <div className={className}>{children}</div>;\n  }\n\n  return (\n    <motion.div\n      className={className}\n      style={{ y: offsetY * speed }}\n    >\n      {children}\n    </motion.div>\n  );\n};\n\n// Entrance animation for sections\nexport const EntranceAnimation = ({ \n  children, \n  threshold = 0.1,\n  className = '' \n}) => {\n  const [inView, setInView] = React.useState(false);\n  const ref = React.useRef();\n  const { getPerformanceConfig } = useMobileOptimization();\n  const performanceConfig = getPerformanceConfig();\n\n  React.useEffect(() => {\n    if (!performanceConfig.enableAnimations) {\n      setInView(true);\n      return;\n    }\n\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          setInView(true);\n        }\n      },\n      { threshold }\n    );\n\n    if (ref.current) {\n      observer.observe(ref.current);\n    }\n\n    return () => observer.disconnect();\n  }, [threshold, performanceConfig.enableAnimations]);\n\n  if (!performanceConfig.enableAnimations) {\n    return <div className={className}>{children}</div>;\n  }\n\n  return (\n    <motion.div\n      ref={ref}\n      className={className}\n      initial={{ opacity: 0, y: 50 }}\n      animate={inView ? { opacity: 1, y: 0 } : {}}\n      transition={{ \n        duration: performanceConfig.animationDuration / 1000 || 0.6,\n        ease: \"easeOut\"\n      }}\n    >\n      {children}\n    </motion.div>\n  );\n};\n\nexport default {\n  Animated,\n  PageTransition,\n  ModalAnimation,\n  AnimatedList,\n  HoverAnimation,\n  ProgressAnimation,\n  LoadingDots,\n  CountUpAnimation,\n  ParallaxScroll,\n  EntranceAnimation,\n  animationVariants\n};","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\BiologyHub.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\BossBattleInterface.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\Button.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\Card.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\CharacterProgression.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'character' is defined but never used. Allowed unused args must match /^_/u.","line":7,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport ProgressBar from './ProgressBar';\nimport ProgressRing from './ProgressRing';\n\nconst CharacterProgression = ({\n  character,\n  level,\n  xp,\n  xpToNext,\n  biologyLevel,\n  chemistryLevel,\n  biologyXP,\n  chemistryXP,\n  achievements,\n  showLevelUpAnimation = false,\n  onAnimationComplete\n}) => {\n  const [selectedTab, setSelectedTab] = useState('overview');\n  const [animationStep, setAnimationStep] = useState(0);\n\n  useEffect(() => {\n    if (showLevelUpAnimation) {\n      setAnimationStep(1);\n      const timer = setTimeout(() => {\n        setAnimationStep(2);\n        if (onAnimationComplete) onAnimationComplete();\n      }, 2000);\n      return () => clearTimeout(timer);\n    }\n  }, [showLevelUpAnimation, onAnimationComplete]);\n\n  const getCharacterAvatar = (level) => {\n    if (level >= 30) return ''; // HSC Legend\n    if (level >= 25) return ''; // Master Scholar\n    if (level >= 20) return ''; // Star Student\n    if (level >= 15) return ''; // Science Expert\n    if (level >= 10) return ''; // Dedicated Learner\n    if (level >= 5) return ''; // Growing Scholar\n    return ''; // Beginner\n  };\n\n  const getCharacterTitle = (level) => {\n    if (level >= 30) return 'HSC Legend';\n    if (level >= 25) return 'Master Scholar';\n    if (level >= 20) return 'Star Student';\n    if (level >= 15) return 'Science Expert';\n    if (level >= 10) return 'Dedicated Learner';\n    if (level >= 5) return 'Growing Scholar';\n    return 'Aspiring Scholar';\n  };\n\n  const skillTrees = {\n    biology: {\n      name: 'Biology Mastery',\n      color: 'from-green-400 to-green-600',\n      skills: [\n        { id: 'cell-biology', name: 'Cell Biology', level: biologyLevel >= 5 ? 'unlocked' : 'locked', icon: '' },\n        { id: 'genetics', name: 'Genetics', level: biologyLevel >= 10 ? 'unlocked' : 'locked', icon: '' },\n        { id: 'evolution', name: 'Evolution', level: biologyLevel >= 15 ? 'unlocked' : 'locked', icon: '' },\n        { id: 'ecology', name: 'Ecology', level: biologyLevel >= 20 ? 'unlocked' : 'locked', icon: '' },\n      ]\n    },\n    chemistry: {\n      name: 'Chemistry Mastery',\n      color: 'from-purple-400 to-purple-600',\n      skills: [\n        { id: 'atomic-structure', name: 'Atomic Structure', level: chemistryLevel >= 5 ? 'unlocked' : 'locked', icon: '' },\n        { id: 'chemical-bonds', name: 'Chemical Bonds', level: chemistryLevel >= 10 ? 'unlocked' : 'locked', icon: '' },\n        { id: 'reactions', name: 'Reactions', level: chemistryLevel >= 15 ? 'unlocked' : 'locked', icon: '' },\n        { id: 'organic-chem', name: 'Organic Chemistry', level: chemistryLevel >= 20 ? 'unlocked' : 'locked', icon: '' },\n      ]\n    }\n  };\n\n  return (\n    <div className=\"gaming-card p-6\">\n      {/* Level Up Animation Overlay */}\n      <AnimatePresence>\n        {showLevelUpAnimation && animationStep > 0 && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center\"\n          >\n            <motion.div\n              initial={{ scale: 0, rotate: -180 }}\n              animate={{ scale: 1, rotate: 0 }}\n              transition={{ type: \"spring\", stiffness: 200 }}\n              className=\"bg-gradient-to-br from-yellow-400 to-orange-500 rounded-3xl p-8 text-center max-w-sm w-full mx-4 shadow-2xl\"\n            >\n              <motion.div\n                className=\"text-6xl mb-4\"\n                animate={{ scale: [1, 1.2, 1] }}\n                transition={{ duration: 1, repeat: Infinity }}\n              >\n                \n              </motion.div>\n              <h2 className=\"text-3xl font-bold text-white mb-2\">LEVEL UP!</h2>\n              <div className=\"text-6xl font-bold text-white mb-2\">{level}</div>\n              <p className=\"text-white/90 text-lg mb-4\">{getCharacterTitle(level)}</p>\n              <motion.div\n                className=\"text-4xl\"\n                animate={{ rotate: [0, 360] }}\n                transition={{ duration: 2, repeat: Infinity, ease: \"linear\" }}\n              >\n                {getCharacterAvatar(level)}\n              </motion.div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Tab Navigation */}\n      <div className=\"flex space-x-2 mb-6\">\n        {['overview', 'skills', 'achievements'].map((tab) => (\n          <button\n            key={tab}\n            onClick={() => setSelectedTab(tab)}\n            className={`px-4 py-2 rounded-lg font-medium text-sm transition-all ${\n              selectedTab === tab\n                ? 'bg-gaming-gradient text-white'\n                : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n            }`}\n          >\n            {tab.charAt(0).toUpperCase() + tab.slice(1)}\n          </button>\n        ))}\n      </div>\n\n      {/* Tab Content */}\n      <AnimatePresence mode=\"wait\">\n        {selectedTab === 'overview' && (\n          <motion.div\n            key=\"overview\"\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -20 }}\n            className=\"space-y-6\"\n          >\n            {/* Character Avatar and Info */}\n            <div className=\"text-center\">\n              <motion.div\n                className=\"text-8xl mb-4 inline-block\"\n                animate={{ float: true }}\n                whileHover={{ scale: 1.1 }}\n              >\n                {getCharacterAvatar(level)}\n              </motion.div>\n              <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">\n                Level {level} {getCharacterTitle(level)}\n              </h3>\n              <div className=\"flex items-center justify-center space-x-4 text-sm text-gray-600\">\n                <span className=\"level-badge\">{level}</span>\n                <span>{xp.toLocaleString()} XP</span>\n              </div>\n            </div>\n\n            {/* Overall XP Progress */}\n            <div className=\"space-y-3\">\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"font-medium\">Level Progress</span>\n                <span className=\"text-gray-600\">{xpToNext - (xp % xpToNext)} XP to next level</span>\n              </div>\n              <ProgressBar\n                progress={((xp % xpToNext) / xpToNext) * 100}\n                height={12}\n                color=\"#8b5cf6\"\n                backgroundColor=\"#e5e7eb\"\n                className=\"xp-bar\"\n              />\n            </div>\n\n            {/* Subject Progress */}\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"text-center\">\n                <ProgressRing\n                  progress={(biologyXP % 1000) / 10}\n                  size={80}\n                  color=\"#10b981\"\n                >\n                  <div className=\"text-center\">\n                    <div className=\"text-lg font-bold text-green-600\">{biologyLevel}</div>\n                    <div className=\"text-xs text-gray-600\">Bio</div>\n                  </div>\n                </ProgressRing>\n                <p className=\"text-sm font-medium mt-2\">Biology</p>\n              </div>\n              <div className=\"text-center\">\n                <ProgressRing\n                  progress={(chemistryXP % 1000) / 10}\n                  size={80}\n                  color=\"#8b5cf6\"\n                >\n                  <div className=\"text-center\">\n                    <div className=\"text-lg font-bold text-purple-600\">{chemistryLevel}</div>\n                    <div className=\"text-xs text-gray-600\">Chem</div>\n                  </div>\n                </ProgressRing>\n                <p className=\"text-sm font-medium mt-2\">Chemistry</p>\n              </div>\n            </div>\n          </motion.div>\n        )}\n\n        {selectedTab === 'skills' && (\n          <motion.div\n            key=\"skills\"\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -20 }}\n            className=\"space-y-6\"\n          >\n            {Object.entries(skillTrees).map(([subject, tree]) => (\n              <div key={subject} className=\"space-y-3\">\n                <h4 className={`text-lg font-bold bg-gradient-to-r ${tree.color} bg-clip-text text-transparent`}>\n                  {tree.name}\n                </h4>\n                <div className=\"grid grid-cols-2 gap-3\">\n                  {tree.skills.map((skill) => (\n                    <motion.div\n                      key={skill.id}\n                      whileHover={{ scale: 1.05 }}\n                      className={`skill-tree-node ${skill.level}`}\n                    >\n                      <div className=\"text-center\">\n                        <div className=\"text-xl mb-1\">{skill.icon}</div>\n                        <div className=\"text-xs font-medium\">{skill.name}</div>\n                      </div>\n                    </motion.div>\n                  ))}\n                </div>\n              </div>\n            ))}\n          </motion.div>\n        )}\n\n        {selectedTab === 'achievements' && (\n          <motion.div\n            key=\"achievements\"\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -20 }}\n            className=\"space-y-4\"\n          >\n            <div className=\"grid grid-cols-3 gap-3\">\n              {achievements?.slice(0, 9).map((achievement, index) => (\n                <motion.div\n                  key={achievement.id}\n                  initial={{ opacity: 0, scale: 0 }}\n                  animate={{ opacity: 1, scale: 1 }}\n                  transition={{ delay: index * 0.1 }}\n                  whileHover={{ scale: 1.1 }}\n                  className={`\n                    w-20 h-20 rounded-xl flex flex-col items-center justify-center text-xs font-bold border-2\n                    ${achievement.earned\n                      ? 'bg-gradient-to-r from-yellow-400 to-orange-500 border-yellow-300 text-white achievement-glow'\n                      : 'bg-gray-100 border-gray-200 text-gray-400'\n                    }\n                  `}\n                >\n                  <div className=\"text-lg mb-1\">{achievement.icon}</div>\n                  <div className=\"text-center leading-tight\">\n                    {achievement.name.split(' ').slice(0, 2).map((word, i) => (\n                      <div key={i}>{word}</div>\n                    ))}\n                  </div>\n                </motion.div>\n              ))}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n};\n\nexport default CharacterProgression;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\ChemistryHub.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\ChemistryModule5.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'AnimatePresence' is defined but never used. Allowed unused vars must match /^React$/u.","line":2,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport './ChemistryModule5.css';\r\n\r\nconst ChemistryModule5 = ({ onBack }) => {\r\n  const [selectedDotPoint, setSelectedDotPoint] = useState('CQ5.1');\r\n  const [currentQuestion, setCurrentQuestion] = useState(0);\r\n  const [userAnswers, setUserAnswers] = useState({});\r\n  const [showResults, setShowResults] = useState(false);\r\n  const [timeSpent, setTimeSpent] = useState(0);\r\n  const [startTime] = useState(Date.now());\r\n\r\n  useEffect(() => {\r\n    const timer = setInterval(() => {\r\n      setTimeSpent(Date.now() - startTime);\r\n    }, 1000);\r\n    return () => clearInterval(timer);\r\n  }, [startTime]);\r\n\r\n  const dotPoints = {\r\n    'CQ5.1': {\r\n      name: 'Static and Dynamic Equilibrium',\r\n      description: 'Understanding equilibrium states and Le Chatelier\\'s principle',\r\n      questions: [\r\n        {\r\n          id: 'CQ5.1-Q001',\r\n          question: 'Which factors can affect the position of chemical equilibrium?',\r\n          type: 'multiple-select',\r\n          options: ['Temperature', 'Pressure', 'Concentration', 'Catalyst', 'Color of reactants'],\r\n          correctAnswers: ['Temperature', 'Pressure', 'Concentration'],\r\n          explanation: 'Le Chatelier\\'s principle states that temperature, pressure, and concentration changes affect equilibrium position. Catalysts affect the rate but not the position.'\r\n        },\r\n        {\r\n          id: 'CQ5.1-Q002',\r\n          question: 'Arrange the steps showing how equilibrium responds to increased temperature in an endothermic reaction:',\r\n          type: 'drag-sequence',\r\n          items: [\r\n            'Temperature increase applied',\r\n            'System absorbs heat',\r\n            'Forward reaction favored',\r\n            'More products formed',\r\n            'New equilibrium established'\r\n          ],\r\n          correctOrder: [0, 1, 2, 3, 4],\r\n          explanation: 'For endothermic reactions, increasing temperature shifts equilibrium toward products to absorb the added heat.'\r\n        },\r\n        {\r\n          id: 'CQ5.1-Q003',\r\n          question: 'Identify the equilibrium arrow in this reaction diagram:',\r\n          type: 'image-hotspot',\r\n          imageUrl: '/images/equilibrium-reaction.png',\r\n          hotspots: [\r\n            { x: 45, y: 30, correct: true, label: 'Equilibrium arrows' },\r\n            { x: 25, y: 50, correct: false, label: 'Reactant A' },\r\n            { x: 75, y: 50, correct: false, label: 'Product B' }\r\n          ],\r\n          explanation: 'The double arrow () indicates that the reaction can proceed in both forward and reverse directions at equilibrium.'\r\n        },\r\n        {\r\n          id: 'CQ5.1-Q004',\r\n          question: 'Categorize these factors by their effect on equilibrium:',\r\n          type: 'category-sort',\r\n          categories: ['Shifts Equilibrium', 'Affects Rate Only', 'No Effect'],\r\n          items: [\r\n            { text: 'Adding catalyst', category: 'Affects Rate Only' },\r\n            { text: 'Increasing temperature', category: 'Shifts Equilibrium' },\r\n            { text: 'Changing pressure', category: 'Shifts Equilibrium' },\r\n            { text: 'Adding inert gas', category: 'No Effect' },\r\n            { text: 'Increasing concentration', category: 'Shifts Equilibrium' }\r\n          ],\r\n          explanation: 'Only temperature, pressure, and concentration changes shift equilibrium position. Catalysts speed up both forward and reverse reactions equally.'\r\n        },\r\n        {\r\n          id: 'CQ5.1-Q005',\r\n          question: 'Arrange these events in the correct sequence for Le Chatelier\\'s principle:',\r\n          type: 'timeline-builder',\r\n          events: [\r\n            { id: 1, text: 'System at equilibrium', time: 0 },\r\n            { id: 2, text: 'Stress applied to system', time: 1 },\r\n            { id: 3, text: 'System responds to counteract stress', time: 2 },\r\n            { id: 4, text: 'New equilibrium position established', time: 3 }\r\n          ],\r\n          explanation: 'Le Chatelier\\'s principle describes how systems respond to changes by counteracting the applied stress.'\r\n        }\r\n      ]\r\n    },\r\n    'CQ5.2': {\r\n      name: 'Factors Affecting Equilibrium',\r\n      description: 'Temperature, pressure, and concentration effects on equilibrium position',\r\n      questions: [\r\n        {\r\n          id: 'CQ5.2-Q001',\r\n          question: 'For the reaction N(g) + 3H(g)  2NH(g) + heat, what happens when pressure increases?',\r\n          type: 'multiple-choice',\r\n          options: [\r\n            'Equilibrium shifts left (toward reactants)',\r\n            'Equilibrium shifts right (toward products)',\r\n            'No change in equilibrium position',\r\n            'Reaction stops completely'\r\n          ],\r\n          correctAnswer: 1,\r\n          explanation: 'Increasing pressure shifts equilibrium toward the side with fewer gas molecules. Reactants: 4 molecules, Products: 2 molecules.'\r\n        },\r\n        {\r\n          id: 'CQ5.2-Q002',\r\n          question: 'Complete the equilibrium expression flowchart:',\r\n          type: 'flowchart-complete',\r\n          flowchart: {\r\n            nodes: [\r\n              { id: 'start', text: 'Balanced equation', x: 50, y: 10 },\r\n              { id: 'products', text: '[Products]', x: 20, y: 40, incomplete: false },\r\n              { id: 'reactants', text: '[?]', x: 80, y: 40, incomplete: true, answer: 'Reactants' },\r\n              { id: 'keq', text: 'K = ?/?', x: 50, y: 70, incomplete: true, answer: '[Products]/[Reactants]' }\r\n            ],\r\n            connections: [\r\n              { from: 'start', to: 'products' },\r\n              { from: 'start', to: 'reactants' },\r\n              { from: 'products', to: 'keq' },\r\n              { from: 'reactants', to: 'keq' }\r\n            ]\r\n          },\r\n          explanation: 'The equilibrium constant K equals [Products]/[Reactants], each raised to their stoichiometric coefficients.'\r\n        }\r\n      ]\r\n    },\r\n    'CQ5.3': {\r\n      name: 'Equilibrium Expressions and Constants',\r\n      description: 'Writing equilibrium expressions and calculating equilibrium constants',\r\n      questions: [\r\n        {\r\n          id: 'CQ5.3-Q001',\r\n          question: 'For the reaction 2SO(g) + O(g)  2SO(g), write the equilibrium expression K =',\r\n          type: 'graph-construct',\r\n          graphType: 'expression-builder',\r\n          components: [\r\n            { type: 'concentration', symbol: '[SO]', power: 2 },\r\n            { type: 'concentration', symbol: '[SO]', power: 2 },\r\n            { type: 'concentration', symbol: '[O]', power: 1 },\r\n            { type: 'operator', symbol: '/' },\r\n            { type: 'operator', symbol: '' }\r\n          ],\r\n          correctExpression: '[SO]/([SO]  [O])',\r\n          explanation: 'Products go on top, reactants on bottom, each raised to their stoichiometric coefficients.'\r\n        },\r\n        {\r\n          id: 'CQ5.3-Q002',\r\n          question: 'Adjust the K value slider to match the equilibrium position shown:',\r\n          type: 'slider-scale',\r\n          scale: { min: 0.001, max: 1000, unit: '', logarithmic: true },\r\n          correctValue: 100,\r\n          tolerance: 50,\r\n          context: 'Equilibrium heavily favors products',\r\n          explanation: 'When K >> 1, equilibrium lies far to the right, favoring product formation.'\r\n        }\r\n      ]\r\n    },\r\n    'CQ5.4': {\r\n      name: 'Acids and Bases Theory',\r\n      description: 'Arrhenius, Brnsted-Lowry, and Lewis acid-base theories',\r\n      questions: [\r\n        {\r\n          id: 'CQ5.4-Q001',\r\n          question: 'Categorize these substances according to acid-base theories:',\r\n          type: 'venn-diagram',\r\n          sets: ['Arrhenius Acids', 'Brnsted-Lowry Acids', 'Lewis Acids'],\r\n          items: [\r\n            { text: 'HCl', sets: ['Arrhenius Acids', 'Brnsted-Lowry Acids'] },\r\n            { text: 'NH', sets: [] }, // Base, not acid\r\n            { text: 'BF', sets: ['Lewis Acids'] },\r\n            { text: 'HSO', sets: ['Arrhenius Acids', 'Brnsted-Lowry Acids'] },\r\n            { text: 'AlCl', sets: ['Lewis Acids'] }\r\n          ],\r\n          explanation: 'Arrhenius acids produce H in water, Brnsted-Lowry acids donate protons, Lewis acids accept electron pairs.'\r\n        }\r\n      ]\r\n    },\r\n    'CQ5.5': {\r\n      name: 'pH and pOH Calculations',\r\n      description: 'Calculating pH, pOH, and hydrogen ion concentrations',\r\n      questions: [\r\n        {\r\n          id: 'CQ5.5-Q001',\r\n          question: 'Examine this pH indicator solution under the virtual microscope:',\r\n          type: 'virtual-microscope',\r\n          specimen: 'pH indicator solution',\r\n          magnifications: [40, 100, 400],\r\n          observations: [\r\n            {\r\n              magnification: 40,\r\n              image: '/images/ph-indicator-40x.png',\r\n              description: 'Red coloration throughout solution'\r\n            },\r\n            {\r\n              magnification: 100,\r\n              image: '/images/ph-indicator-100x.png',\r\n              description: 'Individual indicator molecules visible'\r\n            },\r\n            {\r\n              magnification: 400,\r\n              image: '/images/ph-indicator-400x.png',\r\n              description: 'Molecular structure showing protonated form'\r\n            }\r\n          ],\r\n          questions: [\r\n            {\r\n              question: 'What can you conclude about this solution?',\r\n              options: ['pH > 7 (basic)', 'pH < 7 (acidic)', 'pH = 7 (neutral)'],\r\n              correct: 1\r\n            }\r\n          ],\r\n          explanation: 'Red color indicates the protonated (acidic) form of the indicator is predominant.'\r\n        }\r\n      ]\r\n    }\r\n  };\r\n\r\n  const getCurrentQuestions = () => {\r\n    return dotPoints[selectedDotPoint]?.questions || [];\r\n  };\r\n\r\n  const handleAnswer = (questionId, answer) => {\r\n    setUserAnswers(prev => ({\r\n      ...prev,\r\n      [questionId]: answer\r\n    }));\r\n  };\r\n\r\n  const calculateScore = () => {\r\n    const questions = getCurrentQuestions();\r\n    let correct = 0;\r\n    \r\n    questions.forEach(q => {\r\n      const userAnswer = userAnswers[q.id];\r\n      if (userAnswer !== undefined) {\r\n        if (q.type === 'multiple-choice' && userAnswer === q.correctAnswer) {\r\n          correct++;\r\n        } else if (q.type === 'multiple-select' && \r\n          Array.isArray(userAnswer) && \r\n          userAnswer.length === q.correctAnswers.length &&\r\n          userAnswer.every(ans => q.correctAnswers.includes(ans))) {\r\n          correct++;\r\n        }\r\n        // Add other question type scoring logic here\r\n      }\r\n    });\r\n    \r\n    return Math.round((correct / questions.length) * 100);\r\n  };\r\n\r\n  const renderQuestion = (question) => {\r\n    const userAnswer = userAnswers[question.id];\r\n\r\n    switch (question.type) {\r\n      case 'multiple-choice':\r\n        return (\r\n          <div className=\"question-content\">\r\n            <h3 className=\"question-text\">{question.question}</h3>\r\n            <div className=\"options-list\">\r\n              {question.options.map((option, index) => (\r\n                <button\r\n                  key={index}\r\n                  onClick={() => handleAnswer(question.id, index)}\r\n                  className={`option-button ${userAnswer === index ? 'selected' : ''}`}\r\n                >\r\n                  <span className=\"option-letter\">{String.fromCharCode(65 + index)}</span>\r\n                  <span className=\"option-text\">{option}</span>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      case 'multiple-select':\r\n        return (\r\n          <div className=\"question-content\">\r\n            <h3 className=\"question-text\">{question.question}</h3>\r\n            <p className=\"instruction\">Select all correct answers:</p>\r\n            <div className=\"options-list\">\r\n              {question.options.map((option, index) => {\r\n                const isSelected = userAnswer?.includes(option);\r\n                return (\r\n                  <button\r\n                    key={index}\r\n                    onClick={() => {\r\n                      const current = userAnswer || [];\r\n                      const updated = isSelected \r\n                        ? current.filter(a => a !== option)\r\n                        : [...current, option];\r\n                      handleAnswer(question.id, updated);\r\n                    }}\r\n                    className={`option-button multi-select ${isSelected ? 'selected' : ''}`}\r\n                  >\r\n                    <span className=\"option-checkbox\">\r\n                      {isSelected ? '' : ''}\r\n                    </span>\r\n                    <span className=\"option-text\">{option}</span>\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      case 'drag-sequence':\r\n        return (\r\n          <div className=\"question-content\">\r\n            <h3 className=\"question-text\">{question.question}</h3>\r\n            <p className=\"instruction\">Drag items to arrange them in the correct sequence:</p>\r\n            <div className=\"sequence-container\">\r\n              {question.items.map((item, index) => (\r\n                <div\r\n                  key={index}\r\n                  className=\"sequence-item\"\r\n                  draggable\r\n                >\r\n                  <span className=\"sequence-number\">{index + 1}</span>\r\n                  <span className=\"sequence-text\">{item}</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      default:\r\n        return (\r\n          <div className=\"question-content\">\r\n            <h3 className=\"question-text\">{question.question}</h3>\r\n            <div className=\"placeholder-content\">\r\n              <div className=\"placeholder-icon\"></div>\r\n              <p>This question type ({question.type}) is under development</p>\r\n              <p className=\"placeholder-hint\">Coming soon with interactive features!</p>\r\n            </div>\r\n          </div>\r\n        );\r\n    }\r\n  };\r\n\r\n  const questions = getCurrentQuestions();\r\n  const currentQ = questions[currentQuestion];\r\n  const progress = ((currentQuestion + 1) / questions.length) * 100;\r\n\r\n  return (\r\n    <div className=\"chemistry-module5\">\r\n      <div className=\"module-container\">\r\n        <header className=\"module-header\">\r\n          <button onClick={onBack} className=\"back-button\">\r\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n            </svg>\r\n          </button>\r\n          \r\n          <div className=\"header-content\">\r\n            <h1> Chemistry Module 5</h1>\r\n            <p>Equilibrium & Acid Reactions</p>\r\n          </div>\r\n\r\n          <div className=\"module-stats\">\r\n            <div className=\"stat\">\r\n              <span className=\"stat-value\">{Math.floor(timeSpent / 60000)}:{Math.floor((timeSpent % 60000) / 1000).toString().padStart(2, '0')}</span>\r\n              <span className=\"stat-label\">Time</span>\r\n            </div>\r\n            <div className=\"stat\">\r\n              <span className=\"stat-value\">{currentQuestion + 1}/{questions.length}</span>\r\n              <span className=\"stat-label\">Progress</span>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        <div className=\"module-content\">\r\n          <aside className=\"dot-points-sidebar\">\r\n            <h3>Learning Objectives</h3>\r\n            <div className=\"dot-points-list\">\r\n              {Object.entries(dotPoints).map(([key, dotPoint]) => (\r\n                <button\r\n                  key={key}\r\n                  onClick={() => {\r\n                    setSelectedDotPoint(key);\r\n                    setCurrentQuestion(0);\r\n                  }}\r\n                  className={`dot-point-item ${selectedDotPoint === key ? 'active' : ''}`}\r\n                >\r\n                  <div className=\"dot-point-header\">\r\n                    <span className=\"dot-point-code\">{key}</span>\r\n                    <div className=\"dot-point-indicator\">\r\n                      {Object.keys(userAnswers).some(id => id.startsWith(key)) ? '' : ''}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"dot-point-content\">\r\n                    <h4>{dotPoint.name}</h4>\r\n                    <p>{dotPoint.description}</p>\r\n                    <div className=\"question-count\">\r\n                      {dotPoint.questions.length} questions\r\n                    </div>\r\n                  </div>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </aside>\r\n\r\n          <main className=\"question-area\">\r\n            <div className=\"progress-section\">\r\n              <div className=\"progress-bar\">\r\n                <div \r\n                  className=\"progress-fill\"\r\n                  style={{ width: `${progress}%` }}\r\n                ></div>\r\n              </div>\r\n              <div className=\"progress-text\">\r\n                Question {currentQuestion + 1} of {questions.length}\r\n              </div>\r\n            </div>\r\n\r\n            {currentQ && (\r\n              <motion.div\r\n                key={currentQ.id}\r\n                initial={{ opacity: 0, x: 20 }}\r\n                animate={{ opacity: 1, x: 0 }}\r\n                exit={{ opacity: 0, x: -20 }}\r\n                className=\"question-card\"\r\n              >\r\n                <div className=\"question-header\">\r\n                  <div className=\"question-type-badge\">\r\n                    {currentQ.type.replace('-', ' ').replace(/\\b\\w/g, l => l.toUpperCase())}\r\n                  </div>\r\n                  <div className=\"question-difficulty\">\r\n                    {selectedDotPoint}\r\n                  </div>\r\n                </div>\r\n\r\n                {renderQuestion(currentQ)}\r\n\r\n                <div className=\"question-actions\">\r\n                  <button\r\n                    onClick={() => setCurrentQuestion(prev => Math.max(0, prev - 1))}\r\n                    disabled={currentQuestion === 0}\r\n                    className=\"nav-button prev\"\r\n                  >\r\n                     Previous\r\n                  </button>\r\n                  \r\n                  {userAnswers[currentQ.id] && currentQ.explanation && (\r\n                    <div className=\"explanation-section\">\r\n                      <h4>Explanation:</h4>\r\n                      <p>{currentQ.explanation}</p>\r\n                    </div>\r\n                  )}\r\n\r\n                  <button\r\n                    onClick={() => {\r\n                      if (currentQuestion < questions.length - 1) {\r\n                        setCurrentQuestion(prev => prev + 1);\r\n                      } else {\r\n                        setShowResults(true);\r\n                      }\r\n                    }}\r\n                    disabled={!userAnswers[currentQ.id]}\r\n                    className=\"nav-button next\"\r\n                  >\r\n                    {currentQuestion === questions.length - 1 ? 'Finish' : 'Next '}\r\n                  </button>\r\n                </div>\r\n              </motion.div>\r\n            )}\r\n          </main>\r\n        </div>\r\n\r\n        {showResults && (\r\n          <div className=\"results-overlay\">\r\n            <motion.div\r\n              initial={{ opacity: 0, scale: 0.9 }}\r\n              animate={{ opacity: 1, scale: 1 }}\r\n              className=\"results-modal\"\r\n            >\r\n              <h2> Quiz Complete!</h2>\r\n              <div className=\"results-content\">\r\n                <div className=\"score-display\">\r\n                  <div className=\"score-circle\">\r\n                    <span className=\"score-value\">{calculateScore()}%</span>\r\n                  </div>\r\n                  <p>Your score for {dotPoints[selectedDotPoint].name}</p>\r\n                </div>\r\n                \r\n                <div className=\"results-actions\">\r\n                  <button \r\n                    onClick={() => {\r\n                      setShowResults(false);\r\n                      setCurrentQuestion(0);\r\n                      setUserAnswers({});\r\n                    }}\r\n                    className=\"retry-button\"\r\n                  >\r\n                    Try Again\r\n                  </button>\r\n                  <button \r\n                    onClick={() => {\r\n                      const dotPointKeys = Object.keys(dotPoints);\r\n                      const currentIndex = dotPointKeys.indexOf(selectedDotPoint);\r\n                      if (currentIndex < dotPointKeys.length - 1) {\r\n                        setSelectedDotPoint(dotPointKeys[currentIndex + 1]);\r\n                        setCurrentQuestion(0);\r\n                        setUserAnswers({});\r\n                        setShowResults(false);\r\n                      }\r\n                    }}\r\n                    className=\"next-topic-button\"\r\n                  >\r\n                    Next Topic\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </motion.div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChemistryModule5;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\ChemistryModule5LongResponse.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'currentQuestionIndex' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":10,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":30},{"ruleId":"no-unused-vars","severity":1,"message":"'setCurrentQuestionIndex' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":10,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":55},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadQuestions'. Either include it or remove the dependency array.","line":19,"column":6,"nodeType":"ArrayExpression","endLine":19,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [dotPointId, loadQuestions]","fix":{"range":[622,634],"text":"[dotPointId, loadQuestions]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleSubmitQuiz'. Either include it or remove the dependency array.","line":190,"column":6,"nodeType":"ArrayExpression","endLine":190,"endColumn":34,"suggestions":[{"desc":"Update the dependencies array to be: [timeRemaining, showResults, handleSubmitQuiz]","fix":{"range":[7910,7938],"text":"[timeRemaining, showResults, handleSubmitQuiz]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\n\nconst ChemistryModule5LongResponse = ({ \n  dotPointId, \n  onQuizComplete, \n  onBackToPathway \n}) => {\n  const [questions, setQuestions] = useState([]);\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [answers, setAnswers] = useState({});\n  const [showResults, setShowResults] = useState(false);\n  const [timeRemaining, setTimeRemaining] = useState(null);\n  const [quizStartTime] = useState(Date.now());\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadQuestions();\n  }, [dotPointId]);\n\n  const loadQuestions = async () => {\n    setLoading(true);\n    \n    // Chemistry long response questions\n    const longResponseQuestions = {\n      'IQ1.1': [\n        {\n          id: 'IQ1.1-LR001',\n          question: 'A sample of gas occupies 2.5 L at 25C and 1.2 atm. Calculate the volume of this gas sample at STP. Show all working and explain the gas law principles involved.',\n          marks: 6,\n          rubric: [\n            'Identifies the appropriate gas law (Combined Gas Law)',\n            'Converts temperature to Kelvin correctly',\n            'Sets up equation with correct values',\n            'Calculates final volume correctly',\n            'Shows appropriate significant figures',\n            'Explains the relationship between P, V, T'\n          ]\n        },\n        {\n          id: 'IQ1.1-LR002',\n          question: 'Explain why real gases deviate from ideal gas behavior. Discuss the two main factors that cause this deviation and provide examples of when these deviations become most significant.',\n          marks: 8,\n          rubric: [\n            'Explains intermolecular forces factor',\n            'Explains molecular volume factor',\n            'Provides specific conditions for deviations',\n            'Uses examples of real gases',\n            'Discusses high pressure effects',\n            'Discusses low temperature effects',\n            'Compares to ideal gas assumptions',\n            'Uses appropriate scientific terminology'\n          ]\n        }\n      ],\n      'IQ1.2': [\n        {\n          id: 'IQ1.2-LR001',\n          question: 'A reaction vessel contains 0.25 mol of nitrogen gas at 2.5 atm and 350 K. If the temperature is increased to 450 K and the pressure decreased to 1.8 atm, calculate the final volume. Show all calculations.',\n          marks: 6,\n          rubric: [\n            'Uses ideal gas law correctly',\n            'Calculates initial volume',\n            'Applies combined gas law',\n            'Shows step-by-step working',\n            'Includes correct units',\n            'Arrives at correct final answer'\n          ]\n        }\n      ],\n      'IQ2.1': [\n        {\n          id: 'IQ2.1-LR001',\n          question: 'For the equilibrium: N(g) + 3H(g)  2NH(g) + 92 kJ. Predict and explain the effect of: (a) increasing temperature, (b) increasing pressure, (c) adding a catalyst, (d) removing NH from the system.',\n          marks: 10,\n          rubric: [\n            'Identifies reaction as exothermic',\n            'Correctly predicts temperature effect',\n            'Explains Le Chatelier\\'s principle for temperature',\n            'Correctly predicts pressure effect',\n            'Explains pressure effect using moles of gas',\n            'Correctly states catalyst has no effect on position',\n            'Explains catalyst speeds up rate to equilibrium',\n            'Correctly predicts effect of removing NH',\n            'Explains shift to replace removed product',\n            'Uses appropriate chemical terminology'\n          ]\n        },\n        {\n          id: 'IQ2.1-LR002',\n          question: 'Explain Le Chatelier\\'s Principle and discuss how it applies to industrial processes such as the Haber Process. Include the compromises that must be made in industrial conditions.',\n          marks: 8,\n          rubric: [\n            'States Le Chatelier\\'s principle clearly',\n            'Applies to Haber Process specifically',\n            'Discusses temperature compromise',\n            'Discusses pressure considerations',\n            'Mentions catalyst role',\n            'Explains industrial vs optimal conditions',\n            'Discusses economic factors',\n            'Uses specific examples'\n          ]\n        }\n      ],\n      'IQ3.1': [\n        {\n          id: 'IQ3.1-LR001',\n          question: 'Explain collision theory and discuss how each of the following factors affects reaction rate: temperature, concentration, surface area, and catalysts. Include molecular-level explanations for each factor.',\n          marks: 12,\n          rubric: [\n            'States collision theory principles',\n            'Explains activation energy concept',\n            'Discusses temperature effect on kinetic energy',\n            'Explains frequency and energy of collisions',\n            'Discusses concentration effect',\n            'Explains surface area effect',\n            'Explains how catalysts work',\n            'Discusses alternative reaction pathways',\n            'Uses Maxwell-Boltzmann distribution concepts',\n            'Provides molecular-level explanations',\n            'Uses appropriate scientific language',\n            'Includes relevant examples'\n          ]\n        }\n      ],\n      'IQ4.1': [\n        {\n          id: 'IQ4.1-LR001',\n          question: 'Compare and contrast the Arrhenius, Brnsted-Lowry, and Lewis theories of acids and bases. Provide examples that can be explained by each theory and discuss the limitations of each approach.',\n          marks: 10,\n          rubric: [\n            'States Arrhenius definition correctly',\n            'States Brnsted-Lowry definition correctly',\n            'States Lewis definition correctly',\n            'Provides appropriate examples for each',\n            'Discusses limitations of Arrhenius theory',\n            'Explains advantages of Brnsted-Lowry',\n            'Explains advantages of Lewis theory',\n            'Compares theories effectively',\n            'Uses chemical equations where appropriate',\n            'Demonstrates understanding of evolution of theories'\n          ]\n        },\n        {\n          id: 'IQ4.1-LR002',\n          question: 'Calculate the pH of a 0.025 M solution of HCl and a 0.15 M solution of NaOH. Then explain what happens when 50 mL of each solution are mixed together. Show all calculations.',\n          marks: 8,\n          rubric: [\n            'Correctly identifies HCl as strong acid',\n            'Calculates pH of HCl correctly',\n            'Correctly identifies NaOH as strong base',\n            'Calculates pH of NaOH correctly',\n            'Determines limiting reagent in neutralization',\n            'Calculates moles of excess reagent',\n            'Calculates final pH correctly',\n            'Shows clear working throughout'\n          ]\n        }\n      ]\n    };\n\n    const questionsForDotPoint = longResponseQuestions[dotPointId] || [];\n    \n    if (questionsForDotPoint.length > 0) {\n      setQuestions(questionsForDotPoint);\n      // Set timer based on total marks (3 minutes per mark)\n      const totalMarks = questionsForDotPoint.reduce((sum, q) => sum + q.marks, 0);\n      const timeLimit = totalMarks * 180; // 3 minutes per mark\n      setTimeRemaining(timeLimit);\n      \n      console.log(` Loaded ${questionsForDotPoint.length} chemistry long response questions for ${dotPointId}`);\n    } else {\n      console.warn(`No chemistry long response questions found for ${dotPointId}`);\n      setQuestions([]);\n    }\n    \n    setLoading(false);\n  };\n\n  // Timer countdown\n  useEffect(() => {\n    if (timeRemaining > 0 && !showResults) {\n      const timer = setTimeout(() => {\n        setTimeRemaining(timeRemaining - 1);\n      }, 1000);\n      return () => clearTimeout(timer);\n    } else if (timeRemaining === 0) {\n      handleSubmitQuiz();\n    }\n  }, [timeRemaining, showResults]);\n\n  const handleAnswerChange = (questionId, answer) => {\n    setAnswers(prev => ({\n      ...prev,\n      [questionId]: answer\n    }));\n  };\n\n  const handleSubmitQuiz = () => {\n    // Simple scoring based on answer length and keywords\n    const totalMarks = questions.reduce((sum, q) => sum + q.marks, 0);\n    let earnedMarks = 0;\n\n    questions.forEach(question => {\n      const answer = answers[question.id] || '';\n      // Basic scoring: give partial credit based on answer length and key terms\n      if (answer.length > 50) {\n        earnedMarks += Math.min(question.marks, Math.ceil(question.marks * 0.7)); // Up to 70% for detailed answers\n      } else if (answer.length > 20) {\n        earnedMarks += Math.min(question.marks, Math.ceil(question.marks * 0.4)); // Up to 40% for basic answers\n      }\n    });\n\n    const score = Math.round((earnedMarks / totalMarks) * 100);\n    const timeSpent = Math.round((Date.now() - quizStartTime) / 1000);\n\n    console.log(` Chemistry Long Response Results: ${earnedMarks}/${totalMarks} marks (${score}%)`);\n\n    setShowResults(true);\n    \n    // Call completion handler after a short delay\n    setTimeout(() => {\n      onQuizComplete({\n        dotPointId,\n        quizType: 'longResponse',\n        score,\n        totalMarks,\n        earnedMarks,\n        timeSpent,\n        answers\n      });\n    }, 3000);\n  };\n\n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mb-4\"></div>\n          <p className=\"text-gray-600\">Loading Chemistry Long Response...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (questions.length === 0) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"text-6xl mb-4\"></div>\n          <h2 className=\"text-2xl font-bold mb-2\">Long Response Not Available</h2>\n          <p className=\"text-gray-600 mb-4\">No long response questions available for {dotPointId}</p>\n          <button\n            onClick={onBackToPathway}\n            className=\"px-6 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors\"\n          >\n            Back to Pathway\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  if (showResults) {\n    const totalMarks = questions.reduce((sum, q) => sum + q.marks, 0);\n    let earnedMarks = 0;\n\n    questions.forEach(question => {\n      const answer = answers[question.id] || '';\n      if (answer.length > 50) {\n        earnedMarks += Math.min(question.marks, Math.ceil(question.marks * 0.7));\n      } else if (answer.length > 20) {\n        earnedMarks += Math.min(question.marks, Math.ceil(question.marks * 0.4));\n      }\n    });\n\n    const score = Math.round((earnedMarks / totalMarks) * 100);\n    const passed = score >= 65;\n\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 flex items-center justify-center\">\n        <motion.div\n          initial={{ scale: 0.9, opacity: 0 }}\n          animate={{ scale: 1, opacity: 1 }}\n          className=\"bg-white rounded-2xl p-8 shadow-xl max-w-md w-full mx-4 text-center\"\n        >\n          <div className={`text-6xl mb-4 ${passed ? 'text-green-500' : 'text-orange-500'}`}>\n            {passed ? '' : ''}\n          </div>\n          <h2 className={`text-2xl font-bold mb-2 ${passed ? 'text-green-600' : 'text-orange-600'}`}>\n            {passed ? 'Assessment Complete!' : 'Keep Practicing!'}\n          </h2>\n          <p className=\"text-gray-600 mb-6\">\n            You earned {earnedMarks} out of {totalMarks} marks\n          </p>\n          \n          <div className=\"text-center mb-6\">\n            <div className={`text-4xl font-bold ${passed ? 'text-green-600' : 'text-orange-600'}`}>\n              {score}%\n            </div>\n            <div className=\"text-sm text-gray-500\">\n              {passed ? 'Excellent work!' : 'You need 65% to pass'}\n            </div>\n          </div>\n\n          <div className=\"text-sm text-gray-500\">\n            Returning to pathway...\n          </div>\n        </motion.div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50\">\n      {/* Header */}\n      <div className=\"bg-white/80 backdrop-blur-sm shadow-sm border-b border-white/50\">\n        <div className=\"px-4 py-4 flex items-center justify-between\">\n          <div className=\"flex items-center space-x-4\">\n            <button\n              onClick={onBackToPathway}\n              className=\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors\"\n            >\n              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n              </svg>\n            </button>\n            <div>\n              <h1 className=\"text-xl font-bold text-gray-900\">Chemistry Long Response</h1>\n              <p className=\"text-sm text-gray-600\">{dotPointId}  {questions.reduce((sum, q) => sum + q.marks, 0)} marks total</p>\n            </div>\n          </div>\n          \n          <div className=\"flex items-center space-x-4\">\n            <div className={`px-3 py-1 rounded-full text-sm font-medium ${\n              timeRemaining > 300 ? 'bg-green-100 text-green-700' :\n              timeRemaining > 120 ? 'bg-yellow-100 text-yellow-700' :\n              'bg-red-100 text-red-700'\n            }`}>\n               {formatTime(timeRemaining)}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Questions */}\n      <div className=\"px-4 py-8 max-w-4xl mx-auto space-y-8\">\n        {questions.map((question, index) => (\n          <motion.div\n            key={question.id}\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: index * 0.1 }}\n            className=\"bg-white/70 backdrop-blur-sm rounded-2xl p-6 border border-white/50\"\n          >\n            <div className=\"flex items-start justify-between mb-4\">\n              <h3 className=\"text-lg font-bold text-gray-900 flex-1\">\n                Question {index + 1}\n              </h3>\n              <span className=\"bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-sm font-medium\">\n                {question.marks} marks\n              </span>\n            </div>\n            \n            <p className=\"text-gray-700 mb-6 leading-relaxed\">\n              {question.question}\n            </p>\n\n            <textarea\n              value={answers[question.id] || ''}\n              onChange={(e) => handleAnswerChange(question.id, e.target.value)}\n              placeholder=\"Enter your answer here...\"\n              className=\"w-full h-48 p-4 border-2 border-gray-200 rounded-lg focus:border-purple-500 focus:outline-none resize-vertical\"\n            />\n\n            <div className=\"mt-2 text-sm text-gray-500\">\n              {(answers[question.id] || '').length} characters\n            </div>\n          </motion.div>\n        ))}\n\n        {/* Submit Button */}\n        <div className=\"text-center\">\n          <button\n            onClick={handleSubmitQuiz}\n            className=\"px-8 py-4 bg-gradient-to-r from-purple-500 to-indigo-500 text-white rounded-lg font-medium text-lg hover:shadow-lg transition-all\"\n          >\n            Submit Assessment\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChemistryModule5LongResponse;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\ChemistryModule5Pathway.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\ChemistryModule5QuickQuiz.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'pathwayData' is defined but never used. Allowed unused args must match /^_/u.","line":9,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":14},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadQuestions'. Either include it or remove the dependency array.","line":22,"column":6,"nodeType":"ArrayExpression","endLine":22,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [dotPointId, loadQuestions]","fix":{"range":[756,768],"text":"[dotPointId, loadQuestions]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleSubmitQuiz'. Either include it or remove the dependency array.","line":70,"column":6,"nodeType":"ArrayExpression","endLine":70,"endColumn":34,"suggestions":[{"desc":"Update the dependencies array to be: [timeRemaining, showResults, handleSubmitQuiz]","fix":{"range":[2344,2372],"text":"[timeRemaining, showResults, handleSubmitQuiz]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport questionService from '../services/questionService';\n\nconst ChemistryModule5QuickQuiz = ({ \n  dotPointId, \n  onQuizComplete, \n  onExit,\n  pathwayData \n}) => {\n  const [questions, setQuestions] = useState([]);\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [selectedAnswers, setSelectedAnswers] = useState({});\n  const [showResults, setShowResults] = useState(false);\n  const [timeRemaining, setTimeRemaining] = useState(null);\n  const [quizStartTime] = useState(Date.now());\n  const [loading, setLoading] = useState(true);\n\n  // Load questions based on dot point\n  useEffect(() => {\n    loadQuestions();\n  }, [dotPointId]);\n\n  const loadQuestions = async () => {\n    setLoading(true);\n    \n    try {\n      // Fetch questions from chemistry agent via question service\n      const fetchedQuestions = await questionService.fetchQuestions(\n        'chemistry', \n        'module-5', \n        dotPointId, \n        'quick'\n      );\n      \n      if (fetchedQuestions && fetchedQuestions.length > 0) {\n        // Shuffle questions and take up to 8 for the quiz\n        const shuffledQuestions = [...fetchedQuestions].sort(() => Math.random() - 0.5);\n        const selectedQuestions = shuffledQuestions.slice(0, Math.min(8, shuffledQuestions.length));\n        \n        setQuestions(selectedQuestions);\n        \n        // Set timer based on number of questions (1.5 minutes per question)\n        const timeLimit = selectedQuestions.length * 90; // 90 seconds per question\n        setTimeRemaining(timeLimit);\n        \n        console.log(` Loaded ${selectedQuestions.length} chemistry questions for ${dotPointId} from agent`);\n      } else {\n        console.warn(`No chemistry questions available for ${dotPointId}`);\n        setQuestions([]);\n      }\n    } catch (error) {\n      console.error('Error loading chemistry questions:', error);\n      setQuestions([]);\n    }\n    \n    setLoading(false);\n  };\n\n  // Timer countdown\n  useEffect(() => {\n    if (timeRemaining > 0 && !showResults) {\n      const timer = setTimeout(() => {\n        setTimeRemaining(timeRemaining - 1);\n      }, 1000);\n      return () => clearTimeout(timer);\n    } else if (timeRemaining === 0) {\n      handleSubmitQuiz();\n    }\n  }, [timeRemaining, showResults]);\n\n  const handleAnswerSelect = (questionId, answer) => {\n    setSelectedAnswers(prev => ({\n      ...prev,\n      [questionId]: answer\n    }));\n  };\n\n  const handleNextQuestion = () => {\n    if (currentQuestionIndex < questions.length - 1) {\n      setCurrentQuestionIndex(currentQuestionIndex + 1);\n    }\n  };\n\n  const handlePreviousQuestion = () => {\n    if (currentQuestionIndex > 0) {\n      setCurrentQuestionIndex(currentQuestionIndex - 1);\n    }\n  };\n\n  const handleSubmitQuiz = () => {\n    const totalQuestions = questions.length;\n    let correctAnswers = 0;\n\n    questions.forEach(question => {\n      const userAnswer = selectedAnswers[question.id];\n      if (userAnswer === question.correctAnswer) {\n        correctAnswers++;\n      }\n    });\n\n    const score = Math.round((correctAnswers / totalQuestions) * 100);\n    const timeSpent = Math.round((Date.now() - quizStartTime) / 1000);\n\n    console.log(` Chemistry Quiz Results: ${correctAnswers}/${totalQuestions} (${score}%)`);\n\n    setShowResults(true);\n    \n    // Call completion handler after a short delay\n    setTimeout(() => {\n      onQuizComplete({\n        dotPointId,\n        quizType: 'quickQuiz',\n        score,\n        totalQuestions,\n        correctAnswers,\n        timeSpent,\n        answers: selectedAnswers\n      });\n    }, 3000);\n  };\n\n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mb-4\"></div>\n          <p className=\"text-gray-600\">Loading Chemistry Quiz...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (questions.length === 0) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"text-6xl mb-4\"></div>\n          <h2 className=\"text-2xl font-bold mb-2\">Quiz Not Available</h2>\n          <p className=\"text-gray-600 mb-4\">No questions available for {dotPointId}</p>\n          <button\n            onClick={onExit}\n            className=\"px-6 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors\"\n          >\n            Back to Pathway\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  if (showResults) {\n    const totalQuestions = questions.length;\n    const correctAnswers = questions.reduce((count, question) => {\n      return selectedAnswers[question.id] === question.correctAnswer ? count + 1 : count;\n    }, 0);\n    const score = Math.round((correctAnswers / totalQuestions) * 100);\n    const passed = score >= 65;\n\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 flex items-center justify-center\">\n        <motion.div\n          initial={{ scale: 0.9, opacity: 0 }}\n          animate={{ scale: 1, opacity: 1 }}\n          className=\"bg-white rounded-2xl p-8 shadow-xl max-w-md w-full mx-4 text-center\"\n        >\n          <div className={`text-6xl mb-4 ${passed ? 'text-green-500' : 'text-orange-500'}`}>\n            {passed ? '' : ''}\n          </div>\n          <h2 className={`text-2xl font-bold mb-2 ${passed ? 'text-green-600' : 'text-orange-600'}`}>\n            {passed ? 'Quiz Passed!' : 'Keep Studying!'}\n          </h2>\n          <p className=\"text-gray-600 mb-6\">\n            You scored {correctAnswers} out of {totalQuestions} questions correctly\n          </p>\n          \n          <div className=\"text-center mb-6\">\n            <div className={`text-4xl font-bold ${passed ? 'text-green-600' : 'text-orange-600'}`}>\n              {score}%\n            </div>\n            <div className=\"text-sm text-gray-500\">\n              {passed ? 'Excellent work!' : 'You need 65% to pass'}\n            </div>\n          </div>\n\n          <div className=\"text-sm text-gray-500\">\n            Returning to pathway...\n          </div>\n        </motion.div>\n      </div>\n    );\n  }\n\n  const currentQuestion = questions[currentQuestionIndex];\n  const progress = ((currentQuestionIndex + 1) / questions.length) * 100;\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50\">\n      {/* Header */}\n      <div className=\"bg-white/80 backdrop-blur-sm shadow-sm border-b border-white/50\">\n        <div className=\"px-4 py-4 flex items-center justify-between\">\n          <div className=\"flex items-center space-x-4\">\n            <button\n              onClick={onExit}\n              className=\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors\"\n            >\n              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n              </svg>\n            </button>\n            <div>\n              <h1 className=\"text-xl font-bold text-gray-900\">Chemistry Quick Quiz</h1>\n              <p className=\"text-sm text-gray-600\">{dotPointId}  Question {currentQuestionIndex + 1} of {questions.length}</p>\n            </div>\n          </div>\n          \n          <div className=\"flex items-center space-x-4\">\n            <div className={`px-3 py-1 rounded-full text-sm font-medium ${\n              timeRemaining > 60 ? 'bg-green-100 text-green-700' :\n              timeRemaining > 30 ? 'bg-yellow-100 text-yellow-700' :\n              'bg-red-100 text-red-700'\n            }`}>\n               {formatTime(timeRemaining)}\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"w-full bg-gray-200 h-1\">\n          <div \n            className=\"bg-gradient-to-r from-purple-500 to-indigo-500 h-1 transition-all duration-300\"\n            style={{ width: `${progress}%` }}\n          />\n        </div>\n      </div>\n\n      {/* Question Content */}\n      <div className=\"px-4 py-8 max-w-4xl mx-auto\">\n        <AnimatePresence mode=\"wait\">\n          <motion.div\n            key={currentQuestionIndex}\n            initial={{ opacity: 0, x: 20 }}\n            animate={{ opacity: 1, x: 0 }}\n            exit={{ opacity: 0, x: -20 }}\n            className=\"bg-white/70 backdrop-blur-sm rounded-2xl p-8 border border-white/50\"\n          >\n            <h2 className=\"text-xl font-bold text-gray-900 mb-6\">\n              {currentQuestion.question}\n            </h2>\n\n            {currentQuestion.type === 'multiple-choice' && (\n              <div className=\"space-y-3\">\n                {currentQuestion.options.map((option, index) => (\n                  <button\n                    key={index}\n                    onClick={() => handleAnswerSelect(currentQuestion.id, option)}\n                    className={`w-full p-4 text-left rounded-lg border-2 transition-all ${\n                      selectedAnswers[currentQuestion.id] === option\n                        ? 'border-purple-500 bg-purple-50 text-purple-700'\n                        : 'border-gray-200 hover:border-purple-300 hover:bg-purple-50'\n                    }`}\n                  >\n                    <span className=\"font-medium\">{String.fromCharCode(65 + index)}.</span> {option}\n                  </button>\n                ))}\n              </div>\n            )}\n          </motion.div>\n        </AnimatePresence>\n\n        {/* Navigation */}\n        <div className=\"flex justify-between items-center mt-8\">\n          <button\n            onClick={handlePreviousQuestion}\n            disabled={currentQuestionIndex === 0}\n            className={`px-6 py-3 rounded-lg font-medium transition-colors ${\n              currentQuestionIndex === 0\n                ? 'bg-gray-200 text-gray-400 cursor-not-allowed'\n                : 'bg-gray-500 text-white hover:bg-gray-600'\n            }`}\n          >\n            Previous\n          </button>\n\n          <div className=\"flex space-x-2\">\n            {questions.map((_, index) => (\n              <div\n                key={index}\n                className={`w-3 h-3 rounded-full ${\n                  index === currentQuestionIndex ? 'bg-purple-500' :\n                  selectedAnswers[questions[index].id] ? 'bg-green-500' : 'bg-gray-300'\n                }`}\n              />\n            ))}\n          </div>\n\n          {currentQuestionIndex === questions.length - 1 ? (\n            <button\n              onClick={handleSubmitQuiz}\n              className=\"px-6 py-3 bg-gradient-to-r from-purple-500 to-indigo-500 text-white rounded-lg font-medium hover:shadow-lg transition-all\"\n            >\n              Submit Quiz\n            </button>\n          ) : (\n            <button\n              onClick={handleNextQuestion}\n              className=\"px-6 py-3 bg-purple-500 text-white rounded-lg font-medium hover:bg-purple-600 transition-colors\"\n            >\n              Next\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChemistryModule5QuickQuiz;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\ChemistryModule6.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'AnimatePresence' is defined but never used. Allowed unused vars must match /^React$/u.","line":2,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":33},{"ruleId":"no-unused-vars","severity":1,"message":"'userProgress' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":10,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport ProgressBar from './ProgressBar';\r\n\r\nconst ChemistryModule6 = ({ onBack }) => {\r\n  const [currentDotPoint, setCurrentDotPoint] = useState(0);\r\n  const [completedDotPoints, setCompletedDotPoints] = useState(new Set());\r\n  const [showResults, setShowResults] = useState(false);\r\n  const [selectedAnswer, setSelectedAnswer] = useState('');\r\n  const [userProgress, setUserProgress] = useState({});\r\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\r\n\r\n  const dotPoints = [\r\n    {\r\n      id: 'CQ6.1',\r\n      title: 'Brnsted-Lowry Theory',\r\n      description: 'Analyze acid-base reactions using Brnsted-Lowry theory and identify conjugate pairs',\r\n      questions: [\r\n        {\r\n          id: 'q1',\r\n          type: 'multiple-choice',\r\n          question: 'According to Brnsted-Lowry theory, an acid is defined as:',\r\n          options: [\r\n            'A substance that increases H concentration in water',\r\n            'A proton (H) donor',\r\n            'A substance with pH less than 7',\r\n            'An electron pair acceptor'\r\n          ],\r\n          correct: 1,\r\n          explanation: 'In Brnsted-Lowry theory, an acid is specifically defined as a proton (H) donor, regardless of the solvent.'\r\n        },\r\n        {\r\n          id: 'q2',\r\n          type: 'conjugate-pairs',\r\n          question: 'Identify the conjugate acid-base pairs in this reaction:\\nNH + HO  NH + OH',\r\n          pairs: [\r\n            { acid: 'HO', base: 'OH', correct: true },\r\n            { acid: 'NH', base: 'NH', correct: true },\r\n            { acid: 'NH', base: 'OH', correct: false },\r\n            { acid: 'HO', base: 'NH', correct: false }\r\n          ],\r\n          explanation: 'NH/NH and HO/OH are the conjugate pairs. NH acts as a base (accepts H), HO acts as an acid (donates H).'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 'CQ6.2',\r\n      title: 'Conjugate Acid-Base Pairs',\r\n      description: 'Predict the behavior of conjugate acid-base pairs and their relative strengths',\r\n      questions: [\r\n        {\r\n          id: 'q3',\r\n          type: 'strength-comparison',\r\n          question: 'Arrange these acids in order of increasing strength:\\nHF, HCl, HBr, HI',\r\n          items: ['HF', 'HCl', 'HBr', 'HI'],\r\n          correctOrder: [0, 1, 2, 3],\r\n          explanation: 'Acid strength increases down Group 17: HF < HCl < HBr < HI due to decreasing bond strength and increasing atomic size.'\r\n        },\r\n        {\r\n          id: 'q4',\r\n          type: 'multiple-choice',\r\n          question: 'Which statement about conjugate pairs is correct?',\r\n          options: [\r\n            'A strong acid has a strong conjugate base',\r\n            'A strong acid has a weak conjugate base',\r\n            'Conjugate pairs have equal strengths',\r\n            'Only strong acids have conjugate bases'\r\n          ],\r\n          correct: 1,\r\n          explanation: 'The stronger the acid, the weaker its conjugate base. This is because a strong acid readily donates its proton.'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 'CQ6.3',\r\n      title: 'Oxidation and Reduction',\r\n      description: 'Identify oxidation and reduction processes in chemical reactions',\r\n      questions: [\r\n        {\r\n          id: 'q5',\r\n          type: 'redox-identification',\r\n          question: 'In the reaction: Zn + Cu  Zn + Cu\\nIdentify what happens to each species:',\r\n          species: [\r\n            { formula: 'Zn', process: 'oxidation', correct: true },\r\n            { formula: 'Cu', process: 'reduction', correct: true },\r\n            { formula: 'Zn', process: 'product of oxidation', correct: true },\r\n            { formula: 'Cu', process: 'product of reduction', correct: true }\r\n          ],\r\n          explanation: 'Zn loses electrons (oxidized), Cu gains electrons (reduced). Remember: OIL RIG - Oxidation Involves Loss, Reduction Involves Gain.'\r\n        },\r\n        {\r\n          id: 'q6',\r\n          type: 'multiple-choice',\r\n          question: 'Which process involves an increase in oxidation number?',\r\n          options: [\r\n            'Reduction',\r\n            'Oxidation',\r\n            'Neutralization',\r\n            'Precipitation'\r\n          ],\r\n          correct: 1,\r\n          explanation: 'Oxidation involves loss of electrons, which results in an increase in oxidation number.'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 'CQ6.4',\r\n      title: 'Oxidation Numbers',\r\n      description: 'Calculate oxidation numbers and use them to balance redox equations',\r\n      questions: [\r\n        {\r\n          id: 'q7',\r\n          type: 'oxidation-number',\r\n          question: 'What is the oxidation number of sulfur in SO?',\r\n          compound: 'SO',\r\n          element: 'S',\r\n          options: ['+4', '+6', '-2', '0'],\r\n          correct: 1,\r\n          explanation: 'In SO: 4 oxygens  (-2) = -8, overall charge = -2, so S = +6 to balance: +6 + (-8) = -2'\r\n        },\r\n        {\r\n          id: 'q8',\r\n          type: 'multiple-choice',\r\n          question: 'In which compound does chlorine have the highest oxidation number?',\r\n          options: [\r\n            'HCl',\r\n            'ClO',\r\n            'NaCl',\r\n            'Cl'\r\n          ],\r\n          correct: 1,\r\n          explanation: 'In ClO, chlorine has oxidation number +7, which is its highest possible oxidation state.'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 'CQ6.5',\r\n      title: 'Redox Equations',\r\n      description: 'Balance redox equations using half-reaction method',\r\n      questions: [\r\n        {\r\n          id: 'q9',\r\n          type: 'equation-balancing',\r\n          question: 'Balance this redox equation in acidic solution:\\nMnO + Fe  Mn + Fe',\r\n          steps: [\r\n            'Separate into half-reactions',\r\n            'Balance atoms other than H and O',\r\n            'Balance O by adding HO',\r\n            'Balance H by adding H',\r\n            'Balance charge by adding e',\r\n            'Equalize electrons and combine'\r\n          ],\r\n          balanced: 'MnO + 5Fe + 8H  Mn + 5Fe + 4HO',\r\n          explanation: 'MnO gains 5e, each Fe loses 1e, so need 5 Fe to balance electrons.'\r\n        },\r\n        {\r\n          id: 'q10',\r\n          type: 'multiple-choice',\r\n          question: 'In the balanced equation above, how many electrons are transferred?',\r\n          options: ['1', '3', '5', '8'],\r\n          correct: 2,\r\n          explanation: '5 electrons are transferred from 5 Fe ions to 1 MnO ion.'\r\n        }\r\n      ]\r\n    }\r\n  ];\r\n\r\n  const loadProgress = () => {\r\n    try {\r\n      const progress = JSON.parse(localStorage.getItem('chemistryProgress') || '{}');\r\n      setUserProgress(progress.module6 || {});\r\n      \r\n      const completed = new Set();\r\n      Object.keys(progress.module6 || {}).forEach(dotPointId => {\r\n        if (progress.module6[dotPointId]?.completed) {\r\n          completed.add(dotPointId);\r\n        }\r\n      });\r\n      setCompletedDotPoints(completed);\r\n    } catch (error) {\r\n      console.error('Error loading progress:', error);\r\n    }\r\n  };\r\n\r\n  const saveProgress = (dotPointId, questionId, correct) => {\r\n    try {\r\n      const allProgress = JSON.parse(localStorage.getItem('chemistryProgress') || '{}');\r\n      if (!allProgress.module6) allProgress.module6 = {};\r\n      if (!allProgress.module6[dotPointId]) allProgress.module6[dotPointId] = {};\r\n      \r\n      allProgress.module6[dotPointId][questionId] = {\r\n        completed: true,\r\n        correct,\r\n        timestamp: Date.now()\r\n      };\r\n\r\n      const dotPoint = dotPoints.find(dp => dp.id === dotPointId);\r\n      const allQuestionsAnswered = dotPoint.questions.every(q => \r\n        allProgress.module6[dotPointId][q.id]?.completed\r\n      );\r\n\r\n      if (allQuestionsAnswered) {\r\n        allProgress.module6[dotPointId].completed = true;\r\n        setCompletedDotPoints(prev => new Set([...prev, dotPointId]));\r\n      }\r\n\r\n      localStorage.setItem('chemistryProgress', JSON.stringify(allProgress));\r\n      setUserProgress(allProgress.module6);\r\n    } catch (error) {\r\n      console.error('Error saving progress:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadProgress();\r\n  }, []);\r\n\r\n  const handleAnswerSelect = (answer) => {\r\n    setSelectedAnswer(answer);\r\n  };\r\n\r\n  const handleSubmitAnswer = () => {\r\n    const currentQuestion = dotPoints[currentDotPoint].questions[currentQuestionIndex];\r\n    const isCorrect = checkAnswer(currentQuestion, selectedAnswer);\r\n    \r\n    saveProgress(dotPoints[currentDotPoint].id, currentQuestion.id, isCorrect);\r\n    setShowResults(true);\r\n  };\r\n\r\n  const checkAnswer = (question, answer) => {\r\n    switch (question.type) {\r\n      case 'multiple-choice':\r\n        return parseInt(answer) === question.correct;\r\n      case 'conjugate-pairs':\r\n        return answer.every((pair, index) => pair === question.pairs[index].correct);\r\n      case 'strength-comparison':\r\n        return JSON.stringify(answer) === JSON.stringify(question.correctOrder);\r\n      case 'redox-identification':\r\n        return answer.every((item, index) => item === question.species[index].correct);\r\n      case 'oxidation-number':\r\n        return parseInt(answer) === question.correct;\r\n      case 'equation-balancing':\r\n        return answer === question.balanced;\r\n      default:\r\n        return false;\r\n    }\r\n  };\r\n\r\n  const nextQuestion = () => {\r\n    const currentDotPointObj = dotPoints[currentDotPoint];\r\n    if (currentQuestionIndex < currentDotPointObj.questions.length - 1) {\r\n      setCurrentQuestionIndex(prev => prev + 1);\r\n    } else if (currentDotPoint < dotPoints.length - 1) {\r\n      setCurrentDotPoint(prev => prev + 1);\r\n      setCurrentQuestionIndex(0);\r\n    }\r\n    setSelectedAnswer('');\r\n    setShowResults(false);\r\n  };\r\n\r\n  const renderQuestion = (question) => {\r\n    switch (question.type) {\r\n      case 'multiple-choice':\r\n        return (\r\n          <div className=\"question-content\">\r\n            <div className=\"question-text\">{question.question}</div>\r\n            <div className=\"options-grid\">\r\n              {question.options.map((option, index) => (\r\n                <motion.button\r\n                  key={index}\r\n                  whileHover={{ scale: 1.02 }}\r\n                  whileTap={{ scale: 0.98 }}\r\n                  className={`option-button ${selectedAnswer === index.toString() ? 'selected' : ''}`}\r\n                  onClick={() => handleAnswerSelect(index.toString())}\r\n                  disabled={showResults}\r\n                >\r\n                  {option}\r\n                </motion.button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      case 'conjugate-pairs':\r\n        return (\r\n          <div className=\"question-content\">\r\n            <div className=\"question-text\" style={{ whiteSpace: 'pre-line' }}>{question.question}</div>\r\n            <div className=\"pairs-grid\">\r\n              {question.pairs.map((pair, index) => (\r\n                <div key={index} className=\"pair-option\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    id={`pair-${index}`}\r\n                    checked={selectedAnswer[index] || false}\r\n                    onChange={(e) => {\r\n                      const newAnswer = [...(selectedAnswer || [])];\r\n                      newAnswer[index] = e.target.checked;\r\n                      setSelectedAnswer(newAnswer);\r\n                    }}\r\n                    disabled={showResults}\r\n                  />\r\n                  <label htmlFor={`pair-${index}`}>\r\n                    {pair.acid} / {pair.base}\r\n                  </label>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      case 'strength-comparison':\r\n        return (\r\n          <div className=\"question-content\">\r\n            <div className=\"question-text\">{question.question}</div>\r\n            <div className=\"sorting-container\">\r\n              <div className=\"items-to-sort\">\r\n                {question.items.map((item, index) => (\r\n                  <div\r\n                    key={index}\r\n                    className=\"sortable-item\"\r\n                    draggable\r\n                    onDragStart={(e) => e.dataTransfer.setData('text/plain', index)}\r\n                    onDragOver={(e) => e.preventDefault()}\r\n                    onDrop={(e) => {\r\n                      e.preventDefault();\r\n                      const draggedIndex = parseInt(e.dataTransfer.getData('text/plain'));\r\n                      const newOrder = [...(selectedAnswer || question.items.map((_, i) => i))];\r\n                      const temp = newOrder[draggedIndex];\r\n                      newOrder[draggedIndex] = newOrder[index];\r\n                      newOrder[index] = temp;\r\n                      setSelectedAnswer(newOrder);\r\n                    }}\r\n                  >\r\n                    {item}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      case 'redox-identification':\r\n        return (\r\n          <div className=\"question-content\">\r\n            <div className=\"question-text\" style={{ whiteSpace: 'pre-line' }}>{question.question}</div>\r\n            <div className=\"redox-grid\">\r\n              {question.species.map((species, index) => (\r\n                <div key={index} className=\"species-analysis\">\r\n                  <div className=\"species-formula\">{species.formula}</div>\r\n                  <select\r\n                    value={selectedAnswer[index] || ''}\r\n                    onChange={(e) => {\r\n                      const newAnswer = [...(selectedAnswer || [])];\r\n                      newAnswer[index] = e.target.value === 'true';\r\n                      setSelectedAnswer(newAnswer);\r\n                    }}\r\n                    disabled={showResults}\r\n                  >\r\n                    <option value=\"\">Select process</option>\r\n                    <option value=\"true\">Correct: {species.process}</option>\r\n                    <option value=\"false\">Incorrect process</option>\r\n                  </select>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      case 'oxidation-number':\r\n        return (\r\n          <div className=\"question-content\">\r\n            <div className=\"question-text\">{question.question}</div>\r\n            <div className=\"oxidation-calculation\">\r\n              <div className=\"compound-display\">{question.compound}</div>\r\n              <div className=\"options-grid\">\r\n                {question.options.map((option, index) => (\r\n                  <motion.button\r\n                    key={index}\r\n                    whileHover={{ scale: 1.02 }}\r\n                    className={`option-button ${selectedAnswer === index.toString() ? 'selected' : ''}`}\r\n                    onClick={() => handleAnswerSelect(index.toString())}\r\n                    disabled={showResults}\r\n                  >\r\n                    {option}\r\n                  </motion.button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      case 'equation-balancing':\r\n        return (\r\n          <div className=\"question-content\">\r\n            <div className=\"question-text\" style={{ whiteSpace: 'pre-line' }}>{question.question}</div>\r\n            <div className=\"balancing-steps\">\r\n              {question.steps.map((step, index) => (\r\n                <div key={index} className=\"step-item\">\r\n                  <span className=\"step-number\">{index + 1}</span>\r\n                  <span className=\"step-text\">{step}</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n            <div className=\"balanced-equation\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Enter balanced equation\"\r\n                value={selectedAnswer}\r\n                onChange={(e) => setSelectedAnswer(e.target.value)}\r\n                disabled={showResults}\r\n                className=\"equation-input\"\r\n              />\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      default:\r\n        return <div>Question type not supported</div>;\r\n    }\r\n  };\r\n\r\n  const overallProgress = (completedDotPoints.size / dotPoints.length) * 100;\r\n  const currentQuestion = dotPoints[currentDotPoint].questions[currentQuestionIndex];\r\n\r\n  return (\r\n    <div className=\"chemistry-module\">\r\n      <div className=\"module-container\">\r\n        <header className=\"module-header\">\r\n          <button onClick={onBack} className=\"back-button\">\r\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n            </svg>\r\n          </button>\r\n          <div className=\"header-content\">\r\n            <h1> Chemistry Module 6</h1>\r\n            <h2>Acid/Base & Redox Reactions</h2>\r\n            <p>Master acid-base theory, redox processes, and electrochemistry</p>\r\n          </div>\r\n        </header>\r\n\r\n        <div className=\"progress-section\">\r\n          <div className=\"progress-info\">\r\n            <span className=\"progress-label\">Module Progress</span>\r\n            <span className=\"progress-percentage\">{Math.round(overallProgress)}%</span>\r\n          </div>\r\n          <ProgressBar progress={overallProgress} color=\"#f59e0b\" height={8} />\r\n        </div>\r\n\r\n        <div className=\"dot-points-nav\">\r\n          {dotPoints.map((dotPoint, index) => (\r\n            <div\r\n              key={dotPoint.id}\r\n              className={`dot-point-tab ${\r\n                index === currentDotPoint ? 'active' : ''\r\n              } ${completedDotPoints.has(dotPoint.id) ? 'completed' : ''}`}\r\n              onClick={() => {\r\n                setCurrentDotPoint(index);\r\n                setCurrentQuestionIndex(0);\r\n                setSelectedAnswer('');\r\n                setShowResults(false);\r\n              }}\r\n            >\r\n              <div className=\"dot-point-id\">{dotPoint.id}</div>\r\n              <div className=\"dot-point-title\">{dotPoint.title}</div>\r\n              {completedDotPoints.has(dotPoint.id) && (\r\n                <div className=\"completed-icon\"></div>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"content-area\">\r\n          <div className=\"dot-point-info\">\r\n            <h3>{dotPoints[currentDotPoint].title}</h3>\r\n            <p>{dotPoints[currentDotPoint].description}</p>\r\n          </div>\r\n\r\n          <div className=\"question-section\">\r\n            <div className=\"question-header\">\r\n              <span className=\"question-number\">\r\n                Question {currentQuestionIndex + 1} of {dotPoints[currentDotPoint].questions.length}\r\n              </span>\r\n              <span className=\"question-type\">{currentQuestion.type.replace('-', ' ').toUpperCase()}</span>\r\n            </div>\r\n\r\n            {renderQuestion(currentQuestion)}\r\n\r\n            <div className=\"question-actions\">\r\n              {!showResults ? (\r\n                <motion.button\r\n                  whileHover={{ scale: 1.05 }}\r\n                  whileTap={{ scale: 0.95 }}\r\n                  className=\"submit-button\"\r\n                  onClick={handleSubmitAnswer}\r\n                  disabled={!selectedAnswer && selectedAnswer !== 0}\r\n                >\r\n                  Submit Answer\r\n                </motion.button>\r\n              ) : (\r\n                <div className=\"results-section\">\r\n                  <div className={`result-indicator ${checkAnswer(currentQuestion, selectedAnswer) ? 'correct' : 'incorrect'}`}>\r\n                    {checkAnswer(currentQuestion, selectedAnswer) ? ' Correct!' : ' Incorrect'}\r\n                  </div>\r\n                  <div className=\"explanation\">\r\n                    <strong>Explanation:</strong>\r\n                    <p>{currentQuestion.explanation}</p>\r\n                  </div>\r\n                  <motion.button\r\n                    whileHover={{ scale: 1.05 }}\r\n                    whileTap={{ scale: 0.95 }}\r\n                    className=\"next-button\"\r\n                    onClick={nextQuestion}\r\n                  >\r\n                    {currentQuestionIndex < dotPoints[currentDotPoint].questions.length - 1\r\n                      ? 'Next Question'\r\n                      : currentDotPoint < dotPoints.length - 1\r\n                      ? 'Next Dot Point'\r\n                      : 'Complete Module'}\r\n                  </motion.button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChemistryModule6;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\ChemistryModulePathway.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\ClickToMatchFlashcards.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\Confetti.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\DotPointDetail.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\DotPointDetailTabs.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'progressHook' is defined but never used. Allowed unused args must match /^_/u.","line":24,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'getSectionId' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":281,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":281,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useMemo, useState } from 'react'\nimport LearnPage from './LearnPage'\nimport QuickQuiz from './QuickQuiz'\nimport GuidedEssayBuilder from './GuidedEssayBuilder'\nimport DotPointStats from './DotPointStats'\nimport learnSections from '../data/biologyModule5LearnSections.json'\nimport essayQuestions from '../data/biologyModule5EssayQuestions.json'\n\nconst PROGRESS_KEY = (id) => `dotpoint-progress:${id}`\nconst placeHolderTabState = { learnComplete: false, quizComplete: false, essayComplete: false }\n\nconst TABS = [\n  { id: 'learn', label: 'Learn', icon: '', gradient: 'from-blue-500 to-cyan-500' },\n  { id: 'quiz', label: 'Quick Quiz', icon: '', gradient: 'from-purple-500 to-pink-500' },\n  { id: 'essay', label: 'Practice', icon: '', gradient: 'from-orange-500 to-red-500' },\n  { id: 'stats', label: 'Progress', icon: '', gradient: 'from-green-500 to-emerald-500' },\n]\n\nconst DotPointDetailTabs = ({\n  dotPointId,\n  dotPointData,\n  onBack,\n  pathwayData,\n  progressHook,\n}) => {\n  const [activeTab, setActiveTab] = useState('learn')\n  const [progress, setProgress] = useState(placeHolderTabState)\n\n  useEffect(() => {\n    const stored = safeParse(localStorage.getItem(PROGRESS_KEY(dotPointId)), null)\n    if (stored) {\n      setProgress({\n        learnComplete: Boolean(stored.learnComplete),\n        quizComplete: Boolean(stored.quizComplete),\n        essayComplete: Boolean(stored.essayComplete),\n      })\n    } else {\n      setProgress(placeHolderTabState)\n    }\n  }, [dotPointId])\n\n  useEffect(() => {\n    persistProgress(dotPointId, progress)\n  }, [dotPointId, progress])\n\n  const learnPageData = useMemo(() => {\n    const sections = learnSections[dotPointId]\n    if (!sections || sections.length === 0) return null\n\n    if (sections[0]?.type === 'placeholder') {\n      return { placeholder: true, ...sections[0].content }\n    }\n\n    return {\n      sections,\n      completionXP: 50,\n    }\n  }, [dotPointId])\n\n  const essayQuestion = useMemo(() => {\n    return (\n      essayQuestions[dotPointId] || {\n        question: `Write an extended response about \"${dotPointData?.title ?? dotPointId}\".`,\n        dotPoint: dotPointId,\n      }\n    )\n  }, [dotPointId, dotPointData])\n\n  const handleLearnComplete = () => {\n    setProgress((prev) => ({ ...prev, learnComplete: true }))\n    setActiveTab('quiz')\n  }\n\n  const handleQuizComplete = (result) => {\n    const passed = result?.score != null ? result.score >= 65 : Boolean(result?.passed)\n    if (passed) {\n      setProgress((prev) => ({ ...prev, quizComplete: true }))\n      setActiveTab('essay')\n    }\n  }\n\n  const handleEssayComplete = (result) => {\n    if (result?.passed) {\n      setProgress((prev) => ({ ...prev, essayComplete: true }))\n    }\n  }\n\n  const renderContent = () => {\n    switch (activeTab) {\n      case 'learn': {\n        if (!learnPageData) {\n          return (\n            <PlaceholderPanel\n              title=\"Learn content coming soon\"\n              message=\"This dotpoint does not have learn content yet. Try the quiz tab while the team finishes the lesson.\"\n              actionLabel=\"Back to pathway\"\n              onAction={onBack}\n            />\n          )\n        }\n\n        if (learnPageData.placeholder) {\n          return (\n            <PlaceholderPanel\n              title=\"Learn content is on the way\"\n              message={learnPageData.message || 'The content team is preparing this lesson.'}\n              actionLabel=\"Go to quiz\"\n              onAction={() => setActiveTab('quiz')}\n            />\n          )\n        }\n\n        return (\n          <LearnPage\n            dotPointId={dotPointId}\n            dotPointTitle={dotPointData?.title || dotPointId}\n            learnPageData={learnPageData}\n            onComplete={handleLearnComplete}\n            onBack={onBack}\n          />\n        )\n      }\n\n      case 'quiz':\n        return (\n          <QuickQuiz\n            subject={dotPointData?.subject || pathwayData?.subject || 'biology'}\n            dotPointId={dotPointId}\n            onQuizComplete={handleQuizComplete}\n            onExit={() => setActiveTab('learn')}\n          />\n        )\n\n      case 'essay':\n        return (\n          <GuidedEssayBuilder\n            dotPointId={dotPointId}\n            dotPointData={dotPointData}\n            essayQuestion={essayQuestion}\n            onComplete={handleEssayComplete}\n            onBack={() => setActiveTab('quiz')}\n          />\n        )\n\n      case 'stats':\n        return (\n          <DotPointStats\n            dotPointId={dotPointId}\n            dotPointData={dotPointData}\n            learnComplete={progress.learnComplete}\n            quizComplete={progress.quizComplete}\n            essayComplete={progress.essayComplete}\n            onBack={() => setActiveTab('learn')}\n          />\n        )\n\n      default:\n        return null\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50\">\n      {/* Modern Header with Gradient */}\n      <header className=\"bg-white/80 backdrop-blur-lg border-b border-white/20 shadow-lg px-4 py-4\">\n        <div className=\"mx-auto flex max-w-5xl items-center justify-between gap-4\">\n          <button\n            type=\"button\"\n            onClick={onBack}\n            className=\"group flex items-center gap-2 rounded-xl bg-gradient-to-r from-gray-100 to-gray-200 px-4 py-2 text-sm font-semibold text-gray-700 shadow-md hover:shadow-xl hover:scale-105 transition-all duration-200\"\n          >\n            <span className=\"text-lg group-hover:-translate-x-1 transition-transform\"></span>\n            <span>Back</span>\n          </button>\n          <div className=\"flex-1 text-center\">\n            <p className=\"text-xs font-bold uppercase tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600\">\n              {dotPointId}\n            </p>\n            <h1 className=\"text-lg font-bold text-gray-800 mt-1\">\n              {dotPointData?.title || 'Dotpoint'}\n            </h1>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <StatusPill label=\"Learn\" done={progress.learnComplete} />\n            <StatusPill label=\"Quiz\" done={progress.quizComplete} />\n            <StatusPill label=\"Practice\" done={progress.essayComplete} />\n          </div>\n        </div>\n      </header>\n\n      {/* Modern Tab Navigation with Gradients */}\n      <nav className=\"bg-white/60 backdrop-blur-md shadow-md sticky top-0 z-20\">\n        <div className=\"mx-auto max-w-5xl px-4 py-3\">\n          <div className=\"flex gap-3\">\n            {TABS.map((tab) => {\n              const locked =\n                (tab.id === 'quiz' && !progress.learnComplete) ||\n                (tab.id === 'essay' && !progress.quizComplete)\n              const active = tab.id === activeTab\n\n              return (\n                <button\n                  type=\"button\"\n                  key={tab.id}\n                  className={`\n                    flex-1 relative overflow-hidden rounded-2xl px-4 py-4 text-center font-bold transition-all duration-300 transform\n                    ${locked\n                      ? 'bg-gray-200 text-gray-400 cursor-not-allowed opacity-50'\n                      : active\n                        ? `bg-gradient-to-r ${tab.gradient} text-white shadow-xl scale-105`\n                        : 'bg-white text-gray-600 shadow-md hover:shadow-xl hover:scale-105'\n                    }\n                  `}\n                  disabled={locked}\n                  onClick={() => setActiveTab(tab.id)}\n                >\n                  {/* Shine effect on active tab */}\n                  {active && (\n                    <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer\" />\n                  )}\n\n                  <div className=\"relative flex flex-col items-center gap-1\">\n                    <span className=\"text-2xl\">{tab.icon}</span>\n                    <span className=\"text-sm\">{tab.label}</span>\n                    {locked && <span className=\"text-xs\"></span>}\n                  </div>\n                </button>\n              )\n            })}\n          </div>\n        </div>\n      </nav>\n\n      <main className=\"pb-10 px-4\">{renderContent()}</main>\n    </div>\n  )\n}\n\nconst StatusPill = ({ label, done }) => (\n  <span\n    className={`\n      rounded-full px-3 py-1 text-xs font-bold uppercase tracking-wide shadow-sm\n      ${done\n        ? 'bg-gradient-to-r from-emerald-400 to-green-500 text-white'\n        : 'bg-gray-100 text-gray-500'\n      }\n    `}\n  >\n    {done ? '' : ''} {label}\n  </span>\n)\n\nconst PlaceholderPanel = ({ title, message, actionLabel, onAction }) => (\n  <div className=\"mx-auto flex min-h-[60vh] max-w-md flex-col items-center justify-center gap-4 px-4 text-center\">\n    <div className=\"rounded-lg border border-slate-200 bg-white p-6 shadow\">\n      <h2 className=\"text-lg font-semibold text-slate-900\">{title}</h2>\n      <p className=\"mt-2 text-sm text-slate-600\">{message}</p>\n      <button\n        type=\"button\"\n        onClick={onAction}\n        className=\"mt-4 w-full rounded-lg border border-slate-200 bg-slate-50 py-2 text-sm font-medium text-slate-600 hover:border-slate-300 hover:text-slate-900\"\n      >\n        {actionLabel}\n      </button>\n    </div>\n  </div>\n)\n\nconst persistProgress = (dotPointId, state) => {\n  localStorage.setItem(PROGRESS_KEY(dotPointId), JSON.stringify(state))\n}\n\nconst safeParse = (value, fallback) => {\n  try {\n    return value ? JSON.parse(value) : fallback\n  } catch {\n    return fallback\n  }\n}\n\nconst getSectionId = (section) =>\n  section.sectionId || section.id || `${section.type}-${section.title || 'section'}`\n\nexport default DotPointDetailTabs\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\DotPointStats.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\EnhancedButton.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'triggerHaptic' is defined but never used. Allowed unused vars must match /^React$/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { motion } from 'framer-motion';\nimport { triggerHaptic, buttonPress, buttonHover, getAccessibleAnimation } from '../utils/animations';\nimport { useAnalytics } from '../hooks/useAnalytics';\nimport { useMobileOptimization } from '../hooks/useMobileOptimization';\n\nconst EnhancedButton = ({\n  children,\n  onClick,\n  variant = 'primary',\n  size = 'medium',\n  disabled = false,\n  loading = false,\n  haptic = true,\n  className = '',\n  icon,\n  ...props\n}) => {\n  const { track, EVENTS } = useAnalytics();\n  const { isMobile, triggerHaptic: mobileHaptic, getPerformanceConfig } = useMobileOptimization();\n  const performanceConfig = getPerformanceConfig();\n\n  const handleClick = (e) => {\n    if (disabled || loading) return;\n\n    // Trigger haptic feedback on mobile\n    if (haptic && isMobile) {\n      mobileHaptic('light');\n    }\n\n    // Track button interaction\n    track(EVENTS.BUTTON_CLICKED, {\n      variant,\n      size,\n      hasIcon: !!icon,\n      isMobile\n    });\n\n    onClick?.(e);\n  };\n\n  const baseClasses = `\n    inline-flex items-center justify-center font-medium\n    ${performanceConfig.enableAnimations ? 'transition-all duration-200' : ''}\n    focus:outline-none focus:ring-2 focus:ring-offset-2\n    disabled:pointer-events-none disabled:opacity-50\n    touch-optimized mobile-optimized\n    ${isMobile ? 'active:scale-95' : 'hover:scale-105'}\n    ${className}\n  `;\n\n  const variants = {\n    primary: `\n      bg-gradient-to-r from-blue-600 to-purple-600 text-white\n      hover:from-blue-700 hover:to-purple-700\n      focus:ring-blue-500 shadow-lg hover:shadow-xl\n    `,\n    secondary: `\n      bg-white border border-gray-300 text-gray-700\n      hover:bg-gray-50 focus:ring-blue-500 shadow-sm hover:shadow-md\n    `,\n    success: `\n      bg-gradient-to-r from-green-500 to-emerald-600 text-white\n      hover:from-green-600 hover:to-emerald-700\n      focus:ring-green-500 shadow-lg hover:shadow-xl\n    `,\n    danger: `\n      bg-gradient-to-r from-red-500 to-red-600 text-white\n      hover:from-red-600 hover:to-red-700\n      focus:ring-red-500 shadow-lg hover:shadow-xl\n    `,\n    ghost: `\n      bg-transparent text-gray-700 hover:bg-gray-100\n      focus:ring-gray-500\n    `,\n    glassmorphism: `\n      bg-white/20 backdrop-blur-md border border-white/30 text-white\n      hover:bg-white/30 focus:ring-white/50 shadow-lg hover:shadow-xl\n    `\n  };\n\n  const sizes = {\n    small: `px-3 py-2 text-sm rounded-lg ${isMobile ? 'min-h-[44px]' : ''}`,\n    medium: `px-4 py-3 text-base rounded-xl ${isMobile ? 'min-h-[48px]' : ''}`,\n    large: `px-6 py-4 text-lg rounded-xl ${isMobile ? 'min-h-[52px]' : ''}`,\n    xl: `px-8 py-5 text-xl rounded-2xl ${isMobile ? 'min-h-[56px]' : ''}`\n  };\n\n  const iconSizes = {\n    small: 'w-4 h-4',\n    medium: 'w-5 h-5',\n    large: 'w-6 h-6',\n    xl: 'w-7 h-7'\n  };\n\n  return (\n    <motion.button\n      className={`${baseClasses} ${variants[variant]} ${sizes[size]}`}\n      onClick={handleClick}\n      disabled={disabled || loading}\n      whileHover={disabled || loading || !performanceConfig.enableAnimations ? {} : getAccessibleAnimation(buttonHover)}\n      whileTap={disabled || loading || !performanceConfig.enableAnimations ? {} : getAccessibleAnimation(buttonPress)}\n      {...props}\n    >\n      {loading ? (\n        <div className=\"flex items-center space-x-2\">\n          <motion.div\n            className={`border-2 border-current border-t-transparent rounded-full ${iconSizes[size]}`}\n            animate={{ rotate: 360 }}\n            transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}\n          />\n          <span>Loading...</span>\n        </div>\n      ) : (\n        <div className=\"flex items-center space-x-2\">\n          {icon && (\n            <motion.div\n              className={iconSizes[size]}\n              initial={{ scale: 0 }}\n              animate={{ scale: 1 }}\n              transition={{ delay: 0.1, type: 'spring', stiffness: 300 }}\n            >\n              {icon}\n            </motion.div>\n          )}\n          <span>{children}</span>\n        </div>\n      )}\n    </motion.button>\n  );\n};\n\n// Specialized button components\nexport const PrimaryButton = (props) => <EnhancedButton variant=\"primary\" {...props} />;\nexport const SecondaryButton = (props) => <EnhancedButton variant=\"secondary\" {...props} />;\nexport const SuccessButton = (props) => <EnhancedButton variant=\"success\" {...props} />;\nexport const DangerButton = (props) => <EnhancedButton variant=\"danger\" {...props} />;\nexport const GhostButton = (props) => <EnhancedButton variant=\"ghost\" {...props} />;\nexport const GlassmorphismButton = (props) => <EnhancedButton variant=\"glassmorphism\" {...props} />;\n\n// Quiz-specific buttons\nexport const QuizAnswerButton = ({\n  children,\n  isSelected = false,\n  isCorrect = null,\n  disabled = false,\n  onClick,\n  ...props\n}) => {\n  const getVariant = () => {\n    if (disabled && isCorrect === true) return 'success';\n    if (disabled && isCorrect === false) return 'danger';\n    if (isSelected) return 'primary';\n    return 'secondary';\n  };\n\n  return (\n    <EnhancedButton\n      variant={getVariant()}\n      onClick={onClick}\n      disabled={disabled}\n      className=\"w-full text-left justify-start p-4 min-h-[60px]\"\n      haptic={!disabled}\n      {...props}\n    >\n      <div className=\"flex items-center space-x-3 w-full\">\n        <div className={`\n          w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0\n          ${isSelected || disabled ? 'border-current' : 'border-gray-300'}\n        `}>\n          {isSelected && !disabled && (\n            <motion.div\n              className=\"w-3 h-3 bg-current rounded-full\"\n              initial={{ scale: 0 }}\n              animate={{ scale: 1 }}\n              transition={{ type: 'spring', stiffness: 300 }}\n            />\n          )}\n          {disabled && isCorrect === true && (\n            <motion.svg\n              className=\"w-4 h-4 text-current\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n              initial={{ scale: 0 }}\n              animate={{ scale: 1 }}\n              transition={{ type: 'spring', stiffness: 300 }}\n            >\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n            </motion.svg>\n          )}\n          {disabled && isCorrect === false && (\n            <motion.svg\n              className=\"w-4 h-4 text-current\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n              initial={{ scale: 0 }}\n              animate={{ scale: 1 }}\n              transition={{ type: 'spring', stiffness: 300 }}\n            >\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </motion.svg>\n          )}\n        </div>\n        <span className=\"flex-1\">{children}</span>\n      </div>\n    </EnhancedButton>\n  );\n};\n\n// Floating Action Button\nexport const FloatingActionButton = ({\n  children,\n  onClick,\n  className = '',\n  position = 'bottom-right',\n  ...props\n}) => {\n  const positions = {\n    'bottom-right': 'fixed bottom-6 right-6',\n    'bottom-left': 'fixed bottom-6 left-6',\n    'top-right': 'fixed top-6 right-6',\n    'top-left': 'fixed top-6 left-6'\n  };\n\n  return (\n    <motion.div\n      className={`${positions[position]} z-50`}\n      initial={{ scale: 0, opacity: 0 }}\n      animate={{ scale: 1, opacity: 1 }}\n      transition={{ type: 'spring', stiffness: 300, delay: 0.5 }}\n    >\n      <EnhancedButton\n        variant=\"primary\"\n        size=\"large\"\n        onClick={onClick}\n        className={`rounded-full shadow-2xl hover:shadow-3xl ${className}`}\n        {...props}\n      >\n        {children}\n      </EnhancedButton>\n    </motion.div>\n  );\n};\n\nexport default EnhancedButton;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\ErrorBoundary.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\ErrorFallback.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\GamingNavigation.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\GenericPathway.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'AnimatePresence' is defined but never used. Allowed unused vars must match /^React$/u.","line":2,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":33},{"ruleId":"no-unused-vars","severity":1,"message":"'questionService' is defined but never used. Allowed unused vars must match /^React$/u.","line":3,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":23},{"ruleId":"no-unused-vars","severity":1,"message":"'DotPointDetail' is defined but never used. Allowed unused vars must match /^React$/u.","line":6,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'hasAccessedAllContent' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":30,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":26},{"ruleId":"no-unused-vars","severity":1,"message":"'isQuizAccessible' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":31,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'selectedContent' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":38,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'setSelectedContent' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":38,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":45},{"ruleId":"no-unused-vars","severity":1,"message":"'submissionResult' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":99,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":99,"endColumn":27},{"ruleId":"no-unused-vars","severity":1,"message":"'renderContentButton' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":138,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":138,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport questionService from '../services/questionService';\r\nimport contentService from '../services/contentService';\r\nimport progressSyncService from '../services/progressSyncService';\r\nimport DotPointDetail from './DotPointDetail';\r\nimport DotPointDetailTabs from './DotPointDetailTabs';\r\nimport ErrorBoundary from './ErrorBoundary';\r\n\r\nconst GenericPathway = ({ \r\n  subject,           // 'biology' | 'chemistry'\r\n  moduleId,          // 'module-5' | 'module-6' etc.\r\n  pathwayData,       // Module pathway data structure\r\n  progressHook,      // Custom progress hook for the module\r\n  QuickQuizComponent,// Subject-specific quick quiz component\r\n  LongResponseComponent, // Subject-specific long response component\r\n  onBack,\r\n  colorScheme = { // Default color scheme, can be overridden\r\n    primary: 'purple',\r\n    secondary: 'indigo',\r\n    accent: 'blue'\r\n  }\r\n}) => {\r\n  const {\r\n    pathwayProgress,\r\n    loading,\r\n    trackContentAccess,\r\n    submitQuizAttempt,\r\n    isContentAccessible,\r\n    hasAccessedAllContent,\r\n    isQuizAccessible,\r\n    getDotPointStatus,\r\n    getPathwayStats\r\n  } = progressHook();\r\n\r\n  const [currentView, setCurrentView] = useState('pathway');\r\n  const [selectedDotPoint, setSelectedDotPoint] = useState(null);\r\n  const [selectedContent, setSelectedContent] = useState(null);\r\n  const [pathwayStats, setPathwayStats] = useState(null);\r\n\r\n  // Subject-specific configuration\r\n  const subjectConfig = {\r\n    biology: {\r\n      icon: 'BIO',\r\n      title: 'Biology',\r\n      gradient: 'from-green-500 to-blue-500'\r\n    },\r\n    chemistry: {\r\n      icon: 'CHEM',\r\n      title: 'Chemistry', \r\n      gradient: 'from-purple-500 to-indigo-500'\r\n    }\r\n  };\r\n\r\n  const config = subjectConfig[subject.toLowerCase()] || subjectConfig.biology;\r\n\r\n  useEffect(() => {\r\n    if (pathwayProgress) {\r\n      setPathwayStats(getPathwayStats());\r\n    }\r\n  }, [pathwayProgress, getPathwayStats]);\r\n\r\n  const handleContentAccess = async (dotPointId, contentType, contentId) => {\r\n    // Track locally first\r\n    const result = trackContentAccess(dotPointId, contentType, contentId);\r\n    \r\n    // Sync to backend services\r\n    try {\r\n      await contentService.trackContentAccess(\r\n        subject, \r\n        moduleId, \r\n        dotPointId, \r\n        contentType, \r\n        contentId\r\n      );\r\n      \r\n      await progressSyncService.syncContentAccess(\r\n        subject, \r\n        moduleId, \r\n        dotPointId, \r\n        contentType, \r\n        contentId\r\n      );\r\n    } catch (error) {\r\n      console.warn('Content access sync failed:', error);\r\n    }\r\n    \r\n    if (result?.allContentAccessed) {\r\n      setTimeout(() => {\r\n        alert(`${config.icon} All content accessed for ${dotPointId}! Quizzes are now unlocked.`);\r\n      }, 1000);\r\n    }\r\n    \r\n    setCurrentView('pathway');\r\n  };\r\n\r\n  const handleQuizComplete = async (results) => {\r\n    // Submit locally first\r\n    const submissionResult = submitQuizAttempt(\r\n      results.dotPointId,\r\n      results.quizType,\r\n      results.score,\r\n      results.totalQuestions || results.totalMarks,\r\n      results.timeSpent\r\n    );\r\n\r\n    // Sync to backend services\r\n    try {\r\n      await progressSyncService.syncQuizResults(\r\n        subject,\r\n        moduleId,\r\n        results.dotPointId,\r\n        results\r\n      );\r\n    } catch (error) {\r\n      console.warn('Quiz results sync failed:', error);\r\n    }\r\n\r\n\r\n    // Return to pathway view\r\n    setTimeout(() => {\r\n      setCurrentView('pathway');\r\n      setSelectedDotPoint(null);\r\n    }, 100);\r\n  };\r\n\r\n  const getDotPointData = (dotPointId) => {\r\n    for (const iq of Object.values(pathwayData.inquiryQuestions)) {\r\n      for (const dotPoint of Object.values(iq.dotPoints)) {\r\n        if (dotPoint.id === dotPointId) {\r\n          return dotPoint;\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const renderContentButton = (dotPointId, contentType, content) => {\r\n    const isAccessible = isContentAccessible(dotPointId);\r\n    const isAccessed = pathwayProgress?.contentAccess?.[dotPointId]?.[contentType] || false;\r\n\r\n    const contentIcons = {\r\n      podcast: 'Audio',\n      video: 'Video',\n      slides: 'Slides'\n    };\r\n\r\n    const contentTypeNames = {\r\n      podcast: 'Podcast',\r\n      video: 'Video',\r\n      slides: 'Slides'\r\n    };\r\n\r\n    return (\r\n      <button\r\n        key={contentType}\r\n        onClick={() => isAccessible ? handleContentAccess(dotPointId, contentType, content.id) : null}\r\n        disabled={!isAccessible}\r\n        className={`p-3 rounded-lg text-left transition-all ${\r\n          !isAccessible \r\n            ? 'bg-gray-100 text-gray-400 cursor-not-allowed'\r\n            : isAccessed \r\n            ? 'bg-green-50 border-2 border-green-200 text-green-700'\r\n            : `bg-${colorScheme.accent}-50 border-2 border-${colorScheme.accent}-200 text-${colorScheme.accent}-700 hover:bg-${colorScheme.accent}-100`\r\n        }`}\r\n      >\r\n        <div className=\"flex items-center space-x-2 mb-1\">\r\n          <span className=\"text-lg\">{contentIcons[contentType]}</span>\r\n          <span className=\"font-medium\">{contentTypeNames[contentType]}</span>\r\n                        {isAccessed && <span className=\"text-xs\">Done</span>}\n        </div>\r\n        <p className=\"text-xs text-gray-600\">{content.title}</p>\r\n        {contentType === 'podcast' && <p className=\"text-xs text-gray-500\">{content.duration} min</p>}\r\n        {contentType === 'video' && <p className=\"text-xs text-gray-500\">{content.duration} min</p>}\r\n        {contentType === 'slides' && <p className=\"text-xs text-gray-500\">{content.pages} pages</p>}\r\n      </button>\r\n    );\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className={`w-16 h-16 border-4 border-${colorScheme.primary}-500 border-t-transparent rounded-full animate-spin mb-4`}></div>\r\n          <p className=\"text-gray-600\">Loading {config.title} {pathwayData.name}...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Analytics view placeholder\r\n  if (currentView === 'analytics') {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"text-3xl font-semibold text-slate-800\">Learning Pathway</div>\n          <h2 className=\"text-2xl font-bold mb-2\">Analytics Coming Soon</h2>\r\n          <p className=\"text-gray-600 mb-4\">{config.title} analytics dashboard is in development.</p>\r\n          <button\r\n            onClick={() => setCurrentView('pathway')}\r\n            className={`px-6 py-3 bg-${colorScheme.primary}-500 text-white rounded-lg hover:bg-${colorScheme.primary}-600 transition-colors`}\r\n          >\r\n            Back to Pathway\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Dot Point Detail view - using new tabbed interface\r\n  if (currentView === 'dotpoint-detail' && selectedDotPoint) {\r\n    const dotPointData = getDotPointData(selectedDotPoint);\r\n\r\n    return (\r\n      <ErrorBoundary\r\n        title=\"Dotpoint Content Error\"\r\n        message=\"We couldn't load this dotpoint. Your progress is saved.\"\r\n        onReset={() => {\r\n          setSelectedDotPoint(null);\r\n          setCurrentView('pathway');\r\n        }}\r\n        onGoHome={() => setCurrentView('pathway')}\r\n      >\r\n        <DotPointDetailTabs\r\n          dotPointId={selectedDotPoint}\r\n          dotPointData={dotPointData}\r\n          onBack={() => {\r\n            setSelectedDotPoint(null);\r\n            setCurrentView('pathway');\r\n          }}\r\n          pathwayData={pathwayData}\r\n          progressHook={progressHook}\r\n        />\r\n      </ErrorBoundary>\r\n    );\r\n  }\r\n\r\n  // Quiz views\r\n  if (currentView === 'quick-quiz' && selectedDotPoint && QuickQuizComponent) {\r\n    return (\r\n      <QuickQuizComponent\r\n        dotPointId={selectedDotPoint}\r\n        onQuizComplete={handleQuizComplete}\r\n        onExit={() => setCurrentView('pathway')}\r\n        pathwayData={pathwayData}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (currentView === 'long-response' && selectedDotPoint && LongResponseComponent) {\r\n    return (\r\n      <LongResponseComponent\r\n        dotPointId={selectedDotPoint}\r\n        onQuizComplete={handleQuizComplete}\r\n        onBackToPathway={() => setCurrentView('pathway')}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50\">\r\n      {/* Header */}\r\n      <div className=\"bg-white/80 backdrop-blur-sm shadow-sm border-b border-white/50\">\r\n        <div className=\"px-4 py-4 flex items-center justify-between\">\r\n          <div className=\"flex items-center\">\r\n            <button\r\n              onClick={onBack}\r\n              className=\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors mr-3\"\r\n            >\r\n              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n              </svg>\r\n            </button>\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className={`w-10 h-10 bg-gradient-to-r ${config.gradient} rounded-full flex items-center justify-center text-white text-lg`}>\r\n                {config.icon}\r\n              </div>\r\n              <div>\r\n                <h1 className=\"text-xl font-bold text-gray-900\">{pathwayData.name}</h1>\r\n                <p className=\"text-sm text-gray-600\">Sequential Learning Pathway</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <button\r\n            onClick={() => setCurrentView('analytics')}\r\n            className={`p-2 text-${colorScheme.primary}-600 hover:text-${colorScheme.primary}-900 hover:bg-${colorScheme.primary}-100 rounded-full transition-colors`}\r\n            title=\"View Analytics\"\r\n          >\r\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"px-4 py-6 max-w-4xl mx-auto\">\r\n        {/* Overall Progress */}\r\n        {pathwayStats && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            className=\"bg-white/70 backdrop-blur-sm rounded-2xl p-6 border border-white/50 mb-6\"\r\n          >\r\n            <h2 className=\"font-semibold text-gray-900 mb-4\">Your Progress</h2>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n              <div className=\"text-center\">\r\n                <div className={`text-2xl font-bold text-${colorScheme.primary}-600`}>{pathwayStats.overallProgress}%</div>\r\n                <div className=\"text-sm text-gray-600\">Overall Progress</div>\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <div className={`text-2xl font-bold text-${colorScheme.secondary}-600`}>{pathwayStats.unlockedDotPoints}/{pathwayData.totalDotPoints}</div>\r\n                <div className=\"text-sm text-gray-600\">Dot Points Unlocked</div>\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <div className={`text-2xl font-bold text-${colorScheme.accent}-600`}>{pathwayStats.completedDotPoints}/{pathwayData.totalDotPoints}</div>\r\n                <div className=\"text-sm text-gray-600\">Completed</div>\r\n              </div>\r\n            </div>\r\n            <div className=\"w-full bg-gray-200 rounded-full h-3 mt-4\">\r\n              <div \r\n                className={`bg-gradient-to-r ${config.gradient} h-3 rounded-full transition-all duration-500`}\r\n                style={{ width: `${pathwayStats.overallProgress}%` }}\r\n              />\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n\r\n        {/* Dot Points Grid */}\r\n        <div className=\"space-y-8\">\r\n          {Object.entries(pathwayData.inquiryQuestions).map(([iqId, iq], iqIndex) => (\r\n            <motion.div\r\n              key={iqId}\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ delay: iqIndex * 0.1 }}\r\n              className=\"bg-white/70 backdrop-blur-sm rounded-2xl p-6 border border-white/50\"\r\n            >\r\n              <h3 className=\"font-bold text-lg text-gray-900 mb-2\">{iq.title}</h3>\r\n              <p className=\"text-gray-600 text-sm mb-6\">{iq.description}</p>\r\n\r\n              {/* Dot Point Tiles */}\r\n              <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n                {Object.entries(iq.dotPoints).map(([dotPointId, dotPoint], dpIndex) => {\r\n                  const status = getDotPointStatus(dotPointId);\r\n                  const isAccessible = isContentAccessible(dotPointId);\r\n\r\n                  return (\r\n                    <motion.div\r\n                      key={dotPointId}\r\n                      initial={{ opacity: 0, scale: 0.9 }}\r\n                      animate={{ opacity: 1, scale: 1 }}\r\n                      transition={{ delay: iqIndex * 0.1 + dpIndex * 0.05 }}\r\n                      onClick={() => {\r\n                        if (isAccessible) {\r\n                          setSelectedDotPoint(dotPointId);\r\n                          setCurrentView('dotpoint-detail');\r\n                        }\r\n                      }}\r\n                      className={`relative p-6 rounded-xl border-2 transition-all duration-300 ${\r\n                        status.status === 'completed'\r\n                          ? 'border-green-300 bg-green-50 hover:bg-green-100'\r\n                          : status.status === 'in_progress'\r\n                          ? `border-${colorScheme.accent}-300 bg-${colorScheme.accent}-50 hover:bg-${colorScheme.accent}-100`\r\n                          : status.status === 'available'\r\n                          ? `border-${colorScheme.primary}-300 bg-${colorScheme.primary}-50 hover:bg-${colorScheme.primary}-100 cursor-pointer transform hover:scale-105`\r\n                          : 'border-gray-300 bg-gray-100 opacity-75'\r\n                      } ${isAccessible ? 'hover:shadow-lg' : ''}`}\r\n                    >\r\n                      {/* Status Badge */}\r\n                      <div className=\"absolute top-4 right-4\">\r\n                        {status.status === 'completed' ? (\n                          <div className=\"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-xs text-white\">\n                            Done\n                          </div>\n                        ) : status.status === 'in_progress' ? (\n                          <div className={`w-8 h-8 bg-${colorScheme.accent}-500 rounded-full flex items-center justify-center text-xs text-white`}>\n                            Working\n                          </div>\n                        ) : !isAccessible ? (\n                          <div className=\"w-8 h-8 bg-gray-400 rounded-full flex items-center justify-center text-xs text-white\">\n                            Locked\n                          </div>\n                        ) : null}\n                      </div>\r\n\r\n                      {/* Main Content */}\r\n                      <div className=\"pr-12\">\r\n                        <div className=\"text-3xl mb-3\">{status.icon}</div>\r\n                        <h4 className=\"font-bold text-gray-900 text-lg mb-2\">{dotPoint.title}</h4>\r\n                        <p className=\"text-gray-600 text-sm mb-4\">{dotPoint.description}</p>\r\n\r\n                        {/* Progress Indicator */}\r\n                        <div className=\"mb-4\">\r\n                          <div className=\"flex items-center justify-between text-xs text-gray-600 mb-1\">\r\n                            <span>Progress</span>\r\n                            <span>{status.progress}%</span>\r\n                          </div>\r\n                          <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                            <div \r\n                              className={`h-2 rounded-full transition-all duration-500 ${\r\n                                status.status === 'completed' ? 'bg-green-500' :\r\n                                status.status === 'in_progress' ? `bg-${colorScheme.accent}-500` :\r\n                                status.status === 'available' ? `bg-${colorScheme.primary}-500` : 'bg-gray-400'\r\n                              }`}\r\n                              style={{ width: `${status.progress}%` }}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Action Hint */}\r\n                        <div className=\"text-center\">\r\n                          {status.status === 'completed' ? (\n                            <span className=\"text-green-600 text-sm font-medium\">Complete</span>\n                          ) : isAccessible ? (\r\n                            <span className={`text-${colorScheme.primary}-600 text-sm font-medium`}>Click to Start {config.icon}</span>\r\n                          ) : (\r\n                            <span className=\"text-gray-500 text-sm\">Locked</span>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Prerequisites hint for locked items */}\r\n                      {!isAccessible && dotPoint.prerequisites.length > 0 && (\r\n                        <div className=\"absolute bottom-2 left-2 right-2\">\r\n                          <p className=\"text-xs text-gray-500 text-center\">\r\n                            Complete: {dotPoint.prerequisites[dotPoint.prerequisites.length - 1]}\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n                    </motion.div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </motion.div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Success State */}\r\n        {pathwayStats?.overallProgress === 100 && (\n          <motion.div\n            initial={{ scale: 0.9, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            className={`bg-gradient-to-r ${config.gradient} text-white rounded-2xl p-8 text-center mt-6`}\n          >\n            <h2 className=\"text-2xl font-bold mb-2\">Pathway Complete</h2>\n            <p className=\"text-white/90\">\n              You have completed every section for {pathwayData.name}. Great work!\n            </p>\n          </motion.div>\n        )}\n\r\n        <div className=\"h-8\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GenericPathway;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\GuidedEssayBuilder.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'essayQuestion' is defined but never used. Allowed unused args must match /^_/u.","line":21,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useGamificationContext } from '../context/GamificationContext';\nimport Confetti from './Confetti';\n\n/**\n * GuidedEssayBuilder - Progressive disclosure essay writing system for HSC Biology\n *\n * Features:\n * - Step-by-step scaffolding (Topic -> Claim -> Evidence -> Explain -> Link)\n * - Real-time word count and feedback\n * - Hint system for each step\n * - Auto-save to localStorage\n * - 150 XP reward on completion\n * - Mobile-responsive design\n */\n\nconst GuidedEssayBuilder = ({\n  dotPointId,\n  dotPointData,\n  essayQuestion,\n  onComplete,\n  onBack\n}) => {\n  const { addXP } = useGamificationContext();\n\n  // Essay structure steps (HSC Biology TEEL format)\n  const steps = [\n    {\n      id: 'topic',\n      title: 'Topic Sentence',\n      icon: 'Topic',\n      instruction: 'Write a clear topic sentence that introduces the main idea of your paragraph.',\n      hint: 'Start with: \"This dotpoint explores...\" or \"The key concept is...\"',\n      minWords: 15,\n      maxWords: 40,\n      placeholder: 'Example: This dotpoint explores the mechanisms of sexual and asexual reproduction in organisms...'\n    },\n    {\n      id: 'claim',\n      title: 'Make Your Claim',\n      icon: 'Claim',\n      instruction: 'State your main argument or point clearly.',\n      hint: 'What is the most important thing students need to understand about this concept?',\n      minWords: 20,\n      maxWords: 50,\n      placeholder: 'Example: Sexual reproduction involves the fusion of gametes, while asexual reproduction produces genetically identical offspring...'\n    },\n    {\n      id: 'evidence',\n      title: 'Provide Evidence',\n      icon: 'Evidence',\n      instruction: 'Give specific examples, data, or biological processes that support your claim.',\n      hint: 'Use scientific terminology. Include specific examples from your learning.',\n      minWords: 40,\n      maxWords: 100,\n      placeholder: 'Example: In external fertilization, organisms like fish release gametes into water where fusion occurs. This requires large numbers of gametes due to environmental factors...'\n    },\n    {\n      id: 'explain',\n      title: 'Explain the Science',\n      icon: 'Explain',\n      instruction: 'Explain HOW and WHY the evidence supports your claim. Link to biological concepts.',\n      hint: 'Connect to broader concepts: genetics, evolution, survival, adaptation.',\n      minWords: 40,\n      maxWords: 100,\n      placeholder: 'Example: This strategy maximizes reproductive success because the aquatic environment facilitates gamete dispersal, though it requires energy investment in producing many gametes to compensate for low fertilization rates...'\n    },\n    {\n      id: 'link',\n      title: 'Link to Syllabus',\n      icon: 'Link',\n      instruction: 'Connect back to the syllabus dotpoint and summarize the significance.',\n      hint: 'How does this relate to the inquiry question? Why is it important?',\n      minWords: 20,\n      maxWords: 50,\n      placeholder: 'Example: Understanding these reproductive strategies is essential for comparing how different organisms ensure species survival and genetic diversity...'\n    }\n  ];\n\n  const [currentStepIndex, setCurrentStepIndex] = useState(0);\n  const [essayParts, setEssayParts] = useState({\n    topic: '',\n    claim: '',\n    evidence: '',\n    explain: '',\n    link: ''\n  });\n  const [showHint, setShowHint] = useState({});\n  const [timeSpent, setTimeSpent] = useState(0);\n  const [startTime] = useState(Date.now());\n  const [showConfetti, setShowConfetti] = useState(false);\n  const [isComplete, setIsComplete] = useState(false);\n\n  const currentStep = steps[currentStepIndex];\n  const currentText = essayParts[currentStep.id] || '';\n  const wordCount = currentText.trim().split(/\\s+/).filter(w => w.length > 0).length;\n  const isStepValid = wordCount >= currentStep.minWords && wordCount <= currentStep.maxWords;\n  const progress = ((currentStepIndex + (isStepValid ? 1 : 0)) / steps.length) * 100;\n\n  // Auto-save to localStorage\n  useEffect(() => {\n    const timer = setInterval(() => {\n      localStorage.setItem(`essay-draft-${dotPointId}`, JSON.stringify({\n        essayParts,\n        currentStepIndex,\n        lastSaved: new Date().toISOString()\n      }));\n    }, 5000);\n\n    return () => clearInterval(timer);\n  }, [essayParts, currentStepIndex, dotPointId]);\n\n  // Load saved draft\n  useEffect(() => {\n    const saved = localStorage.getItem(`essay-draft-${dotPointId}`);\n    if (saved) {\n      try {\n        const { essayParts: savedParts, currentStepIndex: savedIndex } = JSON.parse(saved);\n        setEssayParts(savedParts);\n        setCurrentStepIndex(savedIndex);\n      } catch (error) {\n        console.error('Error loading draft:', error);\n      }\n    }\n  }, [dotPointId]);\n\n  // Time tracking\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setTimeSpent(Math.floor((Date.now() - startTime) / 1000));\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [startTime]);\n\n  const handleTextChange = (text) => {\n    setEssayParts({\n      ...essayParts,\n      [currentStep.id]: text\n    });\n  };\n\n  const handleNext = () => {\n    if (isStepValid) {\n      if (currentStepIndex < steps.length - 1) {\n        setCurrentStepIndex(currentStepIndex + 1);\n        setShowHint({});\n      } else {\n        handleComplete();\n      }\n    }\n  };\n\n  const handleBack = () => {\n    if (currentStepIndex > 0) {\n      setCurrentStepIndex(currentStepIndex - 1);\n    }\n  };\n\n  const handleComplete = async () => {\n    const fullEssay = steps.map(step => essayParts[step.id]).join('\\n\\n');\n    const totalWords = fullEssay.trim().split(/\\s+/).filter(w => w.length > 0).length;\n\n    setIsComplete(true);\n    setShowConfetti(true);\n\n    // Award XP\n    await addXP(150, `Completed essay for ${dotPointId}`);\n\n    // Save completed essay\n    const essayData = {\n      essayParts,\n      fullEssay,\n      totalWords,\n      timeSpent,\n      completedAt: new Date().toISOString(),\n      score: 85 // Mock score for now\n    };\n\n    localStorage.setItem(`essay-completed-${dotPointId}`, JSON.stringify(essayData));\n    localStorage.setItem(`essay-attempts-${dotPointId}`, JSON.stringify({\n      attempts: 1,\n      bestScore: 85\n    }));\n\n    // Clear draft\n    localStorage.removeItem(`essay-draft-${dotPointId}`);\n\n    setTimeout(() => {\n      onComplete({\n        passed: true,\n        score: 85,\n        essay: fullEssay,\n        timeSpent\n      });\n    }, 3000);\n  };\n\n  const toggleHint = (stepId) => {\n    setShowHint({\n      ...showHint,\n      [stepId]: !showHint[stepId]\n    });\n  };\n\n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const getWordCountColor = () => {\n    if (wordCount < currentStep.minWords) return 'text-orange-600';\n    if (wordCount > currentStep.maxWords) return 'text-red-600';\n    return 'text-green-600';\n  };\n\n  const getWordCountMessage = () => {\n    if (wordCount < currentStep.minWords) {\n      return `${currentStep.minWords - wordCount} more words needed`;\n    }\n    if (wordCount > currentStep.maxWords) {\n      return `${wordCount - currentStep.maxWords} words over limit!`;\n    }\n    return 'Perfect!';\n  };\n\n  if (isComplete) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 flex items-center justify-center p-4 md:p-6\">\n        <Confetti show={showConfetti} onComplete={() => setShowConfetti(false)} />\n        <motion.div\n          initial={{ scale: 0.9, opacity: 0 }}\n          animate={{ scale: 1, opacity: 1 }}\n          className=\"bg-white rounded-2xl p-6 md:p-8 max-w-md text-center shadow-lg\"\n        >\n        <div className=\"mb-4 text-3xl font-semibold\">Celebration</div>\n          <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">Essay Complete!</h3>\n          <p className=\"text-gray-600 mb-6\">\n            Excellent work! You&apos;ve constructed a well-structured HSC response.\n          </p>\n\n          <div className=\"grid grid-cols-2 gap-4 mb-6\">\n            <div className=\"bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg p-4 border border-yellow-200\">\n              <div className=\"text-2xl font-bold text-orange-600\">+150 XP</div>\n              <div className=\"text-sm text-gray-600\">Earned</div>\n            </div>\n            <div className=\"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4 border border-blue-200\">\n              <div className=\"text-2xl font-bold text-purple-600\">{formatTime(timeSpent)}</div>\n              <div className=\"text-sm text-gray-600\">Time</div>\n            </div>\n          </div>\n\n          <div className=\"text-left bg-gray-50 rounded-lg p-4 mb-6\">\n            <h4 className=\"font-bold text-gray-900 mb-2\">Essay preview</h4>\n            <p className=\"text-sm text-gray-700 line-clamp-4\">\n              {Object.values(essayParts).join(' ').substring(0, 200)}...\n            </p>\n            <p className=\"text-xs text-gray-500 mt-2\">\n              Total: {Object.values(essayParts).join(' ').split(/\\s+/).filter(w => w.length > 0).length} words\n            </p>\n          </div>\n\n          <motion.button\n            whileHover={{ scale: 1.02 }}\n            whileTap={{ scale: 0.98 }}\n            onClick={onBack}\n            className=\"w-full py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white font-bold rounded-lg hover:from-green-600 hover:to-blue-600 transition-all\"\n          >\n            Continue\n          </motion.button>\n        </motion.div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50\">\n      {/* Header */}\n      <div className=\"sticky top-0 z-30 bg-white/90 backdrop-blur-md border-b border-white/50 shadow-sm\">\n        <div className=\"px-4 py-3 md:py-4\">\n          <div className=\"flex items-center justify-between mb-3\">\n            <button\n              onClick={onBack}\n              className=\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors\"\n            >\n              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n              </svg>\n            </button>\n\n            <div className=\"flex-1 mx-4\">\n              <h2 className=\"font-bold text-gray-900 text-sm md:text-base\">Guided Essay Builder</h2>\n              <p className=\"text-xs text-gray-600\">{dotPointData.title}</p>\n            </div>\n\n            <div className=\"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full\">\n              Time spent: {formatTime(timeSpent)}\n            </div>\n          </div>\n\n          {/* Progress Bar */}\n          <div className=\"mb-2\">\n            <div className=\"flex items-center justify-between text-xs text-gray-600 mb-1\">\n              <span>Progress</span>\n              <span>{Math.round(progress)}%</span>\n            </div>\n            <div className=\"w-full bg-gray-200 rounded-full h-2.5\">\n              <motion.div\n                className=\"h-2.5 rounded-full bg-gradient-to-r from-purple-500 to-pink-500\"\n                initial={{ width: 0 }}\n                animate={{ width: `${progress}%` }}\n                transition={{ duration: 0.5 }}\n              />\n            </div>\n          </div>\n\n          {/* Step Indicator */}\n          <div className=\"flex items-center justify-center space-x-2\">\n            {steps.map((step, index) => (\n              <div\n                key={step.id}\n                className={`flex items-center ${index < steps.length - 1 ? 'flex-1' : ''}`}\n              >\n                <div\n                  className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-all ${\n                    index < currentStepIndex\n                      ? 'bg-green-500 text-white'\n                      : index === currentStepIndex\n                      ? 'bg-purple-500 text-white ring-4 ring-purple-200'\n                      : 'bg-gray-200 text-gray-500'\n                  }`}\n                >\n                  {index < currentStepIndex ? 'Complete' : step.icon}\n                </div>\n                {index < steps.length - 1 && (\n                  <div className={`flex-1 h-1 mx-1 ${index < currentStepIndex ? 'bg-green-500' : 'bg-gray-200'}`} />\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"px-4 py-6 max-w-3xl mx-auto\">\n        <AnimatePresence mode=\"wait\">\n          <motion.div\n            key={currentStep.id}\n            initial={{ opacity: 0, x: 20 }}\n            animate={{ opacity: 1, x: 0 }}\n            exit={{ opacity: 0, x: -20 }}\n            transition={{ duration: 0.3 }}\n          >\n            {/* Step Card */}\n            <div className=\"bg-white rounded-2xl p-6 shadow-lg mb-6\">\n              <div className=\"flex items-center space-x-3 mb-4\">\n                <div className=\"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-2xl\">\n                  {currentStep.emoji}\n                </div>\n                <div>\n                  <h3 className=\"font-bold text-lg text-gray-900\">{currentStep.title}</h3>\n                  <p className=\"text-sm text-gray-600\">Step {currentStepIndex + 1} of {steps.length}</p>\n                </div>\n              </div>\n\n              <p className=\"text-gray-700 mb-4\">{currentStep.instruction}</p>\n\n              {/* Hint Button */}\n              <button\n                onClick={() => toggleHint(currentStep.id)}\n                className=\"mb-4 text-sm text-purple-600 hover:text-purple-800 font-medium flex items-center space-x-1\"\n              >\n                <span>Hint</span>\n                <span>{showHint[currentStep.id] ? 'Hide' : 'Show'} Hint</span>\n              </button>\n\n              {/* Hint Box */}\n              <AnimatePresence>\n                {showHint[currentStep.id] && (\n                  <motion.div\n                    initial={{ opacity: 0, height: 0 }}\n                    animate={{ opacity: 1, height: 'auto' }}\n                    exit={{ opacity: 0, height: 0 }}\n                    className=\"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4 mb-4\"\n                  >\n                    <p className=\"text-sm text-blue-900\">{currentStep.hint}</p>\n                  </motion.div>\n                )}\n              </AnimatePresence>\n\n              {/* Text Area */}\n              <textarea\n                value={currentText}\n                onChange={(e) => handleTextChange(e.target.value)}\n                placeholder={currentStep.placeholder}\n                className=\"w-full h-48 md:h-64 p-4 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all resize-none text-gray-900\"\n              />\n\n              {/* Word Count */}\n              <div className=\"flex items-center justify-between mt-3\">\n                <div className=\"text-sm\">\n                  <span className={`font-bold ${getWordCountColor()}`}>{wordCount}</span>\n                  <span className=\"text-gray-600\"> / {currentStep.minWords}-{currentStep.maxWords} words</span>\n                </div>\n                <span className={`text-sm font-medium ${getWordCountColor()}`}>\n                  {getWordCountMessage()}\n                </span>\n              </div>\n            </div>\n\n            {/* Navigation Buttons */}\n            <div className=\"flex space-x-4\">\n              {currentStepIndex > 0 && (\n                <motion.button\n                  whileHover={{ scale: 1.02 }}\n                  whileTap={{ scale: 0.98 }}\n                  onClick={handleBack}\n                  className=\"flex-1 py-3 bg-gray-200 text-gray-700 font-bold rounded-lg hover:bg-gray-300 transition-all\"\n                >\n          Previous\n                </motion.button>\n              )}\n              <motion.button\n                whileHover={isStepValid ? { scale: 1.02 } : {}}\n                whileTap={isStepValid ? { scale: 0.98 } : {}}\n                onClick={handleNext}\n                disabled={!isStepValid}\n                className={`flex-1 py-3 font-bold rounded-lg transition-all ${\n                  isStepValid\n                    ? 'bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:from-purple-600 hover:to-pink-600'\n                    : 'bg-gray-200 text-gray-400 cursor-not-allowed'\n                }`}\n              >\n                {currentStepIndex === steps.length - 1 ? 'Submit essay' : 'Next'}\n              </motion.button>\n            </div>\n\n            {/* Auto-save Indicator */}\n            <p className=\"text-center text-xs text-gray-500 mt-4\">\n              Auto-saving draft...\n            </p>\n          </motion.div>\n        </AnimatePresence>\n      </div>\n    </div>\n  );\n};\n\nexport default GuidedEssayBuilder;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\Icon.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\Input.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\LeaderboardSystem.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadLeaderboardData'. Either include it or remove the dependency array.","line":31,"column":6,"nodeType":"ArrayExpression","endLine":31,"endColumn":40,"suggestions":[{"desc":"Update the dependencies array to be: [selectedPeriod, selectedCategory, loadLeaderboardData]","fix":{"range":[975,1009],"text":"[selectedPeriod, selectedCategory, loadLeaderboardData]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport './LeaderboardSystem.css';\r\n\r\nconst LeaderboardSystem = ({ onClose, currentUser }) => {\r\n  const [selectedPeriod, setSelectedPeriod] = useState('week');\r\n  const [selectedCategory, setSelectedCategory] = useState('overall');\r\n  const [leaderboardData, setLeaderboardData] = useState([]);\r\n  const [currentUserRank, setCurrentUserRank] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const periods = {\r\n    day: ' Today',\r\n    week: ' This Week',\r\n    month: ' This Month',\r\n    alltime: ' All Time'\r\n  };\r\n\r\n  const categories = {\r\n    overall: ' Overall Score',\r\n    streak: ' Study Streak',\r\n    questions: ' Questions Answered',\r\n    speed: ' Speed Champion',\r\n    accuracy: ' Accuracy Master',\r\n    xp: ' Experience Points',\r\n    achievements: ' Achievement Hunter'\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadLeaderboardData();\r\n  }, [selectedPeriod, selectedCategory]);\r\n\r\n  const loadLeaderboardData = async () => {\r\n    setLoading(true);\r\n    \r\n    try {\r\n      // Simulate API call with mock data\r\n      await new Promise(resolve => setTimeout(resolve, 800));\r\n      \r\n      const mockData = generateMockLeaderboardData();\r\n      setLeaderboardData(mockData);\r\n      \r\n      // Find current user rank\r\n      const userRank = mockData.findIndex(user => user.id === currentUser?.id) + 1;\r\n      setCurrentUserRank(userRank > 0 ? userRank : null);\r\n      \r\n    } catch (error) {\r\n      console.error('Error loading leaderboard:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const generateMockLeaderboardData = () => {\r\n    const names = [\r\n      'Alex Chen', 'Sarah Kim', 'Michael Torres', 'Emma Watson', 'James Park',\r\n      'Sophie Liu', 'David Rodriguez', 'Maya Patel', 'Ryan Zhang', 'Isabella Martinez',\r\n      'Ethan Brown', 'Ava Singh', 'Noah Thompson', 'Mia Johnson', 'Lucas Davis',\r\n      'Chloe Wilson', 'Mason Lee', 'Grace Taylor', 'Logan Anderson', 'Zoe White',\r\n      'Owen Clark', 'Lily Hall', 'Carter Lewis', 'Ruby Walker', 'Hunter Young'\r\n    ];\r\n    \r\n    const schools = [\r\n      'Sydney Grammar', 'North Sydney Girls', 'James Ruse', 'Baulkham Hills',\r\n      'Hornsby Girls', 'Knox Grammar', 'Abbotsleigh', 'St Ignatius',\r\n      'Pymble Ladies', 'Cherrybrook Tech', 'Carlingford High', 'Epping Boys'\r\n    ];\r\n\r\n    const avatars = [\r\n      '', '', '', '', '', '', '', '', '', '',\r\n      '', '', '', '', '', '', '', '', '', ''\r\n    ];\r\n\r\n    return names.map((name, index) => {\r\n      const baseScore = Math.max(50, 1000 - index * 35 + Math.random() * 50);\r\n      return {\r\n        id: `user_${index}`,\r\n        name: name,\r\n        avatar: avatars[index % avatars.length],\r\n        school: schools[index % schools.length],\r\n        score: Math.round(baseScore),\r\n        rank: index + 1,\r\n        change: Math.floor(Math.random() * 21) - 10, // -10 to +10\r\n        stats: {\r\n          questionsAnswered: Math.floor(Math.random() * 500) + 100,\r\n          studyStreak: Math.floor(Math.random() * 30) + 1,\r\n          accuracy: Math.floor(Math.random() * 30) + 70,\r\n          averageSpeed: Math.floor(Math.random() * 20) + 15,\r\n          totalXP: Math.floor(Math.random() * 2000) + 500,\r\n          achievements: Math.floor(Math.random() * 20) + 5,\r\n          timeStudied: Math.floor(Math.random() * 100) + 20,\r\n          modulesCompleted: Math.floor(Math.random() * 8) + 1\r\n        },\r\n        badges: generateUserBadges(),\r\n        isOnline: Math.random() > 0.7,\r\n        lastActive: new Date(Date.now() - Math.random() * 7 * 24 * 60 * 60 * 1000)\r\n      };\r\n    });\r\n  };\r\n\r\n  const generateUserBadges = () => {\r\n    const allBadges = [\r\n      { icon: '', name: 'Hot Streak', color: '#ef4444' },\r\n      { icon: '', name: 'Sharpshooter', color: '#10b981' },\r\n      { icon: '', name: 'Speed Demon', color: '#f59e0b' },\r\n      { icon: '', name: 'Big Brain', color: '#8b5cf6' },\r\n      { icon: '', name: 'Champion', color: '#fbbf24' },\r\n      { icon: '', name: 'Diamond', color: '#06b6d4' },\r\n      { icon: '', name: 'Winner', color: '#84cc16' },\r\n      { icon: '', name: 'Rising Star', color: '#ec4899' }\r\n    ];\r\n    \r\n    const badgeCount = Math.floor(Math.random() * 4) + 1;\r\n    return allBadges.sort(() => 0.5 - Math.random()).slice(0, badgeCount);\r\n  };\r\n\r\n  const getRankIcon = (rank) => {\r\n    if (rank === 1) return '';\r\n    if (rank === 2) return '';\r\n    if (rank === 3) return '';\r\n    return `#${rank}`;\r\n  };\r\n\r\n  const getRankColor = (rank) => {\r\n    if (rank === 1) return '#fbbf24';\r\n    if (rank === 2) return '#94a3b8';\r\n    if (rank === 3) return '#cd7c0f';\r\n    return '#6b7280';\r\n  };\r\n\r\n  const getChangeIcon = (change) => {\r\n    if (change > 0) return { icon: '', color: '#10b981', text: `+${change}` };\r\n    if (change < 0) return { icon: '', color: '#ef4444', text: change };\r\n    return { icon: '', color: '#6b7280', text: '0' };\r\n  };\r\n\r\n  const getScoreForCategory = (user, category) => {\r\n    switch (category) {\r\n      case 'overall': return user.score;\r\n      case 'streak': return user.stats.studyStreak;\r\n      case 'questions': return user.stats.questionsAnswered;\r\n      case 'speed': return user.stats.averageSpeed;\r\n      case 'accuracy': return user.stats.accuracy;\r\n      case 'xp': return user.stats.totalXP;\r\n      case 'achievements': return user.stats.achievements;\r\n      default: return user.score;\r\n    }\r\n  };\r\n\r\n  const getScoreUnit = (category) => {\r\n    switch (category) {\r\n      case 'overall': return 'pts';\r\n      case 'streak': return 'days';\r\n      case 'questions': return 'questions';\r\n      case 'speed': return 'sec avg';\r\n      case 'accuracy': return '% accuracy';\r\n      case 'xp': return 'XP';\r\n      case 'achievements': return 'unlocked';\r\n      default: return 'pts';\r\n    }\r\n  };\r\n\r\n  const sortedData = [...leaderboardData].sort((a, b) => {\r\n    const scoreA = getScoreForCategory(a, selectedCategory);\r\n    const scoreB = getScoreForCategory(b, selectedCategory);\r\n    \r\n    // For speed, lower is better\r\n    if (selectedCategory === 'speed') {\r\n      return scoreA - scoreB;\r\n    }\r\n    \r\n    return scoreB - scoreA;\r\n  }).map((user, index) => ({ ...user, rank: index + 1 }));\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"leaderboard-overlay\">\r\n        <div className=\"leaderboard-modal\">\r\n          <div className=\"loading-container\">\r\n            <div className=\"loading-spinner\"></div>\r\n            <h3>Loading Leaderboard...</h3>\r\n            <p>Fetching the latest rankings</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"leaderboard-overlay\">\r\n      <motion.div\r\n        initial={{ opacity: 0, scale: 0.9 }}\r\n        animate={{ opacity: 1, scale: 1 }}\r\n        exit={{ opacity: 0, scale: 0.9 }}\r\n        className=\"leaderboard-modal\"\r\n      >\r\n        <header className=\"leaderboard-header\">\r\n          <div className=\"header-content\">\r\n            <h1> Leaderboard</h1>\r\n            <button onClick={onClose} className=\"close-button\">\r\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n          \r\n          <div className=\"leaderboard-controls\">\r\n            <div className=\"period-selector\">\r\n              {Object.entries(periods).map(([key, label]) => (\r\n                <button\r\n                  key={key}\r\n                  onClick={() => setSelectedPeriod(key)}\r\n                  className={`period-button ${selectedPeriod === key ? 'active' : ''}`}\r\n                >\r\n                  {label}\r\n                </button>\r\n              ))}\r\n            </div>\r\n            \r\n            <div className=\"category-selector\">\r\n              <select\r\n                value={selectedCategory}\r\n                onChange={(e) => setSelectedCategory(e.target.value)}\r\n                className=\"category-select\"\r\n              >\r\n                {Object.entries(categories).map(([key, label]) => (\r\n                  <option key={key} value={key}>{label}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        {currentUserRank && (\r\n          <div className=\"current-user-rank\">\r\n            <div className=\"rank-info\">\r\n              <span className=\"rank-position\">Your Rank: {getRankIcon(currentUserRank)}</span>\r\n              <span className=\"rank-score\">\r\n                {getScoreForCategory(currentUser, selectedCategory)} {getScoreUnit(selectedCategory)}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"podium-section\">\r\n          {sortedData.slice(0, 3).map((user, index) => (\r\n            <motion.div\r\n              key={user.id}\r\n              initial={{ opacity: 0, y: 50 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ delay: index * 0.1 }}\r\n              className={`podium-user podium-${index + 1}`}\r\n            >\r\n              <div className=\"podium-rank\">\r\n                <span className=\"rank-icon\">{getRankIcon(index + 1)}</span>\r\n              </div>\r\n              \r\n              <div className=\"podium-avatar\">\r\n                <div className=\"avatar-container\">\r\n                  <span className=\"avatar\">{user.avatar}</span>\r\n                  {user.isOnline && <div className=\"online-indicator\"></div>}\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"podium-info\">\r\n                <h3 className=\"user-name\">{user.name}</h3>\r\n                <p className=\"user-school\">{user.school}</p>\r\n                <div className=\"user-score\">\r\n                  <span className=\"score-value\">\r\n                    {getScoreForCategory(user, selectedCategory)}\r\n                  </span>\r\n                  <span className=\"score-unit\">{getScoreUnit(selectedCategory)}</span>\r\n                </div>\r\n                \r\n                <div className=\"user-badges\">\r\n                  {user.badges.slice(0, 3).map((badge, badgeIndex) => (\r\n                    <div\r\n                      key={badgeIndex}\r\n                      className=\"badge\"\r\n                      style={{ backgroundColor: badge.color }}\r\n                      title={badge.name}\r\n                    >\r\n                      {badge.icon}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </motion.div>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"leaderboard-list\">\r\n          <div className=\"list-header\">\r\n            <span>Rank</span>\r\n            <span>Student</span>\r\n            <span>Score</span>\r\n            <span>Change</span>\r\n          </div>\r\n          \r\n          <div className=\"list-content\">\r\n            <AnimatePresence>\r\n              {sortedData.slice(3).map((user, index) => (\r\n                <motion.div\r\n                  key={user.id}\r\n                  initial={{ opacity: 0, x: -20 }}\r\n                  animate={{ opacity: 1, x: 0 }}\r\n                  exit={{ opacity: 0, x: 20 }}\r\n                  transition={{ delay: index * 0.05 }}\r\n                  className={`leaderboard-row ${user.id === currentUser?.id ? 'current-user' : ''}`}\r\n                >\r\n                  <div className=\"row-rank\">\r\n                    <span \r\n                      className=\"rank-number\"\r\n                      style={{ color: getRankColor(user.rank) }}\r\n                    >\r\n                      #{user.rank}\r\n                    </span>\r\n                  </div>\r\n                  \r\n                  <div className=\"row-user\">\r\n                    <div className=\"user-avatar\">\r\n                      <span className=\"avatar\">{user.avatar}</span>\r\n                      {user.isOnline && <div className=\"online-indicator\"></div>}\r\n                    </div>\r\n                    <div className=\"user-details\">\r\n                      <span className=\"name\">{user.name}</span>\r\n                      <span className=\"school\">{user.school}</span>\r\n                    </div>\r\n                    <div className=\"user-badges-small\">\r\n                      {user.badges.slice(0, 2).map((badge, badgeIndex) => (\r\n                        <div\r\n                          key={badgeIndex}\r\n                          className=\"badge-small\"\r\n                          style={{ backgroundColor: badge.color }}\r\n                          title={badge.name}\r\n                        >\r\n                          {badge.icon}\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"row-score\">\r\n                    <span className=\"score-value\">\r\n                      {getScoreForCategory(user, selectedCategory)}\r\n                    </span>\r\n                    <span className=\"score-unit\">{getScoreUnit(selectedCategory)}</span>\r\n                  </div>\r\n                  \r\n                  <div className=\"row-change\">\r\n                    <div \r\n                      className=\"change-indicator\"\r\n                      style={{ color: getChangeIcon(user.change).color }}\r\n                    >\r\n                      <span className=\"change-icon\">{getChangeIcon(user.change).icon}</span>\r\n                      <span className=\"change-value\">{getChangeIcon(user.change).text}</span>\r\n                    </div>\r\n                  </div>\r\n                </motion.div>\r\n              ))}\r\n            </AnimatePresence>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"leaderboard-footer\">\r\n          <div className=\"competitive-stats\">\r\n            <div className=\"stat\">\r\n              <span className=\"stat-label\">Total Competitors</span>\r\n              <span className=\"stat-value\">{sortedData.length}</span>\r\n            </div>\r\n            <div className=\"stat\">\r\n              <span className=\"stat-label\">Average Score</span>\r\n              <span className=\"stat-value\">\r\n                {Math.round(sortedData.reduce((sum, user) => sum + getScoreForCategory(user, selectedCategory), 0) / sortedData.length)}\r\n                {' '}{getScoreUnit(selectedCategory)}\r\n              </span>\r\n            </div>\r\n            <div className=\"stat\">\r\n              <span className=\"stat-label\">Top Score</span>\r\n              <span className=\"stat-value\">\r\n                {getScoreForCategory(sortedData[0], selectedCategory)}\r\n                {' '}{getScoreUnit(selectedCategory)}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LeaderboardSystem;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\LearnPage.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'sections' logical expression could make the dependencies of useEffect Hook (at line 110) change on every render. To fix this, wrap the initialization of 'sections' in its own useMemo() Hook.","line":72,"column":9,"nodeType":"VariableDeclarator","endLine":72,"endColumn":49},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'sections' logical expression could make the dependencies of useCallback Hook (at line 188) change on every render. To fix this, wrap the initialization of 'sections' in its own useMemo() Hook.","line":72,"column":9,"nodeType":"VariableDeclarator","endLine":72,"endColumn":49},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleAllSectionsComplete'. Either include it or remove the dependency array.","line":122,"column":6,"nodeType":"ArrayExpression","endLine":122,"endColumn":44,"suggestions":[{"desc":"Update the dependencies array to be: [sections, completedIds, bonusAwarded, handleAllSectionsComplete]","fix":{"range":[3389,3427],"text":"[sections, completedIds, bonusAwarded, handleAllSectionsComplete]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'goToNextSection'. Either include it or remove the dependency array.","line":174,"column":6,"nodeType":"ArrayExpression","endLine":174,"endColumn":66,"suggestions":[{"desc":"Update the dependencies array to be: [currentSection, completedIds, totalXP, saveProgress, goToNextSection, addXP]","fix":{"range":[4841,4901],"text":"[currentSection, completedIds, totalXP, saveProgress, goToNextSection, addXP]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useCallback, useEffect, useMemo, useState } from 'react'\nimport { motion, AnimatePresence } from 'framer-motion'\nimport { useGamificationContext } from '../context/GamificationContext'\nimport Confetti from './Confetti'\nimport ClickToMatchFlashcards from './ClickToMatchFlashcards'\n\nconst STORAGE_KEYS = {\n  progress: (dotPointId) => `learn-progress:${dotPointId}`,\n  notes: (dotPointId) => `learn-notes:${dotPointId}`,\n}\n\nconst SECTION_ICONS = {\n  video: 'VIDEO',\n  'interactive-cards': 'CARDS',\n  podcast: 'AUDIO',\n  flashcards: 'FLASH',\n  'worked-example': 'EXAMPLE',\n  practice: 'PRACTICE',\n  notes: 'NOTES',\n}\n\nconst CompletionBadge = ({ message, xp }) => (\n  <motion.div\n    initial={{ opacity: 0, scale: 0.95 }}\n    animate={{ opacity: 1, scale: 1 }}\n    className=\"mt-6 w-full max-w-sm mx-auto bg-white rounded-2xl shadow-lg border border-green-200 p-6 text-center\"\n  >\n    <div className=\"text-3xl mb-2\"></div>\n    <div className=\"text-lg font-semibold text-gray-900\">{message}</div>\n    {typeof xp === 'number' && (\n      <div className=\"mt-2 text-sm font-medium text-green-600\">+{xp} XP</div>\n    )}\n  </motion.div>\n);\n\nconst DEFAULT_SECTION_XP = 15\n\nconst safeParse = (value, fallback) => {\n  try {\n    return value ? JSON.parse(value) : fallback\n  } catch {\n    return fallback\n  }\n}\n\nconst useStoredNotes = (dotPointId) => {\n  const storageKey = STORAGE_KEYS.notes(dotPointId)\n  const [notes, setNotes] = useState('')\n\n  useEffect(() => {\n    const storedValue = localStorage.getItem(storageKey)\n    if (typeof storedValue === 'string') {\n      setNotes(storedValue)\n    }\n  }, [storageKey])\n\n  const updateNotes = (value) => {\n    setNotes(value)\n    localStorage.setItem(storageKey, value)\n  }\n\n  return [notes, updateNotes]\n}\n\nconst LearnPage = ({\n  dotPointId,\n  learnPageData,\n  onComplete,\n  onBack,\n  dotPointTitle,\n}) => {\n  const sections = learnPageData?.sections || []\n  const completionBonus = learnPageData?.completionXP || 50\n\n  const { addXP } = useGamificationContext()\n  const [currentSectionIndex, setCurrentSectionIndex] = useState(0)\n  const [completedIds, setCompletedIds] = useState(new Set())\n  const [totalXP, setTotalXP] = useState(0)\n  const [bonusAwarded, setBonusAwarded] = useState(false)\n  const [showConfetti, setShowConfetti] = useState(false)\n  const [toastMessage, setToastMessage] = useState(null)\n\n  const progressKey = STORAGE_KEYS.progress(dotPointId)\n\n  useEffect(() => {\n    const stored = safeParse(localStorage.getItem(progressKey), null)\n    if (!stored) {\n      setCompletedIds(new Set())\n      setTotalXP(0)\n      setBonusAwarded(false)\n      return\n    }\n\n    setCompletedIds(new Set(stored.completedIds || []))\n    setTotalXP(stored.totalXP || 0)\n    setBonusAwarded(Boolean(stored.bonusAwarded))\n  }, [progressKey])\n\n  useEffect(() => {\n    if (sections.length === 0) {\n      setCurrentSectionIndex(0)\n      return\n    }\n\n    const firstIncomplete = sections.findIndex(\n      (section) => !completedIds.has(getSectionId(section)),\n    )\n\n    setCurrentSectionIndex(firstIncomplete === -1 ? sections.length - 1 : firstIncomplete)\n  }, [sections, completedIds])\n\n  useEffect(() => {\n    if (sections.length === 0 || bonusAwarded) return\n\n    const allComplete = sections.every((section) =>\n      completedIds.has(getSectionId(section)),\n    )\n\n    if (allComplete) {\n      handleAllSectionsComplete()\n    }\n  }, [sections, completedIds, bonusAwarded])\n\n  const saveProgress = useCallback(\n    (updates = {}) => {\n      const payload = {\n        completedIds: Array.from(completedIds),\n        totalXP,\n        bonusAwarded,\n        ...updates,\n      }\n      localStorage.setItem(progressKey, JSON.stringify(payload))\n    },\n    [completedIds, totalXP, bonusAwarded, progressKey],\n  )\n\n  const progressPercent = useMemo(() => {\n    if (sections.length === 0) return 0\n    return Math.round((completedIds.size / sections.length) * 100)\n  }, [sections.length, completedIds])\n\n  const currentSection = sections[currentSectionIndex]\n\n  const markSectionComplete = useCallback(async () => {\n    if (!currentSection) return\n\n    const sectionId = getSectionId(currentSection)\n    if (completedIds.has(sectionId)) {\n      goToNextSection()\n      return\n    }\n\n    const xpReward = currentSection.xp ?? DEFAULT_SECTION_XP\n    const newTotal = totalXP + xpReward\n    const updatedCompleted = new Set(completedIds)\n    updatedCompleted.add(sectionId)\n\n    setCompletedIds(updatedCompleted)\n    setTotalXP(newTotal)\n    setToastMessage(`Section complete. +${xpReward} XP`)\n\n    try {\n      await addXP(xpReward, `Completed ${currentSection.title}`)\n    } catch {\n      // ignore network errors; XP sync will retry elsewhere\n    }\n\n    saveProgress({\n      completedIds: Array.from(updatedCompleted),\n      totalXP: newTotal,\n    })\n\n    goToNextSection(updatedCompleted)\n  }, [currentSection, completedIds, addXP, saveProgress, totalXP])\n\n  const goToNextSection = useCallback(\n    (completedSet = completedIds) => {\n      const nextIndex = sections.findIndex(\n        (section) => !completedSet.has(getSectionId(section)),\n      )\n\n      if (nextIndex === -1) {\n        setCurrentSectionIndex(sections.length - 1)\n      } else {\n        setCurrentSectionIndex(nextIndex)\n      }\n    },\n    [sections, completedIds],\n  )\n\n  const handleAllSectionsComplete = useCallback(async () => {\n    if (bonusAwarded) return\n\n    setBonusAwarded(true)\n    setShowConfetti(true)\n    setToastMessage(`All sections complete. Bonus +${completionBonus} XP`)\n    const newTotal = totalXP + completionBonus\n    setTotalXP(newTotal)\n\n    try {\n      await addXP(completionBonus, `Mastered ${dotPointTitle}`)\n    } catch {\n      // ignore\n    }\n\n    saveProgress({\n      bonusAwarded: true,\n      totalXP: newTotal,\n    })\n\n    if (typeof onComplete === 'function') {\n      onComplete({\n        totalXP: newTotal,\n        sectionsCompleted: sections.length,\n        dotPointId,\n      })\n    }\n\n    setTimeout(() => setShowConfetti(false), 2500)\n  }, [\n    bonusAwarded,\n    completionBonus,\n    addXP,\n    dotPointTitle,\n    saveProgress,\n    totalXP,\n    onComplete,\n    sections.length,\n    dotPointId,\n  ])\n\n  const handleNavigate = (index) => {\n    if (index < 0 || index >= sections.length) return\n\n    const target = sections[index]\n    if (!target) return\n\n    const sectionId = getSectionId(target)\n    const isOptional = Boolean(target.optional || target.metadata?.optional)\n    const allowed =\n      completedIds.has(sectionId) ||\n      isOptional ||\n      index <= completedIds.size\n\n    if (allowed) {\n      setCurrentSectionIndex(index)\n    }\n  }\n\n  if (sections.length === 0) {\n    return (\n      <EmptyState\n        title=\"Learn content is not available yet\"\n        message=\"Check back soon or try the quiz tab in the meantime.\"\n        onBack={onBack}\n      />\n    )\n  }\n\n  const progressSummary =\n    sections.length > 0\n      ? `${completedIds.size}/${sections.length} complete`\n      : '0/0 complete'\n\n  return (\n    <div className=\"min-h-screen bg-slate-50\">\n      <Confetti show={showConfetti} onComplete={() => setShowConfetti(false)} />\n\n      <Header\n        dotPointTitle={dotPointTitle}\n        progressSummary={progressSummary}\n        totalXP={totalXP}\n        progressPercent={progressPercent}\n        onBack={onBack}\n      />\n\n      <SectionNavigator\n        sections={sections}\n        completedIds={completedIds}\n        currentIndex={currentSectionIndex}\n        onNavigate={handleNavigate}\n      />\n\n      <main className=\"mx-auto max-w-4xl px-4 py-6\">\n        <AnimatePresence mode=\"wait\">\n          {currentSection && (\n            <motion.div\n              key={getSectionId(currentSection)}\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: -20 }}\n              transition={{ duration: 0.2, ease: 'easeOut' }}\n            >\n              <SectionRenderer\n                section={currentSection}\n                dotPointId={dotPointId}\n                onComplete={markSectionComplete}\n                isCompleted={completedIds.has(getSectionId(currentSection))}\n              />\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </main>\n\n      <AnimatePresence>\n        {toastMessage && (\n          <motion.div\n            initial={{ opacity: 0, y: 24 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: 24 }}\n            className=\"fixed bottom-6 left-1/2 z-40 w-full max-w-sm -translate-x-1/2\"\n          >\n            <button\n              type=\"button\"\n              onClick={() => setToastMessage(null)}\n              className=\"w-full rounded-lg border border-slate-200 bg-white px-4 py-3 text-sm text-slate-700 shadow focus:outline-none focus-visible:ring focus-visible:ring-blue-400/50\"\n            >\n              {toastMessage}\n            </button>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  )\n}\n\nconst Header = ({\n  dotPointTitle,\n  progressSummary,\n  totalXP,\n  progressPercent,\n  onBack,\n}) => (\n  <header className=\"sticky top-0 z-10 border-b border-slate-200 bg-white/90 backdrop-blur\">\n    <div className=\"mx-auto flex max-w-4xl items-center justify-between gap-4 px-4 py-3\">\n      <button\n        type=\"button\"\n        onClick={onBack}\n        className=\"rounded-full border border-slate-200 px-3 py-1 text-xs font-medium text-slate-600 hover:border-slate-300 hover:text-slate-900\"\n      >\n        Back\n      </button>\n      <div className=\"flex-1 truncate\">\n        <p className=\"text-xs text-slate-500\">{progressSummary}</p>\n        <h1 className=\"truncate text-sm font-semibold text-slate-900\">\n          {dotPointTitle}\n        </h1>\n      </div>\n      <div className=\"text-right\">\n        <p className=\"text-lg font-semibold text-emerald-600\">+{totalXP}</p>\n        <p className=\"text-xs text-slate-500\">XP earned</p>\n      </div>\n    </div>\n    <div className=\"h-2 bg-slate-100\">\n      <motion.div\n        className=\"h-full bg-gradient-to-r from-blue-500 to-emerald-500\"\n        initial={{ width: 0 }}\n        animate={{ width: `${progressPercent}%` }}\n        transition={{ duration: 0.3, ease: 'easeOut' }}\n      />\n    </div>\n  </header>\n)\n\nconst SectionNavigator = ({\n  sections,\n  completedIds,\n  currentIndex,\n  onNavigate,\n}) => (\n  <div className=\"border-b border-slate-200 bg-white/80\">\n    <div className=\"mx-auto flex max-w-4xl items-center gap-2 overflow-x-auto px-4 py-3\">\n      {sections.map((section, index) => {\n        const sectionId = getSectionId(section)\n        const icon = SECTION_ICONS[section.type] || 'SECTION'\n        const isCompleted = completedIds.has(sectionId)\n        const isCurrent = currentIndex === index\n        const isOptional = Boolean(section.optional || section.metadata?.optional)\n        const isLocked = !isOptional && index > completedIds.size\n\n        const baseClasses =\n          'flex min-w-[70px] flex-col items-center justify-center rounded-xl border px-3 py-2 text-[10px] font-semibold uppercase tracking-wide transition'\n\n        let stateClasses\n        if (isCompleted) {\n          stateClasses = 'border-emerald-300 bg-emerald-50 text-emerald-700'\n        } else if (isCurrent) {\n          stateClasses = 'border-blue-500 bg-blue-500 text-white shadow'\n        } else if (isLocked) {\n          stateClasses = 'border-slate-200 bg-slate-100 text-slate-400'\n        } else {\n          stateClasses =\n            'border-slate-200 bg-white text-slate-600 hover:border-blue-400 hover:text-blue-600'\n        }\n\n        return (\n          <button\n            type=\"button\"\n            key={sectionId}\n            onClick={() => onNavigate(index)}\n            disabled={isLocked}\n            className={`${baseClasses} ${stateClasses}`}\n          >\n            <span className=\"text-[11px] font-bold\">{icon}</span>\n            <span>{index + 1}</span>\n          </button>\n        )\n      })}\n    </div>\n  </div>\n)\n\nconst SectionRenderer = ({ section, dotPointId, onComplete, isCompleted }) => {\n  const commonProps = { section, onComplete, isCompleted }\n\n  switch (section.type) {\n    case 'video':\n      return <VideoSection {...commonProps} />\n    case 'interactive-cards':\n      return <InteractiveCardsSection {...commonProps} />\n    case 'podcast':\n      return <PodcastSection {...commonProps} />\n    case 'flashcards':\n      return <FlashcardsSection {...commonProps} />\n    case 'worked-example':\n      return <WorkedExampleSection {...commonProps} />\n    case 'practice':\n      return <PracticeSection {...commonProps} />\n    case 'detailed-content':\n      return <DetailedContentSection {...commonProps} />\n    case 'notes':\n      return <NotesSection {...commonProps} dotPointId={dotPointId} />\n    default:\n      return (\n        <SectionShell\n          title={section.title || 'Unsupported section'}\n          icon=\"SECTION\"\n          subtitle=\"This section type has not been implemented yet.\"\n        >\n          <p className=\"text-sm text-slate-600\">\n            Please let the development team know if you are seeing this message.\n          </p>\n        </SectionShell>\n      )\n  }\n}\n\nconst VideoSection = ({ section, onComplete, isCompleted }) => {\n  const [watched, setWatched] = useState(isCompleted)\n\n  const handleMarkWatched = () => {\n    if (watched) return\n    setWatched(true)\n    onComplete()\n  }\n\n  const description =\n    section.description ||\n    'Watch the lesson video, then mark it as complete once you finish.'\n\n  return (\n    <SectionShell title={section.title} icon=\"VIDEO\" subtitle={description}>\n      <div className=\"overflow-hidden rounded-2xl border border-slate-200 bg-black\">\n        <VideoEmbed url={section.url || section.content?.url} />\n      </div>\n      <SectionActions\n        isCompleted={watched}\n        onComplete={handleMarkWatched}\n        xp={section.xp}\n        completionLabel=\"Video completed\"\n        pendingLabel=\"Mark as watched\"\n      />\n    </SectionShell>\n  )\n}\n\nconst InteractiveCardsSection = ({ section, onComplete, isCompleted }) => {\n  const cards = section.cards || section.content?.cards || []\n  const [index, setIndex] = useState(0)\n  const [flipped, setFlipped] = useState(false)\n  const [complete, setComplete] = useState(isCompleted)\n\n  useEffect(() => {\n    if (isCompleted) setComplete(true)\n  }, [isCompleted])\n\n  const currentCard = cards[index]\n\n  const goNext = () => {\n    if (index < cards.length - 1) {\n      setIndex((value) => value + 1)\n      setFlipped(false)\n    } else if (!complete) {\n      setComplete(true)\n      onComplete()\n    }\n  }\n\n  const goPrev = () => {\n    if (index > 0) {\n      setIndex((value) => value - 1)\n      setFlipped(false)\n    }\n  }\n\n  return (\n    <SectionShell\n      title={section.title}\n      icon=\"CARDS\"\n      subtitle=\"Tap the card to reveal the answer, then move on to the next one.\"\n    >\n      {currentCard ? (\n        <motion.div\n          key={index}\n          className=\"relative h-64 cursor-pointer overflow-hidden rounded-2xl border border-blue-200 bg-blue-50 p-6 text-center shadow\"\n          initial={{ rotateY: 0 }}\n          animate={{ rotateY: flipped ? 180 : 0 }}\n          transition={{ duration: 0.3 }}\n          style={{ transformStyle: 'preserve-3d' }}\n          onClick={() => setFlipped((value) => !value)}\n        >\n          <CardFace heading={currentCard.front} hint=\"Tap to flip\" rotated={false} />\n          <CardFace heading=\"Answer\" body={currentCard.back} rotated />\n        </motion.div>\n      ) : (\n        <p className=\"rounded-xl border border-slate-200 bg-white p-4 text-sm text-slate-600\">\n          This section does not contain cards yet.\n        </p>\n      )}\n\n      <div className=\"flex flex-col gap-2 sm:flex-row\">\n        <button\n          type=\"button\"\n          onClick={goPrev}\n          disabled={index === 0}\n          className=\"flex-1 rounded-lg border border-slate-200 bg-white py-2 text-sm font-medium text-slate-600 transition hover:border-slate-300 disabled:cursor-not-allowed disabled:opacity-50\"\n        >\n          Previous\n        </button>\n        <button\n          type=\"button\"\n          onClick={goNext}\n          className=\"flex-1 rounded-lg bg-blue-500 py-2 text-sm font-semibold text-white transition hover:bg-blue-600\"\n        >\n          {index === cards.length - 1 ? 'Finish' : 'Next'}\n        </button>\n      </div>\n\n      {complete && (\n        <CompletionBanner message=\"All cards reviewed\" xp={section.xp} />\n      )}\n    </SectionShell>\n  )\n}\n\nconst PodcastSection = ({ section, onComplete, isCompleted }) => {\n  const [listened, setListened] = useState(isCompleted)\n\n  const markComplete = () => {\n    if (listened) return\n    setListened(true)\n    onComplete()\n  }\n\n  return (\n    <SectionShell\n      title={section.title}\n      icon=\"AUDIO\"\n      subtitle={section.description || 'Listen to the short audio summary.'}\n    >\n      <audio\n        controls\n        className=\"w-full\"\n        onEnded={markComplete}\n      >\n        <source\n          src={section.url || section.content?.url}\n          type={section.mimeType || 'audio/mpeg'}\n        />\n        Your browser does not support the audio element.\n      </audio>\n\n      <SectionActions\n        isCompleted={listened}\n        onComplete={markComplete}\n        xp={section.xp}\n        completionLabel=\"Audio completed\"\n        pendingLabel=\"Mark as listened\"\n      />\n    </SectionShell>\n  )\n}\n\nconst FlashcardsSection = ({ section, onComplete, isCompleted }) => {\n  const [complete, setComplete] = useState(isCompleted)\n  const terms = section.terms || section.content?.terms || []\n\n  const handleComplete = () => {\n    if (complete) return\n    setComplete(true)\n    onComplete()\n  }\n\n  return (\n    <SectionShell\n      title={section.title}\n      icon=\"FLASH\"\n      subtitle=\"Match each term with its definition.\"\n    >\n      {complete ? (\n        <CompletionBanner message=\"Flashcard match complete\" xp={section.xp} />\n      ) : (\n        <ClickToMatchFlashcards\n          terms={terms}\n          onComplete={handleComplete}\n          xpReward={section.xp || 25}\n        />\n      )}\n    </SectionShell>\n  )\n}\n\nconst WorkedExampleSection = ({ section, onComplete, isCompleted }) => {\n  const steps = section.steps || section.content?.steps || []\n  const [stepIndex, setStepIndex] = useState(0)\n  const [complete, setComplete] = useState(isCompleted)\n\n  const goNext = () => {\n    if (stepIndex < steps.length - 1) {\n      setStepIndex((value) => value + 1)\n    } else if (!complete) {\n      setComplete(true)\n      onComplete()\n    }\n  }\n\n  const goPrev = () => setStepIndex((value) => Math.max(0, value - 1))\n\n  return (\n    <SectionShell\n      title={section.title}\n      icon=\"EXAMPLE\"\n      subtitle=\"Study the worked example step by step.\"\n    >\n      {steps.length === 0 ? (\n        <p className=\"rounded-xl border border-slate-200 bg-white p-4 text-sm text-slate-600\">\n          Worked example content will appear here when available.\n        </p>\n      ) : (\n        <div className=\"rounded-xl border border-slate-200 bg-white p-5\">\n          <p className=\"text-xs font-semibold text-blue-600\">\n            Step {stepIndex + 1} of {steps.length}\n          </p>\n          <h3 className=\"mt-2 text-lg font-semibold text-slate-900\">\n            {steps[stepIndex].title || `Step ${stepIndex + 1}`}\n          </h3>\n          <p className=\"mt-3 whitespace-pre-wrap text-sm leading-relaxed text-slate-700\">\n            {steps[stepIndex].content || steps[stepIndex]}\n          </p>\n          <div className=\"mt-4 flex flex-col gap-2 sm:flex-row\">\n            <button\n              type=\"button\"\n              onClick={goPrev}\n              disabled={stepIndex === 0}\n              className=\"flex-1 rounded-lg border border-slate-200 bg-white py-2 text-sm font-medium text-slate-600 hover:border-slate-300 disabled:cursor-not-allowed disabled:opacity-50\"\n            >\n              Previous\n            </button>\n            <button\n              type=\"button\"\n              onClick={goNext}\n              className=\"flex-1 rounded-lg bg-indigo-500 py-2 text-sm font-semibold text-white hover:bg-indigo-600\"\n            >\n              {stepIndex === steps.length - 1 ? 'Finish' : 'Next'}\n            </button>\n          </div>\n        </div>\n      )}\n\n      {complete && (\n        <CompletionBanner message=\"Worked example complete\" xp={section.xp} />\n      )}\n    </SectionShell>\n  )\n}\n\nconst PracticeSection = ({ section, onComplete, isCompleted }) => {\n  const questions = section.questions || section.content?.questions || []\n  const [answers, setAnswers] = useState({})\n  const [submitted, setSubmitted] = useState(isCompleted)\n  const [score, setScore] = useState(0)\n\n  const handleSubmit = (event) => {\n    event.preventDefault()\n    if (submitted) return\n\n    let correctAnswers = 0\n    questions.forEach((question) => {\n      if (answers[question.id] === question.correctAnswer) {\n        correctAnswers += 1\n      }\n    })\n\n    setScore(correctAnswers)\n    setSubmitted(true)\n    onComplete()\n  }\n\n  const handleSelect = (questionId, optionIndex) => {\n    setAnswers((prev) => ({ ...prev, [questionId]: optionIndex }))\n  }\n\n  return (\n    <SectionShell\n      title={section.title}\n      icon=\"PRACTICE\"\n      subtitle=\"Answer the questions below and check your understanding.\"\n    >\n      {questions.length === 0 ? (\n        <p className=\"rounded-xl border border-slate-200 bg-white p-4 text-sm text-slate-600\">\n          Practice questions for this section will appear here when available.\n        </p>\n      ) : (\n        <form onSubmit={handleSubmit} className=\"space-y-5\">\n          {questions.map((question, idx) => (\n            <div\n              key={question.id || idx}\n              className=\"rounded-xl border border-slate-200 bg-white p-4 shadow-sm\"\n            >\n              <p className=\"font-semibold text-slate-900\">\n                {idx + 1}. {question.question}\n              </p>\n              <div className=\"mt-3 space-y-2\">\n                {question.options.map((option, optionIdx) => {\n                  const selected = answers[question.id] === optionIdx\n                  const correct =\n                    submitted && optionIdx === question.correctAnswer\n                  const incorrect =\n                    submitted &&\n                    selected &&\n                    optionIdx !== question.correctAnswer\n\n                  const optionClasses = [\n                    'flex items-center gap-3 rounded-lg border px-3 py-2 text-sm transition',\n                    selected ? 'border-blue-400 bg-blue-50' : 'border-slate-200 bg-white',\n                    correct ? 'border-emerald-400 bg-emerald-50 text-emerald-700' : '',\n                    incorrect ? 'border-rose-400 bg-rose-50 text-rose-700' : '',\n                  ].join(' ')\n\n                  return (\n                    <label key={optionIdx} className={optionClasses}>\n                      <input\n                        type=\"radio\"\n                        name={`question-${question.id}`}\n                        value={optionIdx}\n                        checked={selected}\n                        disabled={submitted}\n                        onChange={() => handleSelect(question.id, optionIdx)}\n                        className=\"h-4 w-4 border-slate-300 text-blue-500 focus:ring-blue-500\"\n                      />\n                      <span>{option}</span>\n                    </label>\n                  )\n                })}\n              </div>\n              {submitted && question.explanation && (\n                <p className=\"mt-3 rounded-lg bg-slate-50 p-3 text-xs text-slate-600\">\n                  Explanation: {question.explanation}\n                </p>\n              )}\n            </div>\n          ))}\n\n          {!submitted ? (\n            <button\n              type=\"submit\"\n              className=\"w-full rounded-lg bg-emerald-500 py-3 text-sm font-semibold text-white hover:bg-emerald-600\"\n            >\n              Submit answers\n            </button>\n          ) : (\n            <CompletionBanner\n              message={`Practice complete. Score ${score}/${questions.length}`}\n              xp={section.xp}\n            />\n          )}\n        </form>\n      )}\n    </SectionShell>\n  )\n}\n\nconst DetailedContentSection = ({ section, onComplete, isCompleted }) => {\n  const [read, setRead] = useState(isCompleted)\n\n  useEffect(() => {\n    if (isCompleted) setRead(true)\n  }, [isCompleted])\n\n  const sections = section.content?.sections || []\n\n  const handleMarkRead = () => {\n    if (!read) {\n      setRead(true)\n      onComplete()\n    }\n  }\n\n  return (\n    <SectionShell\n      title={section.title}\n      icon=\"\"\n      subtitle=\"Deep dive into the concepts with detailed explanations and examples.\"\n    >\n      {/* Detailed Content Sections */}\n      <div className=\"space-y-8\">\n        {sections.map((contentSection, index) => (\n          <div\n            key={index}\n            className=\"rounded-2xl border-2 border-gradient bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 p-6 shadow-lg\"\n          >\n            {/* Heading with gradient */}\n            <h3 className=\"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 mb-4\">\n              {contentSection.heading}\n            </h3>\n\n            {/* Main Content */}\n            <div className=\"prose prose-sm max-w-none\">\n              <div\n                className=\"text-gray-800 leading-relaxed whitespace-pre-wrap\"\n                dangerouslySetInnerHTML={{\n                  __html: contentSection.content\n                    .replace(/\\*\\*(.*?)\\*\\*/g, '<strong class=\"font-bold text-purple-700\">$1</strong>')\n                    .replace(/\\n\\n/g, '</p><p class=\"mt-3\">')\n                    .replace(/^(.*)$/gm, '<p>$1</p>')\n                }}\n              />\n            </div>\n\n            {/* Examples with colorful badges */}\n            {contentSection.examples && contentSection.examples.length > 0 && (\n              <div className=\"mt-6 space-y-3\">\n                <p className=\"text-sm font-bold uppercase tracking-wide text-purple-600\">\n                   Real-World Examples\n                </p>\n                {contentSection.examples.map((example, exIdx) => (\n                  <div\n                    key={exIdx}\n                    className=\"flex items-start gap-3 rounded-xl bg-white/80 backdrop-blur p-4 shadow-md border border-purple-200\"\n                  >\n                    <span className=\"text-2xl flex-shrink-0\">{example.split(' ')[0]}</span>\n                    <p className=\"text-sm text-gray-700 flex-1\">\n                      {example.substring(example.indexOf(' ') + 1)}\n                    </p>\n                  </div>\n                ))}\n              </div>\n            )}\n\n            {/* Real World Application */}\n            {contentSection.realWorldApplication && (\n              <div className=\"mt-6 rounded-xl bg-gradient-to-r from-orange-100 to-red-100 border-2 border-orange-300 p-4\">\n                <p className=\"text-sm font-bold uppercase tracking-wide text-orange-700 mb-2\">\n                   Real-World Application\n                </p>\n                <p className=\"text-sm text-gray-800 leading-relaxed\">\n                  {contentSection.realWorldApplication}\n                </p>\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n\n      {/* Mark as Read Button */}\n      <div className=\"mt-8 flex justify-center\">\n        <button\n          type=\"button\"\n          onClick={handleMarkRead}\n          disabled={read}\n          className={`\n            px-8 py-4 rounded-2xl font-bold text-lg shadow-xl transform transition-all duration-300\n            ${read\n              ? 'bg-gray-300 text-gray-600 cursor-not-allowed'\n              : 'bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:scale-105 hover:shadow-2xl'\n            }\n          `}\n        >\n          {read ? ' Content Read' : 'Mark as Read'}\n        </button>\n      </div>\n\n      {read && (\n        <CompletionBadge\n          message={`You've completed this detailed content section!`}\n          xp={section.xp}\n        />\n      )}\n    </SectionShell>\n  )\n}\n\nconst NotesSection = ({ section, onComplete, isCompleted, dotPointId }) => {\n  const [notes, setNotes] = useStoredNotes(dotPointId)\n  const [saved, setSaved] = useState(isCompleted)\n\n  useEffect(() => {\n    if (isCompleted) setSaved(true)\n  }, [isCompleted])\n\n  const summary = section.summary || section.content?.summary || []\n\n  const handleSave = () => {\n    if (!saved) {\n      setSaved(true)\n      onComplete()\n    }\n  }\n\n  return (\n    <SectionShell\n      title={section.title}\n      icon=\"NOTES\"\n      subtitle=\"Review the key points and record your notes.\"\n    >\n      {summary.length > 0 && (\n        <div className=\"rounded-xl border border-slate-200 bg-slate-50 p-4\">\n          <p className=\"text-sm font-semibold text-slate-700\">Summary</p>\n          <ul className=\"mt-2 space-y-1 text-sm text-slate-600\">\n            {summary.map((point, index) => (\n              <li key={index}>- {point}</li>\n            ))}\n          </ul>\n        </div>\n      )}\n\n      <textarea\n        value={notes}\n        onChange={(event) => setNotes(event.target.value)}\n        placeholder=\"Add your personal notes here...\"\n        className=\"mt-4 h-40 w-full rounded-lg border border-slate-300 bg-white p-4 text-sm text-slate-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-200/60\"\n      />\n\n      <button\n        type=\"button\"\n        onClick={handleSave}\n        className=\"mt-4 w-full rounded-lg bg-pink-500 py-3 text-sm font-semibold text-white hover:bg-pink-600\"\n      >\n        {saved ? 'Notes saved' : `Save notes (+${section.xp || DEFAULT_SECTION_XP} XP)`}\n      </button>\n    </SectionShell>\n  )\n}\n\nconst SectionShell = ({ title, icon, subtitle, children }) => (\n  <section className=\"space-y-5 rounded-3xl border border-slate-200 bg-white p-6 shadow-lg\">\n    <header className=\"flex items-center gap-4\">\n      <div className=\"flex h-10 w-16 items-center justify-center rounded-lg bg-blue-500 text-[10px] font-semibold uppercase text-white\">\n        {icon}\n      </div>\n      <div>\n        <h2 className=\"text-lg font-semibold text-slate-900\">{title}</h2>\n        {subtitle && (\n          <p className=\"text-sm text-slate-600\">{subtitle}</p>\n        )}\n      </div>\n    </header>\n    {children}\n  </section>\n)\n\nconst SectionActions = ({\n  isCompleted,\n  onComplete,\n  xp,\n  completionLabel,\n  pendingLabel,\n}) => {\n  if (isCompleted) {\n    return <CompletionBanner message={completionLabel} xp={xp} />\n  }\n\n  return (\n    <button\n      type=\"button\"\n      onClick={onComplete}\n      className=\"w-full rounded-lg bg-blue-500 py-3 text-sm font-semibold text-white hover:bg-blue-600\"\n    >\n      {pendingLabel} (+{xp || DEFAULT_SECTION_XP} XP)\n    </button>\n  )\n}\n\nconst CompletionBanner = ({ message, xp }) => (\n  <div className=\"rounded-lg border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-700\">\n    Completed: {message}\n    {typeof xp === 'number' && (\n      <span className=\"ml-2 font-semibold text-emerald-600\">+{xp} XP</span>\n    )}\n  </div>\n)\n\nconst CardFace = ({ heading, body, hint, rotated }) => (\n  <div\n    className=\"absolute inset-0 flex h-full w-full flex-col items-center justify-center px-6 text-center\"\n    style={{\n      backfaceVisibility: 'hidden',\n      transform: rotated ? 'rotateY(180deg)' : 'rotateY(0deg)',\n    }}\n  >\n    {heading && <h4 className=\"text-lg font-semibold text-slate-900\">{heading}</h4>}\n    {hint && <p className=\"mt-2 text-sm text-slate-500\">{hint}</p>}\n    {body && <p className=\"mt-3 text-sm text-slate-700\">{body}</p>}\n  </div>\n)\n\nconst VideoEmbed = ({ url }) => {\n  if (!url) {\n    return (\n      <div className=\"p-6 text-center text-sm text-slate-500\">\n        Video link not available yet.\n      </div>\n    )\n  }\n\n  if (url.includes('youtube.com') || url.includes('youtu.be')) {\n    const embedUrl = getYoutubeEmbedUrl(url)\n    return (\n      <iframe\n        className=\"h-64 w-full sm:h-80\"\n        src={embedUrl}\n        title=\"Lesson video\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n        allowFullScreen\n      />\n    )\n  }\n\n  return (\n    <video controls className=\"h-64 w-full sm:h-80\">\n      <source src={url} />\n      Your browser does not support the video element.\n    </video>\n  )\n}\n\nconst getYoutubeEmbedUrl = (url) => {\n  try {\n    const parsed = new URL(url)\n    if (parsed.hostname === 'youtu.be') {\n      return `https://www.youtube.com/embed/${parsed.pathname.slice(1)}`\n    }\n    const videoId = parsed.searchParams.get('v')\n    return `https://www.youtube.com/embed/${videoId}`\n  } catch {\n    return url\n  }\n}\n\nconst EmptyState = ({ title, message, onBack }) => (\n  <div className=\"flex min-h-screen flex-col items-center justify-center gap-4 px-4 text-center\">\n    <div className=\"rounded-lg border border-slate-200 bg-white px-6 py-4 text-sm text-slate-600 shadow\">\n      <p className=\"font-semibold text-slate-900\">{title}</p>\n      <p className=\"mt-2 text-slate-600\">{message}</p>\n    </div>\n    <button\n      type=\"button\"\n      onClick={onBack}\n      className=\"rounded-lg border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-slate-300 hover:text-slate-900\"\n    >\n      Back to pathway\n    </button>\n  </div>\n)\n\nconst getSectionId = (section) =>\n  section.sectionId || section.id || `${section.type}-${section.title || 'untitled'}`\n\nexport default LearnPage\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\LoadingStates.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'isMobile' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":45,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":19},{"ruleId":"no-unused-vars","severity":1,"message":"'inView' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":258,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":258,"endColumn":16},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":361,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":361,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { motion } from 'framer-motion';\nimport { Loader2, Wifi, WifiOff, RefreshCw } from 'lucide-react';\nimport { useMobileOptimization } from '../hooks/useMobileOptimization';\nimport { usePWA } from '../hooks/usePWA';\n\n// Spinner Component\nexport const Spinner = ({ \n  size = 'md', \n  color = 'blue', \n  className = '',\n  text = null \n}) => {\n  const sizes = {\n    xs: 'w-3 h-3',\n    sm: 'w-4 h-4',\n    md: 'w-6 h-6',\n    lg: 'w-8 h-8',\n    xl: 'w-12 h-12'\n  };\n\n  const colors = {\n    blue: 'text-blue-600',\n    gray: 'text-gray-600',\n    green: 'text-green-600',\n    purple: 'text-purple-600',\n    red: 'text-red-600',\n    white: 'text-white'\n  };\n\n  return (\n    <div className={`flex items-center justify-center space-x-2 ${className}`}>\n      <Loader2 className={`animate-spin ${sizes[size]} ${colors[color]}`} />\n      {text && (\n        <span className={`text-sm font-medium ${colors[color]}`}>\n          {text}\n        </span>\n      )}\n    </div>\n  );\n};\n\n// Page Loading Component\nexport const PageLoader = ({ message = 'Loading...', showProgress = false, progress = 0 }) => {\n  const { isMobile } = useMobileOptimization();\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 flex items-center justify-center\">\n      <motion.div\n        className=\"text-center space-y-6 p-8\"\n        initial={{ opacity: 0, scale: 0.9 }}\n        animate={{ opacity: 1, scale: 1 }}\n        transition={{ duration: 0.3 }}\n      >\n        {/* Logo */}\n        <motion.div\n          className=\"w-16 h-16 mx-auto bg-blue-600 rounded-2xl flex items-center justify-center\"\n          animate={{ rotate: 360 }}\n          transition={{ duration: 2, repeat: Infinity, ease: \"linear\" }}\n        >\n          <span className=\"text-white font-bold text-2xl\">H</span>\n        </motion.div>\n\n        {/* Loading Text */}\n        <div className=\"space-y-2\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">HSC Learning</h2>\n          <p className=\"text-gray-600\">{message}</p>\n        </div>\n\n        {/* Progress Bar */}\n        {showProgress && (\n          <div className=\"w-48 mx-auto\">\n            <div className=\"w-full bg-gray-200 rounded-full h-2\">\n              <motion.div\n                className=\"bg-blue-600 h-2 rounded-full\"\n                initial={{ width: 0 }}\n                animate={{ width: `${progress}%` }}\n                transition={{ duration: 0.3 }}\n              />\n            </div>\n            <p className=\"text-xs text-gray-500 mt-2\">{progress}%</p>\n          </div>\n        )}\n\n        {/* Spinner */}\n        <Spinner size=\"lg\" color=\"blue\" />\n      </motion.div>\n    </div>\n  );\n};\n\n// Skeleton Loading Components (enhanced from existing)\nexport const SkeletonPulse = ({ \n  width = '100%', \n  height = '1rem', \n  className = '',\n  rounded = 'rounded'\n}) => (\n  <div \n    className={`bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 animate-pulse ${rounded} ${className}`}\n    style={{\n      width: typeof width === 'number' ? `${width}px` : width,\n      height: typeof height === 'number' ? `${height}px` : height,\n    }}\n  />\n);\n\n// Content Loading States\nexport const ContentLoader = ({ type = 'card', className = '' }) => {\n  const renderLoader = () => {\n    switch (type) {\n      case 'card':\n        return (\n          <div className={`p-4 border rounded-lg space-y-3 ${className}`}>\n            <SkeletonPulse height=\"8rem\" />\n            <div className=\"space-y-2\">\n              <SkeletonPulse width=\"75%\" />\n              <SkeletonPulse width=\"50%\" />\n            </div>\n          </div>\n        );\n\n      case 'list-item':\n        return (\n          <div className={`flex items-center space-x-3 p-3 ${className}`}>\n            <SkeletonPulse width=\"40px\" height=\"40px\" rounded=\"rounded-full\" />\n            <div className=\"flex-1 space-y-2\">\n              <SkeletonPulse width=\"60%\" />\n              <SkeletonPulse width=\"40%\" />\n            </div>\n          </div>\n        );\n\n      case 'text':\n        return (\n          <div className={`space-y-2 ${className}`}>\n            <SkeletonPulse width=\"100%\" />\n            <SkeletonPulse width=\"75%\" />\n            <SkeletonPulse width=\"50%\" />\n          </div>\n        );\n\n      case 'button':\n        return (\n          <SkeletonPulse \n            width=\"120px\" \n            height=\"40px\" \n            rounded=\"rounded-lg\"\n            className={className}\n          />\n        );\n\n      default:\n        return <SkeletonPulse className={className} />;\n    }\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n    >\n      {renderLoader()}\n    </motion.div>\n  );\n};\n\n// Network Status Loading\nexport const NetworkLoader = ({ message, onRetry }) => {\n  const { isOnline } = usePWA();\n\n  return (\n    <div className=\"flex flex-col items-center justify-center p-8 text-center\">\n      <motion.div\n        animate={{ scale: [1, 1.1, 1] }}\n        transition={{ duration: 2, repeat: Infinity }}\n        className=\"mb-4\"\n      >\n        {isOnline ? (\n          <Wifi className=\"w-12 h-12 text-blue-600\" />\n        ) : (\n          <WifiOff className=\"w-12 h-12 text-gray-400\" />\n        )}\n      </motion.div>\n      \n      <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n        {isOnline ? 'Connecting...' : 'You\\'re Offline'}\n      </h3>\n      \n      <p className=\"text-gray-600 mb-4\">\n        {message || (isOnline \n          ? 'Trying to connect to the server...' \n          : 'Some features may be limited while offline.'\n        )}\n      </p>\n\n      {onRetry && (\n        <button\n          onClick={onRetry}\n          className=\"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n        >\n          <RefreshCw className=\"w-4 h-4\" />\n          <span>Try Again</span>\n        </button>\n      )}\n    </div>\n  );\n};\n\n// Lazy Loading Wrapper\nexport const LazyLoader = ({ \n  children, \n  loading = false, \n  error = null, \n  fallback = null,\n  onRetry\n}) => {\n  if (error) {\n    return (\n      <div className=\"flex flex-col items-center justify-center p-8 text-center\">\n        <div className=\"text-red-600 mb-4\">\n          <svg className=\"w-12 h-12 mx-auto\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n          </svg>\n        </div>\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n          Something went wrong\n        </h3>\n        <p className=\"text-gray-600 mb-4\">\n          {error.message || 'An unexpected error occurred'}\n        </p>\n        {onRetry && (\n          <button\n            onClick={onRetry}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            Try Again\n          </button>\n        )}\n      </div>\n    );\n  }\n\n  if (loading) {\n    return fallback || <ContentLoader type=\"card\" />;\n  }\n\n  return children;\n};\n\n// Infinite Loading Component\nexport const InfiniteLoader = ({ \n  hasMore = true, \n  loading = false, \n  onLoad \n}) => {\n  const [inView, setInView] = React.useState(false);\n  const ref = React.useRef();\n\n  React.useEffect(() => {\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting && hasMore && !loading) {\n          setInView(true);\n          onLoad?.();\n        }\n      },\n      { threshold: 0.1 }\n    );\n\n    if (ref.current) {\n      observer.observe(ref.current);\n    }\n\n    return () => observer.disconnect();\n  }, [hasMore, loading, onLoad]);\n\n  if (!hasMore) {\n    return (\n      <div className=\"text-center py-8 text-gray-500\">\n        <p>No more items to load</p>\n      </div>\n    );\n  }\n\n  return (\n    <div ref={ref} className=\"flex justify-center py-8\">\n      {loading ? (\n        <Spinner size=\"lg\" text=\"Loading more...\" />\n      ) : (\n        <div className=\"text-gray-400\">\n          <div className=\"w-8 h-8 border-2 border-gray-300 rounded-full mx-auto mb-2\" />\n          <p className=\"text-sm\">Scroll for more</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Progress Loading Component\nexport const ProgressLoader = ({ \n  progress = 0, \n  total = 100, \n  label = 'Loading...',\n  showPercentage = true,\n  className = ''\n}) => {\n  const percentage = Math.round((progress / total) * 100);\n\n  return (\n    <div className={`space-y-2 ${className}`}>\n      <div className=\"flex justify-between items-center\">\n        <span className=\"text-sm font-medium text-gray-700\">{label}</span>\n        {showPercentage && (\n          <span className=\"text-sm text-gray-500\">{percentage}%</span>\n        )}\n      </div>\n      <div className=\"w-full bg-gray-200 rounded-full h-2\">\n        <motion.div\n          className=\"bg-blue-600 h-2 rounded-full\"\n          initial={{ width: 0 }}\n          animate={{ width: `${percentage}%` }}\n          transition={{ duration: 0.3 }}\n        />\n      </div>\n    </div>\n  );\n};\n\n// Global Loading Context\nconst LoadingContext = React.createContext();\n\nexport const LoadingProvider = ({ children }) => {\n  const [globalLoading, setGlobalLoading] = React.useState(false);\n  const [loadingMessage, setLoadingMessage] = React.useState('Loading...');\n\n  const showLoading = (message = 'Loading...') => {\n    setLoadingMessage(message);\n    setGlobalLoading(true);\n  };\n\n  const hideLoading = () => {\n    setGlobalLoading(false);\n  };\n\n  return (\n    <LoadingContext.Provider value={{ showLoading, hideLoading }}>\n      {children}\n      {globalLoading && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 shadow-xl\">\n            <Spinner size=\"lg\" text={loadingMessage} />\n          </div>\n        </div>\n      )}\n    </LoadingContext.Provider>\n  );\n};\n\nexport const useLoading = () => {\n  const context = React.useContext(LoadingContext);\n  if (!context) {\n    throw new Error('useLoading must be used within LoadingProvider');\n  }\n  return context;\n};\n\nexport default {\n  Spinner,\n  PageLoader,\n  ContentLoader,\n  NetworkLoader,\n  LazyLoader,\n  InfiniteLoader,\n  ProgressLoader,\n  LoadingProvider,\n  useLoading\n};","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\MiniGameInterface.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleGameEnd'. Either include it or remove the dependency array.","line":28,"column":6,"nodeType":"ArrayExpression","endLine":28,"endColumn":27,"suggestions":[{"desc":"Update the dependencies array to be: [timeLeft, gameState, handleGameEnd]","fix":{"range":[987,1008],"text":"[timeLeft, gameState, handleGameEnd]"}}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":235,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":235,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport ProgressBar from './ProgressBar';\n\nconst MiniGameInterface = ({\n  gameType, // 'speed-quiz', 'memory-match', 'drag-drop'\n  gameData,\n  onGameComplete,\n  onGameExit,\n  timeLimit = 60\n}) => {\n  const [gameState, setGameState] = useState('playing');\n  const [score, setScore] = useState(0);\n  const [timeLeft, setTimeLeft] = useState(timeLimit);\n  const [currentQuestion, setCurrentQuestion] = useState(0);\n  const [streak, setStreak] = useState(0);\n  const [selectedAnswers, setSelectedAnswers] = useState([]);\n  const [matchedPairs, setMatchedPairs] = useState([]);\n  const [flippedCards, setFlippedCards] = useState([]);\n\n  useEffect(() => {\n    if (gameState === 'playing' && timeLeft > 0) {\n      const timer = setTimeout(() => setTimeLeft(timeLeft - 1), 1000);\n      return () => clearTimeout(timer);\n    } else if (timeLeft === 0) {\n      handleGameEnd();\n    }\n  }, [timeLeft, gameState]);\n\n  const handleGameEnd = () => {\n    setGameState('finished');\n    onGameComplete({\n      score,\n      streak,\n      timeUsed: timeLimit - timeLeft,\n      gameType\n    });\n  };\n\n  const getGameIcon = () => {\n    const icons = {\n      'speed-quiz': '',\n      'memory-match': '',\n      'drag-drop': ''\n    };\n    return icons[gameType] || '';\n  };\n\n  const getGameTitle = () => {\n    const titles = {\n      'speed-quiz': 'Speed Quiz Challenge',\n      'memory-match': 'Memory Match',\n      'drag-drop': 'Concept Sorting'\n    };\n    return titles[gameType] || 'Mini Game';\n  };\n\n  const handleSpeedQuizAnswer = (answerIndex) => {\n    const question = gameData.questions[currentQuestion];\n    const isCorrect = question.answers[answerIndex].correct;\n\n    if (isCorrect) {\n      setScore(score + 10 + (streak * 2));\n      setStreak(streak + 1);\n    } else {\n      setStreak(0);\n    }\n\n    if (currentQuestion < gameData.questions.length - 1) {\n      setCurrentQuestion(currentQuestion + 1);\n    } else {\n      handleGameEnd();\n    }\n  };\n\n  const handleMemoryCardClick = (cardIndex) => {\n    if (flippedCards.length === 2 || flippedCards.includes(cardIndex) || matchedPairs.includes(cardIndex)) {\n      return;\n    }\n\n    const newFlipped = [...flippedCards, cardIndex];\n    setFlippedCards(newFlipped);\n\n    if (newFlipped.length === 2) {\n      const [first, second] = newFlipped;\n      const firstCard = gameData.cards[first];\n      const secondCard = gameData.cards[second];\n\n      setTimeout(() => {\n        if (firstCard.pairId === secondCard.pairId) {\n          setMatchedPairs([...matchedPairs, first, second]);\n          setScore(score + 20);\n          setStreak(streak + 1);\n\n          if (matchedPairs.length + 2 === gameData.cards.length) {\n            handleGameEnd();\n          }\n        } else {\n          setStreak(0);\n        }\n        setFlippedCards([]);\n      }, 1000);\n    }\n  };\n\n  const renderSpeedQuiz = () => {\n    const question = gameData.questions[currentQuestion];\n\n    return (\n      <div className=\"space-y-6\">\n        {/* Progress */}\n        <div className=\"space-y-2\">\n          <div className=\"flex justify-between text-sm\">\n            <span>Question {currentQuestion + 1} of {gameData.questions.length}</span>\n            <span>Streak: {streak} </span>\n          </div>\n          <ProgressBar\n            progress={((currentQuestion + 1) / gameData.questions.length) * 100}\n            color=\"#3b82f6\"\n            height={8}\n          />\n        </div>\n\n        {/* Question */}\n        <motion.div\n          key={currentQuestion}\n          initial={{ opacity: 0, x: 50 }}\n          animate={{ opacity: 1, x: 0 }}\n          exit={{ opacity: 0, x: -50 }}\n          className=\"gaming-card p-6\"\n        >\n          <h3 className=\"text-lg font-bold mb-4\">{question.text}</h3>\n\n          <div className=\"space-y-3\">\n            {question.answers.map((answer, index) => (\n              <motion.button\n                key={index}\n                onClick={() => handleSpeedQuizAnswer(index)}\n                whileHover={{ scale: 1.02 }}\n                whileTap={{ scale: 0.98 }}\n                className=\"w-full p-4 text-left rounded-xl bg-white hover:bg-blue-50 border-2 border-gray-200 hover:border-blue-300 transition-all\"\n              >\n                <div className=\"flex items-center space-x-3\">\n                  <span className=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-sm font-bold text-blue-800\">\n                    {String.fromCharCode(65 + index)}\n                  </span>\n                  <span className=\"font-medium\">{answer.text}</span>\n                </div>\n              </motion.button>\n            ))}\n          </div>\n        </motion.div>\n      </div>\n    );\n  };\n\n  const renderMemoryMatch = () => {\n    return (\n      <div className=\"space-y-6\">\n        {/* Progress */}\n        <div className=\"space-y-2\">\n          <div className=\"flex justify-between text-sm\">\n            <span>Matched: {matchedPairs.length / 2} of {gameData.cards.length / 2}</span>\n            <span>Streak: {streak} </span>\n          </div>\n          <ProgressBar\n            progress={(matchedPairs.length / gameData.cards.length) * 100}\n            color=\"#10b981\"\n            height={8}\n          />\n        </div>\n\n        {/* Memory Cards Grid */}\n        <div className=\"grid grid-cols-4 gap-3\">\n          {gameData.cards.map((card, index) => {\n            const isFlipped = flippedCards.includes(index) || matchedPairs.includes(index);\n\n            return (\n              <motion.button\n                key={index}\n                onClick={() => handleMemoryCardClick(index)}\n                whileHover={{ scale: 1.05 }}\n                whileTap={{ scale: 0.95 }}\n                className={`aspect-square rounded-xl border-2 flex items-center justify-center text-lg font-bold transition-all ${\n                  matchedPairs.includes(index)\n                    ? 'bg-green-100 border-green-300 text-green-800'\n                    : isFlipped\n                    ? 'bg-blue-100 border-blue-300 text-blue-800'\n                    : 'bg-gray-100 border-gray-300 text-gray-600 hover:bg-gray-200'\n                }`}\n                animate={{\n                  rotateY: isFlipped ? 0 : 180,\n                }}\n                transition={{ duration: 0.3 }}\n              >\n                {isFlipped ? card.content : '?'}\n              </motion.button>\n            );\n          })}\n        </div>\n      </div>\n    );\n  };\n\n  const renderDragDrop = () => {\n    return (\n      <div className=\"space-y-6\">\n        {/* Categories */}\n        <div className=\"grid grid-cols-2 gap-4\">\n          {gameData.categories.map((category, index) => (\n            <div key={index} className=\"gaming-card p-4 min-h-32\">\n              <h4 className=\"font-bold text-center mb-3 text-sm\">{category.name}</h4>\n              <div className=\"space-y-2\">\n                {selectedAnswers\n                  .filter(answer => answer.categoryId === category.id)\n                  .map((answer, answerIndex) => (\n                    <div\n                      key={answerIndex}\n                      className=\"p-2 bg-blue-100 rounded-lg text-sm text-center\"\n                    >\n                      {answer.text}\n                    </div>\n                  ))}\n              </div>\n            </div>\n          ))}\n        </div>\n\n        {/* Available Items */}\n        <div className=\"gaming-card p-4\">\n          <h4 className=\"font-bold mb-3\">Drag items to correct categories:</h4>\n          <div className=\"grid grid-cols-2 gap-2\">\n            {gameData.items\n              .filter(item => !selectedAnswers.find(a => a.id === item.id))\n              .map((item, index) => (\n                <motion.button\n                  key={item.id}\n                  whileHover={{ scale: 1.02 }}\n                  whileTap={{ scale: 0.98 }}\n                  onClick={() => {\n                    // Simple click-to-assign for mobile\n                    const categoryId = prompt('Select category (1 or 2):');\n                    if (categoryId && (categoryId === '1' || categoryId === '2')) {\n                      setSelectedAnswers([...selectedAnswers, {\n                        ...item,\n                        categoryId: parseInt(categoryId)\n                      }]);\n                    }\n                  }}\n                  className=\"p-3 bg-white border-2 border-gray-200 rounded-lg text-sm font-medium hover:border-blue-300 transition-all\"\n                >\n                  {item.text}\n                </motion.button>\n              ))}\n          </div>\n        </div>\n\n        {/* Check Answers Button */}\n        {selectedAnswers.length === gameData.items.length && (\n          <button\n            onClick={handleGameEnd}\n            className=\"w-full gaming-button-success py-3\"\n          >\n            Check Answers\n          </button>\n        )}\n      </div>\n    );\n  };\n\n  const renderGameContent = () => {\n    switch (gameType) {\n      case 'speed-quiz':\n        return renderSpeedQuiz();\n      case 'memory-match':\n        return renderMemoryMatch();\n      case 'drag-drop':\n        return renderDragDrop();\n      default:\n        return <div>Game type not supported</div>;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-green-50\">\n      {/* Header */}\n      <div className=\"bg-white/80 backdrop-blur-sm shadow-sm border-b border-white/50 p-4\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-3\">\n            <span className=\"text-2xl\">{getGameIcon()}</span>\n            <div>\n              <h1 className=\"text-lg font-bold text-gray-900\">{getGameTitle()}</h1>\n              <p className=\"text-sm text-gray-600\">Score: {score}</p>\n            </div>\n          </div>\n\n          <div className=\"flex items-center space-x-4\">\n            {/* Timer */}\n            <div className={`px-3 py-2 rounded-lg font-bold ${\n              timeLeft <= 10 ? 'bg-red-100 text-red-800' : 'bg-blue-100 text-blue-800'\n            }`}>\n               {timeLeft}s\n            </div>\n\n            {/* Exit Button */}\n            <button\n              onClick={onGameExit}\n              className=\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors\"\n            >\n              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Game Content */}\n      <div className=\"p-4 max-w-md mx-auto\">\n        <AnimatePresence mode=\"wait\">\n          {gameState === 'playing' && (\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n            >\n              {renderGameContent()}\n            </motion.div>\n          )}\n\n          {gameState === 'finished' && (\n            <motion.div\n              initial={{ opacity: 0, scale: 0.9 }}\n              animate={{ opacity: 1, scale: 1 }}\n              className=\"text-center py-12\"\n            >\n              <motion.div\n                className=\"text-6xl mb-4\"\n                animate={{ scale: [1, 1.2, 1] }}\n                transition={{ duration: 1, repeat: Infinity }}\n              >\n                \n              </motion.div>\n\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Game Complete!</h2>\n\n              <div className=\"gaming-card p-6 mx-4 mb-6\">\n                <div className=\"space-y-3\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"font-medium\">Final Score:</span>\n                    <span className=\"font-bold text-blue-600\">{score}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"font-medium\">Best Streak:</span>\n                    <span className=\"font-bold text-orange-600\">{streak}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"font-medium\">Time Used:</span>\n                    <span className=\"font-bold text-green-600\">{timeLimit - timeLeft}s</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"font-medium\">XP Earned:</span>\n                    <span className=\"font-bold text-purple-600\">+{Math.floor(score / 2)}</span>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"space-y-3 px-4\">\n                <button\n                  onClick={() => window.location.reload()}\n                  className=\"w-full gaming-button-primary py-3\"\n                >\n                  Play Again\n                </button>\n                <button\n                  onClick={onGameExit}\n                  className=\"w-full py-3 px-6 bg-gray-100 text-gray-700 rounded-xl font-semibold hover:bg-gray-200 transition-colors\"\n                >\n                  Back to Dashboard\n                </button>\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n    </div>\n  );\n};\n\nexport default MiniGameInterface;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\MobileLayout.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'viewport' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":29,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":13},{"ruleId":"no-unused-vars","severity":1,"message":"'safeAreaStyles' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":39,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":23},{"ruleId":"no-unused-vars","severity":1,"message":"'layoutClasses' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":63,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":63,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { useMobileOptimization } from '../hooks/useMobileOptimization';\nimport { usePWA } from '../hooks/usePWA';\nimport UserStats from './UserStats.jsx';\nimport PullToRefresh from './PullToRefresh';\nimport { GamificationProvider } from '../context/GamificationContext.jsx';\nimport {\n  Home,\n  BookOpen,\n  Trophy,\n  Users,\n  BarChart3\n} from 'lucide-react';\n\nconst MobileLayout = ({\n  children,\n  showHeader = true,\n  showBottomNav = true,\n  className = '',\n  enablePullToRefresh = false,\n  onRefresh,\n  headerContent,\n  bottomNavContent\n}) => {\n  const {\n    isMobile,\n    orientation,\n    viewport,\n    getPerformanceConfig,\n    handleTouchStart,\n    handleTouchEnd\n  } = useMobileOptimization();\n\n  const { isOnline } = usePWA();\n  const performanceConfig = getPerformanceConfig();\n\n  // Safe area inset support for devices with notches\n  const safeAreaStyles = {\n    paddingTop: 'env(safe-area-inset-top)',\n    paddingLeft: 'env(safe-area-inset-left)',\n    paddingRight: 'env(safe-area-inset-right)',\n    paddingBottom: 'env(safe-area-inset-bottom)'\n  };\n\n  // Dynamic viewport height handling for mobile browsers\n  useEffect(() => {\n    const updateViewportHeight = () => {\n      const vh = window.innerHeight * 0.01;\n      document.documentElement.style.setProperty('--vh', `${vh}px`);\n    };\n\n    updateViewportHeight();\n    window.addEventListener('resize', updateViewportHeight);\n    window.addEventListener('orientationchange', updateViewportHeight);\n\n    return () => {\n      window.removeEventListener('resize', updateViewportHeight);\n      window.removeEventListener('orientationchange', updateViewportHeight);\n    };\n  }, []);\n\n  const layoutClasses = `\n    min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50\n    flex flex-col overflow-hidden\n    ${isMobile ? 'mobile-optimized' : ''}\n    ${performanceConfig.enableAnimations ? '' : 'low-power'}\n    ${className}\n  `;\n\n  const contentClasses = `\n    flex-1 overflow-y-auto smooth-scroll\n    ${showHeader ? 'pt-16' : ''}\n    ${showBottomNav ? 'pb-20' : ''}\n    ${isMobile ? 'px-4' : 'px-6'}\n    py-4\n  `;\n\n  return (\n    <GamificationProvider>\n      {/* Status indicators */}\n      {!isOnline && (\n        <div className=\"fixed top-0 left-0 right-0 bg-yellow-400 text-yellow-900 p-2 text-center text-sm font-medium z-50\">\n           You&apos;re offline - Limited functionality available\n        </div>\n      )}\n\n      {/* Header */}\n      {showHeader && (\n        <motion.header\n          className={`\n            fixed top-0 left-0 right-0 z-40\n            bg-white/80 backdrop-blur-md border-b border-gray-200\n            h-16 flex items-center justify-between px-4\n            ${performanceConfig.enableShadows ? 'shadow-sm' : ''}\n          `}\n          initial={{ y: -64 }}\n          animate={{ y: 0 }}\n          transition={{ type: 'spring', stiffness: 300, damping: 30 }}\n        >\n          {headerContent || (\n            <div className=\"flex items-center space-x-4\">\n              <h1 className=\"text-xl font-bold text-gray-900\">HSC App</h1>\n              {!isOnline && (\n                <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs bg-yellow-100 text-yellow-800\">\n                  Offline\n                </span>\n              )}\n            </div>\n          )}\n          <div className=\"flex items-center\">\n            <UserStats />\n          </div>\n        </motion.header>\n      )}\n\n      {/* Main Content */}\n      <main\n        className={contentClasses}\n        onTouchStart={handleTouchStart}\n        onTouchEnd={handleTouchEnd}\n      >\n        {enablePullToRefresh && isMobile ? (\n          <PullToRefresh onRefresh={onRefresh}>\n            {children}\n          </PullToRefresh>\n        ) : (\n          children\n        )}\n      </main>\n\n      {/* Bottom Navigation */}\n      {showBottomNav && (\n        <motion.nav\n          className={`\n            fixed bottom-0 left-0 right-0 z-40\n            bg-white/80 backdrop-blur-md border-t border-gray-200\n            h-20 flex items-center justify-around px-4\n            ${performanceConfig.enableShadows ? 'shadow-lg' : ''}\n          `}\n          initial={{ y: 80 }}\n          animate={{ y: 0 }}\n          transition={{ type: 'spring', stiffness: 300, damping: 30, delay: 0.1 }}\n        >\n          {bottomNavContent || <DefaultBottomNav />}\n        </motion.nav>\n      )}\n\n      {/* Orientation change indicator */}\n      {isMobile && (\n        <OrientationIndicator orientation={orientation} />\n      )}\n\n      {/* Performance monitoring in development */}\n      {process.env.NODE_ENV === 'development' && (\n        <PerformanceMonitor />\n      )}\n    </GamificationProvider>\n  );\n};\n\n// Default bottom navigation\nconst DefaultBottomNav = () => {\n  // This should be driven by a navigation context or props in a real app\n  const [activePage, setActivePage] = React.useState('Home');\n\n  const navItems = [\n    { id: 'Home', icon: Home, label: 'Home' },\n    { id: 'Study', icon: BookOpen, label: 'Study' },\n    { id: 'Games', icon: Trophy, label: 'Games' },\n    { id: 'Social', icon: Users, label: 'Social' },\n    { id: 'Progress', icon: BarChart3, label: 'Progress' }\n  ];\n\n  return (\n    <>\n      {navItems.map((item, index) => {\n        const Icon = item.icon;\n        const isActive = activePage === item.id;\n        return (\n          <motion.button\n            key={item.id}\n            onClick={() => setActivePage(item.id)}\n            className={`\n              flex flex-col items-center justify-center space-y-1 p-2 rounded-lg\n              min-w-[44px] min-h-[44px] touch-optimized transition-colors\n              ${isActive ? 'text-blue-600' : 'text-gray-600 hover:text-blue-500'}\n            `}\n            whileTap={{ scale: 0.95 }}\n            initial={{ y: 20, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            transition={{ delay: index * 0.05 }}\n          >\n            <Icon className=\"w-6 h-6\" />\n            <span className=\"text-xs font-medium\">{item.label}</span>\n          </motion.button>\n        );\n      })}\n    </>\n  );\n};\n\n// Orientation change indicator\nconst OrientationIndicator = ({ orientation }) => {\n  const [showIndicator, setShowIndicator] = React.useState(false);\n\n  React.useEffect(() => {\n    setShowIndicator(true);\n    const timer = setTimeout(() => setShowIndicator(false), 2000);\n    return () => clearTimeout(timer);\n  }, [orientation]);\n\n  if (!showIndicator) return null;\n\n  return (\n    <motion.div\n      className=\"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50\"\n      initial={{ scale: 0, opacity: 0 }}\n      animate={{ scale: 1, opacity: 1 }}\n      exit={{ scale: 0, opacity: 0 }}\n    >\n      <div className=\"bg-black/80 text-white px-4 py-2 rounded-lg backdrop-blur-sm\">\n        <div className=\"flex items-center space-x-2\">\n          <span className=\"text-2xl\">\n            {orientation === 'portrait' ? '' : ''}\n          </span>\n          <span className=\"text-sm font-medium capitalize\">\n            {orientation} Mode\n          </span>\n        </div>\n      </div>\n    </motion.div>\n  );\n};\n\n// Performance monitoring component for development\nconst PerformanceMonitor = () => {\n  const [metrics, setMetrics] = React.useState({});\n\n  React.useEffect(() => {\n    const updateMetrics = () => {\n      if ('memory' in performance) {\n        setMetrics({\n          memory: performance.memory,\n          timing: performance.timing,\n          navigation: performance.navigation\n        });\n      }\n    };\n\n    updateMetrics();\n    const interval = setInterval(updateMetrics, 5000);\n    return () => clearInterval(interval);\n  }, []);\n\n  return (\n    <div className=\"fixed top-20 right-4 bg-black/80 text-white p-2 rounded text-xs z-50 max-w-xs\">\n      <div>Memory: {Math.round(metrics.memory?.usedJSHeapSize / 1024 / 1024)}MB</div>\n      <div>Viewport: {window.innerWidth}x{window.innerHeight}</div>\n      <div>Pixel Ratio: {window.devicePixelRatio}</div>\n    </div>\n  );\n};\n\nexport default MobileLayout;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\Modal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\ModernAnalyticsDashboard.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadDashboardData'. Either include it or remove the dependency array.","line":30,"column":6,"nodeType":"ArrayExpression","endLine":30,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [loadDashboardData, selectedTimeframe]","fix":{"range":[966,985],"text":"[loadDashboardData, selectedTimeframe]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport analyticsService from '../services/analyticsService';\n\nconst ModernAnalyticsDashboard = ({ onBack }) => {\n  const [dashboardData, setDashboardData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [selectedTimeframe, setSelectedTimeframe] = useState('7d');\n  const [selectedView, setSelectedView] = useState('overview');\n  const [realTimeEvents, setRealTimeEvents] = useState([]);\n  const [liveMetrics, setLiveMetrics] = useState({\n    activeUsers: 1,\n    questionsThisSession: 0,\n    currentScore: 0,\n    sessionTime: 0\n  });\n\n  const realtimeListenerRef = useRef(null);\n  const sessionStartTime = useRef(Date.now());\n\n  useEffect(() => {\n    loadDashboardData();\n    setupRealTimeUpdates();\n    \n    return () => {\n      if (realtimeListenerRef.current) {\n        realtimeListenerRef.current();\n      }\n    };\n  }, [selectedTimeframe]);\n\n  const loadDashboardData = async () => {\n    setLoading(true);\n    try {\n      const data = await analyticsService.getDashboardAnalytics('demo-user', selectedTimeframe);\n      setDashboardData(data);\n      console.log(' Dashboard data loaded:', data);\n    } catch (error) {\n      console.error('Error loading dashboard data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const setupRealTimeUpdates = () => {\n    if (realtimeListenerRef.current) {\n      realtimeListenerRef.current();\n    }\n\n    realtimeListenerRef.current = analyticsService.addRealTimeListener((event) => {\n      console.log(' Real-time analytics event:', event);\n\n      // Update live metrics\n      setLiveMetrics(prev => {\n        const updated = { ...prev };\n        updated.sessionTime = Math.floor((Date.now() - sessionStartTime.current) / 1000 / 60);\n        \n        if (event.type === 'quiz_completed') {\n          updated.questionsThisSession += event.data?.totalQuestions || 1;\n          updated.currentScore = event.data?.score || 0;\n        }\n        \n        return updated;\n      });\n\n      // Update real-time events feed\n      setRealTimeEvents(prev => [\n        {\n          id: event.id || Date.now(),\n          ...event,\n          timestamp: new Date().toISOString()\n        },\n        ...prev.slice(0, 19)\n      ]);\n    });\n  };\n\n  const StatCard = ({ title, value, subtitle, color = 'blue', icon, trend = null, isLive = false }) => (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className={`bg-white rounded-xl p-6 shadow-lg border-l-4 border-${color}-500 relative overflow-hidden`}\n    >\n      {isLive && (\n        <div className=\"absolute top-2 right-2\">\n          <motion.div\n            animate={{ scale: [1, 1.2, 1] }}\n            transition={{ repeat: Infinity, duration: 2 }}\n            className=\"w-3 h-3 bg-red-500 rounded-full\"\n          />\n        </div>\n      )}\n      \n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex-1\">\n          <div className=\"flex items-center space-x-2\">\n            {icon && <span className=\"text-2xl\">{icon}</span>}\n            <p className=\"text-sm font-medium text-gray-600\">{title}</p>\n            {isLive && <span className=\"text-xs bg-red-100 text-red-600 px-2 py-1 rounded-full\">LIVE</span>}\n          </div>\n          <p className={`text-3xl font-bold text-${color}-600 mt-1`}>{value}</p>\n          {subtitle && (\n            <p className=\"text-sm text-gray-500 mt-1\">{subtitle}</p>\n          )}\n        </div>\n        {trend !== null && (\n          <div className={`text-xl ${trend > 0 ? 'text-green-500' : trend < 0 ? 'text-red-500' : 'text-gray-400'}`}>\n            {trend > 0 ? '' : trend < 0 ? '' : ''}\n          </div>\n        )}\n      </div>\n    </motion.div>\n  );\n\n  const ProgressRing = ({ percentage, size = 120, strokeWidth = 8, color = 'blue' }) => {\n    const radius = (size - strokeWidth) / 2;\n    const circumference = radius * 2 * Math.PI;\n    const strokeDasharray = `${percentage / 100 * circumference} ${circumference}`;\n\n    return (\n      <div className=\"relative\" style={{ width: size, height: size }}>\n        <svg width={size} height={size} className=\"transform -rotate-90\">\n          <circle\n            cx={size / 2}\n            cy={size / 2}\n            r={radius}\n            stroke=\"currentColor\"\n            strokeWidth={strokeWidth}\n            fill=\"none\"\n            className=\"text-gray-200\"\n          />\n          <motion.circle\n            cx={size / 2}\n            cy={size / 2}\n            r={radius}\n            stroke=\"currentColor\"\n            strokeWidth={strokeWidth}\n            fill=\"none\"\n            strokeLinecap=\"round\"\n            className={`text-${color}-500`}\n            initial={{ strokeDasharray: `0 ${circumference}` }}\n            animate={{ strokeDasharray }}\n            transition={{ duration: 1, ease: \"easeOut\" }}\n          />\n        </svg>\n        <div className=\"absolute inset-0 flex items-center justify-center\">\n          <span className={`text-2xl font-bold text-${color}-600`}>{percentage}%</span>\n        </div>\n      </div>\n    );\n  };\n\n  const SubjectCard = ({ subject, data, color }) => (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.95 }}\n      animate={{ opacity: 1, scale: 1 }}\n      className=\"bg-white rounded-xl p-6 shadow-lg\"\n    >\n      <div className=\"flex items-center justify-between mb-4\">\n        <div className=\"flex items-center space-x-3\">\n          <span className=\"text-2xl\">{subject === 'biology' ? '' : ''}</span>\n          <h3 className=\"text-lg font-semibold capitalize\">{subject}</h3>\n        </div>\n        <ProgressRing \n          percentage={data?.overall?.averageProgress || 0} \n          size={80} \n          strokeWidth={6}\n          color={color}\n        />\n      </div>\n\n      <div className=\"grid grid-cols-2 gap-4 mb-4\">\n        <div className=\"text-center p-3 bg-gray-50 rounded-lg\">\n          <p className={`text-xl font-bold text-${color}-600`}>\n            {data?.overall?.averageScore || 0}%\n          </p>\n          <p className=\"text-sm text-gray-600\">Avg Score</p>\n        </div>\n        <div className=\"text-center p-3 bg-gray-50 rounded-lg\">\n          <p className={`text-xl font-bold text-${color}-600`}>\n            {Math.round((data?.overall?.totalTimeSpent || 0) / 60)}h\n          </p>\n          <p className=\"text-sm text-gray-600\">Time Spent</p>\n        </div>\n      </div>\n\n      <div className=\"space-y-3\">\n        {data?.strongAreas?.length > 0 && (\n          <div>\n            <p className=\"text-sm font-medium text-green-600 mb-1\">Strong Areas:</p>\n            <div className=\"flex flex-wrap gap-1\">\n              {data.strongAreas.slice(0, 3).map((area, index) => (\n                <span key={index} className=\"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full\">\n                  {area}\n                </span>\n              ))}\n            </div>\n          </div>\n        )}\n        \n        {data?.strugglingAreas?.length > 0 && (\n          <div>\n            <p className=\"text-sm font-medium text-red-600 mb-1\">Focus Areas:</p>\n            <div className=\"flex flex-wrap gap-1\">\n              {data.strugglingAreas.slice(0, 3).map((area, index) => (\n                <span key={index} className=\"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full\">\n                  {area}\n                </span>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    </motion.div>\n  );\n\n  const PerformanceTrend = ({ trends }) => (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"bg-white rounded-xl p-6 shadow-lg\"\n    >\n      <h3 className=\"text-lg font-semibold mb-4\">Performance Trend</h3>\n      \n      <div className=\"space-y-4\">\n        {trends?.slice(-7).map((trend, index) => {\n          const date = new Date(trend.date);\n          const isToday = date.toDateString() === new Date().toDateString();\n          \n          return (\n            <div key={index} className={`flex items-center justify-between p-3 rounded-lg ${isToday ? 'bg-blue-50' : 'bg-gray-50'}`}>\n              <div className=\"flex items-center space-x-3\">\n                <div className={`w-3 h-3 rounded-full ${isToday ? 'bg-blue-500' : 'bg-gray-300'}`} />\n                <span className=\"text-sm font-medium\">\n                  {isToday ? 'Today' : date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' })}\n                </span>\n              </div>\n              \n              <div className=\"flex items-center space-x-4\">\n                <div className=\"text-center\">\n                  <p className=\"text-sm font-bold text-blue-600\">{Math.round(trend.score)}%</p>\n                  <p className=\"text-xs text-gray-500\">Score</p>\n                </div>\n                <div className=\"text-center\">\n                  <p className=\"text-sm font-bold text-purple-600\">{trend.questionsAnswered}</p>\n                  <p className=\"text-xs text-gray-500\">Questions</p>\n                </div>\n                <div className=\"text-center\">\n                  <p className=\"text-sm font-bold text-green-600\">{Math.round(trend.timeSpent)}m</p>\n                  <p className=\"text-xs text-gray-500\">Time</p>\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </motion.div>\n  );\n\n  const RealTimeActivity = () => (\n    <motion.div\n      initial={{ opacity: 0, x: 20 }}\n      animate={{ opacity: 1, x: 0 }}\n      className=\"bg-white rounded-xl p-6 shadow-lg\"\n    >\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className=\"text-lg font-semibold\">Live Activity</h3>\n        <motion.div\n          animate={{ scale: [1, 1.2, 1] }}\n          transition={{ repeat: Infinity, duration: 2 }}\n          className=\"flex items-center space-x-2\"\n        >\n          <div className=\"w-2 h-2 bg-green-500 rounded-full\" />\n          <span className=\"text-sm text-green-600 font-medium\">Live</span>\n        </motion.div>\n      </div>\n\n      <div className=\"space-y-3 max-h-80 overflow-y-auto\">\n        <AnimatePresence>\n          {realTimeEvents.map((event) => (\n            <motion.div\n              key={event.id}\n              initial={{ opacity: 0, x: -20 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: 20 }}\n              className=\"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg border-l-4 border-blue-500\"\n            >\n              <div className=\"text-xl\">\n                {event.type === 'quiz_completed' && ''}\n                {event.type === 'progress_update' && ''}\n                {event.type === 'achievement_unlocked' && ''}\n                {event.type === 'content_access' && ''}\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-medium text-gray-900\">\n                  {event.type === 'quiz_completed' && 'Quiz Completed'}\n                  {event.type === 'progress_update' && 'Progress Updated'}\n                  {event.type === 'achievement_unlocked' && 'Achievement Unlocked'}\n                  {event.type === 'content_access' && 'Content Accessed'}\n                </p>\n                <p className=\"text-sm text-gray-500\">\n                  {event.agent} agent - {event.data?.subject || 'Unknown subject'}\n                  {event.data?.score && ` (${event.data.score}%)`}\n                </p>\n                <p className=\"text-xs text-gray-400\">\n                  {new Date(event.timestamp).toLocaleTimeString()}\n                </p>\n              </div>\n            </motion.div>\n          ))}\n        </AnimatePresence>\n        \n        {realTimeEvents.length === 0 && (\n          <div className=\"text-center py-8 text-gray-500\">\n            <p className=\"text-2xl mb-2\"></p>\n            <p>Waiting for activity...</p>\n            <p className=\"text-sm\">Real-time events will appear here</p>\n          </div>\n        )}\n      </div>\n    </motion.div>\n  );\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <motion.div\n          animate={{ rotate: 360 }}\n          transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\n          className=\"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full\"\n        />\n        <span className=\"ml-4 text-xl text-gray-700\">Loading Analytics...</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-white shadow-sm border-b\">\n        <div className=\"max-w-7xl mx-auto px-6 py-6\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-4\">\n              <button\n                onClick={onBack}\n                className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n              >\n                 Back\n              </button>\n              <div>\n                <h1 className=\"text-3xl font-bold text-gray-900\">Learning Analytics</h1>\n                <p className=\"text-gray-600\">Real-time insights into your HSC preparation journey</p>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center space-x-4\">\n              <select\n                value={selectedTimeframe}\n                onChange={(e) => setSelectedTimeframe(e.target.value)}\n                className=\"border border-gray-300 rounded-lg px-4 py-2 bg-white\"\n              >\n                <option value=\"1d\">Today</option>\n                <option value=\"7d\">This Week</option>\n                <option value=\"30d\">This Month</option>\n              </select>\n              \n              <div className=\"flex bg-gray-100 rounded-lg p-1\">\n                {['overview', 'subjects', 'performance'].map((view) => (\n                  <button\n                    key={view}\n                    onClick={() => setSelectedView(view)}\n                    className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${\n                      selectedView === view\n                        ? 'bg-white text-blue-600 shadow-sm'\n                        : 'text-gray-600 hover:text-gray-900'\n                    }`}\n                  >\n                    {view.charAt(0).toUpperCase() + view.slice(1)}\n                  </button>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"max-w-7xl mx-auto px-6 py-8\">\n        {/* Live Session Metrics */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n          <StatCard\n            title=\"Session Time\"\n            value={`${liveMetrics.sessionTime}m`}\n            subtitle=\"current session\"\n            color=\"purple\"\n            icon=\"\"\n            isLive={true}\n          />\n          <StatCard\n            title=\"Questions Today\"\n            value={liveMetrics.questionsThisSession}\n            subtitle=\"this session\"\n            color=\"blue\"\n            icon=\"\"\n            isLive={true}\n          />\n          <StatCard\n            title=\"Current Score\"\n            value={`${liveMetrics.currentScore}%`}\n            subtitle=\"latest quiz\"\n            color=\"green\"\n            icon=\"\"\n            isLive={true}\n          />\n          <StatCard\n            title=\"Active Users\"\n            value={liveMetrics.activeUsers}\n            subtitle=\"currently online\"\n            color=\"orange\"\n            icon=\"\"\n            isLive={true}\n          />\n        </div>\n\n        {/* Overview Metrics */}\n        {selectedView === 'overview' && dashboardData && (\n          <>\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n              <StatCard\n                title=\"Overall Progress\"\n                value={`${dashboardData.overall?.overallProgress || 0}%`}\n                subtitle=\"across all subjects\"\n                color=\"blue\"\n                icon=\"\"\n                trend={5}\n              />\n              <StatCard\n                title=\"Average Score\"\n                value={`${dashboardData.overall?.averageScore || 0}%`}\n                subtitle=\"quiz performance\"\n                color=\"green\"\n                icon=\"\"\n                trend={3}\n              />\n              <StatCard\n                title=\"Study Time\"\n                value={`${Math.round((dashboardData.overall?.totalTimeSpent || 0) / 60)}h`}\n                subtitle=\"total time invested\"\n                color=\"purple\"\n                icon=\"\"\n                trend={8}\n              />\n              <StatCard\n                title=\"Streak Days\"\n                value={dashboardData.overall?.streakDays || 0}\n                subtitle=\"consecutive days\"\n                color=\"orange\"\n                icon=\"\"\n                trend={1}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n              <div className=\"lg:col-span-2 space-y-6\">\n                <PerformanceTrend trends={dashboardData.performance?.trends} />\n              </div>\n              <div>\n                <RealTimeActivity />\n              </div>\n            </div>\n          </>\n        )}\n\n        {/* Subject Analysis */}\n        {selectedView === 'subjects' && dashboardData && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n            {dashboardData.subjects?.biology && (\n              <SubjectCard \n                subject=\"biology\" \n                data={dashboardData.subjects.biology} \n                color=\"green\"\n              />\n            )}\n            {dashboardData.subjects?.chemistry && (\n              <SubjectCard \n                subject=\"chemistry\" \n                data={dashboardData.subjects.chemistry} \n                color=\"purple\"\n              />\n            )}\n          </div>\n        )}\n\n        {/* Performance Analysis */}\n        {selectedView === 'performance' && dashboardData && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n            <PerformanceTrend trends={dashboardData.performance?.trends} />\n            <RealTimeActivity />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ModernAnalyticsDashboard;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\Module5AdminDashboard.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadModuleOverview'. Either include it or remove the dependency array.","line":13,"column":6,"nodeType":"ArrayExpression","endLine":13,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [loadModuleOverview]","fix":{"range":[579,581],"text":"[loadModuleOverview]"}}]},{"ruleId":"no-unused-vars","severity":1,"message":"'result' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":123,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":123,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'result' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":154,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":154,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nconst Module5AdminDashboard = ({ onBack }) => {\r\n  const [currentView, setCurrentView] = useState('overview'); // overview, content-upload, questions-upload, analytics\r\n  const [moduleOverview, setModuleOverview] = useState(null);\r\n  const [selectedDotPoint, setSelectedDotPoint] = useState(null);\r\n  const [uploadProgress, setUploadProgress] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    loadModuleOverview();\r\n  }, []);\r\n\r\n  const loadModuleOverview = async () => {\r\n    setLoading(true);\r\n    try {\r\n      // In a real implementation, this would fetch from the biology-agent API\r\n      const response = await fetch('/api/biology/module5-admin/overview');\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setModuleOverview(data.overview);\r\n      } else {\r\n        // Fallback to mock data for demo\r\n        setModuleOverview(mockModuleOverview);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load module overview:', error);\r\n      setModuleOverview(mockModuleOverview);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  // Mock data for demonstration\r\n  const mockModuleOverview = {\r\n    moduleId: 'biology-module-5',\r\n    moduleName: 'Module 5: Reproduction',\r\n    totalDotPoints: 13,\r\n    inquiryQuestions: {\r\n      IQ1: {\r\n        title: 'How does reproduction ensure the continuity of a species?',\r\n        dotPoints: {\r\n          'IQ1.1': {\r\n            content: { podcast: true, video: true, slides: false },\r\n            questions: { \r\n              quickQuiz: { available: true, count: 8 },\r\n              longResponse: { available: false, count: 0 }\r\n            },\r\n            contentComplete: false,\r\n            questionsComplete: false\r\n          },\r\n          'IQ1.2': {\r\n            content: { podcast: false, video: false, slides: false },\r\n            questions: { \r\n              quickQuiz: { available: false, count: 0 },\r\n              longResponse: { available: false, count: 0 }\r\n            },\r\n            contentComplete: false,\r\n            questionsComplete: false\r\n          },\r\n          'IQ1.3': {\r\n            content: { podcast: false, video: false, slides: false },\r\n            questions: { \r\n              quickQuiz: { available: false, count: 0 },\r\n              longResponse: { available: false, count: 0 }\r\n            },\r\n            contentComplete: false,\r\n            questionsComplete: false\r\n          }\r\n        }\r\n      },\r\n      IQ2: {\r\n        title: 'How is the cell cycle controlled during development?',\r\n        dotPoints: {\r\n          'IQ2.1': {\r\n            content: { podcast: false, video: false, slides: false },\r\n            questions: { \r\n              quickQuiz: { available: false, count: 0 },\r\n              longResponse: { available: false, count: 0 }\r\n            },\r\n            contentComplete: false,\r\n            questionsComplete: false\r\n          },\r\n          'IQ2.2': {\r\n            content: { podcast: false, video: false, slides: false },\r\n            questions: { \r\n              quickQuiz: { available: false, count: 0 },\r\n              longResponse: { available: false, count: 0 }\r\n            },\r\n            contentComplete: false,\r\n            questionsComplete: false\r\n          }\r\n        }\r\n      }\r\n      // ... other IQ sections would follow similar pattern\r\n    },\r\n    statistics: {\r\n      contentCompletion: 15,\r\n      questionsCompletion: 8,\r\n      totalContentItems: 39, // 13 dot points * 3 content types\r\n      completedContentItems: 6,\r\n      totalQuizTypes: 26, // 13 dot points * 2 quiz types\r\n      completedQuizTypes: 2,\r\n      readyForLaunch: false\r\n    }\r\n  };\r\n\r\n  const handleContentUpload = async (dotPointId, contentType, file, metadata) => {\r\n    setUploadProgress({ status: 'uploading', progress: 0 });\r\n    \r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('contentFile', file);\r\n      formData.append('title', metadata.title);\r\n      formData.append('description', metadata.description || '');\r\n\r\n      const response = await fetch(`/api/biology/module5-admin/content/upload/${dotPointId}/${contentType}`, {\r\n        method: 'POST',\r\n        body: formData\r\n      });\r\n\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        setUploadProgress({ status: 'success', message: `${contentType} uploaded successfully!` });\r\n        \r\n        // Refresh overview\r\n        setTimeout(() => {\r\n          loadModuleOverview();\r\n          setUploadProgress(null);\r\n        }, 2000);\r\n      } else {\r\n        throw new Error('Upload failed');\r\n      }\r\n    } catch (error) {\r\n      setUploadProgress({ status: 'error', message: error.message });\r\n      setTimeout(() => setUploadProgress(null), 3000);\r\n    }\r\n  };\r\n\r\n  const handleQuestionsUpload = async (dotPointId, quizType, file) => {\r\n    setUploadProgress({ status: 'uploading', progress: 0 });\r\n    \r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('questionsFile', file);\r\n      formData.append('quizType', quizType);\r\n\r\n      const response = await fetch(`/api/biology/module5-admin/questions/upload/${dotPointId}`, {\r\n        method: 'POST',\r\n        body: formData\r\n      });\r\n\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        setUploadProgress({ status: 'success', message: `Questions uploaded successfully!` });\r\n        \r\n        // Refresh overview\r\n        setTimeout(() => {\r\n          loadModuleOverview();\r\n          setUploadProgress(null);\r\n        }, 2000);\r\n      } else {\r\n        throw new Error('Questions upload failed');\r\n      }\r\n    } catch (error) {\r\n      setUploadProgress({ status: 'error', message: error.message });\r\n      setTimeout(() => setUploadProgress(null), 3000);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-4\"></div>\r\n          <p className=\"text-gray-600\">Loading admin dashboard...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const renderOverview = () => (\r\n    <div className=\"space-y-6\">\r\n      {/* Statistics Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n        <div className=\"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/50\">\r\n          <div className=\"text-center\">\r\n            <div className=\"text-3xl font-bold text-blue-600\">{moduleOverview.statistics.contentCompletion}%</div>\r\n            <div className=\"text-sm text-gray-600\">Content Complete</div>\r\n            <div className=\"text-xs text-gray-500 mt-1\">\r\n              {moduleOverview.statistics.completedContentItems}/{moduleOverview.statistics.totalContentItems} items\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/50\">\r\n          <div className=\"text-center\">\r\n            <div className=\"text-3xl font-bold text-purple-600\">{moduleOverview.statistics.questionsCompletion}%</div>\r\n            <div className=\"text-sm text-gray-600\">Questions Complete</div>\r\n            <div className=\"text-xs text-gray-500 mt-1\">\r\n              {moduleOverview.statistics.completedQuizTypes}/{moduleOverview.statistics.totalQuizTypes} quiz types\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/50\">\r\n          <div className=\"text-center\">\r\n            <div className=\"text-3xl font-bold text-green-600\">{moduleOverview.totalDotPoints}</div>\r\n            <div className=\"text-sm text-gray-600\">Dot Points</div>\r\n            <div className=\"text-xs text-gray-500 mt-1\">13 total sections</div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/50\">\r\n          <div className=\"text-center\">\r\n            <div className={`text-3xl font-bold ${moduleOverview.statistics.readyForLaunch ? 'text-green-600' : 'text-yellow-600'}`}>\r\n              {moduleOverview.statistics.readyForLaunch ? '' : ''}\r\n            </div>\r\n            <div className=\"text-sm text-gray-600\">Launch Ready</div>\r\n            <div className=\"text-xs text-gray-500 mt-1\">\r\n              {moduleOverview.statistics.readyForLaunch ? 'Ready to go!' : 'Needs more content'}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Quick Actions */}\r\n      <div className=\"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/50\">\r\n        <h3 className=\"font-bold text-gray-900 mb-4\">Quick Actions</h3>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n          <button\r\n            onClick={() => setCurrentView('content-upload')}\r\n            className=\"p-4 text-left rounded-lg border-2 border-blue-200 bg-blue-50 hover:bg-blue-100 transition-colors\"\r\n          >\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center text-white\">\r\n                \r\n              </div>\r\n              <div>\r\n                <div className=\"font-semibold text-blue-900\">Upload Content</div>\r\n                <div className=\"text-sm text-blue-700\">Add podcasts, videos, slides</div>\r\n              </div>\r\n            </div>\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => setCurrentView('questions-upload')}\r\n            className=\"p-4 text-left rounded-lg border-2 border-purple-200 bg-purple-50 hover:bg-purple-100 transition-colors\"\r\n          >\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center text-white\">\r\n                \r\n              </div>\r\n              <div>\r\n                <div className=\"font-semibold text-purple-900\">Upload Questions</div>\r\n                <div className=\"text-sm text-purple-700\">Add quiz questions</div>\r\n              </div>\r\n            </div>\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => setCurrentView('analytics')}\r\n            className=\"p-4 text-left rounded-lg border-2 border-green-200 bg-green-50 hover:bg-green-100 transition-colors\"\r\n          >\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center text-white\">\r\n                \r\n              </div>\r\n              <div>\r\n                <div className=\"font-semibold text-green-900\">View Analytics</div>\r\n                <div className=\"text-sm text-green-700\">Content usage stats</div>\r\n              </div>\r\n            </div>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content Overview by Inquiry Question */}\r\n      <div className=\"space-y-4\">\r\n        <h3 className=\"font-bold text-gray-900 text-lg\">Content Status by Inquiry Question</h3>\r\n        {Object.entries(moduleOverview.inquiryQuestions).map(([iqId, iq]) => (\r\n          <div key={iqId} className=\"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/50\">\r\n            <h4 className=\"font-semibold text-gray-900 mb-4\">{iqId}: {iq.title}</h4>\r\n            \r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n              {Object.entries(iq.dotPoints).map(([dotPointId, dotPoint]) => (\r\n                <div key={dotPointId} className=\"border rounded-lg p-4\">\r\n                  <div className=\"flex items-center justify-between mb-3\">\r\n                    <h5 className=\"font-medium\">{dotPointId}</h5>\r\n                    <div className=\"flex space-x-1\">\r\n                      {dotPoint.contentComplete ? (\r\n                        <span className=\"text-green-600\"></span>\r\n                      ) : (\r\n                        <span className=\"text-gray-400\"></span>\r\n                      )}\r\n                      {dotPoint.questionsComplete ? (\r\n                        <span className=\"text-purple-600\"></span>\r\n                      ) : (\r\n                        <span className=\"text-gray-400\"></span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Content Status */}\r\n                  <div className=\"text-xs space-y-1 mb-3\">\r\n                    <div className=\"flex justify-between\">\r\n                      <span>Podcast:</span>\r\n                      <span className={dotPoint.content.podcast ? 'text-green-600' : 'text-red-600'}>\r\n                        {dotPoint.content.podcast ? '' : ''}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span>Video:</span>\r\n                      <span className={dotPoint.content.video ? 'text-green-600' : 'text-red-600'}>\r\n                        {dotPoint.content.video ? '' : ''}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span>Slides:</span>\r\n                      <span className={dotPoint.content.slides ? 'text-green-600' : 'text-red-600'}>\r\n                        {dotPoint.content.slides ? '' : ''}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Questions Status */}\r\n                  <div className=\"text-xs space-y-1\">\r\n                    <div className=\"flex justify-between\">\r\n                      <span>Quick Quiz:</span>\r\n                      <span className={dotPoint.questions.quickQuiz.available ? 'text-green-600' : 'text-red-600'}>\r\n                        {dotPoint.questions.quickQuiz.available ? \r\n                          ` (${dotPoint.questions.quickQuiz.count})` : ' (0)'}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span>Long Response:</span>\r\n                      <span className={dotPoint.questions.longResponse.available ? 'text-green-600' : 'text-red-600'}>\r\n                        {dotPoint.questions.longResponse.available ? \r\n                          ` (${dotPoint.questions.longResponse.count})` : ' (0)'}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <button\r\n                    onClick={() => {\r\n                      setSelectedDotPoint(dotPointId);\r\n                      setCurrentView('content-upload');\r\n                    }}\r\n                    className=\"mt-3 w-full text-xs bg-blue-100 text-blue-700 py-2 rounded hover:bg-blue-200 transition-colors\"\r\n                  >\r\n                    Manage Content\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const renderContentUpload = () => (\r\n    <ContentUploadForm\r\n      selectedDotPoint={selectedDotPoint}\r\n      onUpload={handleContentUpload}\r\n      onBack={() => setCurrentView('overview')}\r\n    />\r\n  );\r\n\r\n  const renderQuestionsUpload = () => (\r\n    <QuestionsUploadForm\r\n      selectedDotPoint={selectedDotPoint}\r\n      onUpload={handleQuestionsUpload}\r\n      onBack={() => setCurrentView('overview')}\r\n    />\r\n  );\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50\">\r\n      {/* Header */}\r\n      <div className=\"bg-white/80 backdrop-blur-sm shadow-sm border-b border-white/50\">\r\n        <div className=\"px-4 py-4 flex items-center justify-between\">\r\n          <div className=\"flex items-center\">\r\n            <button\r\n              onClick={onBack}\r\n              className=\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors mr-3\"\r\n            >\r\n              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n              </svg>\r\n            </button>\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full flex items-center justify-center text-white text-lg\">\r\n                \r\n              </div>\r\n              <div>\r\n                <h1 className=\"text-xl font-bold text-gray-900\">Module 5 Admin</h1>\r\n                <p className=\"text-sm text-gray-600\">Content Management Dashboard</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* View Navigation */}\r\n          <div className=\"flex space-x-2\">\r\n            {[\r\n              { key: 'overview', label: 'Overview', icon: '' },\r\n              { key: 'content-upload', label: 'Content', icon: '' },\r\n              { key: 'questions-upload', label: 'Questions', icon: '' }\r\n            ].map(({ key, label, icon }) => (\r\n              <button\r\n                key={key}\r\n                onClick={() => setCurrentView(key)}\r\n                className={`px-3 py-2 text-sm rounded-lg transition-colors ${\r\n                  currentView === key\r\n                    ? 'bg-blue-500 text-white'\r\n                    : 'bg-white/70 text-gray-600 hover:bg-blue-100'\r\n                }`}\r\n              >\r\n                <span className=\"mr-1\">{icon}</span>\r\n                {label}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Upload Progress */}\r\n      <AnimatePresence>\r\n        {uploadProgress && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: -50 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: -50 }}\r\n            className={`fixed top-20 left-1/2 transform -translate-x-1/2 z-50 px-6 py-4 rounded-lg shadow-lg ${\r\n              uploadProgress.status === 'success' ? 'bg-green-500' :\r\n              uploadProgress.status === 'error' ? 'bg-red-500' : 'bg-blue-500'\r\n            } text-white`}\r\n          >\r\n            <div className=\"flex items-center space-x-3\">\r\n              {uploadProgress.status === 'uploading' && (\r\n                <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n              )}\r\n              {uploadProgress.status === 'success' && <span></span>}\r\n              {uploadProgress.status === 'error' && <span></span>}\r\n              <span>{uploadProgress.message || 'Uploading...'}</span>\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Content */}\r\n      <div className=\"px-4 py-6 max-w-6xl mx-auto\">\r\n        <AnimatePresence mode=\"wait\">\r\n          <motion.div\r\n            key={currentView}\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: -20 }}\r\n          >\r\n            {currentView === 'overview' && renderOverview()}\r\n            {currentView === 'content-upload' && renderContentUpload()}\r\n            {currentView === 'questions-upload' && renderQuestionsUpload()}\r\n          </motion.div>\r\n        </AnimatePresence>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Content Upload Form Component\r\nconst ContentUploadForm = ({ selectedDotPoint, onUpload, onBack }) => {\r\n  const [dotPointId, setDotPointId] = useState(selectedDotPoint || 'IQ1.1');\r\n  const [contentType, setContentType] = useState('podcast');\r\n  const [title, setTitle] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [file, setFile] = useState(null);\r\n\r\n  const dotPoints = [\r\n    'IQ1.1', 'IQ1.2', 'IQ1.3',\r\n    'IQ2.1', 'IQ2.2',\r\n    'IQ3.1', 'IQ3.2', 'IQ3.3',\r\n    'IQ4.1', 'IQ4.2', 'IQ4.3',\r\n    'IQ5.1', 'IQ5.2'\r\n  ];\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!file || !title) return;\r\n\r\n    onUpload(dotPointId, contentType, file, { title, description });\r\n    \r\n    // Reset form\r\n    setTitle('');\r\n    setDescription('');\r\n    setFile(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-2xl mx-auto\">\r\n      <div className=\"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/50\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <h3 className=\"font-bold text-gray-900 text-lg\">Upload Content</h3>\r\n          <button\r\n            onClick={onBack}\r\n            className=\"text-gray-500 hover:text-gray-700\"\r\n          >\r\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Dot Point\r\n              </label>\r\n              <select\r\n                value={dotPointId}\r\n                onChange={(e) => setDotPointId(e.target.value)}\r\n                className=\"w-full p-2 border rounded-lg focus:border-blue-500\"\r\n              >\r\n                {dotPoints.map(dp => (\r\n                  <option key={dp} value={dp}>{dp}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Content Type\r\n              </label>\r\n              <select\r\n                value={contentType}\r\n                onChange={(e) => setContentType(e.target.value)}\r\n                className=\"w-full p-2 border rounded-lg focus:border-blue-500\"\r\n              >\r\n                <option value=\"podcast\">Podcast</option>\r\n                <option value=\"video\">Video</option>\r\n                <option value=\"slides\">Slides</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Title *\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={title}\r\n              onChange={(e) => setTitle(e.target.value)}\r\n              placeholder=\"Enter content title\"\r\n              className=\"w-full p-2 border rounded-lg focus:border-blue-500\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Description\r\n            </label>\r\n            <textarea\r\n              value={description}\r\n              onChange={(e) => setDescription(e.target.value)}\r\n              placeholder=\"Enter content description (optional)\"\r\n              rows={3}\r\n              className=\"w-full p-2 border rounded-lg focus:border-blue-500\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              File *\r\n            </label>\r\n            <input\r\n              type=\"file\"\r\n              onChange={(e) => setFile(e.target.files[0])}\r\n              accept={\r\n                contentType === 'podcast' ? 'audio/*' :\r\n                contentType === 'video' ? 'video/*' :\r\n                '.pdf,.ppt,.pptx'\r\n              }\r\n              className=\"w-full p-2 border rounded-lg focus:border-blue-500\"\r\n              required\r\n            />\r\n            <p className=\"text-xs text-gray-500 mt-1\">\r\n              Max file size: 50MB. Accepted formats: {\r\n                contentType === 'podcast' ? 'MP3, WAV, M4A' :\r\n                contentType === 'video' ? 'MP4, MOV, AVI' :\r\n                'PDF, PPT, PPTX'\r\n              }\r\n            </p>\r\n          </div>\r\n\r\n          <button\r\n            type=\"submit\"\r\n            disabled={!file || !title}\r\n            className=\"w-full bg-gradient-to-r from-blue-500 to-purple-500 text-white font-bold py-3 px-6 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg transition-all\"\r\n          >\r\n            Upload {contentType}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Questions Upload Form Component  \r\nconst QuestionsUploadForm = ({ selectedDotPoint, onUpload, onBack }) => {\r\n  const [dotPointId, setDotPointId] = useState(selectedDotPoint || 'IQ1.1');\r\n  const [quizType, setQuizType] = useState('quickQuiz');\r\n  const [file, setFile] = useState(null);\r\n\r\n  const dotPoints = [\r\n    'IQ1.1', 'IQ1.2', 'IQ1.3',\r\n    'IQ2.1', 'IQ2.2', \r\n    'IQ3.1', 'IQ3.2', 'IQ3.3',\r\n    'IQ4.1', 'IQ4.2', 'IQ4.3',\r\n    'IQ5.1', 'IQ5.2'\r\n  ];\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!file) return;\r\n\r\n    onUpload(dotPointId, quizType, file);\r\n    \r\n    // Reset form\r\n    setFile(null);\r\n  };\r\n\r\n  const sampleFormat = quizType === 'quickQuiz' ? {\r\n    example: [{\r\n      id: 'sample-1',\r\n      type: 'multiple-choice',\r\n      question: 'Which process ensures genetic diversity in sexual reproduction?',\r\n      options: ['Mitosis', 'Meiosis', 'Binary fission', 'Budding'],\r\n      correctAnswer: 1,\r\n      explanation: 'Meiosis creates genetic diversity through crossing over and independent assortment.'\r\n    }]\r\n  } : {\r\n    example: [{\r\n      id: 'sample-lr-1',\r\n      question: 'Explain how meiosis contributes to genetic variation in sexually reproducing organisms.',\r\n      marks: 6,\r\n      expectedSentences: 4,\r\n      sentencePool: [\r\n        'Meiosis involves crossing over between homologous chromosomes during prophase I.',\r\n        'Independent assortment occurs during metaphase I when chromosome pairs align randomly.',\r\n        'These processes create new combinations of alleles in gametes.',\r\n        'Sexual reproduction combines gametes from two parents, further increasing variation.'\r\n      ],\r\n      keyConceptsRequired: ['crossing over', 'independent assortment', 'genetic variation']\r\n    }]\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto\">\r\n      <div className=\"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/50\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <h3 className=\"font-bold text-gray-900 text-lg\">Upload Questions</h3>\r\n          <button\r\n            onClick={onBack}\r\n            className=\"text-gray-500 hover:text-gray-700\"\r\n          >\r\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n          {/* Upload Form */}\r\n          <div>\r\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Dot Point\r\n                </label>\r\n                <select\r\n                  value={dotPointId}\r\n                  onChange={(e) => setDotPointId(e.target.value)}\r\n                  className=\"w-full p-2 border rounded-lg focus:border-blue-500\"\r\n                >\r\n                  {dotPoints.map(dp => (\r\n                    <option key={dp} value={dp}>{dp}</option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Quiz Type\r\n                </label>\r\n                <select\r\n                  value={quizType}\r\n                  onChange={(e) => setQuizType(e.target.value)}\r\n                  className=\"w-full p-2 border rounded-lg focus:border-blue-500\"\r\n                >\r\n                  <option value=\"quickQuiz\">Quick Quiz (Multiple Choice, etc.)</option>\r\n                  <option value=\"longResponse\">Long Response (HSC Style)</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Questions File (JSON) *\r\n                </label>\r\n                <input\r\n                  type=\"file\"\r\n                  onChange={(e) => setFile(e.target.files[0])}\r\n                  accept=\".json\"\r\n                  className=\"w-full p-2 border rounded-lg focus:border-blue-500\"\r\n                  required\r\n                />\r\n                <p className=\"text-xs text-gray-500 mt-1\">\r\n                  Upload a JSON file containing an array of questions in the correct format.\r\n                </p>\r\n              </div>\r\n\r\n              <button\r\n                type=\"submit\"\r\n                disabled={!file}\r\n                className=\"w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold py-3 px-6 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg transition-all\"\r\n              >\r\n                Upload {quizType} Questions\r\n              </button>\r\n            </form>\r\n          </div>\r\n\r\n          {/* Format Example */}\r\n          <div>\r\n            <h4 className=\"font-semibold text-gray-900 mb-3\">\r\n              {quizType === 'quickQuiz' ? 'Quick Quiz' : 'Long Response'} Format Example\r\n            </h4>\r\n            <div className=\"bg-gray-100 rounded-lg p-4 text-xs overflow-auto max-h-96\">\r\n              <pre>{JSON.stringify(sampleFormat.example, null, 2)}</pre>\r\n            </div>\r\n            <div className=\"mt-3 text-sm text-gray-600\">\r\n              <p className=\"font-medium mb-1\">Required fields for {quizType}:</p>\r\n              <ul className=\"list-disc list-inside space-y-1\">\r\n                {quizType === 'quickQuiz' ? (\r\n                  <>\r\n                    <li><code>question</code>: Question text</li>\r\n                    <li><code>type</code>: Question type (multiple-choice, true-false, etc.)</li>\r\n                    <li><code>correctAnswer</code>: Correct answer (index for MC, boolean for T/F)</li>\r\n                    <li><code>explanation</code>: Answer explanation</li>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <li><code>question</code>: HSC-style question</li>\r\n                    <li><code>marks</code>: Question marks/points</li>\r\n                    <li><code>sentencePool</code>: Array of sentence options for drag-drop</li>\r\n                    <li><code>expectedSentences</code>: Number of sentences students should select</li>\r\n                  </>\r\n                )}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Module5AdminDashboard;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\Module5Analytics.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'generateAnalytics'. Either include it or remove the dependency array.","line":15,"column":6,"nodeType":"ArrayExpression","endLine":15,"endColumn":40,"suggestions":[{"desc":"Update the dependencies array to be: [pathwayProgress, getPathwayStats, generateAnalytics]","fix":{"range":[587,621],"text":"[pathwayProgress, getPathwayStats, generateAnalytics]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { useModule5Progress } from '../hooks/useModule5Progress';\r\n\r\nconst Module5Analytics = ({ onBack }) => {\r\n  const { pathwayProgress, getPathwayStats } = useModule5Progress();\r\n  const [analytics, setAnalytics] = useState(null);\r\n  const [selectedTimeframe, setSelectedTimeframe] = useState('all'); // all, week, month\r\n\r\n  useEffect(() => {\r\n    if (pathwayProgress) {\r\n      const stats = getPathwayStats();\r\n      setAnalytics(generateAnalytics(stats, pathwayProgress));\r\n    }\r\n  }, [pathwayProgress, getPathwayStats]);\r\n\r\n  const generateAnalytics = (stats, progress) => {\r\n    const contentAccessLog = progress.analytics?.contentAccessLog || [];\r\n    const quizAttemptLog = progress.analytics?.quizAttemptLog || [];\r\n    \r\n    // Filter by timeframe\r\n    const now = new Date();\r\n    const filterDate = selectedTimeframe === 'week' \r\n      ? new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000)\r\n      : selectedTimeframe === 'month'\r\n      ? new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000)\r\n      : new Date(0);\r\n\r\n    const filteredContentAccess = contentAccessLog.filter(log => \r\n      new Date(log.timestamp) > filterDate\r\n    );\r\n    const filteredQuizAttempts = quizAttemptLog.filter(log => \r\n      new Date(log.timestamp) > filterDate\r\n    );\r\n\r\n    // Content access patterns\r\n    const contentAccessByType = {\r\n      podcast: filteredContentAccess.filter(log => log.contentType === 'podcast').length,\r\n      video: filteredContentAccess.filter(log => log.contentType === 'video').length,\r\n      slides: filteredContentAccess.filter(log => log.contentType === 'slides').length\r\n    };\r\n\r\n    // Quiz performance analysis\r\n    const quizPerformance = {\r\n      quickQuizAttempts: filteredQuizAttempts.filter(log => log.quizType === 'quickQuiz').length,\r\n      longResponseAttempts: filteredQuizAttempts.filter(log => log.quizType === 'longResponse').length,\r\n      averageQuickQuizScore: 0,\r\n      averageLongResponseScore: 0,\r\n      totalTimeSpent: 0\r\n    };\r\n\r\n    const quickQuizAttempts = filteredQuizAttempts.filter(log => log.quizType === 'quickQuiz');\r\n    const longResponseAttempts = filteredQuizAttempts.filter(log => log.quizType === 'longResponse');\r\n\r\n    if (quickQuizAttempts.length > 0) {\r\n      quizPerformance.averageQuickQuizScore = Math.round(\r\n        quickQuizAttempts.reduce((sum, log) => sum + log.score, 0) / quickQuizAttempts.length\r\n      );\r\n    }\r\n\r\n    if (longResponseAttempts.length > 0) {\r\n      quizPerformance.averageLongResponseScore = Math.round(\r\n        longResponseAttempts.reduce((sum, log) => sum + log.score, 0) / longResponseAttempts.length\r\n      );\r\n    }\r\n\r\n    quizPerformance.totalTimeSpent = filteredQuizAttempts.reduce((sum, log) => sum + (log.timeSpent || 0), 0);\r\n\r\n    // Learning patterns\r\n    const accessTimes = contentAccessLog.map(log => new Date(log.timestamp).getHours());\r\n    const preferredStudyTimes = {\r\n      morning: accessTimes.filter(hour => hour >= 6 && hour < 12).length,\r\n      afternoon: accessTimes.filter(hour => hour >= 12 && hour < 18).length,\r\n      evening: accessTimes.filter(hour => hour >= 18 && hour < 24).length,\r\n      night: accessTimes.filter(hour => hour >= 0 && hour < 6).length\r\n    };\r\n\r\n    // Progress milestones\r\n    const milestones = [];\r\n    if (stats.completedDotPoints >= 3) {\r\n      milestones.push({ icon: '', text: 'IQ1 Complete', achieved: true });\r\n    }\r\n    if (stats.completedDotPoints >= 5) {\r\n      milestones.push({ icon: '', text: 'IQ2 Complete', achieved: true });\r\n    }\r\n    if (stats.completedDotPoints >= 8) {\r\n      milestones.push({ icon: '', text: 'IQ3 Complete', achieved: true });\r\n    }\r\n    if (stats.completedDotPoints >= 11) {\r\n      milestones.push({ icon: '', text: 'IQ4 Complete', achieved: true });\r\n    }\r\n    if (stats.completedDotPoints === 13) {\r\n      milestones.push({ icon: '', text: 'Module 5 Master', achieved: true });\r\n    }\r\n\r\n    // Add upcoming milestones\r\n    if (stats.completedDotPoints < 3) {\r\n      milestones.push({ icon: '', text: 'IQ1 Complete', achieved: false, needed: 3 - stats.completedDotPoints });\r\n    }\r\n    if (stats.completedDotPoints >= 3 && stats.completedDotPoints < 5) {\r\n      milestones.push({ icon: '', text: 'IQ2 Complete', achieved: false, needed: 5 - stats.completedDotPoints });\r\n    }\r\n    if (stats.completedDotPoints >= 5 && stats.completedDotPoints < 8) {\r\n      milestones.push({ icon: '', text: 'IQ3 Complete', achieved: false, needed: 8 - stats.completedDotPoints });\r\n    }\r\n\r\n    return {\r\n      overview: stats,\r\n      contentAccess: contentAccessByType,\r\n      quizPerformance,\r\n      preferredStudyTimes,\r\n      milestones,\r\n      strugglingAreas: stats.strugglingAreas || [],\r\n      strongAreas: stats.strongAreas || [],\r\n      studyStreak: calculateStudyStreak(contentAccessLog, quizAttemptLog),\r\n      recommendations: generateRecommendations(stats, quizPerformance, contentAccessByType)\r\n    };\r\n  };\r\n\r\n  const calculateStudyStreak = (contentAccessLog, quizAttemptLog) => {\r\n    const allActivities = [...contentAccessLog, ...quizAttemptLog]\r\n      .map(log => new Date(log.timestamp).toDateString())\r\n      .filter((date, index, array) => array.indexOf(date) === index)\r\n      .sort()\r\n      .reverse();\r\n\r\n    let streak = 0;\r\n    const today = new Date().toDateString();\r\n    let checkDate = new Date();\r\n\r\n    for (let i = 0; i < 30; i++) { // Check last 30 days\r\n      const dateStr = checkDate.toDateString();\r\n      if (allActivities.includes(dateStr)) {\r\n        streak++;\r\n      } else if (dateStr !== today) { // Don't break streak if no activity today yet\r\n        break;\r\n      }\r\n      checkDate.setDate(checkDate.getDate() - 1);\r\n    }\r\n\r\n    return streak;\r\n  };\r\n\r\n  const generateRecommendations = (stats, quizPerformance, contentAccess) => {\r\n    const recommendations = [];\r\n\r\n    // Content access recommendations\r\n    const totalContentAccess = Object.values(contentAccess).reduce((sum, count) => sum + count, 0);\r\n    if (totalContentAccess === 0) {\r\n      recommendations.push({\r\n        type: 'content',\r\n        priority: 'high',\r\n        message: 'Start by accessing the podcast, video, and slides for IQ1.1',\r\n        action: 'Access Content'\r\n      });\r\n    } else if (contentAccess.podcast < contentAccess.video || contentAccess.podcast < contentAccess.slides) {\r\n      recommendations.push({\r\n        type: 'content',\r\n        priority: 'medium',\r\n        message: 'Try listening to more podcasts - they\\'re great for learning on the go!',\r\n        action: 'Listen to Podcasts'\r\n      });\r\n    }\r\n\r\n    // Quiz performance recommendations\r\n    if (quizPerformance.averageQuickQuizScore < 65 && quizPerformance.quickQuizAttempts > 0) {\r\n      recommendations.push({\r\n        type: 'performance',\r\n        priority: 'high',\r\n        message: 'Focus on improving quick quiz scores. Review content before attempting.',\r\n        action: 'Review & Practice'\r\n      });\r\n    }\r\n\r\n    if (quizPerformance.averageLongResponseScore < 65 && quizPerformance.longResponseAttempts > 0) {\r\n      recommendations.push({\r\n        type: 'performance',\r\n        priority: 'high',\r\n        message: 'Work on HSC-style responses. Focus on using key scientific terms.',\r\n        action: 'Practice Writing'\r\n      });\r\n    }\r\n\r\n    // Progress recommendations\r\n    if (stats.overallProgress < 20) {\r\n      recommendations.push({\r\n        type: 'progress',\r\n        priority: 'medium',\r\n        message: 'You\\'re just getting started! Set a goal to complete one dot point this week.',\r\n        action: 'Set Weekly Goal'\r\n      });\r\n    } else if (stats.overallProgress >= 50 && stats.overallProgress < 80) {\r\n      recommendations.push({\r\n        type: 'progress',\r\n        priority: 'low',\r\n        message: 'Great progress! You\\'re over halfway through Module 5.',\r\n        action: 'Keep Going'\r\n      });\r\n    }\r\n\r\n    // Struggling areas\r\n    if (stats.strugglingAreas.length > 0) {\r\n      recommendations.push({\r\n        type: 'help',\r\n        priority: 'medium',\r\n        message: `Review these challenging topics: ${stats.strugglingAreas.slice(0, 2).join(', ')}`,\r\n        action: 'Review Difficult Topics'\r\n      });\r\n    }\r\n\r\n    return recommendations.slice(0, 4); // Limit to top 4 recommendations\r\n  };\r\n\r\n  const formatTime = (seconds) => {\r\n    const hours = Math.floor(seconds / 3600);\r\n    const minutes = Math.floor((seconds % 3600) / 60);\r\n    \r\n    if (hours > 0) {\r\n      return `${hours}h ${minutes}m`;\r\n    }\r\n    return `${minutes}m`;\r\n  };\r\n\r\n  if (!analytics) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mb-4\"></div>\r\n          <p className=\"text-gray-600\">Loading analytics...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50\">\r\n      {/* Header */}\r\n      <div className=\"bg-white/80 backdrop-blur-sm shadow-sm border-b border-white/50\">\r\n        <div className=\"px-4 py-4 flex items-center\">\r\n          <button\r\n            onClick={onBack}\r\n            className=\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors mr-3\"\r\n          >\r\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n            </svg>\r\n          </button>\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white text-lg\">\r\n              \r\n            </div>\r\n            <div>\r\n              <h1 className=\"text-xl font-bold text-gray-900\">Module 5 Analytics</h1>\r\n              <p className=\"text-sm text-gray-600\">Your learning insights</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"px-4 py-6 max-w-4xl mx-auto space-y-6\">\r\n        {/* Timeframe Selector */}\r\n        <div className=\"flex justify-center space-x-2\">\r\n          {[\r\n            { key: 'all', label: 'All Time' },\r\n            { key: 'month', label: 'This Month' },\r\n            { key: 'week', label: 'This Week' }\r\n          ].map(({ key, label }) => (\r\n            <button\r\n              key={key}\r\n              onClick={() => setSelectedTimeframe(key)}\r\n              className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n                selectedTimeframe === key\r\n                  ? 'bg-purple-500 text-white'\r\n                  : 'bg-white/70 text-gray-600 hover:bg-purple-100'\r\n              }`}\r\n            >\r\n              {label}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Overview Stats */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            className=\"bg-white/70 backdrop-blur-sm rounded-xl p-4 border border-white/50 text-center\"\r\n          >\r\n            <div className=\"text-2xl font-bold text-green-600\">{analytics.overview.overallProgress}%</div>\r\n            <div className=\"text-sm text-gray-600\">Overall Progress</div>\r\n          </motion.div>\r\n\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: 0.1 }}\r\n            className=\"bg-white/70 backdrop-blur-sm rounded-xl p-4 border border-white/50 text-center\"\r\n          >\r\n            <div className=\"text-2xl font-bold text-blue-600\">{analytics.studyStreak}</div>\r\n            <div className=\"text-sm text-gray-600\">Day Streak</div>\r\n          </motion.div>\r\n\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: 0.2 }}\r\n            className=\"bg-white/70 backdrop-blur-sm rounded-xl p-4 border border-white/50 text-center\"\r\n          >\r\n            <div className=\"text-2xl font-bold text-purple-600\">\r\n              {analytics.quizPerformance.quickQuizAttempts + analytics.quizPerformance.longResponseAttempts}\r\n            </div>\r\n            <div className=\"text-sm text-gray-600\">Quiz Attempts</div>\r\n          </motion.div>\r\n\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: 0.3 }}\r\n            className=\"bg-white/70 backdrop-blur-sm rounded-xl p-4 border border-white/50 text-center\"\r\n          >\r\n            <div className=\"text-2xl font-bold text-orange-600\">\r\n              {formatTime(analytics.quizPerformance.totalTimeSpent)}\r\n            </div>\r\n            <div className=\"text-sm text-gray-600\">Time Studying</div>\r\n          </motion.div>\r\n        </div>\r\n\r\n        {/* Content Access Pattern */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.4 }}\r\n          className=\"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/50\"\r\n        >\r\n          <h3 className=\"font-bold text-gray-900 mb-4\">Content Access Pattern</h3>\r\n          <div className=\"grid grid-cols-3 gap-4\">\r\n            {Object.entries(analytics.contentAccess).map(([type, count]) => (\r\n              <div key={type} className=\"text-center\">\r\n                <div className=\"w-16 h-16 mx-auto mb-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center\">\r\n                  <span className=\"text-2xl\">\r\n                    {type === 'podcast' ? '' : type === 'video' ? '' : ''}\r\n                  </span>\r\n                </div>\r\n                <div className=\"font-bold text-lg\">{count}</div>\r\n                <div className=\"text-sm text-gray-600 capitalize\">{type}s</div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </motion.div>\r\n\r\n        {/* Quiz Performance */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.5 }}\r\n          className=\"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/50\"\r\n        >\r\n          <h3 className=\"font-bold text-gray-900 mb-4\">Quiz Performance</h3>\r\n          <div className=\"grid grid-cols-2 gap-6\">\r\n            <div>\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <span className=\"text-sm font-medium\">Quick Quiz Average</span>\r\n                <span className=\"text-sm text-gray-600\">{analytics.quizPerformance.quickQuizAttempts} attempts</span>\r\n              </div>\r\n              <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                <div \r\n                  className=\"bg-gradient-to-r from-green-500 to-blue-500 h-2 rounded-full transition-all duration-500\"\r\n                  style={{ width: `${analytics.quizPerformance.averageQuickQuizScore}%` }}\r\n                />\r\n              </div>\r\n              <div className=\"text-right text-sm text-gray-600 mt-1\">\r\n                {analytics.quizPerformance.averageQuickQuizScore}%\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <span className=\"text-sm font-medium\">Long Response Average</span>\r\n                <span className=\"text-sm text-gray-600\">{analytics.quizPerformance.longResponseAttempts} attempts</span>\r\n              </div>\r\n              <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                <div \r\n                  className=\"bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all duration-500\"\r\n                  style={{ width: `${analytics.quizPerformance.averageLongResponseScore}%` }}\r\n                />\r\n              </div>\r\n              <div className=\"text-right text-sm text-gray-600 mt-1\">\r\n                {analytics.quizPerformance.averageLongResponseScore}%\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n\r\n        {/* Study Time Preferences */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.6 }}\r\n          className=\"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/50\"\r\n        >\r\n          <h3 className=\"font-bold text-gray-900 mb-4\">Study Time Preferences</h3>\r\n          <div className=\"grid grid-cols-4 gap-4\">\r\n            {Object.entries(analytics.preferredStudyTimes).map(([time, count]) => {\r\n              const maxCount = Math.max(...Object.values(analytics.preferredStudyTimes));\r\n              const percentage = maxCount > 0 ? (count / maxCount) * 100 : 0;\r\n              \r\n              return (\r\n                <div key={time} className=\"text-center\">\r\n                  <div className=\"mb-2\">\r\n                    <span className=\"text-lg\">\r\n                      {time === 'morning' ? '' : time === 'afternoon' ? '' : time === 'evening' ? '' : ''}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"w-full bg-gray-200 rounded-full h-2 mb-1\">\r\n                    <div \r\n                      className=\"bg-gradient-to-r from-yellow-400 to-orange-500 h-2 rounded-full transition-all duration-500\"\r\n                      style={{ width: `${percentage}%` }}\r\n                    />\r\n                  </div>\r\n                  <div className=\"text-xs text-gray-600 capitalize\">{time}</div>\r\n                  <div className=\"text-sm font-medium\">{count}</div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </motion.div>\r\n\r\n        {/* Milestones */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.7 }}\r\n          className=\"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/50\"\r\n        >\r\n          <h3 className=\"font-bold text-gray-900 mb-4\">Milestones</h3>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n            {analytics.milestones.map((milestone, index) => (\r\n              <div\r\n                key={index}\r\n                className={`flex items-center space-x-3 p-3 rounded-lg ${\r\n                  milestone.achieved ? 'bg-green-50 border border-green-200' : 'bg-gray-50 border border-gray-200'\r\n                }`}\r\n              >\r\n                <span className={`text-xl ${milestone.achieved ? 'grayscale-0' : 'grayscale'}`}>\r\n                  {milestone.icon}\r\n                </span>\r\n                <div className=\"flex-1\">\r\n                  <div className={`font-medium ${milestone.achieved ? 'text-green-900' : 'text-gray-600'}`}>\r\n                    {milestone.text}\r\n                  </div>\r\n                  {!milestone.achieved && milestone.needed && (\r\n                    <div className=\"text-xs text-gray-500\">\r\n                      {milestone.needed} more dot point{milestone.needed > 1 ? 's' : ''} needed\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                {milestone.achieved && (\r\n                  <div className=\"text-green-600\">\r\n                    <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                      <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\r\n                    </svg>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </motion.div>\r\n\r\n        {/* Recommendations */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.8 }}\r\n          className=\"bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-white/50\"\r\n        >\r\n          <h3 className=\"font-bold text-gray-900 mb-4\">Recommendations</h3>\r\n          <div className=\"space-y-3\">\r\n            {analytics.recommendations.map((rec, index) => (\r\n              <div\r\n                key={index}\r\n                className={`p-4 rounded-lg border-l-4 ${\r\n                  rec.priority === 'high' ? 'border-red-500 bg-red-50' :\r\n                  rec.priority === 'medium' ? 'border-yellow-500 bg-yellow-50' :\r\n                  'border-blue-500 bg-blue-50'\r\n                }`}\r\n              >\r\n                <div className=\"flex items-start justify-between\">\r\n                  <div className=\"flex-1\">\r\n                    <div className={`font-medium ${\r\n                      rec.priority === 'high' ? 'text-red-900' :\r\n                      rec.priority === 'medium' ? 'text-yellow-900' :\r\n                      'text-blue-900'\r\n                    }`}>\r\n                      {rec.message}\r\n                    </div>\r\n                    <div className=\"text-xs text-gray-600 mt-1 capitalize\">\r\n                      {rec.type}  {rec.priority} priority\r\n                    </div>\r\n                  </div>\r\n                  <button className={`text-xs font-medium px-3 py-1 rounded-full ${\r\n                    rec.priority === 'high' ? 'bg-red-100 text-red-700' :\r\n                    rec.priority === 'medium' ? 'bg-yellow-100 text-yellow-700' :\r\n                    'bg-blue-100 text-blue-700'\r\n                  }`}>\r\n                    {rec.action}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </motion.div>\r\n\r\n        <div className=\"h-8\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Module5Analytics;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\Module5LongResponse.jsx","messages":[{"ruleId":null,"fatal":true,"severity":2,"message":"Parsing error: Unexpected token *","line":366,"column":3,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\r\nimport { DragDropContext, Droppable, Draggable } from '@hello-pangea/dnd';\r\nimport { ArrowLeft, Clock, CheckCircle, XCircle, Star, AlertTriangle, Lightbulb } from 'lucide-react';\r\n\r\nconst Module5LongResponse = ({ dotPointId, onBackToPathway, onQuizComplete }) => {\r\n  const [questions, setQuestions] = useState([]);\r\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\r\n  const [responses, setResponses] = useState({});\r\n  const [timeRemaining, setTimeRemaining] = useState(null);\r\n  const [quizStartTime, setQuizStartTime] = useState(null);\r\n  const [showResults, setShowResults] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showExpertComparison, setShowExpertComparison] = useState(false);\r\n  const [feedbackLevel, setFeedbackLevel] = useState('real-time'); // 'real-time', 'after-submission', 'expert-only'\r\n\r\n  // Question data with advanced long response types\r\n  const getLongResponseQuestions = (dotPointId) => {\r\n    const questionsByDotPoint = {\r\n      'IQ3.1': [\r\n        {\r\n          id: 'IQ3.1-LR-001',\r\n          type: 'argument-constructor',\r\n          topic: 'Genetic Engineering in Agriculture',\r\n          prompt: 'Should genetic engineering be widely used in agricultural crop production?',\r\n          position: 'support', // 'support' or 'oppose'\r\n          sentences: [\r\n            {\r\n              id: 'arg1',\r\n              text: 'Genetic engineering can create drought-resistant crops that survive in harsh climates.',\r\n              strength: 'strong',\r\n              category: 'main-point'\r\n            },\r\n            {\r\n              id: 'arg2', \r\n              text: 'GM crops can reduce pesticide use by incorporating natural pest resistance.',\r\n              strength: 'strong',\r\n              category: 'supporting-evidence'\r\n            },\r\n            {\r\n              id: 'arg3',\r\n              text: 'Some people are concerned about unknown long-term effects.',\r\n              strength: 'weak',\r\n              category: 'counterargument'\r\n            },\r\n            {\r\n              id: 'arg4',\r\n              text: 'Golden Rice provides essential vitamin A to prevent blindness in developing countries.',\r\n              strength: 'strong',\r\n              category: 'example'\r\n            },\r\n            {\r\n              id: 'arg5',\r\n              text: 'Traditional breeding is too slow to address climate change challenges.',\r\n              strength: 'medium',\r\n              category: 'supporting-evidence'\r\n            },\r\n            {\r\n              id: 'arg6',\r\n              text: 'Genetic engineering allows precise trait introduction without unwanted characteristics.',\r\n              strength: 'strong',\r\n              category: 'main-point'\r\n            }\r\n          ],\r\n          expertResponse: {\r\n            structure: ['arg6', 'arg1', 'arg2', 'arg5', 'arg4'],\r\n            reasoning: 'Expert response starts with the strongest scientific principle, then provides evidence and examples.'\r\n          },\r\n          rubric: {\r\n            excellent: 'Uses 4-5 strongest arguments in logical order with clear scientific reasoning',\r\n            good: 'Uses 3-4 strong arguments with mostly logical flow',\r\n            satisfactory: 'Uses 2-3 arguments but may include weaker evidence or poor ordering',\r\n            needs_improvement: 'Uses fewer than 3 arguments or includes weak/irrelevant evidence'\r\n          }\r\n        },\r\n        {\r\n          id: 'IQ3.1-LR-002',\r\n          type: 'hypothesis-to-conclusion',\r\n          scenario: 'Inheritance Pattern Investigation',\r\n          experimentalData: {\r\n            setup: 'Cross between two heterozygous plants (Aa  Aa) for flower color',\r\n            results: 'F1 generation: 73 red flowers, 27 white flowers (total 100 offspring)',\r\n            observations: ['Red flowers appear in approximately 3:1 ratio', 'White flowers only from specific crosses', 'No intermediate colors observed']\r\n          },\r\n          sentences: [\r\n            {\r\n              id: 'hyp1',\r\n              text: 'If red flower color is dominant over white, then crosses between heterozygous plants should produce a 3:1 phenotype ratio.',\r\n              category: 'hypothesis',\r\n              strength: 'strong'\r\n            },\r\n            {\r\n              id: 'obs1', \r\n              text: 'The experimental results show 73 red and 27 white flowers, which is close to the expected 3:1 ratio.',\r\n              category: 'observation',\r\n              strength: 'strong'\r\n            },\r\n            {\r\n              id: 'ana1',\r\n              text: 'Chi-square analysis confirms the results are not significantly different from expected Mendelian inheritance.',\r\n              category: 'analysis',\r\n              strength: 'strong'\r\n            },\r\n            {\r\n              id: 'con1',\r\n              text: 'Therefore, red flower color follows simple dominant inheritance over white flower color.',\r\n              category: 'conclusion',\r\n              strength: 'strong'\r\n            },\r\n            {\r\n              id: 'ext1',\r\n              text: 'This inheritance pattern could be useful for breeding programs selecting flower color.',\r\n              category: 'extension',\r\n              strength: 'medium'\r\n            },\r\n            {\r\n              id: 'weak1',\r\n              text: 'The plants probably grew better in the greenhouse environment.',\r\n              category: 'irrelevant',\r\n              strength: 'weak'\r\n            }\r\n          ],\r\n          correctFlow: ['hyp1', 'obs1', 'ana1', 'con1', 'ext1'],\r\n          expertResponse: {\r\n            structure: ['hyp1', 'obs1', 'ana1', 'con1', 'ext1'],\r\n            reasoning: 'Scientific reasoning flows from hypothesis through observation and analysis to conclusion and implications.'\r\n          }\r\n        }\r\n      ],\r\n      'IQ3.2': [\r\n        {\r\n          id: 'IQ3.2-LR-001',\r\n          type: 'compare-contrast-builder',\r\n          prompt: 'Compare and contrast mitosis and meiosis in terms of their processes and outcomes.',\r\n          categories: {\r\n            similarities: 'Similarities',\r\n            differences: 'Key Differences',\r\n            outcomes: 'Different Outcomes'\r\n          },\r\n          sentences: [\r\n            {\r\n              id: 'sim1',\r\n              text: 'Both processes involve DNA replication before division begins.',\r\n              category: 'similarities',\r\n              strength: 'strong'\r\n            },\r\n            {\r\n              id: 'sim2',\r\n              text: 'Both use spindle fibers to move chromosomes during division.',\r\n              category: 'similarities', \r\n              strength: 'strong'\r\n            },\r\n            {\r\n              id: 'diff1',\r\n              text: 'Mitosis produces two identical diploid cells, while meiosis produces four genetically different haploid gametes.',\r\n              category: 'differences',\r\n              strength: 'strong'\r\n            },\r\n            {\r\n              id: 'diff2',\r\n              text: 'Meiosis includes crossing over and independent assortment to create genetic variation.',\r\n              category: 'differences',\r\n              strength: 'strong'\r\n            },\r\n            {\r\n              id: 'out1',\r\n              text: 'Mitosis enables growth and repair in multicellular organisms.',\r\n              category: 'outcomes',\r\n              strength: 'strong'\r\n            },\r\n            {\r\n              id: 'out2',\r\n              text: 'Meiosis is essential for sexual reproduction and genetic diversity in populations.',\r\n              category: 'outcomes',\r\n              strength: 'strong'\r\n            },\r\n            {\r\n              id: 'weak1',\r\n              text: 'Both processes happen in all living organisms.',\r\n              category: 'similarities',\r\n              strength: 'weak',\r\n              error: 'Not all organisms undergo both processes'\r\n            }\r\n          ],\r\n          expertResponse: {\r\n            similarities: ['sim1', 'sim2'],\r\n            differences: ['diff1', 'diff2'], \r\n            outcomes: ['out1', 'out2']\r\n          }\r\n        },\r\n        {\r\n          id: 'IQ3.2-LR-002',\r\n          type: 'sentence-ranking',\r\n          prompt: 'Rank the following statements about genetic testing in order of importance for medical decision-making, then arrange them into a coherent response.',\r\n          sentences: [\r\n            {\r\n              id: 'rank1',\r\n              text: 'Genetic testing can identify disease predisposition before symptoms appear.',\r\n              importance: 1,\r\n              tier: 'main-point'\r\n            },\r\n            {\r\n              id: 'rank2',\r\n              text: 'Test results must be interpreted by qualified genetic counselors.',\r\n              importance: 2,\r\n              tier: 'supporting-evidence'\r\n            },\r\n            {\r\n              id: 'rank3',\r\n              text: 'Privacy and insurance discrimination concerns must be addressed.',\r\n              importance: 3,\r\n              tier: 'supporting-evidence'\r\n            },\r\n            {\r\n              id: 'rank4',\r\n              text: 'Family members may also be affected by test results.',\r\n              importance: 4,\r\n              tier: 'example'\r\n            },\r\n            {\r\n              id: 'rank5',\r\n              text: 'Testing technology continues to improve in accuracy.',\r\n              importance: 5,\r\n              tier: 'supporting-evidence'\r\n            },\r\n            {\r\n              id: 'rank6',\r\n              text: 'Some genetic variants have unknown clinical significance.',\r\n              importance: 6,\r\n              tier: 'example'\r\n            }\r\n          ],\r\n          connectorOptions: [\r\n            'Therefore', 'However', 'Additionally', 'Furthermore', 'In contrast', 'For example', 'Consequently', 'Nevertheless'\r\n          ],\r\n          expertRanking: ['rank1', 'rank2', 'rank3', 'rank5', 'rank4', 'rank6'],\r\n          expertConnectors: {\r\n            'rank1-rank2': 'Therefore',\r\n            'rank2-rank3': 'Additionally', \r\n            'rank3-rank5': 'Furthermore',\r\n            'rank5-rank4': 'For example',\r\n            'rank4-rank6': 'However'\r\n          }\r\n        }\r\n      ],\r\n      'IQ4.1': [\r\n        {\r\n          id: 'IQ4.1-LR-001',\r\n          type: 'evidence-hierarchy',\r\n          prompt: 'Organize evidence for Hardy-Weinberg equilibrium into a hierarchical structure with main points, supporting evidence, and specific examples.',\r\n          sentences: [\r\n            {\r\n              id: 'main1',\r\n              text: 'Hardy-Weinberg equilibrium describes allele frequency stability in populations.',\r\n              tier: 'main-point',\r\n              strength: 'strong'\r\n            },\r\n            {\r\n              id: 'main2', \r\n              text: 'Five conditions must be met for Hardy-Weinberg equilibrium.',\r\n              tier: 'main-point',\r\n              strength: 'strong'\r\n            },\r\n            {\r\n              id: 'support1',\r\n              text: 'No mutations can occur that change allele frequencies.',\r\n              tier: 'supporting-evidence',\r\n              strength: 'strong',\r\n              parentId: 'main2'\r\n            },\r\n            {\r\n              id: 'support2',\r\n              text: 'Population size must be large enough to prevent genetic drift.',\r\n              tier: 'supporting-evidence', \r\n              strength: 'strong',\r\n              parentId: 'main2'\r\n            },\r\n            {\r\n              id: 'support3',\r\n              text: 'No gene flow can occur between populations.',\r\n              tier: 'supporting-evidence',\r\n              strength: 'strong', \r\n              parentId: 'main2'\r\n            },\r\n            {\r\n              id: 'example1',\r\n              text: 'Human ABO blood types follow Hardy-Weinberg predictions in large populations.',\r\n              tier: 'example',\r\n              strength: 'medium',\r\n              parentId: 'main1'\r\n            },\r\n            {\r\n              id: 'example2',\r\n              text: 'Small island populations often deviate from Hardy-Weinberg due to genetic drift.',\r\n              tier: 'example',\r\n              strength: 'medium',\r\n              parentId: 'support2'\r\n            },\r\n            {\r\n              id: 'weak1',\r\n              text: 'Hardy-Weinberg was discovered in 1908.',\r\n              tier: 'irrelevant',\r\n              strength: 'weak'\r\n            }\r\n          ],\r\n          hierarchyStructure: {\r\n            'main-point': { label: 'Main Points', maxItems: 3 },\r\n            'supporting-evidence': { label: 'Supporting Evidence', maxItems: 5 },\r\n            'example': { label: 'Specific Examples', maxItems: 4 }\r\n          }\r\n        },\r\n        {\r\n          id: 'IQ4.1-LR-002',\r\n          type: 'mistake-correction',\r\n          prompt: 'Identify and correct errors in the following statements about population genetics, then arrange them into a coherent explanation.',\r\n          sentences: [\r\n            {\r\n              id: 'correct1',\r\n              text: 'Natural selection increases the frequency of beneficial alleles in populations.',\r\n              hasError: false,\r\n              strength: 'strong'\r\n            },\r\n            {\r\n              id: 'error1',\r\n              text: 'Genetic drift always increases genetic diversity in populations.',\r\n              hasError: true,\r\n              error: 'Genetic drift typically DECREASES genetic diversity, especially in small populations',\r\n              correctedText: 'Genetic drift typically decreases genetic diversity, especially in small populations.',\r\n              strength: 'strong'\r\n            },\r\n            {\r\n              id: 'error2', \r\n              text: 'Gene flow always occurs between populations that are geographically close.',\r\n              hasError: true,\r\n              error: 'Gene flow can occur between distant populations through migration',\r\n              correctedText: 'Gene flow can occur between populations regardless of geographic distance through migration.',\r\n              strength: 'medium'\r\n            },\r\n            {\r\n              id: 'correct2',\r\n              text: 'Mutation introduces new alleles that can be acted upon by selection.',\r\n              hasError: false,\r\n              strength: 'strong'\r\n            },\r\n            {\r\n              id: 'error3',\r\n              text: 'Hardy-Weinberg equilibrium is commonly observed in natural populations.',\r\n              hasError: true,\r\n              error: 'Hardy-Weinberg equilibrium is RARELY observed in natural populations due to evolutionary forces',\r\n              correctedText: 'Hardy-Weinberg equilibrium is rarely observed in natural populations due to various evolutionary forces.',\r\n              strength: 'medium'\r\n            },\r\n            {\r\n              id: 'correct3',\r\n              text: 'Population bottlenecks can lead to founder effects in new populations.',\r\n              hasError: false,\r\n              strength: 'medium'\r\n            }\r\n          ],\r\n          expertOrder: ['correct1', 'error1', 'error2', 'correct2', 'error3', 'correct3']\r\n        }\r\n      ]\r\n    };\r\n\r\n    return questionsByDotPoint[dotPointId] || [];\r\n  };\r\n  */\r\nfunction SentenceRanking({ question, response = {}, updateResponse }) {\r\n  const rankingPhase = response.phase || 'ranking';\r\n  const rankings = response.rankings || {};\r\n  const arrangement = (response.arrangement && response.arrangement.length > 0)\r\n    ? response.arrangement\r\n    : question.sentences.map((sentence) => sentence.id);\r\n  const connectors = response.connectors || {};\r\n\r\n  const handleRankingChange = (sentenceId, rank) => {\r\n    const updatedRankings = { ...rankings, [sentenceId]: rank };\r\n    updateResponse(question.id, { ...response, rankings: updatedRankings });\r\n  };\r\n\r\n  const advancePhase = () => {\r\n    if (rankingPhase === 'ranking') {\r\n      const sortedSentences = [...question.sentences].sort(\r\n        (a, b) => (rankings[a.id] || 999) - (rankings[b.id] || 999)\r\n      );\r\n      const ordered = sortedSentences.map((sentence) => sentence.id);\r\n      updateResponse(question.id, {\r\n        ...response,\r\n        arrangement: ordered,\r\n        phase: 'arranging'\r\n      });\r\n    } else if (rankingPhase === 'arranging') {\r\n      updateResponse(question.id, { ...response, phase: 'connecting' });\r\n    }\r\n  };\r\n\r\n  const handleArrangementDragEnd = (result) => {\r\n    if (!result.destination) return;\r\n    const reordered = Array.from(arrangement);\r\n    const [moved] = reordered.splice(result.source.index, 1);\r\n    reordered.splice(result.destination.index, 0, moved);\r\n    updateResponse(question.id, { ...response, arrangement: reordered });\r\n  };\r\n\r\n  const handleConnectorChange = (fromId, toId, value) => {\r\n    const key = `${fromId}-${toId}`;\r\n    const updatedConnectors = { ...connectors, [key]: value };\r\n    updateResponse(question.id, { ...response, connectors: updatedConnectors });\r\n  };\r\n\r\n  const rankingComplete = Object.keys(rankings).length >= question.sentences.length;\r\n  const rankingOptions = Array.from({ length: question.sentences.length }, (_, index) => index + 1);\r\n  const connectorOptions = question.connectorOptions || [];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"bg-indigo-50 p-4 rounded-lg border border-indigo-200\">\r\n        <h3 className=\"font-semibold text-indigo-800 mb-2\">{question.prompt}</h3>\r\n        <div className=\"flex items-center space-x-4 text-sm\">\r\n          <div className={`flex items-center space-x-2 ${rankingPhase === 'ranking' ? 'text-indigo-600' : 'text-gray-400'}`}>\r\n            <div className=\"w-2 h-2 rounded-full bg-current\"></div>\r\n            <span>1. Rank by importance</span>\r\n          </div>\r\n          <div className={`flex items-center space-x-2 ${rankingPhase === 'arranging' ? 'text-indigo-600' : 'text-gray-400'}`}>\r\n            <div className=\"w-2 h-2 rounded-full bg-current\"></div>\r\n            <span>2. Arrange order</span>\r\n          </div>\r\n          <div className={`flex items-center space-x-2 ${rankingPhase === 'connecting' ? 'text-indigo-600' : 'text-gray-400'}`}>\r\n            <div className=\"w-2 h-2 rounded-full bg-current\"></div>\r\n            <span>3. Add connectors</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {rankingPhase === 'ranking' && (\r\n        <div className=\"space-y-4\">\r\n          <h4 className=\"font-semibold\">Rank sentences by importance (1 = most important)</h4>\r\n          {question.sentences.map((sentence) => (\r\n            <div key={sentence.id} className=\"bg-white p-4 rounded border flex items-center space-x-4\">\r\n              <select\r\n                value={rankings[sentence.id] || ''}\r\n                onChange={(event) => handleRankingChange(sentence.id, Number(event.target.value))}\r\n                className=\"w-20 px-3 py-2 border rounded\"\r\n              >\r\n                <option value=\"\">Rank</option>\r\n                {rankingOptions.map((rank) => (\r\n                  <option key={rank} value={rank}>{rank}</option>\r\n                ))}\r\n              </select>\r\n              <p className=\"flex-1 text-sm\">{sentence.text}</p>\r\n            </div>\r\n          ))}\r\n          <button\r\n            onClick={advancePhase}\r\n            disabled={!rankingComplete}\r\n            className=\"bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white px-4 py-2 rounded transition-colors\"\r\n          >\r\n            {rankingPhase === 'ranking' ? 'Proceed to Arrangement' : 'Next Step'}\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {rankingPhase === 'arranging' && (\r\n        <DragDropContext onDragEnd={handleArrangementDragEnd}>\r\n          <div className=\"space-y-4\">\r\n            <h4 className=\"font-semibold\">Arrange your ranked sentences into coherent order</h4>\r\n            <Droppable droppableId=\"sentence-arrangement\">\r\n              {(provided) => (\r\n                <div {...provided.droppableProps} ref={provided.innerRef} className=\"space-y-2\">\r\n                  {arrangement.map((sentenceId, index) => {\r\n                    const sentence = question.sentences.find((item) => item.id === sentenceId);\r\n                    if (!sentence) return null;\r\n                    return (\r\n                      <Draggable key={sentence.id} draggableId={sentence.id} index={index}>\r\n                        {(draggableProvided, snapshot) => (\r\n                          <div\r\n                            ref={draggableProvided.innerRef}\r\n                            {...draggableProvided.draggableProps}\r\n                            {...draggableProvided.dragHandleProps}\r\n                            className={`p-3 bg-white rounded border shadow-sm cursor-move transition-all ${\r\n                              snapshot.isDragging ? 'shadow-lg scale-105' : 'hover:shadow-md'\r\n                            }`}\r\n                          >\r\n                            <div className=\"flex items-start space-x-3\">\r\n                              <span className=\"bg-indigo-100 text-indigo-800 text-xs font-semibold px-2 py-1 rounded\">\r\n                                {index + 1}\r\n                              </span>\r\n                              <p className=\"text-sm flex-1\">{sentence.text}</p>\r\n                              <span className=\"text-xs text-gray-500\">Rank: {rankings[sentence.id] ?? ''}</span>\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                      </Draggable>\r\n                    );\r\n                  })}\r\n                  {provided.placeholder}\r\n                </div>\r\n              )}\r\n            </Droppable>\r\n            <button\r\n              onClick={advancePhase}\r\n              className=\"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded transition-colors\"\r\n            >\r\n              Add Connector Words\r\n            </button>\r\n          </div>\r\n        </DragDropContext>\r\n      )}\r\n\r\n      {rankingPhase === 'connecting' && (\r\n        <div className=\"space-y-4\">\r\n          <h4 className=\"font-semibold\">Add sentence connectors</h4>\r\n          <div className=\"space-y-3\">\r\n            {arrangement.map((sentenceId, index) => {\r\n              if (index === 0) return null;\r\n              const previousSentence = question.sentences.find((item) => item.id === arrangement[index - 1]);\r\n              const currentSentence = question.sentences.find((item) => item.id === sentenceId);\r\n              if (!previousSentence || !currentSentence) return null;\r\n              const connectorKey = `${previousSentence.id}-${currentSentence.id}`;\r\n              return (\r\n                <div key={connectorKey} className=\"bg-white p-4 rounded border\">\r\n                  <p className=\"text-sm text-gray-600 mb-2\">Between:</p>\r\n                  <div className=\"text-sm\">\r\n                    <p className=\"text-gray-800 font-medium\">{previousSentence.text}</p>\r\n                    <p className=\"text-gray-500\">and</p>\r\n                    <p className=\"text-gray-800 font-medium\">{currentSentence.text}</p>\r\n                  </div>\r\n\r\n                  <div className=\"mt-3 space-y-2\">\r\n                    <label className=\"block text-sm font-medium text-gray-600\">\r\n                      Select a connector that best links these ideas\r\n                    </label>\r\n                    <select\r\n                      value={connectors[connectorKey] || ''}\r\n                      onChange={(event) => handleConnectorChange(previousSentence.id, currentSentence.id, event.target.value)}\r\n                      className=\"w-full border border-gray-300 rounded py-2 px-3 text-sm\"\r\n                    >\r\n                      <option value=\"\">Choose connector</option>\r\n                      {connectorOptions.map((option) => (\r\n                        <option key={option.id || option.text} value={option.id || option.text}>\r\n                          {option.text}  {option.explanation}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n            <h4 className=\"font-semibold text-green-800 mb-2\">Expert tip</h4>\r\n            <p className=\"text-sm text-green-700\">\r\n              Use a variety of connectors (cause-effect, contrast, addition) to strengthen your argument flow.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction MistakeCorrection({ question, response = {}, updateResponse, feedbackLevel = 'after-submission' }) {\r\n  const identifiedErrors = response.identifiedErrors || {};\r\n  const corrections = response.corrections || {};\r\n  const arrangementOrder = (response.arrangementOrder && response.arrangementOrder.length > 0)\r\n    ? response.arrangementOrder\r\n    : question.sentences.map((sentence) => sentence.id);\r\n\r\n  const handleErrorIdentification = (sentenceId, isError) => {\r\n    const updatedErrors = { ...identifiedErrors, [sentenceId]: isError };\r\n    let nextResponse = { ...response, identifiedErrors: updatedErrors };\r\n\r\n    if (!isError && corrections[sentenceId]) {\r\n      const updatedCorrections = { ...corrections };\r\n      delete updatedCorrections[sentenceId];\r\n      nextResponse = { ...nextResponse, corrections: updatedCorrections };\r\n    }\r\n\r\n    updateResponse(question.id, nextResponse);\r\n  };\r\n\r\n  const handleCorrection = (sentenceId, correctedText) => {\r\n    const updatedCorrections = { ...corrections, [sentenceId]: correctedText };\r\n    updateResponse(question.id, { ...response, corrections: updatedCorrections });\r\n  };\r\n\r\n  const handleArrangementDragEnd = (result) => {\r\n    if (!result.destination) return;\r\n    const reordered = Array.from(arrangementOrder);\r\n    const [moved] = reordered.splice(result.source.index, 1);\r\n    reordered.splice(result.destination.index, 0, moved);\r\n    updateResponse(question.id, { ...response, arrangementOrder: reordered });\r\n  };\r\n\r\n  const errorsMarkedCount = Object.keys(identifiedErrors).length;\r\n  const shouldShowArrangement = errorsMarkedCount === question.sentences.length;\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"bg-red-50 p-4 rounded-lg border border-red-200\">\r\n        <div className=\"flex items-center space-x-2 mb-3\">\r\n          <AlertTriangle className=\"h-5 w-5 text-red-600\" />\r\n          <h3 className=\"font-semibold text-red-800\">Error Detection and Correction</h3>\r\n        </div>\r\n        <p className=\"text-sm text-red-600\">{question.prompt}</p>\r\n      </div>\r\n\r\n      <div className=\"space-y-4\">\r\n        {question.sentences.map((sentence) => {\r\n          const isError = identifiedErrors[sentence.id];\r\n          return (\r\n            <div key={sentence.id} className=\"bg-white p-4 rounded border\">\r\n              <div className=\"space-y-3\">\r\n                <p className=\"text-sm\">{sentence.text}</p>\r\n\r\n                <div className=\"flex items-center space-x-4\">\r\n                  <span className=\"text-sm font-medium\">This statement is:</span>\r\n                  <label className=\"flex items-center space-x-2\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      name={`error-${sentence.id}`}\r\n                      checked={isError === false}\r\n                      onChange={() => handleErrorIdentification(sentence.id, false)}\r\n                      className=\"text-green-600\"\r\n                    />\r\n                    <span className=\"text-sm text-green-600\">Correct</span>\r\n                  </label>\r\n                  <label className=\"flex items-center space-x-2\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      name={`error-${sentence.id}`}\r\n                      checked={isError === true}\r\n                      onChange={() => handleErrorIdentification(sentence.id, true)}\r\n                      className=\"text-red-600\"\r\n                    />\r\n                    <span className=\"text-sm text-red-600\">Contains Error</span>\r\n                  </label>\r\n                </div>\r\n\r\n                {isError === true && (\r\n                  <div className=\"mt-3 p-3 bg-yellow-50 rounded border border-yellow-200\">\r\n                    <label className=\"block text-sm font-medium text-yellow-800 mb-2\">\r\n                      Provide the corrected statement:\r\n                    </label>\r\n                    <textarea\r\n                      value={corrections[sentence.id] || ''}\r\n                      onChange={(event) => handleCorrection(sentence.id, event.target.value)}\r\n                      className=\"w-full px-3 py-2 border rounded text-sm\"\r\n                      rows={2}\r\n                      placeholder=\"Enter the corrected version of this statement...\"\r\n                    />\r\n                    {(feedbackLevel === 'real-time') && sentence.hasError && (\r\n                      <div className=\"mt-2 p-2 bg-blue-50 rounded text-xs text-blue-700\">\r\n                        <strong>Hint:</strong> {sentence.error}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                {(feedbackLevel === 'real-time') && isError !== undefined && (\r\n                  <div\r\n                    className={`mt-2 text-xs ${\r\n                      (isError === sentence.hasError) ? 'text-green-600' : 'text-red-600'\r\n                    }`}\r\n                  >\r\n                    {(isError === sentence.hasError) ? 'Correct identification' : 'Incorrect identification'}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {shouldShowArrangement && (\r\n        <div className=\"mt-6\">\r\n          <h4 className=\"font-semibold mb-3\">Arrange corrected statements into coherent response:</h4>\r\n          <DragDropContext onDragEnd={handleArrangementDragEnd}>\r\n            <Droppable droppableId=\"corrected-arrangement\">\r\n              {(provided) => (\r\n                <div {...provided.droppableProps} ref={provided.innerRef} className=\"space-y-2\">\r\n                  {arrangementOrder.map((sentenceId, index) => {\r\n                    const sentence = question.sentences.find((item) => item.id === sentenceId);\r\n                    if (!sentence) return null;\r\n                    const isError = identifiedErrors[sentenceId];\r\n                    const displayText = isError && corrections[sentenceId]\r\n                      ? corrections[sentenceId]\r\n                      : sentence.text;\r\n\r\n                    return (\r\n                      <Draggable key={sentence.id} draggableId={sentence.id} index={index}>\r\n                        {(draggableProvided, snapshot) => (\r\n                          <div\r\n                            ref={draggableProvided.innerRef}\r\n                            {...draggableProvided.draggableProps}\r\n                            {...draggableProvided.dragHandleProps}\r\n                            className={`p-3 rounded border shadow-sm cursor-move transition-all ${\r\n                              snapshot.isDragging ? 'shadow-lg scale-105' : 'hover:shadow-md'\r\n                            } ${isError ? 'bg-yellow-50 border-yellow-200' : 'bg-green-50 border-green-200'}`}\r\n                          >\r\n                            <div className=\"flex items-start space-x-3\">\r\n                              <span className=\"bg-white text-gray-800 text-xs font-semibold px-2 py-1 rounded\">\r\n                                {index + 1}\r\n                              </span>\r\n                              <p className=\"text-sm flex-1\">{displayText}</p>\r\n                              {isError && (\r\n                                <span className=\"text-xs text-yellow-600 bg-yellow-200 px-2 py-1 rounded\">\r\n                                  Corrected\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                      </Draggable>\r\n                    );\r\n                  })}\r\n                  {provided.placeholder}\r\n                </div>\r\n              )}\r\n            </Droppable>\r\n          </DragDropContext>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n  // Initialize quiz\r\n  useEffect(() => {\r\n    const loadQuestions = () => {\r\n      try {\r\n        const longResponseQuestions = getLongResponseQuestions(dotPointId);\r\n        if (longResponseQuestions.length > 0) {\r\n          setQuestions(longResponseQuestions);\r\n          setTimeRemaining(45 * 60); // 45 minutes for long response\r\n          setQuizStartTime(Date.now());\r\n        }\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error('Error loading long response questions:', error);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadQuestions();\r\n  }, [dotPointId]);\r\n\r\n  // Timer countdown\r\n  useEffect(() => {\r\n    if (timeRemaining === null || timeRemaining <= 0 || showResults) return;\r\n\r\n    const timer = setInterval(() => {\r\n      setTimeRemaining(prev => {\r\n        if (prev <= 1) {\r\n          handleTimeUp();\r\n          return 0;\r\n        }\r\n        return prev - 1;\r\n      });\r\n    }, 1000);\r\n\r\n    return () => clearInterval(timer);\r\n  }, [timeRemaining, showResults]);\r\n\r\n  const handleTimeUp = () => {\r\n    if (!showResults) {\r\n      finishQuiz();\r\n    }\r\n  };\r\n\r\n  // Handle drag and drop for sentence arrangement\r\n  const handleDragEnd = (result) => {\r\n    if (!result.destination) return;\r\n\r\n    const question = questions[currentQuestionIndex];\r\n    const currentResponse = responses[question.id] || {};\r\n    \r\n    if (question.type === 'argument-constructor') {\r\n      const newOrder = Array.from(currentResponse.sentenceOrder || []);\r\n      const [reorderedSentence] = newOrder.splice(result.source.index, 1);\r\n      newOrder.splice(result.destination.index, 0, reorderedSentence);\r\n      \r\n      updateResponse(question.id, { ...currentResponse, sentenceOrder: newOrder });\r\n    } else if (question.type === 'compare-contrast-builder') {\r\n      // Handle category-based drag and drop\r\n      const sourceCategory = result.source.droppableId;\r\n      const destCategory = result.destination.droppableId;\r\n      \r\n      const newResponse = { ...currentResponse };\r\n      if (!newResponse[sourceCategory]) newResponse[sourceCategory] = [];\r\n      if (!newResponse[destCategory]) newResponse[destCategory] = [];\r\n      \r\n      const [movedSentence] = newResponse[sourceCategory].splice(result.source.index, 1);\r\n      newResponse[destCategory].splice(result.destination.index, 0, movedSentence);\r\n      \r\n      updateResponse(question.id, newResponse);\r\n    }\r\n    \r\n    // Provide real-time feedback if enabled\r\n    if (feedbackLevel === 'real-time') {\r\n      provideFeedback(question, { ...currentResponse });\r\n    }\r\n  };\r\n\r\n  const updateResponse = (questionId, response) => {\r\n    setResponses(prev => ({ ...prev, [questionId]: response }));\r\n  };\r\n\r\n  // Real-time feedback system\r\n  const provideFeedback = (question, response) => {\r\n    // This would provide color-coded hints about sentence placement\r\n    // Green for strengthening, yellow for neutral, red for weakening\r\n  };\r\n\r\n  const finishQuiz = () => {\r\n    const timeSpent = Math.round((Date.now() - quizStartTime) / 1000);\r\n    const results = calculateResults();\r\n    \r\n    setShowResults(true);\r\n    \r\n    // Call completion callback\r\n    setTimeout(() => {\r\n      onQuizComplete({\r\n        dotPointId,\r\n        quizType: 'longResponse',\r\n        score: results.percentage,\r\n        totalQuestions: questions.length,\r\n        correctAnswers: results.correct,\r\n        timeSpent,\r\n        passed: results.percentage >= 65\r\n      });\r\n    }, 3000);\r\n  };\r\n\r\n  const calculateResults = () => {\r\n    let totalScore = 0;\r\n    let maxScore = 0;\r\n\r\n    questions.forEach(question => {\r\n      const response = responses[question.id];\r\n      maxScore += 100; // Each question worth 100 points\r\n      \r\n      if (response) {\r\n        totalScore += scoreQuestion(question, response);\r\n      }\r\n    });\r\n\r\n    const percentage = maxScore > 0 ? Math.round((totalScore / maxScore) * 100) : 0;\r\n    const correct = Math.round((totalScore / maxScore) * questions.length);\r\n    \r\n    return { percentage, correct, totalScore, maxScore };\r\n  };\r\n\r\n  const scoreQuestion = (question, response) => {\r\n    let score = 0;\r\n    \r\n    if (question.type === 'argument-constructor') {\r\n      const sentenceOrder = response.sentenceOrder || [];\r\n      const expertOrder = question.expertResponse.structure;\r\n      \r\n      // Score based on sentence selection and ordering\r\n      const strongSentences = question.sentences.filter(s => s.strength === 'strong').map(s => s.id);\r\n      const usedStrong = sentenceOrder.filter(id => strongSentences.includes(id));\r\n      \r\n      score += (usedStrong.length / strongSentences.length) * 60; // 60 points for strong sentence selection\r\n      \r\n      // Order scoring (simplified)\r\n      let orderScore = 0;\r\n      for (let i = 0; i < Math.min(sentenceOrder.length, expertOrder.length); i++) {\r\n        if (sentenceOrder[i] === expertOrder[i]) orderScore += 10;\r\n      }\r\n      score += orderScore; // Up to 40 points for correct ordering\r\n    }\r\n    \r\n    return Math.min(100, score);\r\n  };\r\n\r\n  const renderQuestion = (question) => {\r\n    const currentResponse = responses[question.id] || {};\r\n\r\n    switch (question.type) {\r\n      case 'argument-constructor':\r\n        return renderArgumentConstructor(question, currentResponse);\r\n      case 'hypothesis-to-conclusion':\r\n        return renderHypothesisToConclusion(question, currentResponse);\r\n      case 'compare-contrast-builder':\r\n        return renderCompareContrastBuilder(question, currentResponse);\r\n      case 'sentence-ranking':\r\n        return (\r\n          <SentenceRanking\r\n            question={question}\r\n            response={currentResponse}\r\n            updateResponse={updateResponse}\r\n          />\r\n        );\r\n      case 'evidence-hierarchy':\r\n        return renderEvidenceHierarchy(question, currentResponse);\r\n      case 'mistake-correction':\r\n        return (\r\n          <MistakeCorrection\r\n            question={question}\r\n            response={currentResponse}\r\n            updateResponse={updateResponse}\r\n            feedbackLevel={feedbackLevel}\r\n          />\r\n        );\r\n      default:\r\n        return <div>Question type not implemented</div>;\r\n    }\r\n  };\r\n\r\n  const renderArgumentConstructor = (question, response) => {\r\n    const availableSentences = question.sentences.filter(s => \r\n      !response.sentenceOrder?.includes(s.id)\r\n    );\r\n    const selectedSentences = (response.sentenceOrder || []).map(id => \r\n      question.sentences.find(s => s.id === id)\r\n    ).filter(Boolean);\r\n\r\n    return (\r\n      <DragDropContext onDragEnd={handleDragEnd}>\r\n        <div className=\"space-y-6\">\r\n          <div className=\"bg-blue-50 p-4 rounded-lg border border-blue-200\">\r\n            <div className=\"flex items-center space-x-2 mb-3\">\r\n              <AlertTriangle className=\"h-5 w-5 text-blue-600\" />\r\n              <h3 className=\"font-semibold text-blue-800\">Debate Topic</h3>\r\n            </div>\r\n            <p className=\"text-lg font-medium mb-2\">{question.prompt}</p>\r\n            <p className=\"text-sm text-blue-600\">\r\n              Position: <span className=\"font-semibold capitalize\">{question.position}</span>\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n            {/* Available sentences */}\r\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n              <h4 className=\"font-semibold mb-3 flex items-center\">\r\n                <span>Available Evidence</span>\r\n                <span className=\"ml-2 text-sm text-gray-500\">({availableSentences.length})</span>\r\n              </h4>\r\n              <Droppable droppableId=\"available-sentences\">\r\n                {(provided) => (\r\n                  <div {...provided.droppableProps} ref={provided.innerRef} className=\"space-y-2\">\r\n                    {availableSentences.map((sentence, index) => (\r\n                      <Draggable key={sentence.id} draggableId={sentence.id} index={index}>\r\n                        {(provided, snapshot) => (\r\n                          <div\r\n                            ref={provided.innerRef}\r\n                            {...provided.draggableProps}\r\n                            {...provided.dragHandleProps}\r\n                            className={`p-3 bg-white rounded border shadow-sm cursor-move transition-all ${\r\n                              snapshot.isDragging ? 'shadow-lg scale-105' : 'hover:shadow-md'\r\n                            } ${\r\n                              sentence.strength === 'strong' ? 'border-green-200 bg-green-50' :\r\n                              sentence.strength === 'medium' ? 'border-yellow-200 bg-yellow-50' :\r\n                              'border-red-200 bg-red-50'\r\n                            }`}\r\n                          >\r\n                            <p className=\"text-sm\">{sentence.text}</p>\r\n                            {feedbackLevel === 'real-time' && (\r\n                              <div className=\"flex items-center mt-2 text-xs\">\r\n                                <div className={`w-2 h-2 rounded-full mr-2 ${\r\n                                  sentence.strength === 'strong' ? 'bg-green-400' :\r\n                                  sentence.strength === 'medium' ? 'bg-yellow-400' :\r\n                                  'bg-red-400'\r\n                                }`} />\r\n                                <span className=\"capitalize\">{sentence.strength} evidence</span>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                      </Draggable>\r\n                    ))}\r\n                    {provided.placeholder}\r\n                  </div>\r\n                )}\r\n              </Droppable>\r\n            </div>\r\n\r\n            {/* Argument construction area */}\r\n            <div className=\"bg-blue-50 p-4 rounded-lg border border-blue-200\">\r\n              <h4 className=\"font-semibold mb-3 flex items-center\">\r\n                <span>Your Argument</span>\r\n                <span className=\"ml-2 text-sm text-blue-600\">({selectedSentences.length}/5 recommended)</span>\r\n              </h4>\r\n              <Droppable droppableId=\"selected-sentences\">\r\n                {(provided) => (\r\n                  <div {...provided.droppableProps} ref={provided.innerRef} className=\"space-y-2 min-h-40\">\r\n                    {selectedSentences.map((sentence, index) => (\r\n                      <Draggable key={sentence.id} draggableId={sentence.id} index={index}>\r\n                        {(provided, snapshot) => (\r\n                          <div\r\n                            ref={provided.innerRef}\r\n                            {...provided.draggableProps}\r\n                            {...provided.dragHandleProps}\r\n                            className={`p-3 bg-white rounded border shadow-sm cursor-move transition-all ${\r\n                              snapshot.isDragging ? 'shadow-lg scale-105' : 'hover:shadow-md'\r\n                            }`}\r\n                          >\r\n                            <div className=\"flex items-start space-x-2\">\r\n                              <span className=\"bg-blue-100 text-blue-800 text-xs font-semibold px-2 py-1 rounded\">\r\n                                {index + 1}\r\n                              </span>\r\n                              <p className=\"text-sm flex-1\">{sentence.text}</p>\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                      </Draggable>\r\n                    ))}\r\n                    {provided.placeholder}\r\n                    {selectedSentences.length === 0 && (\r\n                      <div className=\"text-center text-gray-400 py-8 border-2 border-dashed border-gray-200 rounded\">\r\n                        Drag evidence sentences here to build your argument\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </Droppable>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Expert comparison toggle */}\r\n          {showExpertComparison && (\r\n            <div className=\"bg-yellow-50 p-4 rounded-lg border border-yellow-200\">\r\n              <div className=\"flex items-center space-x-2 mb-3\">\r\n                <Star className=\"h-5 w-5 text-yellow-600\" />\r\n                <h4 className=\"font-semibold text-yellow-800\">Expert Response</h4>\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                {question.expertResponse.structure.map((sentenceId, index) => {\r\n                  const sentence = question.sentences.find(s => s.id === sentenceId);\r\n                  return (\r\n                    <div key={sentenceId} className=\"flex items-start space-x-2 bg-white p-2 rounded\">\r\n                      <span className=\"bg-yellow-100 text-yellow-800 text-xs font-semibold px-2 py-1 rounded\">\r\n                        {index + 1}\r\n                      </span>\r\n                      <p className=\"text-sm\">{sentence?.text}</p>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n              <p className=\"text-sm text-yellow-700 mt-3 italic\">{question.expertResponse.reasoning}</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </DragDropContext>\r\n    );\r\n  };\r\n\r\n  const renderHypothesisToConclusion = (question, response) => {\r\n    const availableSentences = question.sentences.filter(s => \r\n      !response.sentenceOrder?.includes(s.id) && s.category !== 'irrelevant'\r\n    );\r\n    const selectedSentences = (response.sentenceOrder || []).map(id => \r\n      question.sentences.find(s => s.id === id)\r\n    ).filter(Boolean);\r\n\r\n    return (\r\n      <DragDropContext onDragEnd={handleDragEnd}>\r\n        <div className=\"space-y-6\">\r\n          {/* Experimental scenario */}\r\n          <div className=\"bg-green-50 p-4 rounded-lg border border-green-200\">\r\n            <div className=\"flex items-center space-x-2 mb-3\">\r\n              <Lightbulb className=\"h-5 w-5 text-green-600\" />\r\n              <h3 className=\"font-semibold text-green-800\">{question.scenario}</h3>\r\n            </div>\r\n            <div className=\"space-y-2 text-sm\">\r\n              <p><strong>Setup:</strong> {question.experimentalData.setup}</p>\r\n              <p><strong>Results:</strong> {question.experimentalData.results}</p>\r\n              <div>\r\n                <strong>Observations:</strong>\r\n                <ul className=\"list-disc list-inside ml-4 mt-1\">\r\n                  {question.experimentalData.observations.map((obs, i) => (\r\n                    <li key={i}>{obs}</li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n            {/* Available sentences */}\r\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n              <h4 className=\"font-semibold mb-3\">Available Statements</h4>\r\n              <Droppable droppableId=\"available-sentences\">\r\n                {(provided) => (\r\n                  <div {...provided.droppableProps} ref={provided.innerRef} className=\"space-y-2\">\r\n                    {availableSentences.map((sentence, index) => (\r\n                      <Draggable key={sentence.id} draggableId={sentence.id} index={index}>\r\n                        {(provided, snapshot) => (\r\n                          <div\r\n                            ref={provided.innerRef}\r\n                            {...provided.draggableProps}\r\n                            {...provided.dragHandleProps}\r\n                            className={`p-3 bg-white rounded border shadow-sm cursor-move transition-all ${\r\n                              snapshot.isDragging ? 'shadow-lg scale-105' : 'hover:shadow-md'\r\n                            }`}\r\n                          >\r\n                            <p className=\"text-sm\">{sentence.text}</p>\r\n                            {feedbackLevel === 'real-time' && (\r\n                              <span className={`text-xs px-2 py-1 rounded mt-2 inline-block ${\r\n                                sentence.category === 'hypothesis' ? 'bg-purple-100 text-purple-800' :\r\n                                sentence.category === 'observation' ? 'bg-blue-100 text-blue-800' :\r\n                                sentence.category === 'analysis' ? 'bg-orange-100 text-orange-800' :\r\n                                sentence.category === 'conclusion' ? 'bg-green-100 text-green-800' :\r\n                                'bg-gray-100 text-gray-800'\r\n                              }`}>\r\n                                {sentence.category}\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                      </Draggable>\r\n                    ))}\r\n                    {provided.placeholder}\r\n                  </div>\r\n                )}\r\n              </Droppable>\r\n            </div>\r\n\r\n            {/* Scientific reasoning flow */}\r\n            <div className=\"bg-green-50 p-4 rounded-lg border border-green-200\">\r\n              <h4 className=\"font-semibold mb-3\">Scientific Reasoning Flow</h4>\r\n              <Droppable droppableId=\"reasoning-flow\">\r\n                {(provided) => (\r\n                  <div {...provided.droppableProps} ref={provided.innerRef} className=\"space-y-2 min-h-40\">\r\n                    {selectedSentences.map((sentence, index) => (\r\n                      <Draggable key={sentence.id} draggableId={sentence.id} index={index}>\r\n                        {(provided, snapshot) => (\r\n                          <div\r\n                            ref={provided.innerRef}\r\n                            {...provided.draggableProps}\r\n                            {...provided.dragHandleProps}\r\n                            className={`p-3 bg-white rounded border shadow-sm cursor-move transition-all ${\r\n                              snapshot.isDragging ? 'shadow-lg scale-105' : 'hover:shadow-md'\r\n                            }`}\r\n                          >\r\n                            <div className=\"flex items-start space-x-2\">\r\n                              <span className=\"bg-green-100 text-green-800 text-xs font-semibold px-2 py-1 rounded\">\r\n                                {index + 1}\r\n                              </span>\r\n                              <p className=\"text-sm flex-1\">{sentence.text}</p>\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                      </Draggable>\r\n                    ))}\r\n                    {provided.placeholder}\r\n                    {selectedSentences.length === 0 && (\r\n                      <div className=\"text-center text-gray-400 py-8 border-2 border-dashed border-gray-200 rounded\">\r\n                        Drag statements here to build your scientific reasoning\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </Droppable>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </DragDropContext>\r\n    );\r\n  };\r\n\r\n  const renderCompareContrastBuilder = (question, response) => {\r\n    return (\r\n      <DragDropContext onDragEnd={handleDragEnd}>\r\n        <div className=\"space-y-6\">\r\n          <div className=\"bg-purple-50 p-4 rounded-lg border border-purple-200\">\r\n            <h3 className=\"font-semibold text-purple-800 mb-2\">{question.prompt}</h3>\r\n            <p className=\"text-sm text-purple-600\">\r\n              Organize the sentences into appropriate categories to build a comprehensive comparison.\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\r\n            {/* Available sentences */}\r\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n              <h4 className=\"font-semibold mb-3\">Available Sentences</h4>\r\n              <Droppable droppableId=\"available\">\r\n                {(provided) => (\r\n                  <div {...provided.droppableProps} ref={provided.innerRef} className=\"space-y-2\">\r\n                    {question.sentences.filter(s => \r\n                      !Object.values(response).flat().includes(s.id)\r\n                    ).map((sentence, index) => (\r\n                      <Draggable key={sentence.id} draggableId={sentence.id} index={index}>\r\n                        {(provided, snapshot) => (\r\n                          <div\r\n                            ref={provided.innerRef}\r\n                            {...provided.draggableProps}\r\n                            {...provided.dragHandleProps}\r\n                            className={`p-3 bg-white rounded border shadow-sm cursor-move transition-all ${\r\n                              snapshot.isDragging ? 'shadow-lg scale-105' : 'hover:shadow-md'\r\n                            } ${sentence.error ? 'border-red-200 bg-red-50' : ''}`}\r\n                          >\r\n                            <p className=\"text-sm\">{sentence.text}</p>\r\n                            {sentence.error && feedbackLevel === 'real-time' && (\r\n                              <p className=\"text-xs text-red-600 mt-1\"> {sentence.error}</p>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                      </Draggable>\r\n                    ))}\r\n                    {provided.placeholder}\r\n                  </div>\r\n                )}\r\n              </Droppable>\r\n            </div>\r\n\r\n            {/* Category columns */}\r\n            {Object.entries(question.categories).map(([categoryId, categoryName]) => (\r\n              <div key={categoryId} className=\"bg-white p-4 rounded-lg border\">\r\n                <h4 className=\"font-semibold mb-3 text-center\">{categoryName}</h4>\r\n                <Droppable droppableId={categoryId}>\r\n                  {(provided) => (\r\n                    <div {...provided.droppableProps} ref={provided.innerRef} className=\"space-y-2 min-h-32\">\r\n                      {(response[categoryId] || []).map((sentenceId, index) => {\r\n                        const sentence = question.sentences.find(s => s.id === sentenceId);\r\n                        return sentence ? (\r\n                          <Draggable key={sentence.id} draggableId={sentence.id} index={index}>\r\n                            {(provided, snapshot) => (\r\n                              <div\r\n                                ref={provided.innerRef}\r\n                                {...provided.draggableProps}\r\n                                {...provided.dragHandleProps}\r\n                                className={`p-2 bg-gray-50 rounded border cursor-move transition-all ${\r\n                                  snapshot.isDragging ? 'shadow-lg scale-105' : 'hover:shadow-md'\r\n                                }`}\r\n                              >\r\n                                <p className=\"text-sm\">{sentence.text}</p>\r\n                              </div>\r\n                            )}\r\n                          </Draggable>\r\n                        ) : null;\r\n                      })}\r\n                      {provided.placeholder}\r\n                    </div>\r\n                  )}\r\n                </Droppable>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </DragDropContext>\r\n    );\r\n  };\r\n\r\n  /* const renderSentenceRanking = (question, response) => {\r\n    const [rankingPhase, setRankingPhase] = useState('ranking'); // 'ranking', 'arranging', 'connecting'\r\n    const [rankings, setRankings] = useState(response.rankings || {});\r\n    const [arrangement, setArrangement] = useState(response.arrangement || []);\r\n    const [connectors, setConnectors] = useState(response.connectors || {});\r\n\r\n    const handleRankingChange = (sentenceId, rank) => {\r\n      const newRankings = { ...rankings, [sentenceId]: rank };\r\n      setRankings(newRankings);\r\n      updateResponse(question.id, { ...response, rankings: newRankings });\r\n    };\r\n\r\n    const advancePhase = () => {\r\n      if (rankingPhase === 'ranking') {\r\n        // Create arrangement based on rankings\r\n        const sortedSentences = question.sentences.sort((a, b) => \r\n          (rankings[a.id] || 999) - (rankings[b.id] || 999)\r\n        );\r\n        setArrangement(sortedSentences.map(s => s.id));\r\n        setRankingPhase('arranging');\r\n      } else if (rankingPhase === 'arranging') {\r\n        setRankingPhase('connecting');\r\n      }\r\n    };\r\n\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <div className=\"bg-indigo-50 p-4 rounded-lg border border-indigo-200\">\r\n          <h3 className=\"font-semibold text-indigo-800 mb-2\">{question.prompt}</h3>\r\n          <div className=\"flex items-center space-x-4 text-sm\">\r\n            <div className={`flex items-center space-x-2 ${rankingPhase === 'ranking' ? 'text-indigo-600' : 'text-gray-400'}`}>\r\n              <div className=\"w-2 h-2 rounded-full bg-current\"></div>\r\n              <span>1. Rank by importance</span>\r\n            </div>\r\n            <div className={`flex items-center space-x-2 ${rankingPhase === 'arranging' ? 'text-indigo-600' : 'text-gray-400'}`}>\r\n              <div className=\"w-2 h-2 rounded-full bg-current\"></div>\r\n              <span>2. Arrange order</span>\r\n            </div>\r\n            <div className={`flex items-center space-x-2 ${rankingPhase === 'connecting' ? 'text-indigo-600' : 'text-gray-400'}`}>\r\n              <div className=\"w-2 h-2 rounded-full bg-current\"></div>\r\n              <span>3. Add connectors</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {rankingPhase === 'ranking' && (\r\n          <div className=\"space-y-4\">\r\n            <h4 className=\"font-semibold\">Rank sentences by importance (1 = most important)</h4>\r\n            {question.sentences.map((sentence) => (\r\n              <div key={sentence.id} className=\"bg-white p-4 rounded border flex items-center space-x-4\">\r\n                <select \r\n                  value={rankings[sentence.id] || ''} \r\n                  onChange={(e) => handleRankingChange(sentence.id, parseInt(e.target.value))}\r\n                  className=\"w-20 px-3 py-2 border rounded\"\r\n                >\r\n                  <option value=\"\">Rank</option>\r\n                  {[1,2,3,4,5,6].map(n => (\r\n                    <option key={n} value={n}>{n}</option>\r\n                  ))}\r\n                </select>\r\n                <p className=\"flex-1 text-sm\">{sentence.text}</p>\r\n              </div>\r\n            ))}\r\n            <button \r\n              onClick={advancePhase}\r\n              disabled={Object.keys(rankings).length < question.sentences.length}\r\n              className=\"bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white px-4 py-2 rounded transition-colors\"\r\n            >\r\n              Proceed to Arrangement\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {rankingPhase === 'arranging' && (\r\n          <DragDropContext onDragEnd={handleDragEnd}>\r\n            <div className=\"space-y-4\">\r\n              <h4 className=\"font-semibold\">Arrange your ranked sentences into coherent order</h4>\r\n              <Droppable droppableId=\"sentence-arrangement\">\r\n                {(provided) => (\r\n                  <div {...provided.droppableProps} ref={provided.innerRef} className=\"space-y-2\">\r\n                    {arrangement.map((sentenceId, index) => {\r\n                      const sentence = question.sentences.find(s => s.id === sentenceId);\r\n                      return sentence ? (\r\n                        <Draggable key={sentence.id} draggableId={sentence.id} index={index}>\r\n                          {(provided, snapshot) => (\r\n                            <div\r\n                              ref={provided.innerRef}\r\n                              {...provided.draggableProps}\r\n                              {...provided.dragHandleProps}\r\n                              className={`p-3 bg-white rounded border shadow-sm cursor-move transition-all ${\r\n                                snapshot.isDragging ? 'shadow-lg scale-105' : 'hover:shadow-md'\r\n                              }`}\r\n                            >\r\n                              <div className=\"flex items-start space-x-3\">\r\n                                <span className=\"bg-indigo-100 text-indigo-800 text-xs font-semibold px-2 py-1 rounded\">\r\n                                  {index + 1}\r\n                                </span>\r\n                                <p className=\"text-sm flex-1\">{sentence.text}</p>\r\n                                <span className=\"text-xs text-gray-500\">Rank: {rankings[sentence.id]}</span>\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                        </Draggable>\r\n                      ) : null;\r\n                    })}\r\n                    {provided.placeholder}\r\n                  </div>\r\n                )}\r\n              </Droppable>\r\n              <button \r\n                onClick={advancePhase}\r\n                className=\"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded transition-colors\"\r\n              >\r\n                Add Connector Words\r\n              </button>\r\n            </div>\r\n          </DragDropContext>\r\n        )}\r\n\r\n        {rankingPhase === 'connecting' && (\r\n          <div className=\"space-y-4\">\r\n            <h4 className=\"font-semibold\">Choose connector words between sentences</h4>\r\n            {arrangement.slice(0, -1).map((sentenceId, index) => {\r\n              const sentence = question.sentences.find(s => s.id === sentenceId);\r\n              const nextSentence = question.sentences.find(s => s.id === arrangement[index + 1]);\r\n              const connectorKey = `${sentenceId}-${arrangement[index + 1]}`;\r\n              \r\n              return (\r\n                <div key={connectorKey} className=\"bg-white p-4 rounded border\">\r\n                  <div className=\"space-y-3\">\r\n                    <p className=\"text-sm\"><strong>Sentence {index + 1}:</strong> {sentence?.text}</p>\r\n                    <div className=\"flex items-center space-x-4\">\r\n                      <span className=\"text-sm font-medium\">Connector:</span>\r\n                      <select\r\n                        value={connectors[connectorKey] || ''}\r\n                        onChange={(e) => {\r\n                          const newConnectors = { ...connectors, [connectorKey]: e.target.value };\r\n                          setConnectors(newConnectors);\r\n                          updateResponse(question.id, { ...response, connectors: newConnectors });\r\n                        }}\r\n                        className=\"px-3 py-2 border rounded\"\r\n                      >\r\n                        <option value=\"\">Choose...</option>\r\n                        {question.connectorOptions.map(option => (\r\n                          <option key={option} value={option}>{option}</option>\r\n                        ))}\r\n                      </select>\r\n                    </div>\r\n                    <p className=\"text-sm\"><strong>Sentence {index + 2}:</strong> {nextSentence?.text}</p>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderEvidenceHierarchy = (question, response) => {\r\n    return (\r\n      <DragDropContext onDragEnd={handleDragEnd}>\r\n        <div className=\"space-y-6\">\r\n          <div className=\"bg-purple-50 p-4 rounded-lg border border-purple-200\">\r\n            <h3 className=\"font-semibold text-purple-800 mb-2\">{question.prompt}</h3>\r\n            <p className=\"text-sm text-purple-600\">\r\n              Organize sentences into a hierarchical structure with main points supported by evidence and examples.\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-4\">\r\n            {/* Available sentences */}\r\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n              <h4 className=\"font-semibold mb-3\">Available Sentences</h4>\r\n              <Droppable droppableId=\"available-hierarchy\">\r\n                {(provided) => (\r\n                  <div {...provided.droppableProps} ref={provided.innerRef} className=\"space-y-2\">\r\n                    {question.sentences.filter(s => \r\n                      !Object.values(response).flat().includes(s.id) && s.tier !== 'irrelevant'\r\n                    ).map((sentence, index) => (\r\n                      <Draggable key={sentence.id} draggableId={sentence.id} index={index}>\r\n                        {(provided, snapshot) => (\r\n                          <div\r\n                            ref={provided.innerRef}\r\n                            {...provided.draggableProps}\r\n                            {...provided.dragHandleProps}\r\n                            className={`p-3 bg-white rounded border shadow-sm cursor-move transition-all ${\r\n                              snapshot.isDragging ? 'shadow-lg scale-105' : 'hover:shadow-md'\r\n                            }`}\r\n                          >\r\n                            <p className=\"text-sm\">{sentence.text}</p>\r\n                            {feedbackLevel === 'real-time' && (\r\n                              <span className={`text-xs px-2 py-1 rounded mt-2 inline-block ${\r\n                                sentence.tier === 'main-point' ? 'bg-purple-100 text-purple-800' :\r\n                                sentence.tier === 'supporting-evidence' ? 'bg-blue-100 text-blue-800' :\r\n                                'bg-green-100 text-green-800'\r\n                              }`}>\r\n                                {sentence.tier}\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                      </Draggable>\r\n                    ))}\r\n                    {provided.placeholder}\r\n                  </div>\r\n                )}\r\n              </Droppable>\r\n            </div>\r\n\r\n            {/* Hierarchy tiers */}\r\n            {Object.entries(question.hierarchyStructure).map(([tierId, tierInfo]) => (\r\n              <div key={tierId} className=\"bg-white p-4 rounded-lg border\">\r\n                <h4 className=\"font-semibold mb-3 text-center\">\r\n                  {tierInfo.label}\r\n                  <span className=\"text-sm text-gray-500 block\">\r\n                    ({(response[tierId] || []).length}/{tierInfo.maxItems})\r\n                  </span>\r\n                </h4>\r\n                <Droppable droppableId={tierId}>\r\n                  {(provided) => (\r\n                    <div {...provided.droppableProps} ref={provided.innerRef} className=\"space-y-2 min-h-32\">\r\n                      {(response[tierId] || []).map((sentenceId, index) => {\r\n                        const sentence = question.sentences.find(s => s.id === sentenceId);\r\n                        return sentence ? (\r\n                          <Draggable key={sentence.id} draggableId={sentence.id} index={index}>\r\n                            {(provided, snapshot) => (\r\n                              <div\r\n                                ref={provided.innerRef}\r\n                                {...provided.draggableProps}\r\n                                {...provided.dragHandleProps}\r\n                                className={`p-2 bg-gray-50 rounded border cursor-move transition-all ${\r\n                                  snapshot.isDragging ? 'shadow-lg scale-105' : 'hover:shadow-md'\r\n                                }`}\r\n                              >\r\n                                <p className=\"text-sm\">{sentence.text}</p>\r\n                              </div>\r\n                            )}\r\n                          </Draggable>\r\n                        ) : null;\r\n                      })}\r\n                      {provided.placeholder}\r\n                    </div>\r\n                  )}\r\n                </Droppable>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </DragDropContext>\r\n    );\r\n  };\r\n\r\n  /* const renderMistakeCorrection = (question, response) => {\r\n    const [corrections, setCorrections] = useState(response.corrections || {});\r\n    const [identifiedErrors, setIdentifiedErrors] = useState(response.identifiedErrors || {});\r\n\r\n    const handleErrorIdentification = (sentenceId, isError) => {\r\n      const newIdentifiedErrors = { ...identifiedErrors, [sentenceId]: isError };\r\n      setIdentifiedErrors(newIdentifiedErrors);\r\n      updateResponse(question.id, { ...response, identifiedErrors: newIdentifiedErrors });\r\n    };\r\n\r\n    const handleCorrection = (sentenceId, correctedText) => {\r\n      const newCorrections = { ...corrections, [sentenceId]: correctedText };\r\n      setCorrections(newCorrections);\r\n      updateResponse(question.id, { ...response, corrections: newCorrections });\r\n    };\r\n\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <div className=\"bg-red-50 p-4 rounded-lg border border-red-200\">\r\n          <div className=\"flex items-center space-x-2 mb-3\">\r\n            <AlertTriangle className=\"h-5 w-5 text-red-600\" />\r\n            <h3 className=\"font-semibold text-red-800\">Error Detection and Correction</h3>\r\n          </div>\r\n          <p className=\"text-sm text-red-600\">{question.prompt}</p>\r\n        </div>\r\n\r\n        <div className=\"space-y-4\">\r\n          {question.sentences.map((sentence) => (\r\n            <div key={sentence.id} className=\"bg-white p-4 rounded border\">\r\n              <div className=\"space-y-3\">\r\n                <p className=\"text-sm\">{sentence.text}</p>\r\n                \r\n                <div className=\"flex items-center space-x-4\">\r\n                  <span className=\"text-sm font-medium\">This statement is:</span>\r\n                  <label className=\"flex items-center space-x-2\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      name={`error-${sentence.id}`}\r\n                      checked={identifiedErrors[sentence.id] === false}\r\n                      onChange={() => handleErrorIdentification(sentence.id, false)}\r\n                      className=\"text-green-600\"\r\n                    />\r\n                    <span className=\"text-sm text-green-600\">Correct</span>\r\n                  </label>\r\n                  <label className=\"flex items-center space-x-2\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      name={`error-${sentence.id}`}\r\n                      checked={identifiedErrors[sentence.id] === true}\r\n                      onChange={() => handleErrorIdentification(sentence.id, true)}\r\n                      className=\"text-red-600\"\r\n                    />\r\n                    <span className=\"text-sm text-red-600\">Contains Error</span>\r\n                  </label>\r\n                </div>\r\n\r\n                {identifiedErrors[sentence.id] === true && (\r\n                  <div className=\"mt-3 p-3 bg-yellow-50 rounded border border-yellow-200\">\r\n                    <label className=\"block text-sm font-medium text-yellow-800 mb-2\">\r\n                      Provide the corrected statement:\r\n                    </label>\r\n                    <textarea\r\n                      value={corrections[sentence.id] || ''}\r\n                      onChange={(e) => handleCorrection(sentence.id, e.target.value)}\r\n                      className=\"w-full px-3 py-2 border rounded text-sm\"\r\n                      rows={2}\r\n                      placeholder=\"Enter the corrected version of this statement...\"\r\n                    />\r\n                    {feedbackLevel === 'real-time' && sentence.hasError && (\r\n                      <div className=\"mt-2 p-2 bg-blue-50 rounded text-xs text-blue-700\">\r\n                        <strong>Hint:</strong> {sentence.error}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                {feedbackLevel === 'real-time' && identifiedErrors[sentence.id] !== undefined && (\r\n                  <div className={`mt-2 text-xs ${\r\n                    (identifiedErrors[sentence.id] === sentence.hasError) ? 'text-green-600' : 'text-red-600'\r\n                  }`}>\r\n                    {(identifiedErrors[sentence.id] === sentence.hasError) ? ' Correct identification' : ' Incorrect identification'}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Arrangement phase */}\r\n        {Object.keys(identifiedErrors).length === question.sentences.length && (\r\n          <div className=\"mt-6\">\r\n            <h4 className=\"font-semibold mb-3\">Arrange corrected statements into coherent response:</h4>\r\n            <DragDropContext onDragEnd={handleDragEnd}>\r\n              <Droppable droppableId=\"corrected-arrangement\">\r\n                {(provided) => (\r\n                  <div {...provided.droppableProps} ref={provided.innerRef} className=\"space-y-2\">\r\n                    {(response.arrangementOrder || question.sentences.map(s => s.id)).map((sentenceId, index) => {\r\n                      const sentence = question.sentences.find(s => s.id === sentenceId);\r\n                      const isError = identifiedErrors[sentenceId];\r\n                      const displayText = isError && corrections[sentenceId] \r\n                        ? corrections[sentenceId] \r\n                        : sentence?.text;\r\n                      \r\n                      return sentence ? (\r\n                        <Draggable key={sentence.id} draggableId={sentence.id} index={index}>\r\n                          {(provided, snapshot) => (\r\n                            <div\r\n                              ref={provided.innerRef}\r\n                              {...provided.draggableProps}\r\n                              {...provided.dragHandleProps}\r\n                              className={`p-3 rounded border shadow-sm cursor-move transition-all ${\r\n                                snapshot.isDragging ? 'shadow-lg scale-105' : 'hover:shadow-md'\r\n                              } ${\r\n                                isError ? 'bg-yellow-50 border-yellow-200' : 'bg-green-50 border-green-200'\r\n                              }`}\r\n                            >\r\n                              <div className=\"flex items-start space-x-3\">\r\n                                <span className=\"bg-white text-gray-800 text-xs font-semibold px-2 py-1 rounded\">\r\n                                  {index + 1}\r\n                                </span>\r\n                                <p className=\"text-sm flex-1\">{displayText}</p>\r\n                                {isError && (\r\n                                  <span className=\"text-xs text-yellow-600 bg-yellow-200 px-2 py-1 rounded\">\r\n                                    Corrected\r\n                                  </span>\r\n                                )}\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                        </Draggable>\r\n                      ) : null;\r\n                    })}\r\n                    {provided.placeholder}\r\n                  </div>\r\n                )}\r\n              </Droppable>\r\n            </DragDropContext>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Format time display\r\n  const formatTime = (seconds) => {\r\n    const hours = Math.floor(seconds / 3600);\r\n    const minutes = Math.floor((seconds % 3600) / 60);\r\n    const remainingSeconds = seconds % 60;\r\n    \r\n    if (hours > 0) {\r\n      return `${hours}:${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;\r\n    }\r\n    return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 p-4 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4\"></div>\r\n          <p>Loading long response questions...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (questions.length === 0) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 p-4\">\r\n        <div className=\"max-w-4xl mx-auto\">\r\n          <div className=\"bg-white rounded-2xl shadow-xl p-8 text-center\">\r\n            <AlertTriangle className=\"h-16 w-16 text-yellow-500 mx-auto mb-4\" />\r\n            <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">No Long Response Questions Available</h2>\r\n            <p className=\"text-gray-600 mb-6\">\r\n              Long response questions for this dot point are still being developed.\r\n            </p>\r\n            <button\r\n              onClick={onBackToPathway}\r\n              className=\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors\"\r\n            >\r\n              Back to Pathway\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const currentQuestion = questions[currentQuestionIndex];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 p-4\">\r\n      <div className=\"max-w-6xl mx-auto\">\r\n        {/* Header */}\r\n        <div className=\"bg-white rounded-xl shadow-sm p-4 mb-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <button\r\n              onClick={onBackToPathway}\r\n              className=\"flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors\"\r\n            >\r\n              <ArrowLeft className=\"h-5 w-5\" />\r\n              <span>Back to Pathway</span>\r\n            </button>\r\n            \r\n            <div className=\"text-center\">\r\n              <h1 className=\"text-xl font-bold text-gray-800\">Long Response Quiz</h1>\r\n              <p className=\"text-sm text-gray-600\">\r\n                Question {currentQuestionIndex + 1} of {questions.length}\r\n              </p>\r\n            </div>\r\n            \r\n            {timeRemaining !== null && (\r\n              <div className=\"flex items-center space-x-2\">\r\n                <Clock className=\"h-5 w-5 text-blue-600\" />\r\n                <span className={`font-mono text-lg ${\r\n                  timeRemaining < 300 ? 'text-red-600' : 'text-blue-600'\r\n                }`}>\r\n                  {formatTime(timeRemaining)}\r\n                </span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Question Content */}\r\n        <div className=\"bg-white rounded-xl shadow-sm p-6 mb-6\">\r\n          {renderQuestion(currentQuestion)}\r\n        </div>\r\n\r\n        {/* Controls */}\r\n        <div className=\"flex justify-between items-center\">\r\n          <button\r\n            onClick={() => setShowExpertComparison(!showExpertComparison)}\r\n            className=\"bg-yellow-100 hover:bg-yellow-200 text-yellow-800 px-4 py-2 rounded-lg transition-colors flex items-center space-x-2\"\r\n          >\r\n            <Star className=\"h-4 w-4\" />\r\n            <span>{showExpertComparison ? 'Hide' : 'Show'} Expert Comparison</span>\r\n          </button>\r\n\r\n          <div className=\"flex space-x-3\">\r\n            {currentQuestionIndex > 0 && (\r\n              <button\r\n                onClick={() => setCurrentQuestionIndex(prev => prev - 1)}\r\n                className=\"bg-gray-100 hover:bg-gray-200 text-gray-700 px-6 py-2 rounded-lg transition-colors\"\r\n              >\r\n                Previous\r\n              </button>\r\n            )}\r\n            \r\n            {currentQuestionIndex < questions.length - 1 ? (\r\n              <button\r\n                onClick={() => setCurrentQuestionIndex(prev => prev + 1)}\r\n                className=\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors\"\r\n              >\r\n                Next Question\r\n              </button>\r\n            ) : (\r\n              <button\r\n                onClick={finishQuiz}\r\n                className=\"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg transition-colors flex items-center space-x-2\"\r\n              >\r\n                <CheckCircle className=\"h-4 w-4\" />\r\n                <span>Submit Quiz</span>\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Module5LongResponse;\r\n    <SentenceRanking\r\n      question={question}\r\n      response={response}\r\n      updateResponse={updateResponse}\r\n    />\r\n  );\r\n    <MistakeCorrection\r\n      question={question}\r\n      response={response}\r\n      updateResponse={updateResponse}\r\n      feedbackLevel={feedbackLevel}\r\n    />\r\n  );\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\Module5LongResponseQuiz.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'useRef' is defined but never used. Allowed unused vars must match /^React$/u.","line":1,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":44},{"ruleId":"no-unused-vars","severity":1,"message":"'responses' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":12,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":19},{"ruleId":"no-unused-vars","severity":1,"message":"'setResponses' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":12,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":33},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadQuestions'. Either include it or remove the dependency array.","line":23,"column":6,"nodeType":"ArrayExpression","endLine":23,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [dotPointId, loadQuestions]","fix":{"range":[827,839],"text":"[dotPointId, loadQuestions]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleTimeUp'. Either include it or remove the dependency array.","line":222,"column":6,"nodeType":"ArrayExpression","endLine":222,"endColumn":34,"suggestions":[{"desc":"Update the dependencies array to be: [timeRemaining, showResults, handleTimeUp]","fix":{"range":[10506,10534],"text":"[timeRemaining, showResults, handleTimeUp]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nconst Module5LongResponseQuiz = ({ \r\n  dotPointId, \r\n  onQuizComplete, \r\n  onExit,\r\n  pathwayData \r\n}) => {\r\n  const [questions, setQuestions] = useState([]);\r\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\r\n  const [responses, setResponses] = useState({});\r\n  const [showResults, setShowResults] = useState(false);\r\n  const [timeRemaining, setTimeRemaining] = useState(null);\r\n  const [quizStartTime] = useState(Date.now());\r\n  const [loading, setLoading] = useState(true);\r\n  const [draggedSentence, setDraggedSentence] = useState(null);\r\n  const [dropZones, setDropZones] = useState({});\r\n\r\n  // Load questions based on dot point\r\n  useEffect(() => {\r\n    loadQuestions();\r\n  }, [dotPointId]);\r\n\r\n  const loadQuestions = async () => {\r\n    setLoading(true);\r\n    \r\n    const dotPoint = findDotPointData(dotPointId);\r\n    if (!dotPoint) {\r\n      console.error('Dot point not found:', dotPointId);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const questionCount = dotPoint.quizzes.longResponse.questionCount;\r\n    const timeLimit = dotPoint.quizzes.longResponse.timeLimit;\r\n\r\n    // Generate HSC-style long response questions\r\n    const generatedQuestions = generateLongResponseQuestions(dotPointId, questionCount);\r\n    \r\n    setQuestions(generatedQuestions);\r\n    setTimeRemaining(timeLimit * 60); // Convert to seconds\r\n    \r\n    // Initialize drop zones for all questions\r\n    const initialDropZones = {};\r\n    generatedQuestions.forEach(q => {\r\n      initialDropZones[q.id] = Array(q.expectedSentences).fill(null);\r\n    });\r\n    setDropZones(initialDropZones);\r\n    \r\n    setLoading(false);\r\n  };\r\n\r\n  const findDotPointData = (dotPointId) => {\r\n    for (const iq of Object.values(pathwayData.inquiryQuestions)) {\r\n      for (const dotPoint of Object.values(iq.dotPoints)) {\r\n        if (dotPoint.id === dotPointId) {\r\n          return dotPoint;\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n\r\n  // Generate HSC-style long response questions with sentence pools\r\n  const generateLongResponseQuestions = (dotPointId, count) => {\r\n    const questionBank = getLongResponseQuestionBank(dotPointId);\r\n    return questionBank.slice(0, count);\r\n  };\r\n\r\n  // HSC-style long response question bank with drag-drop sentence construction\r\n  const getLongResponseQuestionBank = (dotPointId) => {\r\n    const banks = {\r\n      'IQ1.1': [\r\n        {\r\n          id: 'IQ1.1-lr1',\r\n          question: 'Explain how reproductive strategies ensure the continuity of species, using specific examples.',\r\n          marks: 6,\r\n          expectedSentences: 4,\r\n          sentencePool: [\r\n            // CORRECT sentences (ensure answer is achievable)\r\n            'Sexual reproduction increases genetic diversity through genetic recombination, which helps populations adapt to environmental changes.',\r\n            'Asexual reproduction allows rapid population growth in stable environments, maximizing reproductive output.',\r\n            'Many organisms use both strategies depending on environmental conditions, such as aphids reproducing asexually in summer and sexually in autumn.',\r\n            'High reproductive rates compensate for high mortality in offspring, ensuring some individuals survive to reproduce.',\r\n            \r\n            // PARTIALLY CORRECT sentences\r\n            'Sexual reproduction produces more offspring than asexual reproduction in most cases.',\r\n            'Genetic diversity is important for species survival but not directly related to reproductive strategies.',\r\n            'Environmental factors influence reproduction but don\\'t affect species continuity.',\r\n            \r\n            // INCORRECT sentences\r\n            'Asexual reproduction always produces stronger offspring than sexual reproduction.',\r\n            'Species continuity depends mainly on individual survival rather than reproductive success.',\r\n            'All organisms must reproduce sexually to ensure genetic diversity.',\r\n            \r\n            // MISLEADING sentences\r\n            'Reproductive strategies have no significant impact on species survival rates.',\r\n            'Only large organisms need effective reproductive strategies for species continuity.',\r\n            \r\n            // CONFUSING sentences\r\n            'The relationship between reproductive strategies and species continuity is primarily theoretical.',\r\n            'Most reproductive strategies are equally effective in all environments.'\r\n          ],\r\n          rubric: {\r\n            6: 'Explains both sexual and asexual strategies with specific examples and clear links to species continuity',\r\n            4: 'Explains one strategy well or both strategies with minor gaps',\r\n            2: 'Basic explanation with limited examples or connections',\r\n            0: 'Incorrect or irrelevant response'\r\n          },\r\n          keyConceptsRequired: ['genetic diversity', 'environmental adaptation', 'reproductive efficiency', 'examples']\r\n        },\r\n        {\r\n          id: 'IQ1.1-lr2',\r\n          question: 'Analyse the advantages and disadvantages of asexual reproduction in ensuring species survival.',\r\n          marks: 5,\r\n          expectedSentences: 3,\r\n          sentencePool: [\r\n            // CORRECT sentences\r\n            'Asexual reproduction enables rapid population expansion when environmental conditions are favorable.',\r\n            'The lack of genetic diversity in asexual reproduction makes populations vulnerable to environmental changes.',\r\n            'Energy efficiency in asexual reproduction allows organisms to invest more resources in offspring production rather than mate finding.',\r\n            \r\n            // PARTIALLY CORRECT\r\n            'Asexual reproduction is faster than sexual reproduction in most organisms.',\r\n            'Genetic uniformity can be both beneficial and harmful depending on circumstances.',\r\n            \r\n            // INCORRECT\r\n            'Asexual reproduction always ensures better species survival than sexual reproduction.',\r\n            'Environmental changes have minimal impact on asexually reproducing populations.',\r\n            \r\n            // MISLEADING\r\n            'All organisms that reproduce asexually are less evolved than those that reproduce sexually.',\r\n            'Asexual reproduction requires no energy investment compared to sexual reproduction.'\r\n          ],\r\n          rubric: {\r\n            5: 'Comprehensive analysis of both advantages and disadvantages with clear reasoning',\r\n            3: 'Good analysis of advantages OR disadvantages with some reasoning',\r\n            1: 'Basic understanding with limited analysis',\r\n            0: 'Incorrect or no relevant content'\r\n          }\r\n        }\r\n      ],\r\n      'IQ2.1': [\r\n        {\r\n          id: 'IQ2.1-lr1',\r\n          question: 'Describe how cell cycle checkpoints control cell division and explain their importance in development.',\r\n          marks: 7,\r\n          expectedSentences: 5,\r\n          sentencePool: [\r\n            // CORRECT sentences\r\n            'The G1/S checkpoint ensures DNA is undamaged before replication begins during S phase.',\r\n            'The G2/M checkpoint verifies DNA replication is complete before mitosis can proceed.',\r\n            'The spindle checkpoint prevents chromosome separation until all chromosomes are properly attached to spindle fibers.',\r\n            'These checkpoints prevent the division of cells with damaged DNA, which could lead to cancer.',\r\n            'Proper checkpoint function is essential for controlled cell division during development and growth.',\r\n            \r\n            // PARTIALLY CORRECT\r\n            'Cell cycle checkpoints slow down cell division in most cases.',\r\n            'DNA damage can sometimes be repaired during the cell cycle.',\r\n            \r\n            // INCORRECT\r\n            'Checkpoints accelerate cell division to promote rapid growth.',\r\n            'All cells must pass through checkpoints at the same speed.',\r\n            \r\n            // MISLEADING\r\n            'Cell cycle checkpoints are optional for most cell types.',\r\n            'Cancer cells have better checkpoint control than normal cells.'\r\n          ]\r\n        }\r\n      ],\r\n      'IQ3.1': [\r\n        {\r\n          id: 'IQ3.1-lr1',\r\n          question: 'Explain the process of gene expression from DNA to protein, including the role of regulatory mechanisms.',\r\n          marks: 8,\r\n          expectedSentences: 6,\r\n          sentencePool: [\r\n            // CORRECT sentences\r\n            'Gene expression begins with transcription, where RNA polymerase reads the DNA template strand to produce mRNA.',\r\n            'The mRNA undergoes processing including 5\\' capping, 3\\' polyadenylation, and splicing to remove introns.',\r\n            'Translation occurs at ribosomes where mRNA codons are matched with tRNA anticodons to assemble amino acids into proteins.',\r\n            'Transcription factors regulate gene expression by binding to promoter regions and enhancing or inhibiting RNA polymerase activity.',\r\n            'Post-translational modifications such as phosphorylation can alter protein function and activity.',\r\n            'Environmental signals can trigger changes in gene expression through various regulatory pathways.',\r\n            \r\n            // PARTIALLY CORRECT\r\n            'DNA directly produces proteins through a simple copying process.',\r\n            'Gene regulation occurs only during transcription.',\r\n            \r\n            // INCORRECT\r\n            'All genes are expressed equally in all cell types.',\r\n            'Proteins are made directly from DNA without intermediate steps.',\r\n            \r\n            // CONFUSING\r\n            'Gene expression is the same in all organisms regardless of complexity.',\r\n            'Regulatory mechanisms prevent gene expression rather than control it.'\r\n          ]\r\n        }\r\n      ]\r\n      // Add more question banks for other dot points...\r\n    };\r\n\r\n    return banks[dotPointId] || [];\r\n  };\r\n\r\n  // Timer countdown\r\n  useEffect(() => {\r\n    if (timeRemaining === null || timeRemaining <= 0 || showResults) return;\r\n\r\n    const timer = setInterval(() => {\r\n      setTimeRemaining(prev => {\r\n        if (prev <= 1) {\r\n          handleTimeUp();\r\n          return 0;\r\n        }\r\n        return prev - 1;\r\n      });\r\n    }, 1000);\r\n\r\n    return () => clearInterval(timer);\r\n  }, [timeRemaining, showResults]);\r\n\r\n  const handleTimeUp = () => {\r\n    if (!showResults) {\r\n      finishQuiz();\r\n    }\r\n  };\r\n\r\n  // Drag and drop handlers\r\n  const handleDragStart = (sentence, index) => {\r\n    setDraggedSentence({ sentence, index });\r\n  };\r\n\r\n  const handleDragOver = (e) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  const handleDrop = (e, questionId, dropIndex) => {\r\n    e.preventDefault();\r\n    \r\n    if (!draggedSentence) return;\r\n\r\n    const newDropZones = { ...dropZones };\r\n    \r\n    // Remove sentence from previous position if it was already placed\r\n    Object.keys(newDropZones).forEach(qId => {\r\n      newDropZones[qId] = newDropZones[qId].map(item => \r\n        item === draggedSentence.sentence ? null : item\r\n      );\r\n    });\r\n\r\n    // Place sentence in new position\r\n    newDropZones[questionId][dropIndex] = draggedSentence.sentence;\r\n    \r\n    setDropZones(newDropZones);\r\n    setDraggedSentence(null);\r\n  };\r\n\r\n  const removeSentenceFromDropZone = (questionId, dropIndex) => {\r\n    const newDropZones = { ...dropZones };\r\n    newDropZones[questionId][dropIndex] = null;\r\n    setDropZones(newDropZones);\r\n  };\r\n\r\n  const handleNextQuestion = () => {\r\n    if (currentQuestionIndex < questions.length - 1) {\r\n      setCurrentQuestionIndex(prev => prev + 1);\r\n    } else {\r\n      finishQuiz();\r\n    }\r\n  };\r\n\r\n  const finishQuiz = () => {\r\n    const timeSpent = Math.round((Date.now() - quizStartTime) / 1000);\r\n    const results = calculateResults();\r\n    \r\n    setShowResults(true);\r\n    \r\n    // Call completion callback after showing results\r\n    setTimeout(() => {\r\n      onQuizComplete({\r\n        dotPointId,\r\n        quizType: 'longResponse',\r\n        score: results.percentage,\r\n        totalQuestions: questions.length,\r\n        totalMarks: results.totalMarks,\r\n        achievedMarks: results.achievedMarks,\r\n        timeSpent,\r\n        passed: results.percentage >= 65\r\n      });\r\n    }, 3000);\r\n  };\r\n\r\n  const calculateResults = () => {\r\n    let totalMarks = 0;\r\n    let achievedMarks = 0;\r\n\r\n    questions.forEach(question => {\r\n      totalMarks += question.marks;\r\n      const questionDropZone = dropZones[question.id];\r\n      \r\n      if (!questionDropZone) return;\r\n\r\n      // Score based on correct sentence selection and key concept coverage\r\n      let questionScore = 0;\r\n      const maxScore = question.marks;\r\n      \r\n      // Check for key concepts in selected sentences\r\n      const selectedSentences = questionDropZone.filter(s => s !== null);\r\n      const keyConceptsCovered = question.keyConceptsRequired?.filter(concept => \r\n        selectedSentences.some(sentence => \r\n          sentence.toLowerCase().includes(concept.toLowerCase())\r\n        )\r\n      ) || [];\r\n      \r\n      // Score calculation based on:\r\n      // 1. Key concepts covered (70% of marks)\r\n      // 2. Sentence quality and relevance (30% of marks)\r\n      const conceptScore = (keyConceptsCovered.length / (question.keyConceptsRequired?.length || 1)) * maxScore * 0.7;\r\n      \r\n      // Bonus for selecting high-quality sentences (first 4-6 in pool are typically correct)\r\n      const qualitySentences = selectedSentences.filter(sentence => {\r\n        const sentenceIndex = question.sentencePool.indexOf(sentence);\r\n        return sentenceIndex < question.expectedSentences + 2; // Allow some flexibility\r\n      });\r\n      const qualityScore = (qualitySentences.length / selectedSentences.length || 0) * maxScore * 0.3;\r\n      \r\n      questionScore = Math.min(maxScore, conceptScore + qualityScore);\r\n      achievedMarks += questionScore;\r\n    });\r\n\r\n    return {\r\n      totalMarks,\r\n      achievedMarks: Math.round(achievedMarks),\r\n      percentage: Math.round((achievedMarks / totalMarks) * 100)\r\n    };\r\n  };\r\n\r\n  const formatTime = (seconds) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const isQuestionComplete = (questionId) => {\r\n    const questionDropZone = dropZones[questionId];\r\n    return questionDropZone && questionDropZone.filter(s => s !== null).length >= 3;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mb-4\"></div>\r\n          <p className=\"text-gray-600\">Loading Long Response Quiz...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (showResults) {\r\n    const results = calculateResults();\r\n    const passed = results.percentage >= 65;\r\n\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 flex items-center justify-center p-4\">\r\n        <motion.div\r\n          initial={{ scale: 0.9, opacity: 0 }}\r\n          animate={{ scale: 1, opacity: 1 }}\r\n          className=\"bg-white rounded-2xl p-8 max-w-md w-full text-center shadow-lg\"\r\n        >\r\n          <div className={`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 ${\r\n            passed ? 'bg-green-100' : 'bg-orange-100'\r\n          }`}>\r\n            <span className=\"text-3xl\">\r\n              {passed ? '' : ''}\r\n            </span>\r\n          </div>\r\n          \r\n          <h2 className=\"text-2xl font-bold mb-4\">\r\n            {passed ? 'Excellent Response!' : 'Good Effort!'}\r\n          </h2>\r\n          \r\n          <div className=\"space-y-2 mb-6\">\r\n            <p className=\"text-lg\">\r\n              Score: <span className=\"font-bold\">{results.percentage}%</span>\r\n            </p>\r\n            <p className=\"text-gray-600\">\r\n              {results.achievedMarks} out of {results.totalMarks} marks\r\n            </p>\r\n            <p className=\"text-sm text-gray-500\">\r\n              {passed ? 'Minimum 65% required - PASSED ' : 'Minimum 65% required - You can retry immediately!'}\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"bg-blue-50 rounded-lg p-4 mb-6\">\r\n            <p className=\"text-sm text-blue-800\">\r\n              <strong>HSC Tip:</strong> Focus on using key scientific terms and connecting concepts in your responses.\r\n            </p>\r\n          </div>\r\n\r\n          <p className=\"text-center text-gray-600\">\r\n            Returning to pathway...\r\n          </p>\r\n        </motion.div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const currentQuestion = questions[currentQuestionIndex];\r\n  const progress = ((currentQuestionIndex + 1) / questions.length) * 100;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 flex flex-col\">\r\n      {/* Header */}\r\n      <div className=\"bg-white/80 backdrop-blur-sm shadow-sm border-b border-white/50 sticky top-0 z-10\">\r\n        <div className=\"px-4 py-3\">\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <button\r\n              onClick={onExit}\r\n              className=\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors\"\r\n            >\r\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n              </svg>\r\n            </button>\r\n\r\n            <div className=\"text-center\">\r\n              <h1 className=\"font-bold text-lg\">Long Response</h1>\r\n              <p className=\"text-sm text-gray-600\">HSC-Style Questions</p>\r\n            </div>\r\n\r\n            <div className={`px-3 py-1 rounded-full text-sm font-medium ${\r\n              timeRemaining <= 300 ? 'bg-red-100 text-red-700' :\r\n              timeRemaining <= 600 ? 'bg-yellow-100 text-yellow-700' :\r\n              'bg-green-100 text-green-700'\r\n            }`}>\r\n               {formatTime(timeRemaining)}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <div className=\"flex justify-between text-sm\">\r\n              <span>Question {currentQuestionIndex + 1} of {questions.length}</span>\r\n              <span>{Math.round(progress)}% Complete</span>\r\n            </div>\r\n            <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n              <div \r\n                className=\"bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all duration-300\"\r\n                style={{ width: `${progress}%` }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Question Content */}\r\n      <div className=\"flex-1 p-4 max-w-6xl mx-auto w-full\">\r\n        <AnimatePresence mode=\"wait\">\r\n          <motion.div\r\n            key={currentQuestionIndex}\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: -20 }}\r\n            className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\"\r\n          >\r\n            {/* Question Panel */}\r\n            <div className=\"space-y-6\">\r\n              <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-white/50\">\r\n                <div className=\"flex items-start space-x-3 mb-4\">\r\n                  <div className=\"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white font-bold text-sm\">\r\n                    {currentQuestionIndex + 1}\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <h2 className=\"text-lg font-semibold text-gray-900 leading-relaxed mb-2\">\r\n                      {currentQuestion.question}\r\n                    </h2>\r\n                    <div className=\"flex items-center space-x-4 text-sm text-gray-600\">\r\n                      <span className=\"bg-purple-100 text-purple-700 px-2 py-1 rounded\">\r\n                        {currentQuestion.marks} marks\r\n                      </span>\r\n                      <span>\r\n                        Select {currentQuestion.expectedSentences}+ sentences\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Sentence Pool */}\r\n              <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-white/50\">\r\n                <h3 className=\"font-semibold text-gray-900 mb-4\">\r\n                   Sentence Pool (Drag to construct your answer)\r\n                </h3>\r\n                <div className=\"space-y-2 max-h-64 overflow-y-auto\">\r\n                  {currentQuestion.sentencePool.map((sentence, index) => {\r\n                    const isUsed = Object.values(dropZones).some(zones => \r\n                      zones && zones.includes(sentence)\r\n                    );\r\n                    \r\n                    return (\r\n                      <div\r\n                        key={index}\r\n                        draggable={!isUsed}\r\n                        onDragStart={() => handleDragStart(sentence, index)}\r\n                        className={`p-3 rounded-lg border-2 cursor-move transition-all text-sm ${\r\n                          isUsed \r\n                            ? 'border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed'\r\n                            : 'border-purple-200 bg-purple-50 hover:border-purple-400 hover:bg-purple-100'\r\n                        }`}\r\n                      >\r\n                        {sentence}\r\n                        {isUsed && <span className=\"text-xs text-gray-500 ml-2\">(Used)</span>}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Response Construction Panel */}\r\n            <div className=\"space-y-6\">\r\n              <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-white/50\">\r\n                <h3 className=\"font-semibold text-gray-900 mb-4 flex items-center\">\r\n                   Your Response\r\n                  <span className={`ml-2 text-xs px-2 py-1 rounded ${\r\n                    isQuestionComplete(currentQuestion.id) \r\n                      ? 'bg-green-100 text-green-700' \r\n                      : 'bg-yellow-100 text-yellow-700'\r\n                  }`}>\r\n                    {dropZones[currentQuestion.id]?.filter(s => s !== null).length || 0} sentences\r\n                  </span>\r\n                </h3>\r\n                \r\n                <div className=\"space-y-3\">\r\n                  {Array(currentQuestion.expectedSentences).fill(null).map((_, dropIndex) => (\r\n                    <div\r\n                      key={dropIndex}\r\n                      onDragOver={handleDragOver}\r\n                      onDrop={(e) => handleDrop(e, currentQuestion.id, dropIndex)}\r\n                      className=\"min-h-16 border-2 border-dashed border-gray-300 rounded-lg p-3 bg-gray-50 hover:border-purple-400 hover:bg-purple-50 transition-all\"\r\n                    >\r\n                      {dropZones[currentQuestion.id]?.[dropIndex] ? (\r\n                        <div className=\"flex items-start space-x-2\">\r\n                          <span className=\"text-sm bg-purple-100 text-purple-700 px-2 py-1 rounded font-medium\">\r\n                            {dropIndex + 1}\r\n                          </span>\r\n                          <p className=\"flex-1 text-sm text-gray-900\">\r\n                            {dropZones[currentQuestion.id][dropIndex]}\r\n                          </p>\r\n                          <button\r\n                            onClick={() => removeSentenceFromDropZone(currentQuestion.id, dropIndex)}\r\n                            className=\"text-red-500 hover:text-red-700 p-1\"\r\n                          >\r\n                            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                            </svg>\r\n                          </button>\r\n                        </div>\r\n                      ) : (\r\n                        <div className=\"text-center text-gray-500 text-sm\">\r\n                          Drop sentence {dropIndex + 1} here\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Tips */}\r\n              <div className=\"bg-blue-50 rounded-xl p-4 border border-blue-200\">\r\n                <h4 className=\"font-medium text-blue-900 mb-2\"> HSC Tips:</h4>\r\n                <ul className=\"text-sm text-blue-800 space-y-1\">\r\n                  <li> Use scientific terminology accurately</li>\r\n                  <li> Connect concepts with clear explanations</li>\r\n                  <li> Include specific examples where relevant</li>\r\n                  <li> Ensure logical flow between sentences</li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        </AnimatePresence>\r\n      </div>\r\n\r\n      {/* Navigation */}\r\n      <div className=\"p-4 max-w-6xl mx-auto w-full\">\r\n        <div className=\"bg-white/80 backdrop-blur-sm rounded-xl p-4 border border-white/50\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"text-sm text-gray-600\">\r\n              {isQuestionComplete(currentQuestion.id) ? (\r\n                <span className=\"text-green-600 font-medium\"> Minimum sentences selected</span>\r\n              ) : (\r\n                <span className=\"text-yellow-600\">Select at least {currentQuestion.expectedSentences} sentences</span>\r\n              )}\r\n            </div>\r\n            \r\n            <button\r\n              onClick={handleNextQuestion}\r\n              disabled={!isQuestionComplete(currentQuestion.id)}\r\n              className={`py-3 px-6 rounded-lg font-bold transition-all ${\r\n                isQuestionComplete(currentQuestion.id)\r\n                  ? 'bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:shadow-lg'\r\n                  : 'bg-gray-200 text-gray-400 cursor-not-allowed'\r\n              }`}\r\n            >\r\n              {currentQuestionIndex < questions.length - 1 ? 'Next Question' : 'Complete Quiz'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Module5LongResponseQuiz;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\Module5Pathway.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\Module6Pathway.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\MultiplayerQuizBattle.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'motion' is defined but never used. Allowed unused vars must match /^React$/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":16},{"ruleId":"no-unused-vars","severity":1,"message":"'AnimatePresence' is defined but never used. Allowed unused vars must match /^React$/u.","line":2,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":33},{"ruleId":"no-unused-vars","severity":1,"message":"'battleHistory' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":16,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":23},{"ruleId":"no-unused-vars","severity":1,"message":"'soundEnabled' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":18,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'setSoundEnabled' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":18,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":39},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'simulateMultiplayerConnection'. Either include it or remove the dependency array.","line":52,"column":6,"nodeType":"ArrayExpression","endLine":52,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [simulateMultiplayerConnection]","fix":{"range":[1857,1859],"text":"[simulateMultiplayerConnection]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport './MultiplayerQuizBattle.css';\r\n\r\nconst MultiplayerQuizBattle = ({ onExit, currentUser }) => {\r\n  const [gameState, setGameState] = useState('lobby'); // lobby, waiting, battle, results\r\n  const [players, setPlayers] = useState([]);\r\n  const [currentQuestion, setCurrentQuestion] = useState(null);\r\n  const [questionIndex, setQuestionIndex] = useState(0);\r\n  const [timeLeft, setTimeLeft] = useState(15);\r\n  const [userAnswer, setUserAnswer] = useState(null);\r\n  const [playerScores, setPlayerScores] = useState({});\r\n  const [battleResults, setBattleResults] = useState(null);\r\n  const [connectionStatus, setConnectionStatus] = useState('connecting');\r\n  const [gameId, setGameId] = useState(null);\r\n  const [battleHistory, setBattleHistory] = useState([]);\r\n  const timerRef = useRef(null);\r\n  const [soundEnabled, setSoundEnabled] = useState(true);\r\n\r\n  const battleTypes = {\r\n    speed: {\r\n      name: 'Speed Battle',\r\n      icon: '',\r\n      description: 'Fast-paced questions with 10 seconds each',\r\n      timePerQuestion: 10,\r\n      questionsCount: 15\r\n    },\r\n    endurance: {\r\n      name: 'Endurance Challenge',\r\n      icon: '',\r\n      description: '30 questions with 20 seconds each',\r\n      timePerQuestion: 20,\r\n      questionsCount: 30\r\n    },\r\n    precision: {\r\n      name: 'Precision Mode',\r\n      icon: '',\r\n      description: 'Harder questions with 30 seconds each',\r\n      timePerQuestion: 30,\r\n      questionsCount: 12\r\n    }\r\n  };\r\n\r\n  const [selectedBattleType, setSelectedBattleType] = useState('speed');\r\n\r\n  useEffect(() => {\r\n    // Simulate connection and player matching\r\n    simulateMultiplayerConnection();\r\n    return () => {\r\n      if (timerRef.current) clearInterval(timerRef.current);\r\n    };\r\n  }, []);\r\n\r\n  const simulateMultiplayerConnection = () => {\r\n    setConnectionStatus('connecting');\r\n    \r\n    setTimeout(() => {\r\n      setConnectionStatus('connected');\r\n      setGameId(generateGameId());\r\n      \r\n      // Add current user to players\r\n      const mockPlayers = [\r\n        {\r\n          id: currentUser?.id || 'user1',\r\n          name: currentUser?.name || 'You',\r\n          avatar: currentUser?.avatar || '',\r\n          school: currentUser?.school || 'Your School',\r\n          rating: 1250,\r\n          isCurrentUser: true,\r\n          status: 'ready'\r\n        },\r\n        // Add mock opponents\r\n        ...generateMockOpponents()\r\n      ];\r\n      \r\n      setPlayers(mockPlayers);\r\n      initializePlayerScores(mockPlayers);\r\n    }, 2000);\r\n  };\r\n\r\n  const generateGameId = () => {\r\n    return Math.random().toString(36).substring(2, 8).toUpperCase();\r\n  };\r\n\r\n  const generateMockOpponents = () => {\r\n    const opponents = [\r\n      { name: 'Sarah Kim', avatar: '', school: 'Sydney Grammar', rating: 1180 },\r\n      { name: 'Alex Chen', avatar: '', school: 'North Sydney Boys', rating: 1320 },\r\n      { name: 'Maya Patel', avatar: '', school: 'James Ruse', rating: 1290 }\r\n    ];\r\n    \r\n    const opponentCount = Math.floor(Math.random() * 3) + 2; // 2-4 opponents\r\n    return opponents.slice(0, opponentCount).map((opponent, index) => ({\r\n      id: `opponent_${index}`,\r\n      ...opponent,\r\n      isCurrentUser: false,\r\n      status: Math.random() > 0.3 ? 'ready' : 'waiting'\r\n    }));\r\n  };\r\n\r\n  const initializePlayerScores = (playerList) => {\r\n    const scores = {};\r\n    playerList.forEach(player => {\r\n      scores[player.id] = {\r\n        score: 0,\r\n        correctAnswers: 0,\r\n        streak: 0,\r\n        averageTime: 0,\r\n        totalTime: 0\r\n      };\r\n    });\r\n    setPlayerScores(scores);\r\n  };\r\n\r\n  const startBattle = () => {\r\n    if (players.filter(p => p.status === 'ready').length < 2) return;\r\n    \r\n    setGameState('battle');\r\n    setQuestionIndex(0);\r\n    loadNextQuestion();\r\n  };\r\n\r\n  const loadNextQuestion = () => {\r\n    const questions = generateBattleQuestions();\r\n    if (questionIndex >= questions.length) {\r\n      endBattle();\r\n      return;\r\n    }\r\n\r\n    setCurrentQuestion(questions[questionIndex]);\r\n    setTimeLeft(battleTypes[selectedBattleType].timePerQuestion);\r\n    setUserAnswer(null);\r\n\r\n    // Start timer\r\n    timerRef.current = setInterval(() => {\r\n      setTimeLeft(prev => {\r\n        if (prev <= 1) {\r\n          handleTimeUp();\r\n          return 0;\r\n        }\r\n        return prev - 1;\r\n      });\r\n    }, 1000);\r\n  };\r\n\r\n  const generateBattleQuestions = () => {\r\n    const questionPool = [\r\n      {\r\n        id: 1,\r\n        question: \"What is the primary function of mitochondria?\",\r\n        options: [\"Protein synthesis\", \"Cellular respiration\", \"DNA replication\", \"Photosynthesis\"],\r\n        correct: 1,\r\n        difficulty: \"medium\",\r\n        topic: \"Cell Biology\"\r\n      },\r\n      {\r\n        id: 2,\r\n        question: \"Which process produces the most ATP?\",\r\n        options: [\"Glycolysis\", \"Krebs cycle\", \"Electron transport chain\", \"Fermentation\"],\r\n        correct: 2,\r\n        difficulty: \"hard\",\r\n        topic: \"Cellular Respiration\"\r\n      },\r\n      {\r\n        id: 3,\r\n        question: \"What type of bond holds the two strands of DNA together?\",\r\n        options: [\"Ionic bonds\", \"Covalent bonds\", \"Hydrogen bonds\", \"Van der Waals forces\"],\r\n        correct: 2,\r\n        difficulty: \"medium\",\r\n        topic: \"DNA Structure\"\r\n      },\r\n      {\r\n        id: 4,\r\n        question: \"In which phase of mitosis do chromosomes line up at the equator?\",\r\n        options: [\"Prophase\", \"Metaphase\", \"Anaphase\", \"Telophase\"],\r\n        correct: 1,\r\n        difficulty: \"easy\",\r\n        topic: \"Cell Division\"\r\n      },\r\n      {\r\n        id: 5,\r\n        question: \"What is the complementary DNA strand to 5'-ATCG-3'?\",\r\n        options: [\"5'-TAGC-3'\", \"3'-TAGC-5'\", \"5'-CGAT-3'\", \"3'-CGAT-5'\"],\r\n        correct: 1,\r\n        difficulty: \"hard\",\r\n        topic: \"DNA Structure\"\r\n      }\r\n    ];\r\n\r\n    return questionPool.sort(() => Math.random() - 0.5).slice(0, battleTypes[selectedBattleType].questionsCount);\r\n  };\r\n\r\n  const handleAnswerSelect = (answerIndex) => {\r\n    if (userAnswer !== null) return;\r\n    \r\n    setUserAnswer(answerIndex);\r\n    clearInterval(timerRef.current);\r\n    \r\n    const isCorrect = answerIndex === currentQuestion.correct;\r\n    const responseTime = battleTypes[selectedBattleType].timePerQuestion - timeLeft;\r\n    \r\n    // Update player scores\r\n    updatePlayerScore(isCorrect, responseTime);\r\n    \r\n    // Simulate other players answering\r\n    simulateOpponentAnswers();\r\n    \r\n    setTimeout(() => {\r\n      setQuestionIndex(prev => prev + 1);\r\n      loadNextQuestion();\r\n    }, 2000);\r\n  };\r\n\r\n  const handleTimeUp = () => {\r\n    if (userAnswer !== null) return;\r\n    \r\n    clearInterval(timerRef.current);\r\n    setUserAnswer(-1); // Indicates no answer\r\n    updatePlayerScore(false, battleTypes[selectedBattleType].timePerQuestion);\r\n    \r\n    simulateOpponentAnswers();\r\n    \r\n    setTimeout(() => {\r\n      setQuestionIndex(prev => prev + 1);\r\n      loadNextQuestion();\r\n    }, 2000);\r\n  };\r\n\r\n  const updatePlayerScore = (isCorrect, responseTime) => {\r\n    const currentUserId = players.find(p => p.isCurrentUser)?.id;\r\n    if (!currentUserId) return;\r\n\r\n    setPlayerScores(prev => {\r\n      const userScore = prev[currentUserId];\r\n      let points = 0;\r\n      \r\n      if (isCorrect) {\r\n        // Base points + speed bonus\r\n        points = 100;\r\n        const speedBonus = Math.max(0, (battleTypes[selectedBattleType].timePerQuestion - responseTime) * 5);\r\n        points += speedBonus;\r\n        \r\n        // Streak bonus\r\n        const streakBonus = userScore.streak * 10;\r\n        points += streakBonus;\r\n      }\r\n\r\n      return {\r\n        ...prev,\r\n        [currentUserId]: {\r\n          ...userScore,\r\n          score: userScore.score + points,\r\n          correctAnswers: userScore.correctAnswers + (isCorrect ? 1 : 0),\r\n          streak: isCorrect ? userScore.streak + 1 : 0,\r\n          totalTime: userScore.totalTime + responseTime,\r\n          averageTime: (userScore.totalTime + responseTime) / (questionIndex + 1)\r\n        }\r\n      };\r\n    });\r\n  };\r\n\r\n  const simulateOpponentAnswers = () => {\r\n    players.filter(p => !p.isCurrentUser).forEach(player => {\r\n      const accuracy = 0.6 + (player.rating - 1000) / 1000 * 0.3; // Rating affects accuracy\r\n      const isCorrect = Math.random() < accuracy;\r\n      const responseTime = Math.random() * battleTypes[selectedBattleType].timePerQuestion * 0.8 + 2;\r\n      \r\n      setPlayerScores(prev => {\r\n        const playerScore = prev[player.id];\r\n        let points = 0;\r\n        \r\n        if (isCorrect) {\r\n          points = 100;\r\n          const speedBonus = Math.max(0, (battleTypes[selectedBattleType].timePerQuestion - responseTime) * 5);\r\n          points += speedBonus;\r\n          const streakBonus = playerScore.streak * 10;\r\n          points += streakBonus;\r\n        }\r\n\r\n        return {\r\n          ...prev,\r\n          [player.id]: {\r\n            ...playerScore,\r\n            score: playerScore.score + points,\r\n            correctAnswers: playerScore.correctAnswers + (isCorrect ? 1 : 0),\r\n            streak: isCorrect ? playerScore.streak + 1 : 0,\r\n            totalTime: playerScore.totalTime + responseTime,\r\n            averageTime: (playerScore.totalTime + responseTime) / (questionIndex + 1)\r\n          }\r\n        };\r\n      });\r\n    });\r\n  };\r\n\r\n  const endBattle = () => {\r\n    setGameState('results');\r\n    \r\n    // Calculate final results\r\n    const results = Object.entries(playerScores).map(([playerId, score]) => {\r\n      const player = players.find(p => p.id === playerId);\r\n      return {\r\n        ...player,\r\n        ...score,\r\n        accuracy: Math.round((score.correctAnswers / questionIndex) * 100),\r\n        rank: 0 // Will be set after sorting\r\n      };\r\n    }).sort((a, b) => b.score - a.score).map((player, index) => ({\r\n      ...player,\r\n      rank: index + 1\r\n    }));\r\n\r\n    setBattleResults(results);\r\n    \r\n    // Add to battle history\r\n    const currentUserResult = results.find(r => r.isCurrentUser);\r\n    setBattleHistory(prev => [...prev, {\r\n      id: Date.now(),\r\n      date: new Date(),\r\n      battleType: selectedBattleType,\r\n      rank: currentUserResult.rank,\r\n      score: currentUserResult.score,\r\n      players: results.length\r\n    }]);\r\n  };\r\n\r\n  const getAnswerClass = (optionIndex) => {\r\n    if (userAnswer === null) return 'option';\r\n    \r\n    const isSelected = userAnswer === optionIndex;\r\n    const isCorrect = optionIndex === currentQuestion.correct;\r\n    \r\n    if (isSelected && isCorrect) return 'option selected correct';\r\n    if (isSelected && !isCorrect) return 'option selected incorrect';\r\n    if (isCorrect) return 'option correct';\r\n    return 'option';\r\n  };\r\n\r\n  const getRankIcon = (rank) => {\r\n    const icons = { 1: '', 2: '', 3: '' };\r\n    return icons[rank] || `#${rank}`;\r\n  };\r\n\r\n  const getRankColor = (rank) => {\r\n    const colors = { 1: '#fbbf24', 2: '#94a3b8', 3: '#cd7c0f' };\r\n    return colors[rank] || '#6b7280';\r\n  };\r\n\r\n  if (gameState === 'lobby') {\r\n    return (\r\n      <div className=\"multiplayer-battle-container\">\r\n        <div className=\"battle-lobby\">\r\n          <header className=\"lobby-header\">\r\n            <button onClick={onExit} className=\"exit-button\">\r\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\r\n              </svg>\r\n            </button>\r\n            <h1> Multiplayer Quiz Battle</h1>\r\n            <div className=\"connection-status\">\r\n              <div className={`status-indicator ${connectionStatus}`}></div>\r\n              <span>{connectionStatus === 'connected' ? 'Connected' : 'Connecting...'}</span>\r\n            </div>\r\n          </header>\r\n\r\n          <div className=\"battle-setup\">\r\n            <div className=\"battle-types\">\r\n              <h2>Choose Battle Type</h2>\r\n              <div className=\"battle-type-grid\">\r\n                {Object.entries(battleTypes).map(([key, type]) => (\r\n                  <button\r\n                    key={key}\r\n                    onClick={() => setSelectedBattleType(key)}\r\n                    className={`battle-type-card ${selectedBattleType === key ? 'selected' : ''}`}\r\n                  >\r\n                    <div className=\"type-icon\">{type.icon}</div>\r\n                    <h3>{type.name}</h3>\r\n                    <p>{type.description}</p>\r\n                    <div className=\"type-stats\">\r\n                      <span>{type.questionsCount} questions</span>\r\n                      <span>{type.timePerQuestion}s each</span>\r\n                    </div>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {connectionStatus === 'connected' && (\r\n              <div className=\"game-lobby\">\r\n                <div className=\"lobby-info\">\r\n                  <h3>Game ID: {gameId}</h3>\r\n                  <p>Share this ID with friends to join your battle!</p>\r\n                </div>\r\n\r\n                <div className=\"players-waiting\">\r\n                  <h3>Players ({players.length}/8)</h3>\r\n                  <div className=\"players-grid\">\r\n                    {players.map(player => (\r\n                      <div key={player.id} className={`player-card ${player.status}`}>\r\n                        <div className=\"player-avatar\">{player.avatar}</div>\r\n                        <div className=\"player-info\">\r\n                          <span className=\"player-name\">\r\n                            {player.name} {player.isCurrentUser && '(You)'}\r\n                          </span>\r\n                          <span className=\"player-school\">{player.school}</span>\r\n                          <span className=\"player-rating\"> {player.rating}</span>\r\n                        </div>\r\n                        <div className={`player-status ${player.status}`}>\r\n                          {player.status === 'ready' ? '' : ''}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                <button\r\n                  onClick={startBattle}\r\n                  disabled={players.filter(p => p.status === 'ready').length < 2}\r\n                  className=\"start-battle-button\"\r\n                >\r\n                  {players.filter(p => p.status === 'ready').length < 2 \r\n                    ? 'Waiting for more players...' \r\n                    : 'Start Battle!'}\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (gameState === 'battle') {\r\n    return (\r\n      <div className=\"multiplayer-battle-container\">\r\n        <div className=\"battle-arena\">\r\n          <header className=\"battle-header\">\r\n            <div className=\"battle-info\">\r\n              <span className=\"question-progress\">{questionIndex + 1}/{battleTypes[selectedBattleType].questionsCount}</span>\r\n              <span className=\"battle-type\">{battleTypes[selectedBattleType].name}</span>\r\n            </div>\r\n            <div className=\"battle-timer\">\r\n              <div className=\"timer-circle\">\r\n                <div \r\n                  className=\"timer-fill\"\r\n                  style={{\r\n                    strokeDasharray: `${2 * Math.PI * 20}`,\r\n                    strokeDashoffset: `${2 * Math.PI * 20 * (1 - timeLeft / battleTypes[selectedBattleType].timePerQuestion)}`\r\n                  }}\r\n                ></div>\r\n                <span className=\"timer-text\">{timeLeft}</span>\r\n              </div>\r\n            </div>\r\n          </header>\r\n\r\n          <div className=\"battle-content\">\r\n            <div className=\"question-section\">\r\n              <div className=\"question-header\">\r\n                <span className=\"question-topic\">{currentQuestion?.topic}</span>\r\n                <span className=\"question-difficulty\">{currentQuestion?.difficulty}</span>\r\n              </div>\r\n              <h2 className=\"question-text\">{currentQuestion?.question}</h2>\r\n              \r\n              <div className=\"options-grid\">\r\n                {currentQuestion?.options.map((option, index) => (\r\n                  <button\r\n                    key={index}\r\n                    onClick={() => handleAnswerSelect(index)}\r\n                    className={getAnswerClass(index)}\r\n                    disabled={userAnswer !== null}\r\n                  >\r\n                    <span className=\"option-letter\">{String.fromCharCode(65 + index)}</span>\r\n                    <span className=\"option-text\">{option}</span>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"players-sidebar\">\r\n              <h3>Live Scores</h3>\r\n              <div className=\"live-scoreboard\">\r\n                {players\r\n                  .sort((a, b) => (playerScores[b.id]?.score || 0) - (playerScores[a.id]?.score || 0))\r\n                  .map((player, index) => (\r\n                    <div key={player.id} className={`score-row ${player.isCurrentUser ? 'current-user' : ''}`}>\r\n                      <div className=\"player-rank\">{index + 1}</div>\r\n                      <div className=\"player-info\">\r\n                        <span className=\"player-avatar\">{player.avatar}</span>\r\n                        <span className=\"player-name\">{player.name}</span>\r\n                      </div>\r\n                      <div className=\"player-score\">{playerScores[player.id]?.score || 0}</div>\r\n                    </div>\r\n                  ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (gameState === 'results') {\r\n    return (\r\n      <div className=\"multiplayer-battle-container\">\r\n        <div className=\"battle-results\">\r\n          <header className=\"results-header\">\r\n            <h1> Battle Results</h1>\r\n            <p>{battleTypes[selectedBattleType].name} - {questionIndex} Questions</p>\r\n          </header>\r\n\r\n          <div className=\"results-content\">\r\n            <div className=\"podium\">\r\n              {battleResults?.slice(0, 3).map((player, index) => (\r\n                <div key={player.id} className={`podium-place place-${index + 1} ${player.isCurrentUser ? 'current-user' : ''}`}>\r\n                  <div className=\"podium-rank\">{getRankIcon(index + 1)}</div>\r\n                  <div className=\"podium-avatar\">{player.avatar}</div>\r\n                  <div className=\"podium-name\">{player.name}</div>\r\n                  <div className=\"podium-score\">{player.score} pts</div>\r\n                  <div className=\"podium-accuracy\">{player.accuracy}% accuracy</div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <div className=\"full-results\">\r\n              <h3>Final Rankings</h3>\r\n              <div className=\"results-table\">\r\n                {battleResults?.map(player => (\r\n                  <div key={player.id} className={`result-row ${player.isCurrentUser ? 'current-user' : ''}`}>\r\n                    <div className=\"result-rank\" style={{ color: getRankColor(player.rank) }}>\r\n                      {getRankIcon(player.rank)}\r\n                    </div>\r\n                    <div className=\"result-player\">\r\n                      <span className=\"player-avatar\">{player.avatar}</span>\r\n                      <div className=\"player-details\">\r\n                        <span className=\"player-name\">{player.name}</span>\r\n                        <span className=\"player-school\">{player.school}</span>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"result-stats\">\r\n                      <div className=\"stat\">\r\n                        <span className=\"stat-value\">{player.score}</span>\r\n                        <span className=\"stat-label\">Score</span>\r\n                      </div>\r\n                      <div className=\"stat\">\r\n                        <span className=\"stat-value\">{player.correctAnswers}/{questionIndex}</span>\r\n                        <span className=\"stat-label\">Correct</span>\r\n                      </div>\r\n                      <div className=\"stat\">\r\n                        <span className=\"stat-value\">{player.accuracy}%</span>\r\n                        <span className=\"stat-label\">Accuracy</span>\r\n                      </div>\r\n                      <div className=\"stat\">\r\n                        <span className=\"stat-value\">{Math.round(player.averageTime)}s</span>\r\n                        <span className=\"stat-label\">Avg Time</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"results-actions\">\r\n            <button onClick={() => setGameState('lobby')} className=\"play-again-button\">\r\n               Play Again\r\n            </button>\r\n            <button onClick={onExit} className=\"exit-button\">\r\n               Return to Dashboard\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nexport default MultiplayerQuizBattle;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\Navigation.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\PathwayProgress.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\PerformanceTracker.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'getPerformanceInsights' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":182,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":182,"endColumn":31},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":306,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":306,"endColumn":36}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\n\r\nconst PerformanceTracker = ({ \r\n  questionId, \r\n  questionType, \r\n  dotPoint, \r\n  difficulty, \r\n  onPerformanceUpdate \r\n}) => {\r\n  const [startTime] = useState(Date.now());\r\n  const [attempts, setAttempts] = useState(0);\r\n  const [hints, setHints] = useState(0);\r\n  const [isCorrect, setIsCorrect] = useState(null);\r\n  const [timeSpent, setTimeSpent] = useState(0);\r\n  const [confidence, setConfidence] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setTimeSpent(Date.now() - startTime);\r\n    }, 1000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [startTime]);\r\n\r\n  const trackAttempt = (correct = false) => {\r\n    setAttempts(prev => prev + 1);\r\n    setIsCorrect(correct);\r\n    \r\n    if (correct) {\r\n      const performanceData = calculatePerformance();\r\n      onPerformanceUpdate?.(performanceData);\r\n      saveToLocalStorage(performanceData);\r\n    }\r\n  };\r\n\r\n  const trackHint = () => {\r\n    setHints(prev => prev + 1);\r\n  };\r\n\r\n  const trackConfidence = (confidenceLevel) => {\r\n    setConfidence(confidenceLevel);\r\n  };\r\n\r\n  const calculatePerformance = () => {\r\n    const endTime = Date.now();\r\n    const totalTime = endTime - startTime;\r\n    \r\n    const baseScore = isCorrect ? 100 : 0;\r\n    const attemptPenalty = Math.max(0, (attempts - 1) * 10);\r\n    const hintPenalty = hints * 5;\r\n    const timePenalty = Math.max(0, (totalTime - 30000) / 1000);\r\n    \r\n    const finalScore = Math.max(0, baseScore - attemptPenalty - hintPenalty - timePenalty);\r\n    \r\n    const difficultyMultipliers = {\r\n      easy: 1.0,\r\n      medium: 1.2,\r\n      hard: 1.5\r\n    };\r\n    \r\n    const adjustedScore = finalScore * (difficultyMultipliers[difficulty] || 1.0);\r\n    \r\n    const efficiency = totalTime > 0 ? Math.min(100, (30000 / totalTime) * 100) : 100;\r\n    \r\n    const mastery = calculateMastery(adjustedScore, attempts, totalTime, confidence);\r\n\r\n    return {\r\n      questionId,\r\n      questionType,\r\n      dotPoint,\r\n      difficulty,\r\n      score: Math.round(adjustedScore),\r\n      attempts,\r\n      hints,\r\n      timeSpent: totalTime,\r\n      efficiency: Math.round(efficiency),\r\n      mastery,\r\n      confidence,\r\n      timestamp: endTime,\r\n      correct: isCorrect\r\n    };\r\n  };\r\n\r\n  const calculateMastery = (score, attempts, time, confidence) => {\r\n    let masteryScore = 0;\r\n    \r\n    if (score >= 90 && attempts === 1) masteryScore += 30;\r\n    else if (score >= 80 && attempts <= 2) masteryScore += 25;\r\n    else if (score >= 70) masteryScore += 20;\r\n    else if (score >= 60) masteryScore += 15;\r\n    else if (score >= 50) masteryScore += 10;\r\n    \r\n    if (time <= 15000) masteryScore += 20;\r\n    else if (time <= 30000) masteryScore += 15;\r\n    else if (time <= 60000) masteryScore += 10;\r\n    \r\n    if (hints === 0) masteryScore += 15;\r\n    else if (hints === 1) masteryScore += 10;\r\n    else if (hints === 2) masteryScore += 5;\r\n    \r\n    if (confidence >= 4) masteryScore += 10;\r\n    else if (confidence >= 3) masteryScore += 7;\r\n    else if (confidence >= 2) masteryScore += 5;\r\n    \r\n    const difficultyBonus = {\r\n      easy: 0,\r\n      medium: 5,\r\n      hard: 10\r\n    };\r\n    \r\n    masteryScore += difficultyBonus[difficulty] || 0;\r\n    \r\n    const masteryLevel = Math.min(100, Math.max(0, masteryScore));\r\n    \r\n    if (masteryLevel >= 90) return 'Expert';\r\n    if (masteryLevel >= 75) return 'Proficient';\r\n    if (masteryLevel >= 60) return 'Competent';\r\n    if (masteryLevel >= 45) return 'Developing';\r\n    return 'Novice';\r\n  };\r\n\r\n  const saveToLocalStorage = (performanceData) => {\r\n    try {\r\n      const existing = JSON.parse(localStorage.getItem('performanceData') || '[]');\r\n      existing.push(performanceData);\r\n      \r\n      if (existing.length > 1000) {\r\n        existing.splice(0, existing.length - 1000);\r\n      }\r\n      \r\n      localStorage.setItem('performanceData', JSON.stringify(existing));\r\n      \r\n      updateAggregateStats(performanceData);\r\n      \r\n    } catch (error) {\r\n      console.error('Error saving performance data:', error);\r\n    }\r\n  };\r\n\r\n  const updateAggregateStats = (performanceData) => {\r\n    try {\r\n      const existing = JSON.parse(localStorage.getItem('aggregatePerformance') || '{}');\r\n      \r\n      const key = `${performanceData.dotPoint}_${performanceData.questionType}`;\r\n      \r\n      if (!existing[key]) {\r\n        existing[key] = {\r\n          totalAttempts: 0,\r\n          totalScore: 0,\r\n          totalTime: 0,\r\n          bestScore: 0,\r\n          worstScore: 100,\r\n          masteryLevels: [],\r\n          recentScores: []\r\n        };\r\n      }\r\n      \r\n      const stats = existing[key];\r\n      stats.totalAttempts += 1;\r\n      stats.totalScore += performanceData.score;\r\n      stats.totalTime += performanceData.timeSpent;\r\n      stats.bestScore = Math.max(stats.bestScore, performanceData.score);\r\n      stats.worstScore = Math.min(stats.worstScore, performanceData.score);\r\n      stats.masteryLevels.push(performanceData.mastery);\r\n      stats.recentScores.push({\r\n        score: performanceData.score,\r\n        timestamp: performanceData.timestamp\r\n      });\r\n      \r\n      if (stats.recentScores.length > 10) {\r\n        stats.recentScores.splice(0, stats.recentScores.length - 10);\r\n      }\r\n      \r\n      localStorage.setItem('aggregatePerformance', JSON.stringify(existing));\r\n      \r\n    } catch (error) {\r\n      console.error('Error updating aggregate stats:', error);\r\n    }\r\n  };\r\n\r\n  const getPerformanceInsights = () => {\r\n    const performanceData = JSON.parse(localStorage.getItem('performanceData') || '[]');\r\n    const recent = performanceData.slice(-20);\r\n    \r\n    if (recent.length === 0) return null;\r\n    \r\n    const avgScore = recent.reduce((sum, p) => sum + p.score, 0) / recent.length;\r\n    const avgTime = recent.reduce((sum, p) => sum + p.timeSpent, 0) / recent.length;\r\n    const avgAttempts = recent.reduce((sum, p) => sum + p.attempts, 0) / recent.length;\r\n    \r\n    const strengths = [];\r\n    const improvements = [];\r\n    \r\n    if (avgScore >= 85) strengths.push('High accuracy');\r\n    if (avgTime <= 20000) strengths.push('Quick response time');\r\n    if (avgAttempts <= 1.5) strengths.push('Few mistakes');\r\n    \r\n    if (avgScore < 70) improvements.push('Focus on accuracy');\r\n    if (avgTime > 45000) improvements.push('Work on speed');\r\n    if (avgAttempts > 2.5) improvements.push('Think before answering');\r\n    \r\n    return {\r\n      avgScore: Math.round(avgScore),\r\n      avgTime: Math.round(avgTime / 1000),\r\n      avgAttempts: Math.round(avgAttempts * 10) / 10,\r\n      strengths,\r\n      improvements\r\n    };\r\n  };\r\n\r\n  const formatTime = (ms) => {\r\n    const seconds = Math.floor(ms / 1000);\r\n    const minutes = Math.floor(seconds / 60);\r\n    if (minutes > 0) {\r\n      return `${minutes}:${(seconds % 60).toString().padStart(2, '0')}`;\r\n    }\r\n    return `${seconds}s`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"performance-tracker\">\r\n      <div className=\"hidden\">\r\n        <button onClick={() => trackAttempt(false)} id=\"track-incorrect\" />\r\n        <button onClick={() => trackAttempt(true)} id=\"track-correct\" />\r\n        <button onClick={trackHint} id=\"track-hint\" />\r\n      </div>\r\n      \r\n      <div className=\"performance-overlay fixed top-4 right-4 bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-lg z-40\">\r\n        <div className=\"flex items-center space-x-3 text-sm\">\r\n          <div className=\"flex items-center space-x-1\">\r\n            <span className=\"text-gray-600\">Time:</span>\r\n            <span className=\"font-medium text-blue-600\">{formatTime(timeSpent)}</span>\r\n          </div>\r\n          \r\n          {attempts > 0 && (\r\n            <div className=\"flex items-center space-x-1\">\r\n              <span className=\"text-gray-600\">Attempts:</span>\r\n              <span className=\"font-medium text-orange-600\">{attempts}</span>\r\n            </div>\r\n          )}\r\n          \r\n          {hints > 0 && (\r\n            <div className=\"flex items-center space-x-1\">\r\n              <span className=\"text-gray-600\">Hints:</span>\r\n              <span className=\"font-medium text-purple-600\">{hints}</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        {isCorrect !== null && (\r\n          <motion.div\r\n            initial={{ opacity: 0, scale: 0.8 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            className={`mt-2 px-2 py-1 rounded text-xs font-medium text-center ${\r\n              isCorrect \r\n                ? 'bg-green-100 text-green-800' \r\n                : 'bg-red-100 text-red-800'\r\n            }`}\r\n          >\r\n            {isCorrect ? ' Correct!' : ' Incorrect'}\r\n          </motion.div>\r\n        )}\r\n      </div>\r\n      \r\n      {isCorrect && (\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          className=\"confidence-rating fixed bottom-4 left-4 right-4 bg-white rounded-xl p-4 shadow-lg z-50\"\r\n        >\r\n          <h3 className=\"text-sm font-semibold text-gray-900 mb-2\">How confident did you feel?</h3>\r\n          <div className=\"flex space-x-2\">\r\n            {[1, 2, 3, 4, 5].map(level => (\r\n              <button\r\n                key={level}\r\n                onClick={() => trackConfidence(level)}\r\n                className={`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all ${\r\n                  confidence === level\r\n                    ? 'bg-blue-600 text-white'\r\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                }`}\r\n              >\r\n                {level === 1 ? '' : level === 2 ? '' : level === 3 ? '' : level === 4 ? '' : ''}\r\n              </button>\r\n            ))}\r\n          </div>\r\n          \r\n          {confidence && (\r\n            <motion.div\r\n              initial={{ opacity: 0, height: 0 }}\r\n              animate={{ opacity: 1, height: 'auto' }}\r\n              className=\"mt-3 text-xs text-gray-600 text-center\"\r\n            >\r\n              Thanks for the feedback! This helps improve your learning experience.\r\n            </motion.div>\r\n          )}\r\n        </motion.div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PerformanceTracker;\r\n\r\nexport const usePerformanceTracking = () => {\r\n  const trackQuestionStart = (questionId, questionType, dotPoint, difficulty) => {\r\n    const startData = {\r\n      questionId,\r\n      questionType,\r\n      dotPoint,\r\n      difficulty,\r\n      startTime: Date.now(),\r\n      sessionId: Date.now().toString()\r\n    };\r\n    \r\n    sessionStorage.setItem('currentQuestion', JSON.stringify(startData));\r\n    return startData;\r\n  };\r\n\r\n  const trackQuestionEnd = (correct, attempts = 1, hints = 0, confidence = null) => {\r\n    try {\r\n      const startData = JSON.parse(sessionStorage.getItem('currentQuestion') || '{}');\r\n      if (!startData.questionId) return null;\r\n\r\n      const endTime = Date.now();\r\n      const timeSpent = endTime - startData.startTime;\r\n      \r\n      const performanceData = {\r\n        ...startData,\r\n        endTime,\r\n        timeSpent,\r\n        correct,\r\n        attempts,\r\n        hints,\r\n        confidence,\r\n        score: calculateQuestionScore(correct, attempts, hints, timeSpent, startData.difficulty)\r\n      };\r\n\r\n      const existing = JSON.parse(localStorage.getItem('detailedPerformance') || '[]');\r\n      existing.push(performanceData);\r\n      \r\n      if (existing.length > 500) {\r\n        existing.splice(0, existing.length - 500);\r\n      }\r\n      \r\n      localStorage.setItem('detailedPerformance', JSON.stringify(existing));\r\n      sessionStorage.removeItem('currentQuestion');\r\n      \r\n      return performanceData;\r\n    } catch (error) {\r\n      console.error('Error tracking question end:', error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const calculateQuestionScore = (correct, attempts, hints, timeSpent, difficulty) => {\r\n    if (!correct) return 0;\r\n    \r\n    let baseScore = 100;\r\n    const attemptPenalty = Math.max(0, (attempts - 1) * 15);\r\n    const hintPenalty = hints * 10;\r\n    const timePenalty = Math.max(0, (timeSpent - 30000) / 2000);\r\n    \r\n    const finalScore = Math.max(0, baseScore - attemptPenalty - hintPenalty - timePenalty);\r\n    \r\n    const difficultyMultipliers = {\r\n      easy: 1.0,\r\n      medium: 1.3,\r\n      hard: 1.6\r\n    };\r\n    \r\n    return Math.round(finalScore * (difficultyMultipliers[difficulty] || 1.0));\r\n  };\r\n\r\n  const getPerformanceAnalytics = () => {\r\n    try {\r\n      const data = JSON.parse(localStorage.getItem('detailedPerformance') || '[]');\r\n      const recent = data.slice(-50);\r\n      \r\n      if (recent.length === 0) {\r\n        return {\r\n          totalQuestions: 0,\r\n          averageScore: 0,\r\n          averageTime: 0,\r\n          accuracy: 0,\r\n          recentTrend: 'stable',\r\n          topicBreakdown: {},\r\n          difficultyBreakdown: {}\r\n        };\r\n      }\r\n\r\n      const totalQuestions = recent.length;\r\n      const correctAnswers = recent.filter(q => q.correct).length;\r\n      const averageScore = recent.reduce((sum, q) => sum + q.score, 0) / totalQuestions;\r\n      const averageTime = recent.reduce((sum, q) => sum + q.timeSpent, 0) / totalQuestions;\r\n      const accuracy = (correctAnswers / totalQuestions) * 100;\r\n      \r\n      const recentTrend = calculateTrend(recent);\r\n      const topicBreakdown = calculateTopicBreakdown(recent);\r\n      const difficultyBreakdown = calculateDifficultyBreakdown(recent);\r\n      \r\n      return {\r\n        totalQuestions,\r\n        averageScore: Math.round(averageScore),\r\n        averageTime: Math.round(averageTime / 1000),\r\n        accuracy: Math.round(accuracy),\r\n        recentTrend,\r\n        topicBreakdown,\r\n        difficultyBreakdown\r\n      };\r\n    } catch (error) {\r\n      console.error('Error getting performance analytics:', error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const calculateTrend = (data) => {\r\n    if (data.length < 10) return 'stable';\r\n    \r\n    const firstHalf = data.slice(0, Math.floor(data.length / 2));\r\n    const secondHalf = data.slice(Math.floor(data.length / 2));\r\n    \r\n    const firstAvg = firstHalf.reduce((sum, q) => sum + q.score, 0) / firstHalf.length;\r\n    const secondAvg = secondHalf.reduce((sum, q) => sum + q.score, 0) / secondHalf.length;\r\n    \r\n    const difference = secondAvg - firstAvg;\r\n    \r\n    if (difference > 10) return 'improving';\r\n    if (difference < -10) return 'declining';\r\n    return 'stable';\r\n  };\r\n\r\n  const calculateTopicBreakdown = (data) => {\r\n    const breakdown = {};\r\n    \r\n    data.forEach(q => {\r\n      if (!breakdown[q.dotPoint]) {\r\n        breakdown[q.dotPoint] = {\r\n          total: 0,\r\n          correct: 0,\r\n          averageScore: 0,\r\n          totalScore: 0\r\n        };\r\n      }\r\n      \r\n      breakdown[q.dotPoint].total += 1;\r\n      breakdown[q.dotPoint].totalScore += q.score;\r\n      breakdown[q.dotPoint].averageScore = Math.round(\r\n        breakdown[q.dotPoint].totalScore / breakdown[q.dotPoint].total\r\n      );\r\n      \r\n      if (q.correct) {\r\n        breakdown[q.dotPoint].correct += 1;\r\n      }\r\n    });\r\n    \r\n    Object.keys(breakdown).forEach(topic => {\r\n      breakdown[topic].accuracy = Math.round(\r\n        (breakdown[topic].correct / breakdown[topic].total) * 100\r\n      );\r\n    });\r\n    \r\n    return breakdown;\r\n  };\r\n\r\n  const calculateDifficultyBreakdown = (data) => {\r\n    const breakdown = { easy: [], medium: [], hard: [] };\r\n    \r\n    data.forEach(q => {\r\n      if (breakdown[q.difficulty]) {\r\n        breakdown[q.difficulty].push(q.score);\r\n      }\r\n    });\r\n    \r\n    Object.keys(breakdown).forEach(difficulty => {\r\n      const scores = breakdown[difficulty];\r\n      breakdown[difficulty] = {\r\n        count: scores.length,\r\n        averageScore: scores.length > 0 \r\n          ? Math.round(scores.reduce((sum, s) => sum + s, 0) / scores.length)\r\n          : 0\r\n      };\r\n    });\r\n    \r\n    return breakdown;\r\n  };\r\n\r\n  return {\r\n    trackQuestionStart,\r\n    trackQuestionEnd,\r\n    getPerformanceAnalytics\r\n  };\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\ProgressBar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\ProgressRing.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\ProtectedRoute.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\PullToRefresh.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^React$/u.","line":1,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":44},{"ruleId":"no-unused-vars","severity":1,"message":"'performanceConfig' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":13,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react';\nimport { motion, useMotionValue, useTransform } from 'framer-motion';\nimport { useMobileOptimization } from '../hooks/useMobileOptimization';\n\nconst PullToRefresh = ({ onRefresh, children, threshold = 60 }) => {\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  const [isPulling, setIsPulling] = useState(false);\n  const containerRef = useRef(null);\n  const y = useMotionValue(0);\n  const pullProgress = useTransform(y, [0, threshold], [0, 1]);\n  const rotation = useTransform(pullProgress, [0, 1], [0, 180]);\n  const { isMobile, triggerHaptic, getPerformanceConfig } = useMobileOptimization();\n  const performanceConfig = getPerformanceConfig();\n\n  const handlePullStart = () => {\n    if (containerRef.current?.scrollTop === 0) {\n      setIsPulling(true);\n      if (isMobile) {\n        triggerHaptic('light');\n      }\n    }\n  };\n\n  const handlePullEnd = async () => {\n    if (isPulling && y.get() >= threshold) {\n      setIsRefreshing(true);\n      if (isMobile) {\n        triggerHaptic('medium');\n      }\n      try {\n        await onRefresh();\n        if (isMobile) {\n          triggerHaptic('success');\n        }\n      } catch (error) {\n        console.error('Refresh failed:', error);\n        if (isMobile) {\n          triggerHaptic('error');\n        }\n      } finally {\n        setIsRefreshing(false);\n      }\n    }\n    setIsPulling(false);\n    y.set(0);\n  };\n\n  return (\n    <div ref={containerRef} className=\"overflow-auto smooth-scroll\">\n      {/* Pull to refresh indicator */}\n      <motion.div\n        style={{ y }}\n        className=\"relative mobile-optimized\"\n        drag={isPulling && isMobile ? \"y\" : false}\n        dragConstraints={{ top: 0, bottom: threshold }}\n        dragElastic={0.2}\n        onDragStart={handlePullStart}\n        onDragEnd={handlePullEnd}\n      >\n        {/* Refresh indicator */}\n        <motion.div\n          style={{\n            opacity: pullProgress,\n            scale: pullProgress,\n          }}\n          className=\"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-full flex items-center justify-center w-12 h-12 bg-white rounded-full shadow-lg z-10\"\n        >\n          {isRefreshing ? (\n            <div className=\"w-6 h-6 border-2 border-primary-600 border-t-transparent rounded-full animate-spin\" />\n          ) : (\n            <motion.svg\n              style={{ rotate: rotation }}\n              className=\"w-6 h-6 text-primary-600\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 14l-7 7m0 0l-7-7m7 7V3\" />\n            </motion.svg>\n          )}\n        </motion.div>\n\n        {children}\n      </motion.div>\n    </div>\n  );\n};\n\nexport default PullToRefresh;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\QuestionRenderer.jsx","messages":[{"ruleId":null,"fatal":true,"severity":2,"message":"Parsing error: Unexpected token case","line":537,"column":5,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { DragDropContext, Droppable, Draggable } from '@hello-pangea/dnd';\r\n\r\nconst QuestionRenderer = ({ question, selectedAnswers, handleAnswerSelect, shuffledOptions }) => {\r\n  switch (question.type) {\r\n    case 'multiple-choice':\r\n      return (\r\n        <div className=\"space-y-3\">\r\n          {question.options.map((option, index) => (\r\n            <button\r\n              key={index}\r\n              onClick={() => handleAnswerSelect(question.id, index)}\r\n              className={`w-full p-3 text-left rounded-lg border-2 transition-all ${\r\n                selectedAnswers[question.id] === index\r\n                  ? 'border-blue-500 bg-blue-50'\r\n                  : 'border-gray-200 hover:border-blue-300'\r\n              }`}\r\n            >\r\n              <span className=\"font-medium\">{String.fromCharCode(65 + index)}.</span> {option}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      );\r\n\r\n    case 'true-false':\r\n      return (\r\n        <div className=\"flex space-x-4 justify-center\">\r\n          {[true, false].map((option) => (\r\n            <button\r\n              key={option.toString()}\r\n              onClick={() => handleAnswerSelect(question.id, option)}\r\n              className={`px-8 py-4 rounded-lg border-2 font-semibold transition-all ${\r\n                selectedAnswers[question.id] === option\r\n                  ? 'border-blue-500 bg-blue-50'\r\n                  : 'border-gray-200 hover:border-blue-300'\r\n              }`}\r\n            >\r\n              {option ? 'TRUE' : 'FALSE'}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      );\r\n\r\n    case 'fill-blanks':\r\n      return (\r\n        <div className=\"space-y-4\">\r\n          {question.blanks.map((blank, index) => (\r\n            <div key={index} className=\"flex items-center space-x-2\">\r\n              <span className=\"font-medium\">Blank {index + 1}:</span>\r\n              <input\r\n                type=\"text\"\r\n                className=\"flex-1 p-2 border rounded-lg focus:border-blue-500\"\r\n                placeholder=\"Enter answer...\"\r\n                onChange={(e) => {\r\n                  const newAnswers = { ...(selectedAnswers[question.id] || {}) };\r\n                  newAnswers[index] = e.target.value;\r\n                  handleAnswerSelect(question.id, newAnswers);\r\n                }}\r\n              />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      );\r\n\r\n    case 'match-definitions':\r\n      return (\r\n        <div className=\"space-y-4\">\r\n          {question.pairs.map((pair, index) => (\r\n            <div key={index} className=\"p-4 border rounded-lg\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <span className=\"font-medium\">{pair.term}</span>\r\n                <select\r\n                  className=\"ml-4 p-2 border rounded focus:border-blue-500\"\r\n                  value={selectedAnswers[question.id]?.[index] || ''}\r\n                  onChange={(e) => {\r\n                    const newAnswers = { ...(selectedAnswers[question.id] || {}) };\r\n                    newAnswers[index] = e.target.value;\r\n                    handleAnswerSelect(question.id, newAnswers);\r\n                  }}\r\n                >\r\n                  <option value=\"\">Select definition...</option>\r\n                  {(shuffledOptions[question.id] || question.pairs.map(p => p.definition)).map((definition, defIndex) => (\r\n                    <option key={defIndex} value={definition}>\r\n                      {definition}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      );\r\n\r\n    case 'multiple-select':\r\n      return (\r\n        <div className=\"space-y-3\">\r\n          <div className=\"text-sm text-gray-600 mb-3\">\r\n            Select all that apply:\r\n          </div>\r\n          {question.options.map((option, index) => {\r\n            const isSelected = selectedAnswers[question.id] && selectedAnswers[question.id].includes(index);\r\n            return (\r\n              <button\r\n                key={index}\r\n                onClick={() => {\r\n                  const currentSelections = selectedAnswers[question.id] || [];\r\n                  const newSelections = isSelected\r\n                    ? currentSelections.filter(i => i !== index)\r\n                    : [...currentSelections, index];\r\n                  handleAnswerSelect(question.id, newSelections);\r\n                }}\r\n                className={`w-full p-3 text-left rounded-lg border-2 transition-all flex items-center ${\r\n                  isSelected\r\n                    ? 'border-blue-500 bg-blue-50'\r\n                    : 'border-gray-200 hover:border-blue-300'\r\n                }`}\r\n              >\r\n                <div className={`w-5 h-5 rounded border-2 mr-3 flex items-center justify-center ${\r\n                  isSelected ? 'bg-blue-500 border-blue-500' : 'border-gray-300'\r\n                }`}>\r\n                  {isSelected && (\r\n                    <svg className=\"w-3 h-3 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                      <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\r\n                    </svg>\r\n                  )}\r\n                </div>\r\n                <span className=\"font-medium\">{String.fromCharCode(65 + index)}.</span> {option}\r\n              </button>\r\n            );\r\n          })}\r\n        </div>\r\n      );\r\n\r\n    case 'drag-sequence': {\n      const currentSequence = selectedAnswers[question.id] || question.items.map((item, index) => ({ ...item, id: index.toString() }));\n      \n      const handleDragEnd = (result) => {\n        if (!result.destination) return;\n        \n        const items = Array.from(currentSequence);\n        const [reorderedItem] = items.splice(result.source.index, 1);\n        items.splice(result.destination.index, 0, reorderedItem);\n        \n        handleAnswerSelect(question.id, items);\n      };\n\n      return (\n        <div className=\"space-y-4\">\n          <div className=\"text-sm text-gray-600\">\n            Drag and drop to arrange in the correct sequence:\n          </div>\n          <DragDropContext onDragEnd={handleDragEnd}>\n            <Droppable droppableId=\"sequence\">\n              {(provided) => (\n                <div {...provided.droppableProps} ref={provided.innerRef} className=\"space-y-2\">\n                  {currentSequence.map((item, index) => (\n                    <Draggable key={item.id} draggableId={item.id} index={index}>\n                      {(provided, snapshot) => (\n                        <div\n                          ref={provided.innerRef}\n                          {...provided.draggableProps}\n                          {...provided.dragHandleProps}\n                          className={`p-4 rounded-lg border-2 transition-all cursor-move ${\n                            snapshot.isDragging\n                              ? 'border-blue-500 bg-blue-50 shadow-lg'\n                              : 'border-gray-200 bg-white hover:border-blue-300'\n                          }`}\n                        >\n                          <div className=\"flex items-center\">\n                            <div className=\"mr-3 text-gray-400\">\n                              <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                <path d=\"M7 2a2 2 0 00-2 2v12a2 2 0 002 2h6a2 2 0 002-2V4a2 2 0 00-2-2H7zM8 4h4v12H8V4z\"/>\n                              </svg>\n                            </div>\n                            <span className=\"font-medium text-gray-900\">{index + 1}.</span>\n                            <span className=\"ml-2\">{item.text}</span>\n                          </div>\n                        </div>\n                      )}\n                    </Draggable>\n                  ))}\n                  {provided.placeholder}\n                </div>\n              )}\n            </Droppable>\n          </DragDropContext>\n        </div>\n      );\n    }\n\r\n    case 'image-hotspot': {\n      const selectedSpots = selectedAnswers[question.id] || [];\n      \r\n      return (\r\n        <div className=\"space-y-4\">\r\n          <div className=\"text-sm text-gray-600\">\r\n            Click on the correct part(s) of the diagram:\r\n          </div>\r\n          <div className=\"relative inline-block max-w-full\">\r\n            <img \r\n              src={question.imageUrl} \r\n              alt={question.imageAlt || 'Biological diagram'}\r\n              className=\"max-w-full h-auto border rounded-lg\"\r\n              style={{ maxHeight: '400px' }}\r\n            />\r\n            {question.hotspots.map((hotspot, index) => {\r\n              const isSelected = selectedSpots.includes(index);\r\n              return (\r\n                <button\r\n                  key={index}\r\n                  onClick={() => {\r\n                    const newSpots = question.multiSelect \r\n                      ? (isSelected \r\n                          ? selectedSpots.filter(i => i !== index)\r\n                          : [...selectedSpots, index])\r\n                      : [index];\r\n                    handleAnswerSelect(question.id, newSpots);\r\n                  }}\r\n                  className={`absolute border-3 rounded-full transition-all transform -translate-x-1/2 -translate-y-1/2 ${\r\n                    isSelected \r\n                      ? 'bg-blue-500 border-blue-600 scale-110' \r\n                      : 'bg-red-500 border-red-600 hover:scale-105'\r\n                  }`}\r\n                  style={{\r\n                    left: `${hotspot.x}%`,\r\n                    top: `${hotspot.y}%`,\r\n                    width: '20px',\r\n                    height: '20px'\r\n                  }}\r\n                  title={hotspot.label}\r\n                >\r\n                  <span className=\"text-white text-xs font-bold\">\r\n                    {isSelected ? '' : index + 1}\r\n                  </span>\r\n                </button>\r\n              );\r\n            })}\r\n          </div>\r\n          {question.multiSelect && (\n            <div className=\"text-xs text-gray-500\">\n              Multiple selections allowed - click to toggle\n            </div>\n          )}\n        </div>\n      );\n    }\n\r\n    case 'category-sort': {\n      const sortedItems = selectedAnswers[question.id] || {};\r\n      const unassignedItems = question.items.filter(item => \r\n        !Object.values(sortedItems).some(categoryItems => \r\n          categoryItems && categoryItems.some(sortedItem => sortedItem.id === item.id)\r\n        )\r\n      );\r\n\r\n      const handleItemDrop = (item, categoryId) => {\r\n        const newSortedItems = { ...sortedItems };\r\n        \r\n        // Remove item from any existing category\r\n        Object.keys(newSortedItems).forEach(catId => {\r\n          if (newSortedItems[catId]) {\r\n            newSortedItems[catId] = newSortedItems[catId].filter(sortedItem => sortedItem.id !== item.id);\r\n          }\r\n        });\r\n        \r\n        // Add item to new category\r\n        if (!newSortedItems[categoryId]) newSortedItems[categoryId] = [];\r\n        newSortedItems[categoryId].push(item);\r\n        \r\n        handleAnswerSelect(question.id, newSortedItems);\r\n      };\r\n\r\n      return (\n        <div className=\"space-y-6\">\n          <div className=\"text-sm text-gray-600\">\r\n            Drag items into the correct categories:\r\n          </div>\r\n          \r\n          {/* Unassigned items pool */}\r\n          <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n            <h4 className=\"font-medium text-gray-700 mb-3\">Items to Sort:</h4>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {unassignedItems.map((item) => (\r\n                <div\r\n                  key={item.id}\r\n                  draggable\r\n                  onDragStart={(e) => e.dataTransfer.setData('text/plain', JSON.stringify(item))}\r\n                  className=\"px-3 py-2 bg-white border-2 border-gray-300 rounded-lg cursor-move hover:border-blue-400 transition-all\"\r\n                >\r\n                  {item.text}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Category bins */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            {question.categories.map((category) => (\r\n              <div\r\n                key={category.id}\r\n                className=\"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 min-h-32\"\r\n                onDragOver={(e) => e.preventDefault()}\r\n                onDrop={(e) => {\r\n                  e.preventDefault();\r\n                  const item = JSON.parse(e.dataTransfer.getData('text/plain'));\r\n                  handleItemDrop(item, category.id);\r\n                }}\r\n              >\r\n                <h4 className=\"font-semibold text-blue-800 mb-3\">{category.name}</h4>\r\n                <div className=\"space-y-2\">\r\n                  {(sortedItems[category.id] || []).map((item) => (\r\n                    <div\r\n                      key={item.id}\r\n                      draggable\r\n                      onDragStart={(e) => e.dataTransfer.setData('text/plain', JSON.stringify(item))}\r\n                      className=\"px-3 py-2 bg-white border border-blue-300 rounded cursor-move hover:bg-blue-100 transition-all\"\r\n                    >\r\n                      {item.text}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n                {(!sortedItems[category.id] || sortedItems[category.id].length === 0) && (\r\n                  <div className=\"text-blue-400 text-sm italic\">Drop items here...</div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      );\n    }\n\n    case 'timeline-builder': {\n      const timelineEvents = selectedAnswers[question.id] || question.events.map((event, index) => ({ ...event, id: index.toString() }));\n      \r\n      const handleTimelineDragEnd = (result) => {\r\n        if (!result.destination) return;\r\n        \r\n        const events = Array.from(timelineEvents);\r\n        const [reorderedEvent] = events.splice(result.source.index, 1);\r\n        events.splice(result.destination.index, 0, reorderedEvent);\r\n        \r\n        handleAnswerSelect(question.id, events);\r\n      };\r\n\r\n      return (\n        <div className=\"space-y-6\">\n          <div className=\"text-sm text-gray-600\">\r\n            Arrange these events in chronological order (earliest to latest):\r\n          </div>\r\n          <DragDropContext onDragEnd={handleTimelineDragEnd}>\r\n            <Droppable droppableId=\"timeline\" direction=\"horizontal\">\r\n              {(provided) => (\r\n                <div {...provided.droppableProps} ref={provided.innerRef} className=\"flex space-x-4 overflow-x-auto pb-4\">\r\n                  {timelineEvents.map((event, index) => (\r\n                    <Draggable key={event.id} draggableId={event.id} index={index}>\r\n                      {(provided, snapshot) => (\r\n                        <div\r\n                          ref={provided.innerRef}\r\n                          {...provided.draggableProps}\r\n                          {...provided.dragHandleProps}\r\n                          className={`min-w-64 max-w-64 p-4 rounded-lg border-2 transition-all cursor-move flex-shrink-0 ${\r\n                            snapshot.isDragging\r\n                              ? 'border-purple-500 bg-purple-50 shadow-lg scale-105'\r\n                              : 'border-gray-300 bg-white hover:border-purple-400'\r\n                          }`}\r\n                        >\r\n                          <div className=\"text-center\">\r\n                            <div className=\"w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center text-sm font-bold mb-3 mx-auto\">\r\n                              {index + 1}\r\n                            </div>\r\n                            <div className=\"text-sm font-medium text-gray-900 leading-tight\">\r\n                              {event.text}\r\n                            </div>\r\n                            {event.timeframe && (\r\n                              <div className=\"text-xs text-gray-500 mt-2\">\r\n                                {event.timeframe}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </Draggable>\r\n                  ))}\r\n                  {provided.placeholder}\r\n                </div>\r\n              )}\r\n            </Droppable>\r\n          </DragDropContext>\r\n          <div className=\"text-xs text-gray-500 text-center\">\r\n            Drag cards left/right to reorder  Timeline flows from left to right\r\n          </div>\r\n        </div>\r\n      );\n    }\n\r\n    case 'flowchart-complete': {\n      return (\n        <div className=\"space-y-6\">\n          <div className=\"text-sm text-gray-600\">\r\n            Complete the flowchart by filling in the missing steps:\r\n          </div>\r\n          <div className=\"bg-gray-50 p-6 rounded-lg\">\r\n            <div className=\"flex flex-col items-center space-y-4\">\r\n              {question.flowchartSteps.map((step, index) => (\r\n                <div key={index} className=\"flex flex-col items-center\">\r\n                  <div className={`p-4 rounded-lg border-2 text-center min-w-64 ${\r\n                    step.type === 'fixed' \r\n                      ? 'bg-blue-100 border-blue-300 text-blue-800' \r\n                      : 'bg-white border-gray-300'\r\n                  }`}>\r\n                    {step.type === 'fixed' ? (\r\n                      <span className=\"font-medium\">{step.text}</span>\r\n                    ) : (\r\n                      <select\r\n                        className=\"w-full p-2 border rounded focus:border-blue-500 bg-white\"\r\n                        value={selectedAnswers[question.id]?.[step.id] || ''}\r\n                        onChange={(e) => {\r\n                          const newAnswers = { ...(selectedAnswers[question.id] || {}) };\r\n                          newAnswers[step.id] = e.target.value;\r\n                          handleAnswerSelect(question.id, newAnswers);\r\n                        }}\r\n                      >\r\n                        <option value=\"\">Select step...</option>\r\n                        {(shuffledOptions[`${question.id}_${step.id}`] || step.options).map((option, optIndex) => (\r\n                          <option key={optIndex} value={option}>\r\n                            {option}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                    )}\r\n                  </div>\r\n                  {index < question.flowchartSteps.length - 1 && (\r\n                    <div className=\"text-gray-400 text-2xl\"></div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\n    }\n\n    case 'graph-construct': {\n      const plotPoints = selectedAnswers[question.id] || [];\n      \r\n      const handlePointClick = (x, y) => {\r\n        const newPoints = [...plotPoints];\r\n        const existingPointIndex = newPoints.findIndex(p => \r\n          Math.abs(p.x - x) < 5 && Math.abs(p.y - y) < 5\r\n        );\r\n        \r\n        if (existingPointIndex >= 0) {\r\n          newPoints.splice(existingPointIndex, 1); // Remove point\r\n        } else {\r\n          newPoints.push({ x, y }); // Add point\r\n        }\r\n        \r\n        handleAnswerSelect(question.id, newPoints);\r\n      };\r\n\r\n      return (\n        <div className=\"space-y-4\">\n          <div className=\"text-sm text-gray-600\">\r\n            {question.graphType === 'plot' ? 'Click on the graph to plot data points:' : 'Select the correct graph:'}\r\n          </div>\r\n          \r\n          {question.graphType === 'plot' ? (\r\n            <div className=\"bg-white border-2 border-gray-300 rounded-lg p-4\">\r\n              <svg \r\n                width=\"400\" \r\n                height=\"300\" \r\n                className=\"border border-gray-400\"\r\n                onClick={(e) => {\r\n                  const rect = e.currentTarget.getBoundingClientRect();\r\n                  const x = e.clientX - rect.left - 50; // Account for margin\r\n                  const y = rect.height - (e.clientY - rect.top) - 50; // Flip Y axis\r\n                  handlePointClick(x, y);\r\n                }}\r\n              >\r\n                {/* Axes */}\r\n                <line x1=\"50\" y1=\"250\" x2=\"350\" y2=\"250\" stroke=\"black\" strokeWidth=\"2\" />\r\n                <line x1=\"50\" y1=\"50\" x2=\"50\" y2=\"250\" stroke=\"black\" strokeWidth=\"2\" />\r\n                \r\n                {/* Axis labels */}\r\n                <text x=\"200\" y=\"280\" textAnchor=\"middle\" className=\"text-sm\">\r\n                  {question.xLabel}\r\n                </text>\r\n                <text x=\"25\" y=\"150\" textAnchor=\"middle\" className=\"text-sm\" transform=\"rotate(-90 25 150)\">\r\n                  {question.yLabel}\r\n                </text>\r\n                \r\n                {/* Grid lines */}\r\n                {[...Array(6)].map((_, i) => (\r\n                  <g key={i}>\r\n                    <line x1={50 + i * 50} y1=\"50\" x2={50 + i * 50} y2=\"250\" stroke=\"#e5e7eb\" strokeWidth=\"1\" />\r\n                    <line x1=\"50\" y1={50 + i * 33.33} x2=\"350\" y2={50 + i * 33.33} stroke=\"#e5e7eb\" strokeWidth=\"1\" />\r\n                  </g>\r\n                ))}\r\n                \r\n                {/* Data points */}\r\n                {plotPoints.map((point, index) => (\r\n                  <circle\r\n                    key={index}\r\n                    cx={50 + point.x}\r\n                    cy={250 - point.y}\r\n                    r=\"4\"\r\n                    fill=\"blue\"\r\n                    className=\"cursor-pointer hover:fill-red-500\"\r\n                  />\r\n                ))}\r\n              </svg>\r\n              <div className=\"text-xs text-gray-500 mt-2\">\r\n                Click to add points  Click existing points to remove them\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              {question.graphOptions.map((option, index) => (\r\n                <button\r\n                  key={index}\r\n                  onClick={() => handleAnswerSelect(question.id, index)}\r\n                  className={`p-4 border-2 rounded-lg transition-all ${\r\n                    selectedAnswers[question.id] === index\r\n                      ? 'border-blue-500 bg-blue-50'\r\n                      : 'border-gray-300 hover:border-blue-400'\r\n                  }`}\r\n                >\r\n                  <img src={option.imageUrl} alt={option.description} className=\"w-full h-32 object-contain mb-2\" />\r\n                  <div className=\"text-sm font-medium\">{option.description}</div>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n\r\n    case 'slider-scale': {\n      return (\n        <div className=\"space-y-6\">\n          <div className=\"text-sm text-gray-600\">\r\n            Adjust the sliders to show the optimal values:\r\n          </div>\r\n          {question.variables.map((variable, index) => {\r\n            const currentValue = selectedAnswers[question.id]?.[variable.id] || variable.defaultValue || variable.min;\r\n            return (\r\n              <div key={variable.id} className=\"bg-gray-50 p-4 rounded-lg\">\r\n                <div className=\"flex justify-between items-center mb-2\">\r\n                  <span className=\"font-medium text-gray-700\">{variable.name}</span>\r\n                  <span className=\"text-lg font-bold text-blue-600\">\r\n                    {currentValue}{variable.unit}\r\n                  </span>\r\n                </div>\r\n                <input\r\n                  type=\"range\"\r\n                  min={variable.min}\r\n                  max={variable.max}\r\n                  step={variable.step || 1}\r\n                  value={currentValue}\r\n                  onChange={(e) => {\r\n                    const newAnswers = { ...(selectedAnswers[question.id] || {}) };\r\n                    newAnswers[variable.id] = parseFloat(e.target.value);\r\n                    handleAnswerSelect(question.id, newAnswers);\r\n                  }}\r\n                  className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider\"\r\n                />\r\n                <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\r\n                  <span>{variable.min}{variable.unit}</span>\r\n                  <span>{variable.max}{variable.unit}</span>\r\n                </div>\r\n                {variable.description && (\r\n                  <div className=\"text-sm text-gray-600 mt-2\">{variable.description}</div>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      );\n    }\n    }\n\n    case 'venn-diagram': {\n      const vennSections = selectedAnswers[question.id] || {};\n      \r\n      return (\n        <div className=\"space-y-6\">\n          <div className=\"text-sm text-gray-600\">\r\n            Drag items into the correct sections of the Venn diagram:\r\n          </div>\r\n          <div className=\"flex justify-center\">\r\n            <svg width=\"400\" height=\"300\" className=\"border border-gray-300 rounded-lg bg-white\">\r\n              {/* Circle A */}\r\n              <circle cx=\"150\" cy=\"150\" r=\"80\" fill=\"rgba(59, 130, 246, 0.3)\" stroke=\"rgb(59, 130, 246)\" strokeWidth=\"2\" />\r\n              {/* Circle B */}\r\n              <circle cx=\"250\" cy=\"150\" r=\"80\" fill=\"rgba(16, 185, 129, 0.3)\" stroke=\"rgb(16, 185, 129)\" strokeWidth=\"2\" />\r\n              \r\n              {/* Labels */}\r\n              <text x=\"120\" y=\"100\" textAnchor=\"middle\" className=\"text-sm font-medium fill-blue-600\">\r\n                {question.circleA.name}\r\n              </text>\r\n              <text x=\"280\" y=\"100\" textAnchor=\"middle\" className=\"text-sm font-medium fill-green-600\">\r\n                {question.circleB.name}\r\n              </text>\r\n              <text x=\"200\" y=\"120\" textAnchor=\"middle\" className=\"text-xs font-medium fill-purple-600\">\r\n                Both\r\n              </text>\r\n            </svg>\r\n          </div>\r\n          \r\n          <div className=\"grid grid-cols-3 gap-4\">\r\n            <div className=\"bg-blue-50 p-3 rounded-lg\">\r\n              <h4 className=\"font-medium text-blue-800 mb-2\">{question.circleA.name} Only</h4>\r\n              <div \r\n                className=\"min-h-24 border-2 border-dashed border-blue-300 rounded p-2\"\r\n                onDragOver={(e) => e.preventDefault()}\r\n                onDrop={(e) => {\r\n                  e.preventDefault();\r\n                  const item = JSON.parse(e.dataTransfer.getData('text/plain'));\r\n                  const newVennSections = { ...vennSections };\r\n                  newVennSections[item.id] = 'A';\r\n                  handleAnswerSelect(question.id, newVennSections);\r\n                }}\r\n              >\r\n                {question.items.filter(item => vennSections[item.id] === 'A').map(item => (\r\n                  <div key={item.id} className=\"mb-1 p-2 bg-white rounded text-xs cursor-move\" draggable\r\n                       onDragStart={(e) => e.dataTransfer.setData('text/plain', JSON.stringify(item))}>\r\n                    {item.text}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"bg-purple-50 p-3 rounded-lg\">\r\n              <h4 className=\"font-medium text-purple-800 mb-2\">Both</h4>\r\n              <div \r\n                className=\"min-h-24 border-2 border-dashed border-purple-300 rounded p-2\"\r\n                onDragOver={(e) => e.preventDefault()}\r\n                onDrop={(e) => {\r\n                  e.preventDefault();\r\n                  const item = JSON.parse(e.dataTransfer.getData('text/plain'));\r\n                  const newVennSections = { ...vennSections };\r\n                  newVennSections[item.id] = 'AB';\r\n                  handleAnswerSelect(question.id, newVennSections);\r\n                }}\r\n              >\r\n                {question.items.filter(item => vennSections[item.id] === 'AB').map(item => (\r\n                  <div key={item.id} className=\"mb-1 p-2 bg-white rounded text-xs cursor-move\" draggable\r\n                       onDragStart={(e) => e.dataTransfer.setData('text/plain', JSON.stringify(item))}>\r\n                    {item.text}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"bg-green-50 p-3 rounded-lg\">\r\n              <h4 className=\"font-medium text-green-800 mb-2\">{question.circleB.name} Only</h4>\r\n              <div \r\n                className=\"min-h-24 border-2 border-dashed border-green-300 rounded p-2\"\r\n                onDragOver={(e) => e.preventDefault()}\r\n                onDrop={(e) => {\r\n                  e.preventDefault();\r\n                  const item = JSON.parse(e.dataTransfer.getData('text/plain'));\r\n                  const newVennSections = { ...vennSections };\r\n                  newVennSections[item.id] = 'B';\r\n                  handleAnswerSelect(question.id, newVennSections);\r\n                }}\r\n              >\r\n                {question.items.filter(item => vennSections[item.id] === 'B').map(item => (\r\n                  <div key={item.id} className=\"mb-1 p-2 bg-white rounded text-xs cursor-move\" draggable\r\n                       onDragStart={(e) => e.dataTransfer.setData('text/plain', JSON.stringify(item))}>\r\n                    {item.text}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Unassigned items */}\r\n          <div className=\"bg-gray-100 p-3 rounded-lg\">\r\n            <h4 className=\"font-medium text-gray-700 mb-2\">Items to Sort:</h4>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {question.items.filter(item => !vennSections[item.id]).map(item => (\r\n                <div key={item.id} className=\"p-2 bg-white rounded border cursor-move\" draggable\r\n                     onDragStart={(e) => e.dataTransfer.setData('text/plain', JSON.stringify(item))}>\r\n                  {item.text}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\n    }\n\n    case 'virtual-microscope': {\n      const zoom = selectedAnswers[question.id]?.zoom || 1;\n      const identifiedStructures = selectedAnswers[question.id]?.structures || [];\n      \r\n      return (\n        <div className=\"space-y-6\">\n          <div className=\"text-sm text-gray-600\">\r\n            Use the virtual microscope to identify the biological structures:\r\n          </div>\r\n          \r\n          <div className=\"bg-gray-900 p-4 rounded-lg\">\r\n            <div className=\"bg-black rounded-lg p-4 relative\">\r\n              <div \r\n                className=\"relative overflow-hidden rounded-lg bg-white\"\r\n                style={{ height: '300px' }}\r\n              >\r\n                <img \r\n                  src={question.imageUrl} \r\n                  alt=\"Microscope view\"\r\n                  className=\"absolute transition-transform duration-300 cursor-crosshair\"\r\n                  style={{ \r\n                    transform: `scale(${zoom})`,\r\n                    transformOrigin: 'center center',\r\n                    width: '100%',\r\n                    height: '100%',\r\n                    objectFit: 'cover'\r\n                  }}\r\n                  onClick={(e) => {\r\n                    if (question.clickableStructures) {\r\n                      const rect = e.currentTarget.getBoundingClientRect();\r\n                      const x = ((e.clientX - rect.left) / rect.width) * 100;\r\n                      const y = ((e.clientY - rect.top) / rect.height) * 100;\r\n                      \r\n                      // Find clicked structure\r\n                      const clickedStructure = question.clickableStructures.find(structure => \r\n                        Math.abs(structure.x - x) < 5 && Math.abs(structure.y - y) < 5\r\n                      );\r\n                      \r\n                      if (clickedStructure) {\r\n                        const newAnswers = { ...(selectedAnswers[question.id] || {}) };\r\n                        const newStructures = [...identifiedStructures];\r\n                        \r\n                        if (!newStructures.find(s => s.id === clickedStructure.id)) {\r\n                          newStructures.push(clickedStructure);\r\n                        }\r\n                        \r\n                        newAnswers.structures = newStructures;\r\n                        handleAnswerSelect(question.id, newAnswers);\r\n                      }\r\n                    }\r\n                  }}\r\n                />\r\n                \r\n                {/* Overlay identified structures */}\r\n                {identifiedStructures.map((structure) => (\r\n                  <div\r\n                    key={structure.id}\r\n                    className=\"absolute w-6 h-6 bg-green-500 border-2 border-white rounded-full flex items-center justify-center text-white text-xs font-bold transform -translate-x-1/2 -translate-y-1/2\"\r\n                    style={{\r\n                      left: `${structure.x}%`,\r\n                      top: `${structure.y}%`\r\n                    }}\r\n                  >\r\n                    \r\n                  </div>\r\n                ))}\r\n              </div>\r\n              \r\n              {/* Microscope controls */}\r\n              <div className=\"mt-4 flex items-center justify-between\">\r\n                <div className=\"flex items-center space-x-4\">\r\n                  <span className=\"text-white text-sm\">Zoom:</span>\r\n                  <div className=\"flex space-x-2\">\r\n                    {[1, 2, 4, 8].map((zoomLevel) => (\r\n                      <button\r\n                        key={zoomLevel}\r\n                        onClick={() => {\r\n                          const newAnswers = { ...(selectedAnswers[question.id] || {}) };\r\n                          newAnswers.zoom = zoomLevel;\r\n                          handleAnswerSelect(question.id, newAnswers);\r\n                        }}\r\n                        className={`px-3 py-1 rounded text-sm ${\r\n                          zoom === zoomLevel\r\n                            ? 'bg-blue-500 text-white'\r\n                            : 'bg-gray-600 text-gray-200 hover:bg-gray-500'\r\n                        }`}\r\n                      >\r\n                        {zoomLevel}x\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-white text-sm\">\r\n                  Identified: {identifiedStructures.length} / {question.targetCount || '?'}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Structure checklist */}\r\n          {question.structureList && (\r\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n              <h4 className=\"font-medium mb-3\">Identify these structures:</h4>\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                {question.structureList.map((structure) => (\r\n                  <div \r\n                    key={structure.id}\r\n                    className={`flex items-center space-x-2 p-2 rounded ${\r\n                      identifiedStructures.find(s => s.id === structure.id)\r\n                        ? 'bg-green-100 text-green-800'\r\n                        : 'bg-white'\r\n                    }`}\r\n                  >\r\n                    <div className={`w-4 h-4 rounded border-2 flex items-center justify-center ${\r\n                      identifiedStructures.find(s => s.id === structure.id)\r\n                        ? 'border-green-500 bg-green-500'\r\n                        : 'border-gray-300'\r\n                    }`}>\r\n                      {identifiedStructures.find(s => s.id === structure.id) && (\r\n                        <span className=\"text-white text-xs\"></span>\r\n                      )}\r\n                    </div>\r\n                    <span className=\"text-sm\">{structure.name}</span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\n    }\n\r\n    default:\n      return <div className=\"text-gray-500\">Question type &quot;{question.type}&quot; not supported yet</div>;\n  }\r\n};\r\n\r\nexport default QuestionRenderer;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\QuickQuiz.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadQuestions'. Either include it or remove the dependency array.","line":54,"column":6,"nodeType":"ArrayExpression","endLine":54,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [dotPointId, loadQuestions]","fix":{"range":[1974,1986],"text":"[dotPointId, loadQuestions]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleTimeUp'. Either include it or remove the dependency array.","line":145,"column":6,"nodeType":"ArrayExpression","endLine":145,"endColumn":34,"suggestions":[{"desc":"Update the dependencies array to be: [timeRemaining, showResults, handleTimeUp]","fix":{"range":[5031,5059],"text":"[timeRemaining, showResults, handleTimeUp]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport questionService from '../services/questionService';\r\nimport QuestionRenderer from './QuestionRenderer';\r\nimport { useGamificationContext } from '../context/GamificationContext';\r\n\r\nconst QuickQuiz = ({ \r\n  subject = 'biology',\r\n  dotPointId, \r\n  onQuizComplete, \r\n  onExit\r\n}) => {\r\n  const [questions, setQuestions] = useState([]);\r\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\r\n  const [selectedAnswers, setSelectedAnswers] = useState({});\r\n  const [showResults, setShowResults] = useState(false);\r\n  const [timeRemaining, setTimeRemaining] = useState(null);\r\n  const [quizStartTime] = useState(Date.now());\r\n  const [loading, setLoading] = useState(true);\r\n  const [shuffledOptions, setShuffledOptions] = useState({});\r\n\r\n  // Get gamification functions from context\r\n  const { \r\n    refetch: refetchGamificationData \r\n  } = useGamificationContext();\r\n\r\n  // Utility function to shuffle an array\r\n  const shuffleArray = (array) => {\r\n    const shuffled = [...array];\r\n    for (let i = shuffled.length - 1; i > 0; i--) {\r\n      const j = Math.floor(Math.random() * (i + 1));\r\n      [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\r\n    }\r\n    return shuffled;\r\n  };\r\n\r\n  // Dynamically import fallback questions from JSON files\r\n  const loadFallbackQuestions = async (dotPointId) => {\n    try {\n      // Sanitize dotPointId to be a valid filename\r\n      const fileName = dotPointId.toLowerCase().replace(/\\./g, '-');\r\n      const module = await import(`../data/quiz-questions/${fileName}.json`);\r\n      console.log(`Loaded fallback questions for ${dotPointId} from JSON.`);\n      return module.default;\r\n    } catch (error) {\r\n      console.warn(`Could not load fallback JSON for ${dotPointId}:`, error);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  // Load questions based on dot point\r\n  useEffect(() => {\r\n    loadQuestions();\r\n  }, [dotPointId]);\r\n\r\n  const loadQuestions = async () => {\r\n    setLoading(true);\r\n    let loadedQuestions = [];\r\n    \r\n    try {\r\n      // First try to fetch from biology agent\r\n      const fetchedQuestions = await questionService.fetchQuestions(\r\n        'biology', \r\n        'module-5', \r\n        dotPointId, \r\n        'quick'\r\n      );\r\n      \r\n      if (fetchedQuestions && fetchedQuestions.length > 0) {\r\n        loadedQuestions = fetchedQuestions.map(q => ({\r\n          ...q,\r\n          type: q.type || 'multiple-choice',\r\n          options: q.options || []\r\n        }));\r\n        console.log(`Loaded ${loadedQuestions.length} biology questions for ${dotPointId} from service`);\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to load from biology agent, using fallback questions:', error);\r\n    }\r\n    \r\n    if (loadedQuestions.length === 0) {\r\n      // Fallback to loading from local JSON files\r\n      const fallbackQuestions = await loadFallbackQuestions(dotPointId);\r\n      if (fallbackQuestions.length > 0) {\r\n        loadedQuestions = fallbackQuestions;\r\n      }\r\n    }\r\n\r\n    if (loadedQuestions.length === 0) {\r\n       // Final fallback if even JSON fails\r\n      console.error(`No questions found for ${dotPointId} in service or local files.`);\r\n      loadedQuestions = [\r\n        {\r\n          id: `${dotPointId}-fallback-1`,\r\n          type: 'multiple-choice',\r\n          question: `What is a key concept related to ${dotPointId} in ${subject}?`,\r\n          options: ['Option A', 'Option B', 'Option C', 'Option D'],\r\n          correctAnswer: 'Option A',\r\n          explanation: `This is a placeholder question. Content for ${dotPointId} is not yet available.`\r\n        }\r\n      ];\r\n    }\r\n\r\n    setQuestions(loadedQuestions);\r\n    \r\n    // Generate shuffled options for dropdown questions\r\n    const shuffledOpts = {};\r\n    loadedQuestions.forEach((q) => {\r\n      if (q.type === 'match-definitions' && q.pairs) {\r\n        // Shuffle the definition options for each term\r\n        shuffledOpts[q.id] = shuffleArray(q.pairs.map(p => p.definition));\r\n      } else if (q.type === 'sequence-flowchart' && q.flowchartSteps) {\r\n        // Shuffle options for flowchart steps\r\n        q.flowchartSteps.forEach(step => {\r\n          if (step.options) {\r\n            shuffledOpts[`${q.id}_${step.id}`] = shuffleArray(step.options);\r\n          }\r\n        });\r\n      }\r\n    });\r\n    setShuffledOptions(shuffledOpts);\r\n    \r\n    // Set timer based on number of questions (e.g., 90 seconds per question)\r\n    const timeLimit = loadedQuestions.length * 90;\r\n    setTimeRemaining(timeLimit > 0 ? timeLimit : 60); // Minimum 60 seconds\r\n    setLoading(false);\r\n  };\r\n\r\n\r\n  // Timer countdown\r\n  useEffect(() => {\r\n    if (timeRemaining === null || timeRemaining <= 0 || showResults) return;\r\n\r\n    const timer = setInterval(() => {\r\n      setTimeRemaining(prev => {\r\n        if (prev <= 1) {\r\n          handleTimeUp();\r\n          return 0;\r\n        }\r\n        return prev - 1;\r\n      });\r\n    }, 1000);\r\n\r\n    return () => clearInterval(timer);\r\n  }, [timeRemaining, showResults]);\r\n\r\n  const handleTimeUp = () => {\r\n    if (!showResults) {\r\n      finishQuiz();\r\n    }\r\n  };\r\n\r\n  const handleAnswerSelect = (questionId, answer) => {\r\n    if (showResults) return;\r\n    \r\n    setSelectedAnswers(prev => ({\r\n      ...prev,\r\n      [questionId]: answer\r\n    }));\r\n  };\r\n\r\n  const handleNextQuestion = () => {\r\n    if (currentQuestionIndex < questions.length - 1) {\r\n      setCurrentQuestionIndex(prev => prev + 1);\r\n    } else {\r\n      finishQuiz();\r\n    }\r\n  };\r\n\r\n  const finishQuiz = async () => {\r\n    const timeSpent = Math.round((Date.now() - quizStartTime) / 1000);\r\n    const results = calculateResults();\n    let finalResults = {\n      ...results,\n      dotPointId,\n      quizType: 'quickQuiz',\n      totalQuestions: questions.length,\n      correctAnswers: results.correct,\n      timeSpent,\n      passed: results.percentage >= 65,\n      gamification: {\n        xpEarned: 0,\n        leveledUp: false,\n        newAchievements: [],\n        currentLevel: 1,\n        currentXP: 0,\n        streakUpdated: 0\n      }\n    };\n    \n    try {\n      // Award XP through gamification system\r\n      const xpResponse = await fetch('/api/gamification/xp/award/user123', { // Replace with actual userId\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          quizData: {\r\n            score: results.correct,\r\n            totalQuestions: questions.length,\r\n            difficulty: 'medium', // Could be determined from quiz metadata\r\n            subject: subject,\r\n            isFirstAttempt: true // Could track this\r\n          },\r\n          streakBonus: 0 // Could be calculated from recent activity\r\n        })\r\n      });\r\n\r\n      const xpData = await xpResponse.json();\r\n      \r\n      // Update streak\r\n      const streakResponse = await fetch('/api/gamification/xp/streak/user123', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          activityDate: new Date().toISOString()\r\n        })\r\n      });\r\n\r\n      const streakData = await streakResponse.json();\r\n\r\n      // Prepare final results with gamification data\n      finalResults = {\n        ...finalResults,\n        gamification: {\n          xpEarned: xpData.success ? xpData.xpAwarded : 0,\n          leveledUp: xpData.success ? xpData.leveledUp : false,\n          newAchievements: xpData.success ? xpData.newAchievements : [],\n          currentLevel: xpData.success ? xpData.user.level : finalResults.gamification.currentLevel,\n          currentXP: xpData.success ? xpData.user.xp : finalResults.gamification.currentXP,\n          streakUpdated: streakData.success ? streakData.streak : finalResults.gamification.streakUpdated\n        }\n      };\n\n      console.log('Quiz completed with gamification data:', finalResults);\n\r\n      // Refresh user stats\r\n      await refetchGamificationData();\r\n      \r\n    } catch (error) {\r\n      console.error('Error updating progress:', error);\r\n    }\r\n\r\n    setShowResults(true);\r\n    \r\n    // Call completion callback after a brief delay to show results\r\n    setTimeout(() => {\r\n      onQuizComplete(finalResults);\n    }, 2000);\r\n  };\r\n\r\n  const scoringStrategies = {\r\n    'multiple-choice': (q, ans) => ans === q.correctAnswer,\r\n    'true-false': (q, ans) => ans === q.correctAnswer,\r\n    'match-definitions': (q, ans) => {\r\n      return q.pairs.every((pair, index) => ans && ans[index] === pair.definition);\r\n    },\r\n    'multiple-select': (q, ans) => {\r\n      const selectedSet = new Set(ans || []);\r\n      const correctSet = new Set(q.correctAnswers);\r\n      return selectedSet.size === correctSet.size && [...selectedSet].every(answer => correctSet.has(answer));\r\n    },\r\n    'drag-sequence': (q, ans) => {\r\n      const answerIds = ans?.map(item => item.id) || [];\r\n      return JSON.stringify(answerIds) === JSON.stringify(q.correctOrder);\r\n    },\r\n    'image-hotspot': (q, ans) => {\r\n      const selectedSet = new Set(ans || []);\r\n      const correctSet = new Set(q.correctSpots);\r\n      return selectedSet.size === correctSet.size && [...selectedSet].every(spot => correctSet.has(spot));\r\n    },\r\n    'category-sort': (q, ans) => {\r\n      if (!q.correctMapping || !ans) return false;\r\n      return Object.keys(q.correctMapping).every(itemId => {\r\n        const correctCategory = q.correctMapping[itemId];\r\n        // This logic needs to be adapted based on how `selectedAnswer` is structured for this type.\r\n        // Assuming `ans` is an object like { categoryId: [item objects] }\r\n        // A simpler `ans` structure like { itemId: categoryId } would be easier.\r\n        // For now, this is a placeholder for the complex logic.\r\n        return ans[itemId] === correctCategory; // This assumes a simplified answer structure\r\n      });\r\n    },\r\n    'timeline-builder': (q, ans) => {\r\n      const answerIds = ans?.map(event => event.id) || [];\r\n      return JSON.stringify(answerIds) === JSON.stringify(q.correctOrder);\r\n    },\r\n    'flowchart-complete': (q, ans) => {\r\n      if (!q.blanks || !ans) return false;\r\n      return q.blanks.every(blank => ans[blank.id] === blank.correct);\r\n    },\r\n    'graph-construct': (q, ans) => {\r\n      // This is complex and depends on the exact answer format. Placeholder.\r\n      if (q.graphType === 'plot') {\r\n        const pointsCorrect = q.correctPoints && ans && ans.length === q.correctPoints.length &&\r\n          ans.every(point => \r\n            q.correctPoints.some(correct => \r\n              Math.abs(point.x - correct.x) < 10 && Math.abs(point.y - correct.y) < 10\r\n            )\r\n          );\r\n        return pointsCorrect;\r\n      }\r\n      return ans === q.correctGraph;\r\n    },\r\n    'slider-scale': (q, ans) => {\r\n      if (!q.correctRanges || !ans) return false;\r\n      return Object.keys(q.correctRanges).every(variableId => {\r\n        const userValue = ans[variableId];\r\n        const range = q.correctRanges[variableId];\r\n        return userValue >= range.min && userValue <= range.max;\r\n      });\r\n    },\r\n    'venn-diagram': (q, ans) => {\r\n      if (!q.correctPlacements || !ans) return false;\r\n      // This logic is complex and depends on answer structure.\r\n      // Assuming ans is { itemId: ['circleId1', 'circleId2'] }\r\n      return Object.keys(q.correctPlacements).every(itemId =>\r\n        JSON.stringify((ans[itemId] || []).sort()) === JSON.stringify(q.correctPlacements[itemId].sort())\r\n      );\r\n    },\r\n    'virtual-microscope': (q, ans) => {\r\n      // Assuming answer is an array of identified structure IDs\r\n      const requiredStructures = new Set(q.requiredStructures || []);\r\n      const identifiedIds = new Set(ans || []);\r\n      return requiredStructures.size === identifiedIds.size && [...requiredStructures].every(id => identifiedIds.has(id));\r\n    },\r\n    'fill-blanks': (q, ans) => {\r\n      if (!q.blanks || !ans) return false;\r\n      return q.blanks.every((blank, index) => \r\n        ans[index] && ans[index].toLowerCase().trim() === blank.toLowerCase()\r\n      );\r\n    },\r\n    'cloze-passage': (q, ans) => {\r\n      if (!q.correctAnswers || !ans) return false;\r\n      return Object.keys(q.correctAnswers).every(key => ans[key] === q.correctAnswers[key]);\r\n    }\r\n  };\r\n\r\n  const calculateResults = () => {\r\n    let correct = 0;\r\n    questions.forEach(question => {\r\n      const selectedAnswer = selectedAnswers[question.id];\r\n      const scoringFunc = scoringStrategies[question.type];\r\n      if (scoringFunc && scoringFunc(question, selectedAnswer)) {\r\n        correct++;\r\n      }\r\n    });\r\n\r\n    return {\r\n      correct,\r\n      total: questions.length,\r\n      percentage: questions.length > 0 ? Math.round((correct / questions.length) * 100) : 0\r\n    };\r\n  };\r\n\r\n  const formatTime = (seconds) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-4\"></div>\r\n          <p className=\"text-gray-600\">Loading Quick Quiz...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (showResults) {\r\n    const results = calculateResults();\r\n    const passed = results.percentage >= 65;\r\n\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 flex items-center justify-center p-4\">\r\n        <motion.div\r\n          initial={{ scale: 0.9, opacity: 0 }}\r\n          animate={{ scale: 1, opacity: 1 }}\r\n          className=\"bg-white rounded-2xl p-8 max-w-md w-full text-center shadow-lg\"\r\n        >\r\n          <div className={`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 ${\r\n            passed ? 'bg-green-100' : 'bg-red-100'\r\n          }`}>\r\n            <span className=\"text-3xl\">\r\n              {passed ? '' : ''}\r\n            </span>\r\n          </div>\r\n          \r\n          <h2 className=\"text-2xl font-bold mb-4\">\r\n            {passed ? 'Well Done!' : 'Keep Trying!'}\r\n          </h2>\r\n          \r\n          <div className=\"space-y-2 mb-6\">\r\n            <p className=\"text-lg\">\r\n              Score: <span className=\"font-bold\">{results.percentage}%</span>\r\n            </p>\r\n            <p className=\"text-gray-600\">\r\n              {results.correct} out of {results.total} questions correct\r\n            </p>\r\n            <p className=\"text-sm text-gray-500\">\r\n              {passed ? 'Minimum 65% required - PASSED ' : 'Minimum 65% required - You can retry immediately!'}\r\n            </p>\r\n          </div>\r\n\r\n          <p className=\"text-center text-gray-600\">\r\n            Returning to pathway in a moment...\r\n          </p>\r\n        </motion.div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const currentQuestion = questions[currentQuestionIndex];\r\n  const progress = ((currentQuestionIndex + 1) / questions.length) * 100;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 flex flex-col\">\r\n      {/* Header */}\r\n      <div className=\"bg-white/80 backdrop-blur-sm shadow-sm border-b border-white/50 sticky top-0 z-10\">\r\n        <div className=\"px-4 py-3\">\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <button\r\n              onClick={onExit}\r\n              className=\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors\"\r\n            >\r\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n              </svg>\r\n            </button>\r\n\r\n            <div className=\"text-center\">\r\n              <h1 className=\"font-bold text-lg\">Quick Quiz</h1>\r\n              <p className=\"text-sm text-gray-600\">{dotPointId}</p>\r\n            </div>\r\n\r\n            <div className={`px-3 py-1 rounded-full text-sm font-medium ${\r\n              timeRemaining <= 60 ? 'bg-red-100 text-red-700' :\r\n              timeRemaining <= 180 ? 'bg-yellow-100 text-yellow-700' :\r\n              'bg-green-100 text-green-700'\r\n            }`}>\r\n               {formatTime(timeRemaining)}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <div className=\"flex justify-between text-sm\">\r\n              <span>Question {currentQuestionIndex + 1} of {questions.length}</span>\r\n              <span>{Math.round(progress)}% Complete</span>\r\n            </div>\r\n            <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n              <div \r\n                className=\"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300\"\r\n                style={{ width: `${progress}%` }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Question Content */}\r\n      <div className=\"flex-1 p-4 max-w-2xl mx-auto w-full\">\r\n        <AnimatePresence mode=\"wait\">\r\n          <motion.div\r\n            key={currentQuestionIndex}\r\n            initial={{ opacity: 0, x: 50 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            exit={{ opacity: 0, x: -50 }}\r\n            className=\"space-y-6\"\r\n          >\r\n            <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-white/50\">\r\n              <div className=\"flex items-start space-x-3 mb-4\">\r\n                <div className=\"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold text-sm\">\r\n                  {currentQuestionIndex + 1}\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                  <h2 className=\"text-lg font-semibold text-gray-900 leading-relaxed\">\r\n                    {currentQuestion.question}\r\n                  </h2>\r\n                  {currentQuestion.type && (\r\n                    <p className=\"text-sm text-gray-500 mt-1\">\r\n                      Type: {currentQuestion.type.replace('-', ' ')}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-white/50\">\r\n              <QuestionRenderer \r\n                question={currentQuestion}\r\n                selectedAnswers={selectedAnswers}\r\n                handleAnswerSelect={handleAnswerSelect}\r\n                shuffledOptions={shuffledOptions}\r\n              />\r\n            </div>\r\n          </motion.div>\r\n        </AnimatePresence>\r\n      </div>\r\n\r\n      {/* Navigation */}\r\n      <div className=\"p-4 max-w-2xl mx-auto w-full\">\r\n        <div className=\"bg-white/80 backdrop-blur-sm rounded-xl p-4 border border-white/50\">\r\n          <button\r\n            onClick={handleNextQuestion}\r\n            disabled={!selectedAnswers[currentQuestion.id]}\r\n            className={`w-full py-3 px-6 rounded-lg font-bold transition-all ${\r\n              selectedAnswers[currentQuestion.id]\r\n                ? 'bg-gradient-to-r from-blue-500 to-purple-500 text-white hover:shadow-lg'\r\n                : 'bg-gray-200 text-gray-400 cursor-not-allowed'\r\n            }`}\r\n          >\r\n            {currentQuestionIndex < questions.length - 1 ? 'Next Question' : 'Finish Quiz'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuickQuiz;\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\ScoreCard.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'onAnimationComplete' is defined but never used. Allowed unused args must match /^_/u.","line":6,"column":69,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":88}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport ProgressRing from './ProgressRing';\nimport Confetti from './Confetti';\n\nconst ScoreCard = ({ score, totalQuestions, timeSpent, averageTime, onAnimationComplete }) => {\n  const [showConfetti, setShowConfetti] = useState(false);\n  const [showScore, setShowScore] = useState(false);\n\n  const percentage = Math.round((score / totalQuestions) * 100);\n  const letterGrade = getLetterGrade(percentage);\n  const performanceLevel = getPerformanceLevel(percentage);\n\n  useEffect(() => {\n    // Stagger the animations\n    setTimeout(() => setShowScore(true), 500);\n\n    if (percentage >= 80) {\n      setTimeout(() => setShowConfetti(true), 1000);\n    }\n  }, [percentage]);\n\n  function getLetterGrade(percent) {\n    if (percent >= 90) return 'A';\n    if (percent >= 80) return 'B';\n    if (percent >= 70) return 'C';\n    if (percent >= 60) return 'D';\n    return 'F';\n  }\n\n  function getPerformanceLevel(percent) {\n    if (percent >= 95) return {\n      level: 'Exceptional! ',\n      message: 'You absolutely crushed it! Perfect HSC level performance!',\n      color: 'from-yellow-400 to-orange-500',\n      bgColor: 'from-yellow-50 to-orange-50'\n    };\n    if (percent >= 85) return {\n      level: 'Excellent! ',\n      message: 'Outstanding work! You\\'re ready for the HSC exam!',\n      color: 'from-green-400 to-emerald-500',\n      bgColor: 'from-green-50 to-emerald-50'\n    };\n    if (percent >= 75) return {\n      level: 'Very Good! ',\n      message: 'Great progress! Keep up the excellent work!',\n      color: 'from-blue-400 to-cyan-500',\n      bgColor: 'from-blue-50 to-cyan-50'\n    };\n    if (percent >= 65) return {\n      level: 'Good! ',\n      message: 'You\\'re on the right track! Review and keep practicing!',\n      color: 'from-yellow-400 to-yellow-500',\n      bgColor: 'from-yellow-50 to-yellow-50'\n    };\n    if (percent >= 50) return {\n      level: 'Getting There! ',\n      message: 'Don\\'t give up! Every question is progress!',\n      color: 'from-orange-400 to-orange-500',\n      bgColor: 'from-orange-50 to-orange-50'\n    };\n    return {\n      level: 'Keep Trying! ',\n      message: 'Learning takes time. You\\'re building knowledge with every attempt!',\n      color: 'from-purple-400 to-purple-500',\n      bgColor: 'from-purple-50 to-purple-50'\n    };\n  }\n\n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return mins > 0 ? `${mins}m ${secs}s` : `${secs}s`;\n  };\n\n  return (\n    <>\n      <Confetti show={showConfetti} onComplete={() => setShowConfetti(false)} />\n\n      <motion.div\n        initial={{ opacity: 0, scale: 0.8 }}\n        animate={{ opacity: 1, scale: 1 }}\n        transition={{ duration: 0.6, type: \"spring\", stiffness: 200 }}\n        className={`bg-gradient-to-br ${performanceLevel.bgColor} rounded-3xl p-6 border border-white/50 shadow-xl relative overflow-hidden`}\n      >\n        {/* Animated background particles */}\n        <div className=\"absolute inset-0 overflow-hidden\">\n          {[...Array(5)].map((_, i) => (\n            <motion.div\n              key={i}\n              className=\"absolute w-2 h-2 bg-white/20 rounded-full\"\n              style={{\n                left: `${20 + i * 20}%`,\n                top: `${30 + (i % 2) * 40}%`,\n              }}\n              animate={{\n                y: [-10, 10, -10],\n                opacity: [0.3, 0.6, 0.3],\n              }}\n              transition={{\n                duration: 3,\n                repeat: Infinity,\n                delay: i * 0.5,\n              }}\n            />\n          ))}\n        </div>\n\n        <div className=\"relative z-10 text-center\">\n          {/* Main Score Display */}\n          <motion.div\n            initial={{ opacity: 0, y: 30 }}\n            animate={showScore ? { opacity: 1, y: 0 } : {}}\n            transition={{ delay: 0.3, duration: 0.5 }}\n            className=\"mb-6\"\n          >\n            <ProgressRing\n              progress={percentage}\n              size={140}\n              strokeWidth={12}\n              color={percentage >= 80 ? '#10b981' : percentage >= 60 ? '#f59e0b' : '#ef4444'}\n            >\n              <div className=\"text-center\">\n                <motion.div\n                  initial={{ scale: 0 }}\n                  animate={showScore ? { scale: 1 } : {}}\n                  transition={{ delay: 0.6, type: \"spring\", stiffness: 300 }}\n                  className=\"text-3xl font-bold text-gray-900\"\n                >\n                  {score}/{totalQuestions}\n                </motion.div>\n                <div className=\"text-lg font-semibold text-gray-700\">{percentage}%</div>\n                <div className={`text-sm font-bold px-2 py-1 rounded-full bg-gradient-to-r ${performanceLevel.color} text-white mt-1`}>\n                  Grade {letterGrade}\n                </div>\n              </div>\n            </ProgressRing>\n          </motion.div>\n\n          {/* Performance Level */}\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.8 }}\n            className=\"mb-4\"\n          >\n            <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">\n              {performanceLevel.level}\n            </h3>\n            <p className=\"text-gray-700 font-medium leading-relaxed\">\n              {performanceLevel.message}\n            </p>\n          </motion.div>\n\n          {/* Stats Grid */}\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 1.0 }}\n            className=\"grid grid-cols-2 gap-4 mt-6\"\n          >\n            {timeSpent && (\n              <div className=\"bg-white/40 backdrop-blur-sm rounded-xl p-3 border border-white/50\">\n                <div className=\"text-lg font-bold text-gray-900\">\n                  {formatTime(timeSpent)}\n                </div>\n                <div className=\"text-sm text-gray-600\">Total Time</div>\n              </div>\n            )}\n\n            {averageTime && (\n              <div className=\"bg-white/40 backdrop-blur-sm rounded-xl p-3 border border-white/50\">\n                <div className=\"text-lg font-bold text-gray-900\">\n                  {formatTime(averageTime)}\n                </div>\n                <div className=\"text-sm text-gray-600\">Avg per Question</div>\n              </div>\n            )}\n\n            <div className=\"bg-white/40 backdrop-blur-sm rounded-xl p-3 border border-white/50\">\n              <div className=\"text-lg font-bold text-gray-900\">\n                {Math.round((score / totalQuestions) * 100)}%\n              </div>\n              <div className=\"text-sm text-gray-600\">Accuracy</div>\n            </div>\n\n            <div className=\"bg-white/40 backdrop-blur-sm rounded-xl p-3 border border-white/50\">\n              <div className=\"text-lg font-bold text-gray-900\">\n                +{score * 10}\n              </div>\n              <div className=\"text-sm text-gray-600\">XP Earned</div>\n            </div>\n          </motion.div>\n\n          {/* Motivational Quote */}\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            transition={{ delay: 1.2 }}\n            className=\"mt-6 p-4 bg-white/30 backdrop-blur-sm rounded-xl border border-white/50\"\n          >\n            <div className=\"text-sm text-gray-700 italic\">\n              {getMotivationalQuote(percentage)}\n            </div>\n          </motion.div>\n        </div>\n      </motion.div>\n    </>\n  );\n};\n\nfunction getMotivationalQuote(percentage) {\n  const quotes = {\n    90: [\n      \"\\\"Excellence is never an accident. It is always the result of high intention.\\\" \",\n      \"\\\"Success is the sum of small efforts repeated day in and day out.\\\" \",\n      \"\\\"Your dedication is paying off brilliantly!\\\" \"\n    ],\n    80: [\n      \"\\\"Progress, not perfection, is the goal.\\\" \",\n      \"\\\"You're building the foundation for HSC success!\\\" \",\n      \"\\\"Consistency beats perfection every time.\\\" \"\n    ],\n    70: [\n      \"\\\"Every expert was once a beginner.\\\" \",\n      \"\\\"Improvement is impossible without change.\\\" \",\n      \"\\\"You're getting stronger with each question!\\\" \"\n    ],\n    60: [\n      \"\\\"Learning is a journey, not a destination.\\\" \",\n      \"\\\"Every mistake is a step toward mastery.\\\" \",\n      \"\\\"Growth happens outside your comfort zone.\\\" \"\n    ],\n    0: [\n      \"\\\"It always seems impossible until it's done.\\\" \",\n      \"\\\"The only way to learn is to practice.\\\" \",\n      \"\\\"Believe in yourself and keep going!\\\" \"\n    ]\n  };\n\n  const level = percentage >= 90 ? 90 : percentage >= 80 ? 80 : percentage >= 70 ? 70 : percentage >= 60 ? 60 : 0;\n  const levelQuotes = quotes[level];\n  return levelQuotes[Math.floor(Math.random() * levelQuotes.length)];\n}\n\nexport default ScoreCard;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\Skeleton.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\StatCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\StreakDisplay.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\StudentAnalytics.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^React$/u.","line":1,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":36},{"ruleId":"no-unused-vars","severity":1,"message":"'onGoalUpdate' is defined but never used. Allowed unused args must match /^_/u.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport ProgressBar from './ProgressBar';\nimport ProgressRing from './ProgressRing';\nimport StatCard from './StatCard';\n\nconst StudentAnalytics = ({\n  studentData,\n  studyPatterns,\n  goals,\n  insights,\n  onGoalCreate,\n  onGoalUpdate\n}) => {\n  const [selectedPeriod, setSelectedPeriod] = useState('week');\n  const [selectedMetric, setSelectedMetric] = useState('overview');\n  const [showGoalModal, setShowGoalModal] = useState(false);\n  const [newGoal, setNewGoal] = useState({ type: 'daily', target: '', deadline: '' });\n\n  const periodOptions = [\n    { id: 'week', label: 'This Week', icon: '' },\n    { id: 'month', label: 'This Month', icon: '' },\n    { id: 'term', label: 'This Term', icon: '' }\n  ];\n\n  const metricTabs = [\n    { id: 'overview', label: 'Overview', icon: '' },\n    { id: 'performance', label: 'Performance', icon: '' },\n    { id: 'habits', label: 'Study Habits', icon: '' },\n    { id: 'goals', label: 'Goals', icon: '' }\n  ];\n\n  const getConfidenceColor = (confidence) => {\n    if (confidence >= 80) return { bg: 'bg-green-100', text: 'text-green-800', border: 'border-green-200' };\n    if (confidence >= 60) return { bg: 'bg-yellow-100', text: 'text-yellow-800', border: 'border-yellow-200' };\n    return { bg: 'bg-red-100', text: 'text-red-800', border: 'border-red-200' };\n  };\n\n  const getPerformanceTrend = (data) => {\n    if (!data || data.length < 2) return 'stable';\n    const recent = data.slice(-5);\n    const trend = recent[recent.length - 1] - recent[0];\n    if (trend > 5) return 'improving';\n    if (trend < -5) return 'declining';\n    return 'stable';\n  };\n\n  const getTrendIcon = (trend) => {\n    if (trend === 'improving') return '';\n    if (trend === 'declining') return '';\n    return '';\n  };\n\n  const getOptimalStudyTime = () => {\n    if (!studyPatterns?.timePreference) return 'Morning (9-11 AM)';\n    const times = {\n      'morning': 'Morning (9-11 AM)',\n      'afternoon': 'Afternoon (2-4 PM)',\n      'evening': 'Evening (7-9 PM)'\n    };\n    return times[studyPatterns.timePreference] || 'Morning (9-11 AM)';\n  };\n\n  const getStudyStreak = () => {\n    return studyPatterns?.currentStreak || 0;\n  };\n\n  const handleCreateGoal = () => {\n    if (newGoal.target && newGoal.deadline) {\n      onGoalCreate({\n        id: Date.now(),\n        type: newGoal.type,\n        target: newGoal.target,\n        deadline: newGoal.deadline,\n        progress: 0,\n        created: new Date().toISOString()\n      });\n      setNewGoal({ type: 'daily', target: '', deadline: '' });\n      setShowGoalModal(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header with Period Selection */}\n      <div className=\"gaming-card p-4\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h2 className=\"text-xl font-bold text-gray-900\"> Your Learning Analytics</h2>\n          <div className=\"flex space-x-2\">\n            {periodOptions.map((period) => (\n              <button\n                key={period.id}\n                onClick={() => setSelectedPeriod(period.id)}\n                className={`px-3 py-1 rounded-lg text-sm font-medium transition-all ${\n                  selectedPeriod === period.id\n                    ? 'bg-gaming-gradient text-white'\n                    : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n                }`}\n              >\n                {period.icon} {period.label}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Metric Tabs */}\n        <div className=\"flex space-x-1 bg-gray-100 rounded-lg p-1\">\n          {metricTabs.map((tab) => (\n            <button\n              key={tab.id}\n              onClick={() => setSelectedMetric(tab.id)}\n              className={`flex-1 py-2 px-3 rounded-md text-sm font-medium transition-all ${\n                selectedMetric === tab.id\n                  ? 'bg-white text-gray-900 shadow-sm'\n                  : 'text-gray-600 hover:text-gray-900'\n              }`}\n            >\n              <span className=\"mr-1\">{tab.icon}</span>\n              {tab.label}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Content based on selected metric */}\n      <AnimatePresence mode=\"wait\">\n        {selectedMetric === 'overview' && (\n          <motion.div\n            key=\"overview\"\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -20 }}\n            className=\"space-y-4\"\n          >\n            {/* Key Metrics Grid */}\n            <div className=\"grid grid-cols-2 gap-4\">\n              <StatCard\n                icon=\"\"\n                title=\"Overall Score\"\n                value={`${studentData?.averageScore || 0}%`}\n                subtitle={`${getTrendIcon(getPerformanceTrend(studentData?.scoreHistory))} ${getPerformanceTrend(studentData?.scoreHistory)}`}\n                color=\"primary\"\n              />\n              <StatCard\n                icon=\"\"\n                title=\"Study Streak\"\n                value={`${getStudyStreak()} days`}\n                subtitle=\"Keep it going!\"\n                color=\"warning\"\n              />\n            </div>\n\n            {/* Subject Comparison */}\n            <div className=\"gaming-card p-4\">\n              <h3 className=\"font-bold text-gray-900 mb-4\"> Subject Strengths</h3>\n              <div className=\"space-y-3\">\n                <div>\n                  <div className=\"flex justify-between text-sm mb-1\">\n                    <span className=\"font-medium\"> Biology</span>\n                    <span className=\"text-green-600\">{studentData?.biologyScore || 0}%</span>\n                  </div>\n                  <ProgressBar\n                    progress={studentData?.biologyScore || 0}\n                    color=\"#10b981\"\n                    height={8}\n                  />\n                </div>\n                <div>\n                  <div className=\"flex justify-between text-sm mb-1\">\n                    <span className=\"font-medium\"> Chemistry</span>\n                    <span className=\"text-purple-600\">{studentData?.chemistryScore || 0}%</span>\n                  </div>\n                  <ProgressBar\n                    progress={studentData?.chemistryScore || 0}\n                    color=\"#8b5cf6\"\n                    height={8}\n                  />\n                </div>\n              </div>\n            </div>\n\n            {/* Learning Velocity */}\n            <div className=\"gaming-card p-4\">\n              <h3 className=\"font-bold text-gray-900 mb-4\"> Learning Velocity</h3>\n              <div className=\"text-center\">\n                <ProgressRing\n                  progress={studentData?.learningVelocity || 0}\n                  size={100}\n                  color=\"#3b82f6\"\n                >\n                  <div className=\"text-center\">\n                    <div className=\"text-xl font-bold text-blue-600\">\n                      {studentData?.learningVelocity || 0}%\n                    </div>\n                    <div className=\"text-xs text-gray-600\">Velocity</div>\n                  </div>\n                </ProgressRing>\n                <p className=\"text-sm text-gray-600 mt-2\">\n                  Concepts mastered per week compared to your baseline\n                </p>\n              </div>\n            </div>\n          </motion.div>\n        )}\n\n        {selectedMetric === 'performance' && (\n          <motion.div\n            key=\"performance\"\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -20 }}\n            className=\"space-y-4\"\n          >\n            {/* Confidence Tracking */}\n            <div className=\"gaming-card p-4\">\n              <h3 className=\"font-bold text-gray-900 mb-4\"> Academic Confidence</h3>\n              <div className=\"space-y-3\">\n                {studentData?.confidenceBySubject?.map((subject) => {\n                  const colors = getConfidenceColor(subject.confidence);\n                  return (\n                    <div key={subject.name} className={`p-3 rounded-lg border ${colors.bg} ${colors.border}`}>\n                      <div className=\"flex justify-between items-center\">\n                        <span className={`font-medium ${colors.text}`}>{subject.name}</span>\n                        <span className={`text-sm font-bold ${colors.text}`}>\n                          {subject.confidence}% confident\n                        </span>\n                      </div>\n                    </div>\n                  );\n                }) || []}\n              </div>\n            </div>\n\n            {/* Weakness Areas */}\n            <div className=\"gaming-card p-4\">\n              <h3 className=\"font-bold text-gray-900 mb-4\"> Focus Areas</h3>\n              <div className=\"space-y-2\">\n                {insights?.weakAreas?.map((area, index) => (\n                  <motion.div\n                    key={area.topic}\n                    initial={{ opacity: 0, x: -20 }}\n                    animate={{ opacity: 1, x: 0 }}\n                    transition={{ delay: index * 0.1 }}\n                    className=\"flex items-center justify-between p-3 bg-red-50 border border-red-200 rounded-lg\"\n                  >\n                    <div>\n                      <span className=\"font-medium text-red-800\">{area.topic}</span>\n                      <p className=\"text-sm text-red-600\">{area.score}% accuracy</p>\n                    </div>\n                    <button className=\"gaming-button-primary text-xs py-1 px-3\">\n                      Practice\n                    </button>\n                  </motion.div>\n                )) || []}\n              </div>\n            </div>\n\n            {/* Recent Achievements */}\n            <div className=\"gaming-card p-4\">\n              <h3 className=\"font-bold text-gray-900 mb-4\"> Recent Wins</h3>\n              <div className=\"space-y-2\">\n                {insights?.recentAchievements?.map((achievement, index) => (\n                  <motion.div\n                    key={achievement.id}\n                    initial={{ opacity: 0, scale: 0.9 }}\n                    animate={{ opacity: 1, scale: 1 }}\n                    transition={{ delay: index * 0.1 }}\n                    className=\"flex items-center space-x-3 p-3 bg-green-50 border border-green-200 rounded-lg\"\n                  >\n                    <span className=\"text-2xl\">{achievement.icon}</span>\n                    <div>\n                      <span className=\"font-medium text-green-800\">{achievement.name}</span>\n                      <p className=\"text-sm text-green-600\">{achievement.description}</p>\n                    </div>\n                  </motion.div>\n                )) || []}\n              </div>\n            </div>\n          </motion.div>\n        )}\n\n        {selectedMetric === 'habits' && (\n          <motion.div\n            key=\"habits\"\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -20 }}\n            className=\"space-y-4\"\n          >\n            {/* Optimal Study Time */}\n            <div className=\"gaming-card p-4\">\n              <h3 className=\"font-bold text-gray-900 mb-4\"> Your Optimal Study Time</h3>\n              <div className=\"text-center p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n                <div className=\"text-3xl mb-2\"></div>\n                <p className=\"font-semibold text-blue-800\">{getOptimalStudyTime()}</p>\n                <p className=\"text-sm text-blue-600 mt-1\">\n                  You score {studyPatterns?.optimalTimeBoost || 0}% higher during this time\n                </p>\n              </div>\n            </div>\n\n            {/* Session Length Analysis */}\n            <div className=\"gaming-card p-4\">\n              <h3 className=\"font-bold text-gray-900 mb-4\"> Session Effectiveness</h3>\n              <div className=\"space-y-3\">\n                <div className=\"analytics-metric\">\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"font-medium\">Optimal Session Length</span>\n                    <span className=\"text-blue-600 font-bold\">\n                      {studyPatterns?.optimalSessionLength || 25} minutes\n                    </span>\n                  </div>\n                  <p className=\"text-sm text-gray-600 mt-1\">\n                    Your focus peaks at this duration\n                  </p>\n                </div>\n                <div className=\"analytics-metric\">\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"font-medium\">Average Break Time</span>\n                    <span className=\"text-green-600 font-bold\">\n                      {studyPatterns?.averageBreak || 5} minutes\n                    </span>\n                  </div>\n                  <p className=\"text-sm text-gray-600 mt-1\">\n                    Recommended: 5-10 minutes\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            {/* Study Consistency */}\n            <div className=\"gaming-card p-4\">\n              <h3 className=\"font-bold text-gray-900 mb-4\"> Study Consistency</h3>\n              <div className=\"grid grid-cols-7 gap-2\">\n                {(studyPatterns?.weeklyPattern || []).map((day, index) => (\n                  <div key={index} className=\"text-center\">\n                    <div className={`w-8 h-8 rounded-lg mb-1 ${\n                      day.studied\n                        ? 'bg-green-400'\n                        : 'bg-gray-200'\n                    }`} />\n                    <span className=\"text-xs text-gray-600\">\n                      {['S', 'M', 'T', 'W', 'T', 'F', 'S'][index]}\n                    </span>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </motion.div>\n        )}\n\n        {selectedMetric === 'goals' && (\n          <motion.div\n            key=\"goals\"\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -20 }}\n            className=\"space-y-4\"\n          >\n            {/* Add Goal Button */}\n            <button\n              onClick={() => setShowGoalModal(true)}\n              className=\"w-full gaming-button-primary py-3\"\n            >\n              <span className=\"mr-2\"></span>\n              Set New Goal\n            </button>\n\n            {/* Active Goals */}\n            <div className=\"space-y-3\">\n              {goals?.map((goal, index) => (\n                <motion.div\n                  key={goal.id}\n                  initial={{ opacity: 0, y: 20 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ delay: index * 0.1 }}\n                  className=\"gaming-card p-4\"\n                >\n                  <div className=\"flex justify-between items-start mb-3\">\n                    <div>\n                      <h4 className=\"font-semibold text-gray-900\">{goal.target}</h4>\n                      <p className=\"text-sm text-gray-600\">Due: {new Date(goal.deadline).toLocaleDateString()}</p>\n                    </div>\n                    <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                      goal.progress >= 100\n                        ? 'bg-green-100 text-green-800'\n                        : goal.progress >= 50\n                        ? 'bg-yellow-100 text-yellow-800'\n                        : 'bg-red-100 text-red-800'\n                    }`}>\n                      {goal.progress}%\n                    </span>\n                  </div>\n                  <ProgressBar\n                    progress={goal.progress}\n                    color={goal.progress >= 100 ? '#10b981' : '#3b82f6'}\n                    height={8}\n                  />\n                </motion.div>\n              )) || []}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Goal Creation Modal */}\n      <AnimatePresence>\n        {showGoalModal && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\"\n            onClick={() => setShowGoalModal(false)}\n          >\n            <motion.div\n              initial={{ scale: 0.9, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.9, opacity: 0 }}\n              className=\"bg-white rounded-2xl p-6 w-full max-w-sm\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <h3 className=\"text-lg font-bold text-gray-900 mb-4\"> Create New Goal</h3>\n\n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Goal Type\n                  </label>\n                  <select\n                    value={newGoal.type}\n                    onChange={(e) => setNewGoal({ ...newGoal, type: e.target.value })}\n                    className=\"w-full input\"\n                  >\n                    <option value=\"daily\">Daily Target</option>\n                    <option value=\"weekly\">Weekly Target</option>\n                    <option value=\"atar\">ATAR Goal</option>\n                    <option value=\"subject\">Subject Mastery</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Target\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={newGoal.target}\n                    onChange={(e) => setNewGoal({ ...newGoal, target: e.target.value })}\n                    placeholder=\"e.g., Complete 5 Biology questions daily\"\n                    className=\"w-full input\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Deadline\n                  </label>\n                  <input\n                    type=\"date\"\n                    value={newGoal.deadline}\n                    onChange={(e) => setNewGoal({ ...newGoal, deadline: e.target.value })}\n                    className=\"w-full input\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex space-x-3 mt-6\">\n                <button\n                  onClick={() => setShowGoalModal(false)}\n                  className=\"flex-1 py-2 px-4 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleCreateGoal}\n                  className=\"flex-1 gaming-button-primary py-2\"\n                >\n                  Create Goal\n                </button>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n};\n\nexport default StudentAnalytics;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\TeacherDashboard.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Legend' is defined but never used. Allowed unused vars must match /^React$/u.","line":2,"column":63,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":69},{"ruleId":"no-unused-vars","severity":1,"message":"'PieChart' is defined but never used. Allowed unused vars must match /^React$/u.","line":2,"column":88,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":96},{"ruleId":"no-unused-vars","severity":1,"message":"'Pie' is defined but never used. Allowed unused vars must match /^React$/u.","line":2,"column":98,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":101},{"ruleId":"no-unused-vars","severity":1,"message":"'Cell' is defined but never used. Allowed unused vars must match /^React$/u.","line":2,"column":103,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":107},{"ruleId":"no-unused-vars","severity":1,"message":"'ScatterChart' is defined but never used. Allowed unused vars must match /^React$/u.","line":2,"column":109,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":121},{"ruleId":"no-unused-vars","severity":1,"message":"'Scatter' is defined but never used. Allowed unused vars must match /^React$/u.","line":2,"column":123,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":130},{"ruleId":"no-unused-vars","severity":1,"message":"'RadarChart' is defined but never used. Allowed unused vars must match /^React$/u.","line":2,"column":153,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":163},{"ruleId":"no-unused-vars","severity":1,"message":"'PolarGrid' is defined but never used. Allowed unused vars must match /^React$/u.","line":2,"column":165,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":174},{"ruleId":"no-unused-vars","severity":1,"message":"'PolarAngleAxis' is defined but never used. Allowed unused vars must match /^React$/u.","line":2,"column":176,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":190},{"ruleId":"no-unused-vars","severity":1,"message":"'PolarRadiusAxis' is defined but never used. Allowed unused vars must match /^React$/u.","line":2,"column":192,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":207},{"ruleId":"no-unused-vars","severity":1,"message":"'Radar' is defined but never used. Allowed unused vars must match /^React$/u.","line":2,"column":209,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":214},{"ruleId":"no-unused-vars","severity":1,"message":"'COLORS' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":19,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":15},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadClassData'. Either include it or remove the dependency array.","line":23,"column":6,"nodeType":"ArrayExpression","endLine":23,"endColumn":40,"suggestions":[{"desc":"Update the dependencies array to be: [loadClassData, selectedClass, selectedTimeRange]","fix":{"range":[1004,1038],"text":"[loadClassData, selectedClass, selectedTimeRange]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, LineChart, Line, PieChart, Pie, Cell, ScatterChart, Scatter, ResponsiveContainer, RadarChart, PolarGrid, PolarAngleAxis, PolarRadiusAxis, Radar } from 'recharts';\r\nimport './TeacherDashboard.css';\r\n\r\nconst TeacherDashboard = ({ onBack }) => {\r\n  const [selectedClass, setSelectedClass] = useState('all');\r\n  const [selectedTimeRange, setSelectedTimeRange] = useState('week');\r\n  const [selectedView, setSelectedView] = useState('overview');\r\n  const [classData, setClassData] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const classes = [\r\n    { id: 'all', name: 'All Classes' },\r\n    { id: 'bio12a', name: 'Biology 12A' },\r\n    { id: 'bio12b', name: 'Biology 12B' },\r\n    { id: 'bio11a', name: 'Biology 11A' }\r\n  ];\r\n\r\n  const COLORS = ['#8884d8', '#82ca9d', '#ffc658', '#ff7c7c', '#8dd1e1', '#d084d0'];\r\n\r\n  useEffect(() => {\r\n    loadClassData();\r\n  }, [selectedClass, selectedTimeRange]);\r\n\r\n  const loadClassData = async () => {\r\n    setLoading(true);\r\n    \r\n    try {\r\n      const mockClassData = generateMockClassData();\r\n      setClassData(mockClassData);\r\n    } catch (error) {\r\n      console.error('Error loading class data:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const generateMockClassData = () => {\r\n    const studentCount = selectedClass === 'all' ? 120 : 30;\r\n    const students = [];\r\n    \r\n    for (let i = 1; i <= studentCount; i++) {\r\n      students.push({\r\n        id: `student_${i}`,\r\n        name: `Student ${i}`,\r\n        class: selectedClass === 'all' ? classes[Math.floor(Math.random() * (classes.length - 1)) + 1].name : classes.find(c => c.id === selectedClass)?.name,\r\n        averageScore: Math.floor(Math.random() * 40) + 60,\r\n        questionsCompleted: Math.floor(Math.random() * 200) + 50,\r\n        timeSpent: Math.floor(Math.random() * 1000) + 300,\r\n        streakDays: Math.floor(Math.random() * 15),\r\n        lastActive: new Date(Date.now() - Math.random() * 7 * 24 * 60 * 60 * 1000),\r\n        strengths: generateRandomTopics(2),\r\n        weaknesses: generateRandomTopics(2),\r\n        masteryLevels: generateMasteryLevels()\r\n      });\r\n    }\r\n\r\n    const dotPoints = ['IQ1.1', 'IQ1.2', 'IQ1.3', 'IQ2.1', 'IQ2.2', 'IQ3.1', 'IQ3.2', 'IQ3.3', 'IQ4.1', 'IQ4.2', 'IQ5.1', 'IQ5.2'];\r\n    \r\n    const classPerformance = dotPoints.map(dp => ({\r\n      dotPoint: dp,\r\n      averageScore: Math.floor(Math.random() * 30) + 65,\r\n      completionRate: Math.floor(Math.random() * 40) + 60,\r\n      difficulty: Math.random() * 0.4 + 0.3,\r\n      timeSpent: Math.floor(Math.random() * 30) + 20\r\n    }));\r\n\r\n    const engagementData = [];\r\n    const now = new Date();\r\n    for (let i = 6; i >= 0; i--) {\r\n      const date = new Date(now);\r\n      date.setDate(date.getDate() - i);\r\n      engagementData.push({\r\n        date: date.toISOString().split('T')[0],\r\n        activeStudents: Math.floor(Math.random() * 15) + 15,\r\n        questionsAnswered: Math.floor(Math.random() * 200) + 100,\r\n        averageTime: Math.floor(Math.random() * 20) + 25\r\n      });\r\n    }\r\n\r\n    const difficultyBreakdown = [\r\n      { difficulty: 'Easy', attempted: Math.floor(Math.random() * 500) + 300, correct: 0.85 },\r\n      { difficulty: 'Medium', attempted: Math.floor(Math.random() * 400) + 250, correct: 0.72 },\r\n      { difficulty: 'Hard', attempted: Math.floor(Math.random() * 200) + 100, correct: 0.58 }\r\n    ];\r\n\r\n    return {\r\n      students,\r\n      classPerformance,\r\n      engagementData,\r\n      difficultyBreakdown,\r\n      summary: {\r\n        totalStudents: studentCount,\r\n        activeToday: Math.floor(studentCount * 0.7),\r\n        averageScore: Math.floor(Math.random() * 20) + 75,\r\n        completionRate: Math.floor(Math.random() * 20) + 78,\r\n        totalQuestionsAnswered: Math.floor(Math.random() * 5000) + 10000,\r\n        averageStudyTime: Math.floor(Math.random() * 30) + 35\r\n      }\r\n    };\r\n  };\r\n\r\n  const generateRandomTopics = (count) => {\r\n    const topics = ['Cell Division', 'DNA Replication', 'Protein Synthesis', 'Photosynthesis', 'Cellular Respiration', 'Genetics', 'Evolution'];\r\n    const selected = [];\r\n    while (selected.length < count && selected.length < topics.length) {\r\n      const topic = topics[Math.floor(Math.random() * topics.length)];\r\n      if (!selected.includes(topic)) selected.push(topic);\r\n    }\r\n    return selected;\r\n  };\r\n\r\n  const generateMasteryLevels = () => {\r\n    return {\r\n      novice: Math.floor(Math.random() * 3),\r\n      developing: Math.floor(Math.random() * 4) + 2,\r\n      competent: Math.floor(Math.random() * 4) + 3,\r\n      proficient: Math.floor(Math.random() * 3) + 2,\r\n      expert: Math.floor(Math.random() * 2) + 1\r\n    };\r\n  };\r\n\r\n  const getAtRiskStudents = () => {\r\n    return classData.students?.filter(student => \r\n      student.averageScore < 65 || \r\n      student.streakDays === 0 || \r\n      (Date.now() - student.lastActive.getTime()) > (3 * 24 * 60 * 60 * 1000)\r\n    ) || [];\r\n  };\r\n\r\n  const getTopPerformers = () => {\r\n    return classData.students?.filter(student => \r\n      student.averageScore >= 85 && student.streakDays >= 5\r\n    ).sort((a, b) => b.averageScore - a.averageScore).slice(0, 5) || [];\r\n  };\r\n\r\n  const getEngagementTrends = () => {\r\n    if (!classData.engagementData) return { trend: 'stable', change: 0 };\r\n    \r\n    const recent = classData.engagementData.slice(-3);\r\n    const earlier = classData.engagementData.slice(0, 3);\r\n    \r\n    const recentAvg = recent.reduce((sum, day) => sum + day.activeStudents, 0) / recent.length;\r\n    const earlierAvg = earlier.reduce((sum, day) => sum + day.activeStudents, 0) / earlier.length;\r\n    \r\n    const change = ((recentAvg - earlierAvg) / earlierAvg) * 100;\r\n    \r\n    let trend = 'stable';\r\n    if (change > 10) trend = 'increasing';\r\n    else if (change < -10) trend = 'decreasing';\r\n    \r\n    return { trend, change: Math.round(change) };\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"teacher-dashboard-loading\">\r\n        <div className=\"loading-spinner\"></div>\r\n        <p>Loading class analytics...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const atRiskStudents = getAtRiskStudents();\r\n  const topPerformers = getTopPerformers();\r\n  const engagementTrends = getEngagementTrends();\r\n\r\n  return (\r\n    <div className=\"teacher-dashboard\">\r\n      <header className=\"teacher-header\">\r\n        <div className=\"header-top\">\r\n          <button onClick={onBack} className=\"back-button\">\r\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n            </svg>\r\n          </button>\r\n          <h1>Teacher Dashboard</h1>\r\n          <div className=\"header-actions\">\r\n            <button className=\"export-button\">\r\n              Export Data\r\n            </button>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"dashboard-controls\">\r\n          <select \r\n            value={selectedClass} \r\n            onChange={(e) => setSelectedClass(e.target.value)}\r\n            className=\"class-select\"\r\n          >\r\n            {classes.map(cls => (\r\n              <option key={cls.id} value={cls.id}>{cls.name}</option>\r\n            ))}\r\n          </select>\r\n          \r\n          <select \r\n            value={selectedTimeRange} \r\n            onChange={(e) => setSelectedTimeRange(e.target.value)}\r\n            className=\"time-select\"\r\n          >\r\n            <option value=\"day\">Today</option>\r\n            <option value=\"week\">This Week</option>\r\n            <option value=\"month\">This Month</option>\r\n            <option value=\"term\">This Term</option>\r\n          </select>\r\n          \r\n          <div className=\"view-tabs\">\r\n            {['overview', 'performance', 'engagement', 'individual'].map(view => (\r\n              <button\r\n                key={view}\r\n                onClick={() => setSelectedView(view)}\r\n                className={`tab ${selectedView === view ? 'active' : ''}`}\r\n              >\r\n                {view.charAt(0).toUpperCase() + view.slice(1)}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"dashboard-content\">\r\n        {selectedView === 'overview' && (\r\n          <div className=\"overview-grid\">\r\n            <div className=\"summary-cards\">\r\n              <div className=\"summary-card\">\r\n                <div className=\"card-icon\"></div>\r\n                <div className=\"card-content\">\r\n                  <h3>{classData.summary?.totalStudents || 0}</h3>\r\n                  <p>Total Students</p>\r\n                  <span className=\"card-subtitle\">\r\n                    {classData.summary?.activeToday || 0} active today\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"summary-card\">\r\n                <div className=\"card-icon\"></div>\r\n                <div className=\"card-content\">\r\n                  <h3>{classData.summary?.averageScore || 0}%</h3>\r\n                  <p>Class Average</p>\r\n                  <span className=\"card-subtitle\">\r\n                    {engagementTrends.change >= 0 ? '+' : ''}{engagementTrends.change}% vs last period\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"summary-card\">\r\n                <div className=\"card-icon\"></div>\r\n                <div className=\"card-content\">\r\n                  <h3>{classData.summary?.completionRate || 0}%</h3>\r\n                  <p>Completion Rate</p>\r\n                  <span className=\"card-subtitle\">\r\n                    {classData.summary?.totalQuestionsAnswered || 0} questions total\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"summary-card\">\r\n                <div className=\"card-icon\"></div>\r\n                <div className=\"card-content\">\r\n                  <h3>{classData.summary?.averageStudyTime || 0}min</h3>\r\n                  <p>Avg Study Time</p>\r\n                  <span className=\"card-subtitle\">\r\n                    Per student per day\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"overview-charts\">\r\n              <div className=\"chart-container\">\r\n                <h3>Class Performance by Topic</h3>\r\n                <ResponsiveContainer width=\"100%\" height={300}>\r\n                  <BarChart data={classData.classPerformance || []}>\r\n                    <CartesianGrid strokeDasharray=\"3 3\" />\r\n                    <XAxis dataKey=\"dotPoint\" />\r\n                    <YAxis />\r\n                    <Tooltip />\r\n                    <Bar dataKey=\"averageScore\" fill=\"#8884d8\" />\r\n                  </BarChart>\r\n                </ResponsiveContainer>\r\n              </div>\r\n\r\n              <div className=\"chart-container\">\r\n                <h3>Weekly Engagement Trends</h3>\r\n                <ResponsiveContainer width=\"100%\" height={300}>\r\n                  <LineChart data={classData.engagementData || []}>\r\n                    <CartesianGrid strokeDasharray=\"3 3\" />\r\n                    <XAxis dataKey=\"date\" />\r\n                    <YAxis />\r\n                    <Tooltip />\r\n                    <Line type=\"monotone\" dataKey=\"activeStudents\" stroke=\"#82ca9d\" />\r\n                  </LineChart>\r\n                </ResponsiveContainer>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"student-lists\">\r\n              <div className=\"at-risk-students\">\r\n                <h3>At-Risk Students ({atRiskStudents.length})</h3>\r\n                <div className=\"student-list\">\r\n                  {atRiskStudents.slice(0, 5).map(student => (\r\n                    <div key={student.id} className=\"student-item risk\">\r\n                      <div className=\"student-info\">\r\n                        <span className=\"student-name\">{student.name}</span>\r\n                        <span className=\"student-score\">{student.averageScore}%</span>\r\n                      </div>\r\n                      <div className=\"student-issues\">\r\n                        {student.averageScore < 65 && <span className=\"issue\">Low Score</span>}\r\n                        {student.streakDays === 0 && <span className=\"issue\">No Streak</span>}\r\n                        {(Date.now() - student.lastActive.getTime()) > (3 * 24 * 60 * 60 * 1000) && \r\n                          <span className=\"issue\">Inactive</span>}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"top-performers\">\r\n                <h3>Top Performers ({topPerformers.length})</h3>\r\n                <div className=\"student-list\">\r\n                  {topPerformers.map((student, index) => (\r\n                    <div key={student.id} className=\"student-item top\">\r\n                      <div className=\"student-rank\">#{index + 1}</div>\r\n                      <div className=\"student-info\">\r\n                        <span className=\"student-name\">{student.name}</span>\r\n                        <span className=\"student-score\">{student.averageScore}%</span>\r\n                      </div>\r\n                      <div className=\"student-streak\">\r\n                         {student.streakDays} days\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {selectedView === 'performance' && (\r\n          <div className=\"performance-view\">\r\n            <div className=\"chart-container\">\r\n              <h3>Score Distribution</h3>\r\n              <ResponsiveContainer width=\"100%\" height={300}>\r\n                <BarChart data={[\r\n                  { range: '90-100%', count: classData.students?.filter(s => s.averageScore >= 90).length || 0 },\r\n                  { range: '80-89%', count: classData.students?.filter(s => s.averageScore >= 80 && s.averageScore < 90).length || 0 },\r\n                  { range: '70-79%', count: classData.students?.filter(s => s.averageScore >= 70 && s.averageScore < 80).length || 0 },\r\n                  { range: '60-69%', count: classData.students?.filter(s => s.averageScore >= 60 && s.averageScore < 70).length || 0 },\r\n                  { range: '50-59%', count: classData.students?.filter(s => s.averageScore >= 50 && s.averageScore < 60).length || 0 },\r\n                  { range: '<50%', count: classData.students?.filter(s => s.averageScore < 50).length || 0 }\r\n                ]}>\r\n                  <CartesianGrid strokeDasharray=\"3 3\" />\r\n                  <XAxis dataKey=\"range\" />\r\n                  <YAxis />\r\n                  <Tooltip />\r\n                  <Bar dataKey=\"count\" fill=\"#8884d8\" />\r\n                </BarChart>\r\n              </ResponsiveContainer>\r\n            </div>\r\n\r\n            <div className=\"chart-container\">\r\n              <h3>Performance by Difficulty</h3>\r\n              <ResponsiveContainer width=\"100%\" height={300}>\r\n                <BarChart data={classData.difficultyBreakdown?.map(item => ({\r\n                  ...item,\r\n                  correctPercent: Math.round(item.correct * 100)\r\n                })) || []}>\r\n                  <CartesianGrid strokeDasharray=\"3 3\" />\r\n                  <XAxis dataKey=\"difficulty\" />\r\n                  <YAxis />\r\n                  <Tooltip />\r\n                  <Bar dataKey=\"correctPercent\" fill=\"#82ca9d\" />\r\n                </BarChart>\r\n              </ResponsiveContainer>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {selectedView === 'engagement' && (\r\n          <div className=\"engagement-view\">\r\n            <div className=\"chart-container\">\r\n              <h3>Daily Active Students</h3>\r\n              <ResponsiveContainer width=\"100%\" height={300}>\r\n                <LineChart data={classData.engagementData || []}>\r\n                  <CartesianGrid strokeDasharray=\"3 3\" />\r\n                  <XAxis dataKey=\"date\" />\r\n                  <YAxis />\r\n                  <Tooltip />\r\n                  <Line type=\"monotone\" dataKey=\"activeStudents\" stroke=\"#8884d8\" />\r\n                </LineChart>\r\n              </ResponsiveContainer>\r\n            </div>\r\n\r\n            <div className=\"chart-container\">\r\n              <h3>Questions Answered Per Day</h3>\r\n              <ResponsiveContainer width=\"100%\" height={300}>\r\n                <BarChart data={classData.engagementData || []}>\r\n                  <CartesianGrid strokeDasharray=\"3 3\" />\r\n                  <XAxis dataKey=\"date\" />\r\n                  <YAxis />\r\n                  <Tooltip />\r\n                  <Bar dataKey=\"questionsAnswered\" fill=\"#ffc658\" />\r\n                </BarChart>\r\n              </ResponsiveContainer>\r\n            </div>\r\n\r\n            <div className=\"engagement-metrics\">\r\n              <div className=\"metric-card\">\r\n                <h4>Engagement Trend</h4>\r\n                <div className={`trend-indicator ${engagementTrends.trend}`}>\r\n                  {engagementTrends.trend === 'increasing' ? '' : \r\n                   engagementTrends.trend === 'decreasing' ? '' : ''}\r\n                  <span>{engagementTrends.trend.toUpperCase()}</span>\r\n                </div>\r\n                <p>{Math.abs(engagementTrends.change)}% change from previous period</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {selectedView === 'individual' && (\r\n          <div className=\"individual-view\">\r\n            <div className=\"student-grid\">\r\n              {(classData.students || []).map(student => (\r\n                <div key={student.id} className=\"individual-student-card\">\r\n                  <div className=\"student-header\">\r\n                    <h4>{student.name}</h4>\r\n                    <span className=\"student-class\">{student.class}</span>\r\n                  </div>\r\n                  \r\n                  <div className=\"student-metrics\">\r\n                    <div className=\"metric\">\r\n                      <span className=\"metric-label\">Average Score</span>\r\n                      <span className={`metric-value ${student.averageScore >= 75 ? 'good' : student.averageScore >= 60 ? 'fair' : 'poor'}`}>\r\n                        {student.averageScore}%\r\n                      </span>\r\n                    </div>\r\n                    \r\n                    <div className=\"metric\">\r\n                      <span className=\"metric-label\">Questions Completed</span>\r\n                      <span className=\"metric-value\">{student.questionsCompleted}</span>\r\n                    </div>\r\n                    \r\n                    <div className=\"metric\">\r\n                      <span className=\"metric-label\">Study Streak</span>\r\n                      <span className=\"metric-value\">{student.streakDays} days</span>\r\n                    </div>\r\n                    \r\n                    <div className=\"metric\">\r\n                      <span className=\"metric-label\">Total Time</span>\r\n                      <span className=\"metric-value\">{Math.floor(student.timeSpent / 60)}h {student.timeSpent % 60}m</span>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"student-topics\">\r\n                    <div className=\"strengths\">\r\n                      <strong>Strengths:</strong>\r\n                      <div className=\"topic-list\">\r\n                        {student.strengths.map(topic => (\r\n                          <span key={topic} className=\"topic strength\">{topic}</span>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"weaknesses\">\r\n                      <strong>Areas for improvement:</strong>\r\n                      <div className=\"topic-list\">\r\n                        {student.weaknesses.map(topic => (\r\n                          <span key={topic} className=\"topic weakness\">{topic}</span>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"last-active\">\r\n                    Last active: {student.lastActive.toLocaleDateString()}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TeacherDashboard;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\Toast.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":7,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":7,"endColumn":22},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'removeToast'. Either include it or remove the dependency array.","line":37,"column":6,"nodeType":"ArrayExpression","endLine":37,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [removeToast]","fix":{"range":[937,939],"text":"[removeToast]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { X, CheckCircle, AlertCircle, Info, AlertTriangle } from 'lucide-react';\n\nconst ToastContext = createContext();\n\nexport const useToast = () => {\n  const context = useContext(ToastContext);\n  if (!context) {\n    throw new Error('useToast must be used within a ToastProvider');\n  }\n  return context;\n};\n\nexport const ToastProvider = ({ children }) => {\n  const [toasts, setToasts] = useState([]);\n\n  const addToast = useCallback((toast) => {\n    const id = Date.now() + Math.random();\n    const newToast = {\n      id,\n      type: 'info',\n      duration: 4000,\n      dismissible: true,\n      ...toast,\n    };\n\n    setToasts(prev => [...prev, newToast]);\n\n    if (newToast.duration > 0) {\n      setTimeout(() => {\n        removeToast(id);\n      }, newToast.duration);\n    }\n\n    return id;\n  }, []);\n\n  const removeToast = useCallback((id) => {\n    setToasts(prev => prev.filter(toast => toast.id !== id));\n  }, []);\n\n  const removeAllToasts = useCallback(() => {\n    setToasts([]);\n  }, []);\n\n  const showSuccess = useCallback((message, options = {}) => {\n    return addToast({ type: 'success', message, ...options });\n  }, [addToast]);\n\n  const showError = useCallback((message, options = {}) => {\n    return addToast({ type: 'error', message, duration: 6000, ...options });\n  }, [addToast]);\n\n  const showWarning = useCallback((message, options = {}) => {\n    return addToast({ type: 'warning', message, ...options });\n  }, [addToast]);\n\n  const showInfo = useCallback((message, options = {}) => {\n    return addToast({ type: 'info', message, ...options });\n  }, [addToast]);\n\n  const value = {\n    toasts,\n    addToast,\n    removeToast,\n    removeAllToasts,\n    showSuccess,\n    showError,\n    showWarning,\n    showInfo,\n  };\n\n  return (\n    <ToastContext.Provider value={value}>\n      {children}\n      <ToastContainer />\n    </ToastContext.Provider>\n  );\n};\n\nconst ToastContainer = () => {\n  const { toasts } = useToast();\n\n  return (\n    <div className=\"fixed top-4 right-4 z-50 space-y-2 max-w-sm w-full\">\n      <AnimatePresence>\n        {toasts.map((toast) => (\n          <Toast key={toast.id} toast={toast} />\n        ))}\n      </AnimatePresence>\n    </div>\n  );\n};\n\nconst Toast = ({ toast }) => {\n  const { removeToast } = useToast();\n\n  const icons = {\n    success: CheckCircle,\n    error: AlertCircle,\n    warning: AlertTriangle,\n    info: Info,\n  };\n\n  const colors = {\n    success: 'bg-green-50 border-green-200 text-green-800',\n    error: 'bg-red-50 border-red-200 text-red-800',\n    warning: 'bg-yellow-50 border-yellow-200 text-yellow-800',\n    info: 'bg-blue-50 border-blue-200 text-blue-800',\n  };\n\n  const iconColors = {\n    success: 'text-green-500',\n    error: 'text-red-500',\n    warning: 'text-yellow-500',\n    info: 'text-blue-500',\n  };\n\n  const IconComponent = icons[toast.type];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: -50, scale: 0.9 }}\n      animate={{ opacity: 1, y: 0, scale: 1 }}\n      exit={{ opacity: 0, y: -50, scale: 0.9 }}\n      transition={{ type: 'spring', stiffness: 300, damping: 30 }}\n      className={`\n        p-4 rounded-lg border shadow-lg backdrop-blur-sm\n        ${colors[toast.type]}\n        mobile-optimized\n      `}\n    >\n      <div className=\"flex items-start space-x-3\">\n        <IconComponent className={`w-5 h-5 mt-0.5 flex-shrink-0 ${iconColors[toast.type]}`} />\n        <div className=\"flex-1 min-w-0\">\n          {toast.title && (\n            <h4 className=\"font-medium text-sm mb-1\">{toast.title}</h4>\n          )}\n          <p className=\"text-sm\">{toast.message}</p>\n          {toast.action && (\n            <button\n              onClick={toast.action.onClick}\n              className=\"mt-2 text-sm font-medium underline hover:no-underline touch-optimized\"\n            >\n              {toast.action.label}\n            </button>\n          )}\n        </div>\n        {toast.dismissible && (\n          <button\n            onClick={() => removeToast(toast.id)}\n            className=\"p-1 rounded hover:bg-black/10 touch-optimized\"\n          >\n            <X className=\"w-4 h-4\" />\n          </button>\n        )}\n      </div>\n    </motion.div>\n  );\n};\n\nexport default Toast;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\UserStats.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\XPDisplay.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\adaptive\\AdaptiveVirtualMicroscope.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'AnimatePresence' is defined but never used. Allowed unused vars must match /^React$/u.","line":2,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":33},{"ruleId":"no-unused-vars","severity":1,"message":"'canvasRef' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":21,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":18},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchAdaptiveData'. Either include it or remove the dependency array.","line":113,"column":6,"nodeType":"ArrayExpression","endLine":113,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [fetchAdaptiveData]","fix":{"range":[4907,4909],"text":"[fetchAdaptiveData]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'loadAdaptiveQuestion' and 'specimenData.magnifications'. Either include them or remove the dependency array.","line":129,"column":6,"nodeType":"ArrayExpression","endLine":129,"endColumn":28,"suggestions":[{"desc":"Update the dependencies array to be: [currentMagnification, loadAdaptiveQuestion, specimenData.magnifications]","fix":{"range":[5391,5413],"text":"[currentMagnification, loadAdaptiveQuestion, specimenData.magnifications]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nconst AdaptiveVirtualMicroscope = ({ \n  specimenId, \n  userId, \n  onComplete, \n  adaptiveSettings = {},\n  className = '' \n}) => {\n  const [currentMagnification, setCurrentMagnification] = useState('10x');\n  const [selectedAnswer, setSelectedAnswer] = useState(null);\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const [timeSpent, setTimeSpent] = useState(0);\n  const [sessionStartTime] = useState(Date.now());\n  const [showHints, setShowHints] = useState(false);\n  const [adaptiveData, setAdaptiveData] = useState(null);\n  const [currentQuestion, setCurrentQuestion] = useState(null);\n  const [focusPoints, setFocusPoints] = useState([]);\n  const [interactionHistory, setInteractionHistory] = useState([]);\n  const canvasRef = useRef(null);\n\n  // Sample specimen data with adaptive features\n  const [specimenData] = useState({\n    id: specimenId,\n    name: \"Plant Cell Structure\",\n    description: \"Observe the cellular components of a typical plant cell\",\n    dotPointId: \"BIO11-5.1\",\n    difficulty: adaptiveSettings.difficulty || 'medium',\n    magnifications: {\n      '10x': {\n        image: '/images/specimens/plant-cell-10x.jpg',\n        description: 'Low magnification overview of plant tissue',\n        visibleStructures: ['cell wall', 'cell membrane', 'large vacuole'],\n        focusPoints: [\n          { x: 300, y: 200, structure: 'cell wall', info: 'Thick outer boundary of plant cells' },\n          { x: 400, y: 300, structure: 'vacuole', info: 'Large fluid-filled sac for storage and support' }\n        ]\n      },\n      '40x': {\n        image: '/images/specimens/plant-cell-40x.jpg',\n        description: 'Medium magnification showing cellular details',\n        visibleStructures: ['nucleus', 'chloroplasts', 'cytoplasm', 'cell wall'],\n        focusPoints: [\n          { x: 320, y: 240, structure: 'nucleus', info: 'Control center containing genetic material' },\n          { x: 280, y: 180, structure: 'chloroplast', info: 'Site of photosynthesis containing chlorophyll' },\n          { x: 360, y: 320, structure: 'cytoplasm', info: 'Gel-like substance filling the cell' }\n        ]\n      },\n      '100x': {\n        image: '/images/specimens/plant-cell-100x.jpg',\n        description: 'High magnification revealing organelle details',\n        visibleStructures: ['nucleolus', 'chromatin', 'chloroplast grana', 'mitochondria'],\n        focusPoints: [\n          { x: 325, y: 245, structure: 'nucleolus', info: 'Dense region within nucleus for ribosome assembly' },\n          { x: 340, y: 230, structure: 'chromatin', info: 'DNA and protein complex in nucleus' },\n          { x: 285, y: 185, structure: 'grana', info: 'Stacked structures within chloroplasts' }\n        ]\n      }\n    },\n    adaptiveQuestions: {\n      easy: {\n        question: \"What is the thick outer boundary visible in this plant cell?\",\n        options: [\"Cell membrane\", \"Cell wall\", \"Cytoplasm\", \"Nucleus\"],\n        correctAnswer: 1,\n        hints: [\n          \"Look for the outermost layer of the cell\",\n          \"This structure is unique to plant cells\",\n          \"It provides structural support and protection\"\n        ],\n        explanation: \"The cell wall is a rigid outer layer unique to plant cells, providing structural support and protection.\"\n      },\n      medium: {\n        question: \"Which organelle is responsible for photosynthesis in this plant cell?\",\n        options: [\"Mitochondria\", \"Nucleus\", \"Chloroplasts\", \"Vacuole\"],\n        correctAnswer: 2,\n        hints: [\n          \"Look for green-colored organelles\",\n          \"This organelle contains chlorophyll\",\n          \"It's where light energy is converted to chemical energy\"\n        ],\n        explanation: \"Chloroplasts contain chlorophyll and are the sites of photosynthesis, converting light energy into chemical energy.\"\n      },\n      hard: {\n        question: \"Identify the relationship between the grana and thylakoids in chloroplast structure.\",\n        options: [\n          \"Grana are individual thylakoids\",\n          \"Grana are stacks of thylakoids\",\n          \"Thylakoids surround grana\",\n          \"They are completely separate structures\"\n        ],\n        correctAnswer: 1,\n        hints: [\n          \"Consider the organizational structure within chloroplasts\",\n          \"Think about how membrane systems are arranged\",\n          \"Look at the stacked appearance in the image\"\n        ],\n        explanation: \"Grana are stacks of flattened thylakoid membranes where the light-dependent reactions of photosynthesis occur.\"\n      }\n    }\n  });\n\n  useEffect(() => {\n    // Load adaptive learning data for this user and specimen\n    fetchAdaptiveData();\n    \n    // Set up timer\n    const timer = setInterval(() => {\n      setTimeSpent(prev => prev + 1);\n    }, 1000);\n\n    return () => clearInterval(timer);\n  }, []);\n\n  useEffect(() => {\n    // Update focus points when magnification changes\n    const magData = specimenData.magnifications[currentMagnification];\n    setFocusPoints(magData.focusPoints || []);\n    \n    // Track interaction\n    setInteractionHistory(prev => [...prev, {\n      type: 'magnification_change',\n      magnification: currentMagnification,\n      timestamp: Date.now()\n    }]);\n\n    // Load appropriate question based on adaptive settings\n    loadAdaptiveQuestion();\n  }, [currentMagnification]);\n\n  const fetchAdaptiveData = async () => {\n    try {\n      const response = await fetch(`/api/adaptive-learning/profile/${userId}`);\n      const data = await response.json();\n      \n      if (data.success) {\n        setAdaptiveData(data.profile);\n      }\n    } catch (error) {\n      console.error('Error fetching adaptive data:', error);\n    }\n  };\n\n  const loadAdaptiveQuestion = () => {\n    const difficulty = adaptiveData?.getOptimalDifficulty?.(specimenData.dotPointId) || \n                     adaptiveSettings.difficulty || \n                     'medium';\n    \n    const question = specimenData.adaptiveQuestions[difficulty];\n    setCurrentQuestion(question);\n    setSelectedAnswer(null);\n    setIsSubmitted(false);\n    setShowHints(false);\n  };\n\n  const handleMagnificationChange = (newMag) => {\n    if (newMag !== currentMagnification) {\n      setCurrentMagnification(newMag);\n    }\n  };\n\n  const handleFocusPointClick = (focusPoint) => {\n    // Track interaction\n    setInteractionHistory(prev => [...prev, {\n      type: 'focus_point_click',\n      structure: focusPoint.structure,\n      timestamp: Date.now()\n    }]);\n\n    // Show structure information\n    alert(`${focusPoint.structure}: ${focusPoint.info}`);\n  };\n\n  const handleAnswerSelect = (answerIndex) => {\n    if (!isSubmitted) {\n      setSelectedAnswer(answerIndex);\n      \n      // Track interaction\n      setInteractionHistory(prev => [...prev, {\n        type: 'answer_select',\n        answer: answerIndex,\n        timestamp: Date.now()\n      }]);\n    }\n  };\n\n  const handleSubmit = async () => {\n    const isCorrect = selectedAnswer === currentQuestion.correctAnswer;\n    const responseTime = Date.now() - sessionStartTime;\n    \n    setIsSubmitted(true);\n\n    // Update adaptive learning system\n    try {\n      await fetch(`/api/adaptive-learning/performance/${userId}`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          dotPointId: specimenData.dotPointId,\n          isCorrect,\n          responseTime,\n          difficulty: currentQuestion.difficulty || adaptiveSettings.difficulty,\n          subject: 'biology',\n          activityType: 'virtual_microscope',\n          interactions: interactionHistory\n        })\n      });\n    } catch (error) {\n      console.error('Error updating adaptive learning:', error);\n    }\n\n    // Complete the activity\n    setTimeout(() => {\n      onComplete({\n        specimenId,\n        timeSpent,\n        isCorrect,\n        selectedAnswer,\n        correctAnswer: currentQuestion.correctAnswer,\n        interactions: interactionHistory,\n        magnificationUsed: currentMagnification\n      });\n    }, 2000);\n  };\n\n  const handleHintRequest = () => {\n    setShowHints(true);\n    \n    // Track hint usage\n    setInteractionHistory(prev => [...prev, {\n      type: 'hint_request',\n      timestamp: Date.now()\n    }]);\n  };\n\n  const magnificationLevels = Object.keys(specimenData.magnifications);\n  const currentMagData = specimenData.magnifications[currentMagnification];\n\n  return (\n    <div className={`bg-white rounded-lg p-6 shadow-lg ${className}`}>\n      {/* Header */}\n      <div className=\"flex justify-between items-center mb-4\">\n        <div>\n          <h3 className=\"text-xl font-bold text-gray-800\">{specimenData.name}</h3>\n          <p className=\"text-sm text-gray-600\">{specimenData.description}</p>\n          <p className=\"text-xs text-blue-600\">Dot Point: {specimenData.dotPointId}</p>\n        </div>\n        <div className=\"text-right\">\n          <div className=\"text-sm text-gray-600\">Time: {Math.floor(timeSpent / 60)}:{(timeSpent % 60).toString().padStart(2, '0')}</div>\n          <div className=\"text-xs text-gray-500\">Difficulty: {adaptiveSettings.difficulty || 'medium'}</div>\n        </div>\n      </div>\n\n      {/* Magnification Controls */}\n      <div className=\"flex justify-center mb-4 space-x-2\">\n        {magnificationLevels.map(mag => (\n          <button\n            key={mag}\n            onClick={() => handleMagnificationChange(mag)}\n            className={`px-4 py-2 rounded-lg font-medium transition-all ${\n              currentMagnification === mag\n                ? 'bg-blue-500 text-white shadow-md'\n                : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\n            }`}\n          >\n            {mag}\n          </button>\n        ))}\n      </div>\n\n      {/* Microscope View */}\n      <div className=\"relative bg-black rounded-lg overflow-hidden mb-4\" style={{ height: '400px' }}>\n        <motion.div\n          key={currentMagnification}\n          initial={{ opacity: 0, scale: 0.8 }}\n          animate={{ opacity: 1, scale: 1 }}\n          transition={{ duration: 0.5 }}\n          className=\"relative w-full h-full\"\n        >\n          {/* Main specimen image */}\n          <img\n            src={currentMagData.image || '/images/placeholder-specimen.jpg'}\n            alt={`${specimenData.name} at ${currentMagnification}`}\n            className=\"w-full h-full object-cover\"\n            onError={(e) => {\n              e.target.src = '/images/placeholder-specimen.jpg';\n            }}\n          />\n          \n          {/* Interactive focus points */}\n          {focusPoints.map((point, index) => (\n            <motion.div\n              key={index}\n              initial={{ scale: 0 }}\n              animate={{ scale: 1 }}\n              transition={{ delay: index * 0.2 }}\n              className=\"absolute w-4 h-4 bg-yellow-400 rounded-full border-2 border-white cursor-pointer hover:scale-110 transition-transform\"\n              style={{ \n                left: `${(point.x / 500) * 100}%`, \n                top: `${(point.y / 400) * 100}%`,\n                transform: 'translate(-50%, -50%)'\n              }}\n              onClick={() => handleFocusPointClick(point)}\n              title={point.structure}\n            />\n          ))}\n          \n          {/* Magnification indicator */}\n          <div className=\"absolute top-4 right-4 bg-black bg-opacity-70 text-white px-3 py-1 rounded\">\n            {currentMagnification}\n          </div>\n        </motion.div>\n      </div>\n\n      {/* Specimen description */}\n      <div className=\"bg-gray-50 p-3 rounded mb-4\">\n        <p className=\"text-sm text-gray-700\">{currentMagData.description}</p>\n        <div className=\"mt-2\">\n          <span className=\"text-xs font-medium text-gray-600\">Visible structures: </span>\n          <span className=\"text-xs text-gray-600\">\n            {currentMagData.visibleStructures.join(', ')}\n          </span>\n        </div>\n      </div>\n\n      {/* Adaptive Question */}\n      {currentQuestion && (\n        <div className=\"border-t pt-4\">\n          <h4 className=\"font-semibold text-gray-800 mb-3\">{currentQuestion.question}</h4>\n          \n          <div className=\"space-y-2 mb-4\">\n            {currentQuestion.options.map((option, index) => (\n              <button\n                key={index}\n                onClick={() => handleAnswerSelect(index)}\n                disabled={isSubmitted}\n                className={`w-full p-3 text-left rounded-lg transition-all ${\n                  selectedAnswer === index\n                    ? isSubmitted\n                      ? index === currentQuestion.correctAnswer\n                        ? 'bg-green-100 border-green-500 text-green-800'\n                        : 'bg-red-100 border-red-500 text-red-800'\n                      : 'bg-blue-100 border-blue-500 text-blue-800'\n                    : isSubmitted && index === currentQuestion.correctAnswer\n                      ? 'bg-green-100 border-green-500 text-green-800'\n                      : 'bg-gray-100 hover:bg-gray-200 border-gray-300'\n                } border`}\n              >\n                {option}\n              </button>\n            ))}\n          </div>\n\n          {/* Hints */}\n          {showHints && currentQuestion.hints && (\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: 'auto' }}\n              className=\"bg-yellow-50 border border-yellow-300 rounded-lg p-3 mb-4\"\n            >\n              <h5 className=\"font-medium text-yellow-800 mb-2\"> Hints:</h5>\n              <ul className=\"text-sm text-yellow-700 space-y-1\">\n                {currentQuestion.hints.map((hint, index) => (\n                  <li key={index}> {hint}</li>\n                ))}\n              </ul>\n            </motion.div>\n          )}\n\n          {/* Explanation */}\n          {isSubmitted && currentQuestion.explanation && (\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: 'auto' }}\n              className=\"bg-blue-50 border border-blue-300 rounded-lg p-3 mb-4\"\n            >\n              <h5 className=\"font-medium text-blue-800 mb-2\"> Explanation:</h5>\n              <p className=\"text-sm text-blue-700\">{currentQuestion.explanation}</p>\n            </motion.div>\n          )}\n\n          {/* Action buttons */}\n          <div className=\"flex justify-between\">\n            {!isSubmitted && (\n              <button\n                onClick={handleHintRequest}\n                className=\"text-yellow-600 hover:text-yellow-800 text-sm font-medium\"\n              >\n                 Need a hint?\n              </button>\n            )}\n            \n            <button\n              onClick={handleSubmit}\n              disabled={selectedAnswer === null || isSubmitted}\n              className=\"bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white px-6 py-2 rounded-lg font-medium transition-colors\"\n            >\n              {isSubmitted ? 'Completed' : 'Submit Answer'}\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AdaptiveVirtualMicroscope;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\adaptive\\StudyPathRecommendations.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'userProgress' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'setUserProgress' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":8,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":39},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchRecommendations'. Either include it or remove the dependency array.","line":13,"column":6,"nodeType":"ArrayExpression","endLine":13,"endColumn":34,"suggestions":[{"desc":"Update the dependencies array to be: [userId, subject, timeframe, fetchRecommendations]","fix":{"range":[546,574],"text":"[userId, subject, timeframe, fetchRecommendations]"}}]},{"ruleId":"no-unused-vars","severity":1,"message":"'baseRecommendations' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":41,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":41,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nconst StudyPathRecommendations = ({ userId, subject = 'biology', className = '' }) => {\n  const [recommendations, setRecommendations] = useState(null);\n  const [selectedPath, setSelectedPath] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [userProgress, setUserProgress] = useState({});\n  const [timeframe, setTimeframe] = useState('week'); // week, month, exam\n\n  useEffect(() => {\n    fetchRecommendations();\n  }, [userId, subject, timeframe]);\n\n  const fetchRecommendations = async () => {\n    try {\n      setLoading(true);\n      \n      // Fetch adaptive learning recommendations\n      const adaptiveResponse = await fetch(`/api/adaptive-learning/recommendations/${userId}?subject=${subject}&limit=10`);\n      const adaptiveData = await adaptiveResponse.json();\n      \n      // Fetch syllabus data\n      const syllabusResponse = await fetch(`/api/syllabus/${subject}`);\n      const syllabusData = await syllabusResponse.json();\n      \n      // Generate personalized study paths\n      const paths = generateStudyPaths(adaptiveData, syllabusData, timeframe);\n      \n      setRecommendations(paths);\n      \n    } catch (error) {\n      console.error('Error fetching recommendations:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const generateStudyPaths = (adaptiveData, syllabusData, timeframe) => {\n    // Mock implementation - in production, this would use ML algorithms\n    const baseRecommendations = adaptiveData.recommendations || {};\n    \n    const paths = {\n      priority: {\n        id: 'priority',\n        name: ' Priority Focus',\n        description: 'Address your weakest areas first for maximum improvement',\n        duration: timeframe === 'week' ? '3-5 days' : timeframe === 'month' ? '1-2 weeks' : '2-3 weeks',\n        difficulty: 'adaptive',\n        activities: [\n          {\n            type: 'review',\n            dotPointId: 'BIO11-7.1',\n            title: 'Pathogen Structure & Function',\n            estimatedTime: 25,\n            priority: 'high',\n            reason: 'Low mastery score (0.3/1.0)',\n            prerequisites: [],\n            skills: ['identification', 'analysis']\n          },\n          {\n            type: 'practice',\n            dotPointId: 'BIO11-7.1',\n            title: 'Interactive Pathogen Quiz',\n            estimatedTime: 15,\n            priority: 'high',\n            reason: 'Reinforce weak concepts',\n            prerequisites: ['pathogen_review'],\n            skills: ['application', 'recall']\n          },\n          {\n            type: 'virtual_lab',\n            dotPointId: 'BIO11-7.2',\n            title: 'Immune Response Simulation',\n            estimatedTime: 30,\n            priority: 'medium',\n            reason: 'Build on foundation knowledge',\n            prerequisites: ['pathogen_quiz'],\n            skills: ['analysis', 'evaluation']\n          }\n        ],\n        expectedOutcomes: [\n          'Improve pathogen identification accuracy by 40%',\n          'Master basic immune response concepts',\n          'Build confidence in infection mechanisms'\n        ]\n      },\n      \n      spaced: {\n        id: 'spaced',\n        name: ' Spaced Review',\n        description: 'Review previously learned content at optimal intervals',\n        duration: '2-3 sessions per week',\n        difficulty: 'review',\n        activities: [\n          {\n            type: 'review',\n            dotPointId: 'BIO11-5.1',\n            title: 'Meiosis Process Review',\n            estimatedTime: 15,\n            priority: 'medium',\n            reason: 'Due for spaced repetition',\n            lastReviewed: '5 days ago',\n            nextOptimal: 'today',\n            skills: ['recall', 'understanding']\n          },\n          {\n            type: 'quiz',\n            dotPointId: 'BIO11-5.2',\n            title: 'Inheritance Patterns Quick Check',\n            estimatedTime: 10,\n            priority: 'medium',\n            reason: 'Maintain mastery level',\n            lastReviewed: '1 week ago',\n            nextOptimal: 'tomorrow',\n            skills: ['application', 'analysis']\n          }\n        ],\n        expectedOutcomes: [\n          'Maintain long-term retention',\n          'Prevent knowledge decay',\n          'Strengthen neural pathways'\n        ]\n      },\n      \n      comprehensive: {\n        id: 'comprehensive',\n        name: ' Complete Module',\n        description: 'Systematic coverage of entire biology module',\n        duration: timeframe === 'week' ? '1 week' : timeframe === 'month' ? '3 weeks' : '4-5 weeks',\n        difficulty: 'progressive',\n        activities: [\n          {\n            type: 'introduction',\n            dotPointId: 'BIO11-7.1',\n            title: 'Infectious Disease Introduction',\n            estimatedTime: 20,\n            priority: 'high',\n            reason: 'Foundation knowledge',\n            skills: ['understanding', 'recall']\n          },\n          {\n            type: 'deep_dive',\n            dotPointId: 'BIO11-7.1',\n            title: 'Pathogen Types & Characteristics',\n            estimatedTime: 35,\n            priority: 'high',\n            reason: 'Core concept mastery',\n            skills: ['analysis', 'evaluation']\n          },\n          {\n            type: 'virtual_microscope',\n            dotPointId: 'BIO11-7.1',\n            title: 'Pathogen Identification Lab',\n            estimatedTime: 25,\n            priority: 'high',\n            reason: 'Practical application',\n            skills: ['observation', 'identification']\n          },\n          {\n            type: 'assessment',\n            dotPointId: 'BIO11-7.1',\n            title: 'Module 7 Practice Test',\n            estimatedTime: 40,\n            priority: 'medium',\n            reason: 'Knowledge consolidation',\n            skills: ['synthesis', 'evaluation']\n          }\n        ],\n        expectedOutcomes: [\n          'Complete understanding of infectious disease module',\n          'High confidence across all dot points',\n          'Ready for assessment'\n        ]\n      },\n      \n      exam_prep: {\n        id: 'exam_prep',\n        name: ' Exam Preparation',\n        description: 'Focused preparation for upcoming assessments',\n        duration: '1-2 weeks before exam',\n        difficulty: 'challenging',\n        activities: [\n          {\n            type: 'practice_exam',\n            dotPointId: 'multiple',\n            title: 'HSC Biology Practice Paper',\n            estimatedTime: 180,\n            priority: 'high',\n            reason: 'Exam simulation',\n            skills: ['all_skills', 'time_management']\n          },\n          {\n            type: 'weak_area_drill',\n            dotPointId: 'BIO11-7.2',\n            title: 'Immune Response Deep Dive',\n            estimatedTime: 45,\n            priority: 'high',\n            reason: 'Address identified weakness',\n            skills: ['analysis', 'synthesis']\n          },\n          {\n            type: 'speed_review',\n            dotPointId: 'all',\n            title: 'Rapid Concept Review',\n            estimatedTime: 30,\n            priority: 'medium',\n            reason: 'Last-minute consolidation',\n            skills: ['recall', 'overview']\n          }\n        ],\n        expectedOutcomes: [\n          'Exam-ready confidence level',\n          'Optimized performance under time pressure',\n          'Weakness areas addressed'\n        ]\n      }\n    };\n\n    return paths;\n  };\n\n  const selectPath = (pathId) => {\n    setSelectedPath(pathId);\n  };\n\n  const startActivity = (activity) => {\n    // Navigate to the specific activity\n    console.log('Starting activity:', activity);\n    // In a real app, this would route to the appropriate component\n  };\n\n  const getActivityIcon = (type) => {\n    const icons = {\n      review: '',\n      practice: '',\n      quiz: '',\n      virtual_lab: '',\n      virtual_microscope: '',\n      assessment: '',\n      introduction: '',\n      deep_dive: '',\n      practice_exam: '',\n      weak_area_drill: '',\n      speed_review: ''\n    };\n    return icons[type] || '';\n  };\n\n  const getPriorityColor = (priority) => {\n    const colors = {\n      high: 'text-red-600 bg-red-100',\n      medium: 'text-yellow-600 bg-yellow-100',\n      low: 'text-green-600 bg-green-100'\n    };\n    return colors[priority] || 'text-gray-600 bg-gray-100';\n  };\n\n  if (loading) {\n    return (\n      <div className={`bg-white rounded-lg p-6 shadow-lg ${className}`}>\n        <div className=\"animate-pulse space-y-4\">\n          <div className=\"h-6 bg-gray-300 rounded w-1/3\"></div>\n          <div className=\"space-y-3\">\n            {[1, 2, 3].map(i => (\n              <div key={i} className=\"h-20 bg-gray-300 rounded\"></div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`bg-white rounded-lg p-6 shadow-lg ${className}`}>\n      {/* Header */}\n      <div className=\"flex justify-between items-center mb-6\">\n        <div>\n          <h3 className=\"text-xl font-bold text-gray-800\">Personalized Study Paths</h3>\n          <p className=\"text-sm text-gray-600\">AI-powered recommendations based on your progress</p>\n        </div>\n        \n        {/* Timeframe selector */}\n        <div className=\"flex space-x-2\">\n          {[\n            { value: 'week', label: 'This Week' },\n            { value: 'month', label: 'This Month' },\n            { value: 'exam', label: 'Exam Prep' }\n          ].map(option => (\n            <button\n              key={option.value}\n              onClick={() => setTimeframe(option.value)}\n              className={`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${\n                timeframe === option.value\n                  ? 'bg-blue-500 text-white'\n                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              {option.label}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Study Path Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\n        {Object.values(recommendations || {}).map(path => (\n          <motion.div\n            key={path.id}\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            whileHover={{ scale: 1.02 }}\n            className={`border-2 rounded-lg p-4 cursor-pointer transition-all ${\n              selectedPath === path.id\n                ? 'border-blue-500 bg-blue-50'\n                : 'border-gray-200 hover:border-gray-300'\n            }`}\n            onClick={() => selectPath(path.id)}\n          >\n            <div className=\"flex justify-between items-start mb-2\">\n              <h4 className=\"font-semibold text-gray-800\">{path.name}</h4>\n              <span className=\"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full\">\n                {path.duration}\n              </span>\n            </div>\n            \n            <p className=\"text-sm text-gray-600 mb-3\">{path.description}</p>\n            \n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-xs text-blue-600 font-medium\">\n                {path.activities.length} activities\n              </span>\n              <span className={`text-xs px-2 py-1 rounded-full ${\n                path.difficulty === 'adaptive' ? 'bg-purple-100 text-purple-600' :\n                path.difficulty === 'review' ? 'bg-green-100 text-green-600' :\n                path.difficulty === 'progressive' ? 'bg-blue-100 text-blue-600' :\n                'bg-red-100 text-red-600'\n              }`}>\n                {path.difficulty}\n              </span>\n            </div>\n          </motion.div>\n        ))}\n      </div>\n\n      {/* Detailed Path View */}\n      <AnimatePresence>\n        {selectedPath && recommendations[selectedPath] && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: 'auto' }}\n            exit={{ opacity: 0, height: 0 }}\n            className=\"border-t pt-6\"\n          >\n            <div className=\"mb-4\">\n              <h4 className=\"text-lg font-semibold text-gray-800 mb-2\">\n                {recommendations[selectedPath].name} - Activity Plan\n              </h4>\n              \n              {/* Expected Outcomes */}\n              <div className=\"bg-green-50 border border-green-200 rounded-lg p-3 mb-4\">\n                <h5 className=\"font-medium text-green-800 mb-2\"> Expected Outcomes:</h5>\n                <ul className=\"text-sm text-green-700 space-y-1\">\n                  {recommendations[selectedPath].expectedOutcomes.map((outcome, index) => (\n                    <li key={index}> {outcome}</li>\n                  ))}\n                </ul>\n              </div>\n            </div>\n\n            {/* Activity List */}\n            <div className=\"space-y-3\">\n              {recommendations[selectedPath].activities.map((activity, index) => (\n                <motion.div\n                  key={index}\n                  initial={{ opacity: 0, x: -20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  transition={{ delay: index * 0.1 }}\n                  className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\"\n                >\n                  <div className=\"flex items-center space-x-3 flex-1\">\n                    <div className=\"text-2xl\">{getActivityIcon(activity.type)}</div>\n                    \n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center space-x-2 mb-1\">\n                        <h5 className=\"font-medium text-gray-800\">{activity.title}</h5>\n                        <span className={`text-xs px-2 py-1 rounded-full ${getPriorityColor(activity.priority)}`}>\n                          {activity.priority}\n                        </span>\n                      </div>\n                      \n                      <p className=\"text-sm text-gray-600 mb-1\">{activity.reason}</p>\n                      \n                      <div className=\"flex items-center space-x-4 text-xs text-gray-500\">\n                        <span> {activity.estimatedTime}min</span>\n                        <span> {activity.dotPointId}</span>\n                        {activity.skills && (\n                          <span> {activity.skills.join(', ')}</span>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <button\n                    onClick={() => startActivity(activity)}\n                    className=\"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors\"\n                  >\n                    Start\n                  </button>\n                </motion.div>\n              ))}\n            </div>\n            \n            {/* Path Actions */}\n            <div className=\"flex justify-between items-center mt-6 pt-4 border-t\">\n              <button\n                onClick={() => setSelectedPath(null)}\n                className=\"text-gray-600 hover:text-gray-800 font-medium\"\n              >\n                 Back to paths\n              </button>\n              \n              <button\n                onClick={() => startActivity(recommendations[selectedPath].activities[0])}\n                className=\"bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg font-medium transition-colors\"\n              >\n                Start Study Path\n              </button>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n};\n\nexport default StudyPathRecommendations;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\analytics\\AssessmentAnalyticsDashboard.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'selectedMetric' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":24},{"ruleId":"no-unused-vars","severity":1,"message":"'setSelectedMetric' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":8,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":43},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchAnalytics'. Either include it or remove the dependency array.","line":12,"column":6,"nodeType":"ArrayExpression","endLine":12,"endColumn":34,"suggestions":[{"desc":"Update the dependencies array to be: [userId, subject, timeframe, fetchAnalytics]","fix":{"range":[446,474],"text":"[userId, subject, timeframe, fetchAnalytics]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\n\nconst AssessmentAnalyticsDashboard = ({ userId, subject = 'biology', className = '' }) => {\n  const [analytics, setAnalytics] = useState(null);\n  const [timeframe, setTimeframe] = useState('7d');\n  const [loading, setLoading] = useState(true);\n  const [selectedMetric, setSelectedMetric] = useState('overview');\n\n  useEffect(() => {\n    fetchAnalytics();\n  }, [userId, subject, timeframe]);\n\n  const fetchAnalytics = async () => {\n    try {\n      setLoading(true);\n      \n      // Fetch adaptive learning analytics\n      const response = await fetch(`/api/adaptive-learning/analytics/${userId}?timeframe=${timeframe}`);\n      const data = await response.json();\n      \n      if (data.success) {\n        setAnalytics(data.analytics);\n      }\n    } catch (error) {\n      console.error('Error fetching analytics:', error);\n      // Mock data for demonstration\n      setAnalytics(generateMockAnalytics());\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const generateMockAnalytics = () => ({\n    timeframe: timeframe,\n    overview: {\n      totalQuestions: 147,\n      accuracy: 0.78,\n      averageMastery: 0.65,\n      averageCognitiveLoad: 0.62,\n      adaptationsMade: 23,\n      studyTime: 18.5, // hours\n      sessionsCompleted: 12\n    },\n    performanceByModule: {\n      'module5': { name: 'Heredity', mastery: 0.82, questions: 45, accuracy: 0.84 },\n      'module6': { name: 'Genetic Change', mastery: 0.71, questions: 38, accuracy: 0.79 },\n      'module7': { name: 'Infectious Disease', mastery: 0.45, questions: 41, accuracy: 0.71 },\n      'module8': { name: 'Non-infectious Disease', mastery: 0.62, questions: 23, accuracy: 0.76 }\n    },\n    performanceByDifficulty: {\n      easy: { attempted: 52, correct: 47, accuracy: 0.90, avgTime: 15.3 },\n      medium: { attempted: 68, correct: 51, accuracy: 0.75, avgTime: 22.7 },\n      hard: { attempted: 27, correct: 16, accuracy: 0.59, avgTime: 35.2 }\n    },\n    learningTrends: {\n      dailyAccuracy: [0.65, 0.72, 0.69, 0.78, 0.81, 0.79, 0.84],\n      dailySessions: [2, 3, 1, 2, 3, 2, 3],\n      weeklyMastery: [0.45, 0.52, 0.58, 0.65]\n    },\n    strongestAreas: [\n      { dotPoint: 'BIO11-5.1', name: 'Meiosis Process', mastery: 0.92 },\n      { dotPoint: 'BIO11-5.2', name: 'Inheritance Patterns', mastery: 0.88 },\n      { dotPoint: 'BIO11-6.1', name: 'Genetic Mutations', mastery: 0.85 }\n    ],\n    weakestAreas: [\n      { dotPoint: 'BIO11-7.2', name: 'Adaptive Immunity', mastery: 0.34 },\n      { dotPoint: 'BIO11-7.1', name: 'Pathogen Structure', mastery: 0.41 },\n      { dotPoint: 'BIO11-8.1', name: 'Disease Classification', mastery: 0.47 }\n    ],\n    studyRecommendations: [\n      {\n        type: 'focus_area',\n        priority: 'high',\n        message: 'Spend more time on Module 7 (Infectious Disease) - current mastery only 45%'\n      },\n      {\n        type: 'difficulty_adjustment',\n        priority: 'medium',\n        message: 'Consider more medium-difficulty questions to bridge the gap between easy and hard'\n      },\n      {\n        type: 'spaced_repetition',\n        priority: 'medium',\n        message: '5 concepts due for review to maintain long-term retention'\n      }\n    ],\n    cognitiveLoadAnalysis: {\n      current: 0.62,\n      optimal: 0.70,\n      trend: 'increasing',\n      factors: [\n        'Response times have increased by 15% this week',\n        'Accuracy on hard questions suggests cognitive overload',\n        'Best performance occurs during morning study sessions'\n      ]\n    }\n  });\n\n  const renderOverviewMetrics = () => (\n    <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6\">\n      {[\n        { label: 'Total Questions', value: analytics.overview.totalQuestions, icon: '', color: 'blue' },\n        { label: 'Accuracy', value: `${Math.round(analytics.overview.accuracy * 100)}%`, icon: '', color: 'green' },\n        { label: 'Average Mastery', value: `${Math.round(analytics.overview.averageMastery * 100)}%`, icon: '', color: 'purple' },\n        { label: 'Study Hours', value: `${analytics.overview.studyTime}h`, icon: '', color: 'orange' }\n      ].map((metric, index) => (\n        <motion.div\n          key={index}\n          initial={{ opacity: 0, scale: 0.9 }}\n          animate={{ opacity: 1, scale: 1 }}\n          transition={{ delay: index * 0.1 }}\n          className={`bg-gradient-to-br from-${metric.color}-50 to-${metric.color}-100 p-4 rounded-lg border border-${metric.color}-200`}\n        >\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-gray-600\">{metric.label}</p>\n              <p className=\"text-2xl font-bold text-gray-800\">{metric.value}</p>\n            </div>\n            <div className=\"text-3xl\">{metric.icon}</div>\n          </div>\n        </motion.div>\n      ))}\n    </div>\n  );\n\n  const renderPerformanceByModule = () => (\n    <div className=\"bg-white p-4 rounded-lg border mb-6\">\n      <h4 className=\"text-lg font-semibold text-gray-800 mb-4\"> Performance by Module</h4>\n      <div className=\"space-y-3\">\n        {Object.entries(analytics.performanceByModule).map(([moduleId, module]) => (\n          <div key={moduleId} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n            <div className=\"flex-1\">\n              <div className=\"flex justify-between items-center mb-2\">\n                <span className=\"font-medium text-gray-800\">{module.name}</span>\n                <span className=\"text-sm text-gray-600\">{module.questions} questions</span>\n              </div>\n              <div className=\"flex items-center space-x-4\">\n                <div className=\"flex-1 bg-gray-200 rounded-full h-2\">\n                  <motion.div\n                    className={`h-2 rounded-full ${\n                      module.mastery > 0.8 ? 'bg-green-500' :\n                      module.mastery > 0.6 ? 'bg-yellow-500' : 'bg-red-500'\n                    }`}\n                    initial={{ width: 0 }}\n                    animate={{ width: `${module.mastery * 100}%` }}\n                    transition={{ duration: 1, delay: 0.2 }}\n                  />\n                </div>\n                <span className=\"text-sm font-semibold text-gray-700\">\n                  {Math.round(module.mastery * 100)}%\n                </span>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n\n  const renderDifficultyAnalysis = () => (\n    <div className=\"bg-white p-4 rounded-lg border mb-6\">\n      <h4 className=\"text-lg font-semibold text-gray-800 mb-4\"> Performance by Difficulty</h4>\n      <div className=\"grid grid-cols-3 gap-4\">\n        {Object.entries(analytics.performanceByDifficulty).map(([difficulty, data]) => (\n          <div key={difficulty} className=\"text-center\">\n            <div className={`w-16 h-16 mx-auto mb-2 rounded-full flex items-center justify-center text-white font-bold text-lg ${\n              difficulty === 'easy' ? 'bg-green-500' :\n              difficulty === 'medium' ? 'bg-yellow-500' : 'bg-red-500'\n            }`}>\n              {Math.round(data.accuracy * 100)}%\n            </div>\n            <p className=\"font-medium text-gray-800 capitalize\">{difficulty}</p>\n            <p className=\"text-sm text-gray-600\">{data.attempted} attempted</p>\n            <p className=\"text-xs text-gray-500\">Avg: {data.avgTime}s</p>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n\n  const renderLearningTrends = () => (\n    <div className=\"bg-white p-4 rounded-lg border mb-6\">\n      <h4 className=\"text-lg font-semibold text-gray-800 mb-4\"> Learning Trends</h4>\n      \n      {/* Daily Accuracy Chart */}\n      <div className=\"mb-6\">\n        <h5 className=\"font-medium text-gray-700 mb-3\">Daily Accuracy (Last 7 Days)</h5>\n        <div className=\"flex items-end space-x-2 h-32\">\n          {analytics.learningTrends.dailyAccuracy.map((accuracy, index) => (\n            <div key={index} className=\"flex-1 flex flex-col items-center\">\n              <motion.div\n                className=\"bg-blue-500 rounded-t w-full\"\n                initial={{ height: 0 }}\n                animate={{ height: `${accuracy * 100}%` }}\n                transition={{ duration: 0.8, delay: index * 0.1 }}\n              />\n              <span className=\"text-xs text-gray-500 mt-1\">\n                {['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'][index]}\n              </span>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Weekly Mastery Progress */}\n      <div>\n        <h5 className=\"font-medium text-gray-700 mb-3\">Weekly Mastery Progress</h5>\n        <div className=\"flex items-end space-x-3 h-20\">\n          {analytics.learningTrends.weeklyMastery.map((mastery, index) => (\n            <div key={index} className=\"flex-1 flex flex-col items-center\">\n              <motion.div\n                className=\"bg-purple-500 rounded-t w-full\"\n                initial={{ height: 0 }}\n                animate={{ height: `${mastery * 100}%` }}\n                transition={{ duration: 0.8, delay: index * 0.15 }}\n              />\n              <span className=\"text-xs text-gray-500 mt-1\">Week {index + 1}</span>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderStrengthsAndWeaknesses = () => (\n    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6\">\n      {/* Strongest Areas */}\n      <div className=\"bg-green-50 p-4 rounded-lg border border-green-200\">\n        <h4 className=\"text-lg font-semibold text-green-800 mb-3\"> Strongest Areas</h4>\n        <div className=\"space-y-2\">\n          {analytics.strongestAreas.map((area, index) => (\n            <div key={index} className=\"flex justify-between items-center p-2 bg-white rounded\">\n              <div>\n                <p className=\"font-medium text-gray-800\">{area.name}</p>\n                <p className=\"text-xs text-gray-600\">{area.dotPoint}</p>\n              </div>\n              <span className=\"font-bold text-green-600\">{Math.round(area.mastery * 100)}%</span>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Weakest Areas */}\n      <div className=\"bg-red-50 p-4 rounded-lg border border-red-200\">\n        <h4 className=\"text-lg font-semibold text-red-800 mb-3\"> Areas for Improvement</h4>\n        <div className=\"space-y-2\">\n          {analytics.weakestAreas.map((area, index) => (\n            <div key={index} className=\"flex justify-between items-center p-2 bg-white rounded\">\n              <div>\n                <p className=\"font-medium text-gray-800\">{area.name}</p>\n                <p className=\"text-xs text-gray-600\">{area.dotPoint}</p>\n              </div>\n              <span className=\"font-bold text-red-600\">{Math.round(area.mastery * 100)}%</span>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderRecommendations = () => (\n    <div className=\"bg-blue-50 p-4 rounded-lg border border-blue-200\">\n      <h4 className=\"text-lg font-semibold text-blue-800 mb-3\"> AI Recommendations</h4>\n      <div className=\"space-y-3\">\n        {analytics.studyRecommendations.map((rec, index) => (\n          <div key={index} className={`p-3 rounded-lg border-l-4 ${\n            rec.priority === 'high' ? 'border-red-500 bg-red-50' :\n            rec.priority === 'medium' ? 'border-yellow-500 bg-yellow-50' :\n            'border-green-500 bg-green-50'\n          }`}>\n            <div className=\"flex items-center space-x-2 mb-1\">\n              <span className={`text-xs px-2 py-1 rounded-full font-medium ${\n                rec.priority === 'high' ? 'bg-red-200 text-red-800' :\n                rec.priority === 'medium' ? 'bg-yellow-200 text-yellow-800' :\n                'bg-green-200 text-green-800'\n              }`}>\n                {rec.priority} priority\n              </span>\n              <span className=\"text-sm font-medium text-gray-700 capitalize\">\n                {rec.type.replace('_', ' ')}\n              </span>\n            </div>\n            <p className=\"text-sm text-gray-700\">{rec.message}</p>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n\n  if (loading) {\n    return (\n      <div className={`bg-white rounded-lg p-6 shadow-lg ${className}`}>\n        <div className=\"animate-pulse space-y-4\">\n          <div className=\"h-6 bg-gray-300 rounded w-1/3\"></div>\n          <div className=\"grid grid-cols-4 gap-4\">\n            {[1, 2, 3, 4].map(i => (\n              <div key={i} className=\"h-20 bg-gray-300 rounded\"></div>\n            ))}\n          </div>\n          <div className=\"h-40 bg-gray-300 rounded\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`bg-gray-50 ${className}`}>\n      {/* Header */}\n      <div className=\"bg-white p-6 rounded-lg shadow-sm mb-6\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-800\">Assessment Analytics</h2>\n            <p className=\"text-gray-600\">Detailed insights into your learning progress</p>\n          </div>\n          \n          {/* Timeframe selector */}\n          <div className=\"flex space-x-2\">\n            {[\n              { value: '7d', label: '7 Days' },\n              { value: '30d', label: '30 Days' },\n              { value: '90d', label: '90 Days' }\n            ].map(option => (\n              <button\n                key={option.value}\n                onClick={() => setTimeframe(option.value)}\n                className={`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${\n                  timeframe === option.value\n                    ? 'bg-blue-500 text-white'\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                {option.label}\n              </button>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Overview Metrics */}\n      {renderOverviewMetrics()}\n\n      {/* Main Analytics Content */}\n      <div className=\"space-y-6\">\n        {renderPerformanceByModule()}\n        {renderDifficultyAnalysis()}\n        {renderLearningTrends()}\n        {renderStrengthsAndWeaknesses()}\n        {renderRecommendations()}\n      </div>\n    </div>\n  );\n};\n\nexport default AssessmentAnalyticsDashboard;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\educator\\TeacherParentDashboard.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchDashboardData'. Either include it or remove the dependency array.","line":19,"column":6,"nodeType":"ArrayExpression","endLine":19,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [userId, timeframe, fetchDashboardData]","fix":{"range":[650,669],"text":"[userId, timeframe, fetchDashboardData]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nconst TeacherParentDashboard = ({ \n  userType = 'teacher', // 'teacher' or 'parent'\n  userId, \n  className = '' \n}) => {\n  const [selectedView, setSelectedView] = useState('overview');\n  const [students, setStudents] = useState([]);\n  const [classData, setClassData] = useState(null);\n  const [timeframe, setTimeframe] = useState('week');\n  const [loading, setLoading] = useState(true);\n  const [selectedStudent, setSelectedStudent] = useState(null);\n  const [alerts, setAlerts] = useState([]);\n\n  useEffect(() => {\n    fetchDashboardData();\n  }, [userId, timeframe]);\n\n  const fetchDashboardData = async () => {\n    try {\n      setLoading(true);\n      \n      // Mock data - in production, this would come from API\n      const mockData = generateMockData();\n      setStudents(mockData.students);\n      setClassData(mockData.classData);\n      setAlerts(mockData.alerts);\n      \n    } catch (error) {\n      console.error('Error fetching dashboard data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const generateMockData = () => ({\n    students: [\n      {\n        id: 'student1',\n        name: 'Sarah Johnson',\n        yearLevel: 'Year 12',\n        subjects: ['Biology', 'Chemistry'],\n        performance: {\n          currentGrade: 85,\n          trend: 'improving',\n          weeklyHours: 12.5,\n          accuracy: 0.78,\n          mastery: {\n            'BIO11-7.1': 0.92,\n            'BIO11-7.2': 0.65,\n            'BIO11-8.1': 0.73\n          },\n          weakAreas: ['Adaptive Immunity', 'Disease Classification'],\n          strengths: ['Pathogen Structure', 'Meiosis'],\n          streakDays: 8,\n          lastActive: '2 hours ago'\n        },\n        socialLearning: {\n          studyGroups: 2,\n          peerInteractions: 15,\n          helpProvided: 8,\n          helpReceived: 3,\n          collaborationRating: 4.2\n        },\n        behavioralMetrics: {\n          engagement: 0.85,\n          persistence: 0.78,\n          curiosity: 0.82,\n          selfRegulation: 0.75\n        }\n      },\n      {\n        id: 'student2',\n        name: 'Michael Chen',\n        yearLevel: 'Year 12',\n        subjects: ['Biology', 'Physics'],\n        performance: {\n          currentGrade: 91,\n          trend: 'stable',\n          weeklyHours: 15.2,\n          accuracy: 0.89,\n          mastery: {\n            'BIO11-7.1': 0.88,\n            'BIO11-7.2': 0.94,\n            'BIO11-8.1': 0.86\n          },\n          weakAreas: ['Genetic Mutations'],\n          strengths: ['Immune System', 'Cell Biology'],\n          streakDays: 15,\n          lastActive: '30 minutes ago'\n        },\n        socialLearning: {\n          studyGroups: 3,\n          peerInteractions: 22,\n          helpProvided: 12,\n          helpReceived: 5,\n          collaborationRating: 4.8\n        },\n        behavioralMetrics: {\n          engagement: 0.92,\n          persistence: 0.89,\n          curiosity: 0.91,\n          selfRegulation: 0.87\n        }\n      },\n      {\n        id: 'student3',\n        name: 'Emma Rodriguez',\n        yearLevel: 'Year 12',\n        subjects: ['Biology', 'Chemistry'],\n        performance: {\n          currentGrade: 73,\n          trend: 'declining',\n          weeklyHours: 8.3,\n          accuracy: 0.62,\n          mastery: {\n            'BIO11-7.1': 0.45,\n            'BIO11-7.2': 0.38,\n            'BIO11-8.1': 0.67\n          },\n          weakAreas: ['Adaptive Immunity', 'Pathogen Structure', 'Inheritance'],\n          strengths: ['Basic Cell Structure'],\n          streakDays: 2,\n          lastActive: '1 day ago'\n        },\n        socialLearning: {\n          studyGroups: 1,\n          peerInteractions: 8,\n          helpProvided: 2,\n          helpReceived: 7,\n          collaborationRating: 3.1\n        },\n        behavioralMetrics: {\n          engagement: 0.58,\n          persistence: 0.52,\n          curiosity: 0.65,\n          selfRegulation: 0.48\n        }\n      }\n    ],\n    classData: {\n      totalStudents: 25,\n      averageGrade: 82.4,\n      averageStudyTime: 11.8,\n      averageAccuracy: 0.76,\n      topicProgress: {\n        'Heredity': 0.85,\n        'Genetic Change': 0.72,\n        'Infectious Disease': 0.68,\n        'Non-infectious Disease': 0.59\n      },\n      weeklyEngagement: [0.78, 0.82, 0.75, 0.79, 0.84, 0.81, 0.86],\n      assignmentCompletion: 0.89,\n      collaborationMetrics: {\n        studyGroupParticipation: 0.72,\n        peerTutoringEvents: 156,\n        knowledgeSharing: 0.68\n      }\n    },\n    alerts: [\n      {\n        id: 'alert1',\n        type: 'performance_decline',\n        severity: 'high',\n        student: 'Emma Rodriguez',\n        message: 'Emma\\'s performance has declined by 15% this week. Consider intervention.',\n        timestamp: '2 hours ago',\n        suggestions: [\n          'Schedule one-on-one session',\n          'Assign to peer tutor',\n          'Review study methods'\n        ]\n      },\n      {\n        id: 'alert2',\n        type: 'engagement_low',\n        severity: 'medium',\n        student: 'James Wilson',\n        message: 'James has been inactive for 3 days. Last active: Monday.',\n        timestamp: '5 hours ago',\n        suggestions: [\n          'Send motivation message',\n          'Check personal circumstances',\n          'Adjust difficulty level'\n        ]\n      },\n      {\n        id: 'alert3',\n        type: 'milestone_achieved',\n        severity: 'positive',\n        student: 'Sarah Johnson',\n        message: 'Sarah achieved 90% mastery in Module 7. Ready for advancement.',\n        timestamp: '1 day ago',\n        suggestions: [\n          'Provide advanced materials',\n          'Assign as peer tutor',\n          'Celebrate achievement'\n        ]\n      }\n    ]\n  });\n\n  const renderOverview = () => (\n    <div className=\"space-y-6\">\n      {/* Key Metrics */}\n      <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n        {[\n          { \n            label: userType === 'teacher' ? 'Total Students' : 'Children', \n            value: userType === 'teacher' ? classData.totalStudents : 1, \n            icon: '', \n            color: 'blue' \n          },\n          { \n            label: 'Average Grade', \n            value: `${classData.averageGrade}%`, \n            icon: '', \n            color: 'green' \n          },\n          { \n            label: 'Study Hours/Week', \n            value: `${classData.averageStudyTime}h`, \n            icon: '', \n            color: 'purple' \n          },\n          { \n            label: 'Accuracy Rate', \n            value: `${Math.round(classData.averageAccuracy * 100)}%`, \n            icon: '', \n            color: 'orange' \n          }\n        ].map((metric, index) => (\n          <motion.div\n            key={index}\n            initial={{ opacity: 0, scale: 0.9 }}\n            animate={{ opacity: 1, scale: 1 }}\n            transition={{ delay: index * 0.1 }}\n            className={`bg-gradient-to-br from-${metric.color}-50 to-${metric.color}-100 p-4 rounded-lg border border-${metric.color}-200`}\n          >\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">{metric.label}</p>\n                <p className=\"text-2xl font-bold text-gray-800\">{metric.value}</p>\n              </div>\n              <div className=\"text-3xl\">{metric.icon}</div>\n            </div>\n          </motion.div>\n        ))}\n      </div>\n\n      {/* Weekly Engagement Chart */}\n      <div className=\"bg-white p-6 rounded-lg border\">\n        <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Weekly Engagement Trends</h3>\n        <div className=\"flex items-end space-x-2 h-32\">\n          {classData.weeklyEngagement.map((engagement, index) => (\n            <div key={index} className=\"flex-1 flex flex-col items-center\">\n              <motion.div\n                className=\"bg-blue-500 rounded-t w-full\"\n                initial={{ height: 0 }}\n                animate={{ height: `${engagement * 100}%` }}\n                transition={{ duration: 0.8, delay: index * 0.1 }}\n              />\n              <span className=\"text-xs text-gray-500 mt-1\">\n                {['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'][index]}\n              </span>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Topic Progress */}\n      <div className=\"bg-white p-6 rounded-lg border\">\n        <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">HSC Module Progress</h3>\n        <div className=\"space-y-3\">\n          {Object.entries(classData.topicProgress).map(([topic, progress]) => (\n            <div key={topic}>\n              <div className=\"flex justify-between text-sm mb-1\">\n                <span className=\"font-medium text-gray-700\">{topic}</span>\n                <span className=\"text-gray-600\">{Math.round(progress * 100)}%</span>\n              </div>\n              <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                <motion.div\n                  className={`h-2 rounded-full ${\n                    progress > 0.8 ? 'bg-green-500' :\n                    progress > 0.6 ? 'bg-yellow-500' : 'bg-red-500'\n                  }`}\n                  initial={{ width: 0 }}\n                  animate={{ width: `${progress * 100}%` }}\n                  transition={{ duration: 1, delay: 0.2 }}\n                />\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderStudentList = () => (\n    <div className=\"space-y-4\">\n      {students.map((student, index) => (\n        <motion.div\n          key={student.id}\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: index * 0.1 }}\n          className=\"bg-white p-4 rounded-lg border hover:shadow-md transition-shadow cursor-pointer\"\n          onClick={() => setSelectedStudent(student)}\n        >\n          <div className=\"flex justify-between items-start\">\n            <div className=\"flex-1\">\n              <div className=\"flex items-center space-x-3 mb-2\">\n                <div className=\"w-10 h-10 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center text-white font-bold\">\n                  {student.name.split(' ').map(n => n[0]).join('')}\n                </div>\n                <div>\n                  <h3 className=\"font-semibold text-gray-800\">{student.name}</h3>\n                  <p className=\"text-sm text-gray-600\">{student.yearLevel}  {student.subjects.join(', ')}</p>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4 mt-3\">\n                <div className=\"text-center\">\n                  <div className={`text-lg font-bold ${\n                    student.performance.currentGrade >= 90 ? 'text-green-600' :\n                    student.performance.currentGrade >= 75 ? 'text-yellow-600' : 'text-red-600'\n                  }`}>\n                    {student.performance.currentGrade}%\n                  </div>\n                  <div className=\"text-xs text-gray-500\">Current Grade</div>\n                </div>\n                \n                <div className=\"text-center\">\n                  <div className=\"text-lg font-bold text-blue-600\">{student.performance.weeklyHours}h</div>\n                  <div className=\"text-xs text-gray-500\">Study Time</div>\n                </div>\n                \n                <div className=\"text-center\">\n                  <div className=\"text-lg font-bold text-purple-600\">{student.performance.streakDays}</div>\n                  <div className=\"text-xs text-gray-500\">Day Streak</div>\n                </div>\n                \n                <div className=\"text-center\">\n                  <div className={`text-lg font-bold ${\n                    student.performance.trend === 'improving' ? 'text-green-600' :\n                    student.performance.trend === 'stable' ? 'text-blue-600' : 'text-red-600'\n                  }`}>\n                    {student.performance.trend === 'improving' ? '' :\n                     student.performance.trend === 'stable' ? '' : ''}\n                  </div>\n                  <div className=\"text-xs text-gray-500 capitalize\">{student.performance.trend}</div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"text-right\">\n              <div className=\"text-sm text-gray-500 mb-2\">Last active: {student.performance.lastActive}</div>\n              <div className=\"flex space-x-2\">\n                {student.performance.weakAreas.length > 0 && (\n                  <span className=\"bg-red-100 text-red-600 text-xs px-2 py-1 rounded-full\">\n                     {student.performance.weakAreas.length} weak areas\n                  </span>\n                )}\n                <span className=\"bg-green-100 text-green-600 text-xs px-2 py-1 rounded-full\">\n                   {student.performance.strengths.length} strengths\n                </span>\n              </div>\n            </div>\n          </div>\n        </motion.div>\n      ))}\n    </div>\n  );\n\n  const renderAlerts = () => (\n    <div className=\"space-y-4\">\n      {alerts.map((alert, index) => (\n        <motion.div\n          key={alert.id}\n          initial={{ opacity: 0, x: -20 }}\n          animate={{ opacity: 1, x: 0 }}\n          transition={{ delay: index * 0.1 }}\n          className={`p-4 rounded-lg border-l-4 ${\n            alert.severity === 'high' ? 'border-red-500 bg-red-50' :\n            alert.severity === 'medium' ? 'border-yellow-500 bg-yellow-50' :\n            alert.severity === 'positive' ? 'border-green-500 bg-green-50' :\n            'border-blue-500 bg-blue-50'\n          }`}\n        >\n          <div className=\"flex justify-between items-start mb-2\">\n            <div>\n              <h4 className=\"font-semibold text-gray-800\">{alert.student}</h4>\n              <p className=\"text-sm text-gray-700\">{alert.message}</p>\n            </div>\n            <div className=\"text-right\">\n              <span className={`text-xs px-2 py-1 rounded-full font-medium ${\n                alert.severity === 'high' ? 'bg-red-200 text-red-800' :\n                alert.severity === 'medium' ? 'bg-yellow-200 text-yellow-800' :\n                alert.severity === 'positive' ? 'bg-green-200 text-green-800' :\n                'bg-blue-200 text-blue-800'\n              }`}>\n                {alert.severity}\n              </span>\n              <div className=\"text-xs text-gray-500 mt-1\">{alert.timestamp}</div>\n            </div>\n          </div>\n\n          {alert.suggestions && (\n            <div className=\"mt-3\">\n              <h5 className=\"text-sm font-medium text-gray-700 mb-2\">Suggested Actions:</h5>\n              <div className=\"flex flex-wrap gap-2\">\n                {alert.suggestions.map((suggestion, i) => (\n                  <button\n                    key={i}\n                    className=\"text-xs bg-white border border-gray-300 hover:border-gray-400 px-3 py-1 rounded-full transition-colors\"\n                  >\n                    {suggestion}\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n        </motion.div>\n      ))}\n    </div>\n  );\n\n  const renderStudentDetails = () => (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center space-x-3\">\n          <button\n            onClick={() => setSelectedStudent(null)}\n            className=\"text-blue-600 hover:text-blue-800\"\n          >\n             Back\n          </button>\n          <div className=\"w-12 h-12 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center text-white font-bold\">\n            {selectedStudent.name.split(' ').map(n => n[0]).join('')}\n          </div>\n          <div>\n            <h2 className=\"text-xl font-bold text-gray-800\">{selectedStudent.name}</h2>\n            <p className=\"text-gray-600\">{selectedStudent.yearLevel}  {selectedStudent.subjects.join(', ')}</p>\n          </div>\n        </div>\n      </div>\n\n      {/* Performance Overview */}\n      <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n        {[\n          { label: 'Current Grade', value: `${selectedStudent.performance.currentGrade}%`, color: 'blue' },\n          { label: 'Accuracy Rate', value: `${Math.round(selectedStudent.performance.accuracy * 100)}%`, color: 'green' },\n          { label: 'Study Hours', value: `${selectedStudent.performance.weeklyHours}h/week`, color: 'purple' },\n          { label: 'Streak Days', value: selectedStudent.performance.streakDays, color: 'orange' }\n        ].map((metric, index) => (\n          <div key={index} className={`bg-${metric.color}-50 p-4 rounded-lg border border-${metric.color}-200`}>\n            <div className=\"text-2xl font-bold text-gray-800\">{metric.value}</div>\n            <div className=\"text-sm text-gray-600\">{metric.label}</div>\n          </div>\n        ))}\n      </div>\n\n      {/* Mastery Levels */}\n      <div className=\"bg-white p-6 rounded-lg border\">\n        <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Concept Mastery</h3>\n        <div className=\"space-y-3\">\n          {Object.entries(selectedStudent.performance.mastery).map(([concept, level]) => (\n            <div key={concept}>\n              <div className=\"flex justify-between text-sm mb-1\">\n                <span className=\"font-medium text-gray-700\">{concept}</span>\n                <span className=\"text-gray-600\">{Math.round(level * 100)}%</span>\n              </div>\n              <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                <motion.div\n                  className={`h-2 rounded-full ${\n                    level > 0.8 ? 'bg-green-500' :\n                    level > 0.6 ? 'bg-yellow-500' : 'bg-red-500'\n                  }`}\n                  initial={{ width: 0 }}\n                  animate={{ width: `${level * 100}%` }}\n                  transition={{ duration: 1, delay: 0.2 }}\n                />\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Social Learning */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <div className=\"bg-white p-6 rounded-lg border\">\n          <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Social Learning</h3>\n          <div className=\"space-y-3\">\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600\">Study Groups</span>\n              <span className=\"font-medium\">{selectedStudent.socialLearning.studyGroups}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600\">Peer Interactions</span>\n              <span className=\"font-medium\">{selectedStudent.socialLearning.peerInteractions}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600\">Help Provided</span>\n              <span className=\"font-medium text-green-600\">{selectedStudent.socialLearning.helpProvided}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600\">Help Received</span>\n              <span className=\"font-medium text-blue-600\">{selectedStudent.socialLearning.helpReceived}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600\">Collaboration Rating</span>\n              <span className=\"font-medium\"> {selectedStudent.socialLearning.collaborationRating}/5</span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white p-6 rounded-lg border\">\n          <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Learning Behavior</h3>\n          <div className=\"space-y-3\">\n            {Object.entries(selectedStudent.behavioralMetrics).map(([metric, value]) => (\n              <div key={metric}>\n                <div className=\"flex justify-between text-sm mb-1\">\n                  <span className=\"font-medium text-gray-700 capitalize\">{metric.replace(/([A-Z])/g, ' $1')}</span>\n                  <span className=\"text-gray-600\">{Math.round(value * 100)}%</span>\n                </div>\n                <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                  <div\n                    className={`h-2 rounded-full ${\n                      value > 0.8 ? 'bg-green-500' :\n                      value > 0.6 ? 'bg-yellow-500' : 'bg-red-500'\n                    }`}\n                    style={{ width: `${value * 100}%` }}\n                  />\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  const views = [\n    { id: 'overview', name: 'Overview', icon: '' },\n    { id: 'students', name: userType === 'teacher' ? 'Students' : 'My Child', icon: '' },\n    { id: 'alerts', name: 'Alerts', icon: '' },\n    { id: 'reports', name: 'Reports', icon: '' }\n  ];\n\n  if (loading) {\n    return (\n      <div className={`bg-gray-50 rounded-lg p-6 ${className}`}>\n        <div className=\"animate-pulse space-y-4\">\n          <div className=\"h-8 bg-gray-300 rounded w-1/3\"></div>\n          <div className=\"grid grid-cols-4 gap-4\">\n            {[1, 2, 3, 4].map(i => (\n              <div key={i} className=\"h-20 bg-gray-300 rounded\"></div>\n            ))}\n          </div>\n          <div className=\"h-40 bg-gray-300 rounded\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`bg-gray-50 ${className}`}>\n      {/* Header */}\n      <div className=\"bg-white p-6 rounded-lg shadow-sm mb-6\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-800\">\n              {userType === 'teacher' ? 'Teacher Dashboard' : 'Parent Dashboard'}\n            </h1>\n            <p className=\"text-gray-600\">\n              {userType === 'teacher' \n                ? 'Monitor and support your students\\' learning journey' \n                : 'Track your child\\'s academic progress'\n              }\n            </p>\n          </div>\n          \n          {/* Timeframe selector */}\n          <div className=\"flex space-x-2\">\n            {[\n              { value: 'week', label: 'This Week' },\n              { value: 'month', label: 'This Month' },\n              { value: 'term', label: 'This Term' }\n            ].map(option => (\n              <button\n                key={option.value}\n                onClick={() => setTimeframe(option.value)}\n                className={`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${\n                  timeframe === option.value\n                    ? 'bg-blue-500 text-white'\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                {option.label}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Navigation */}\n        <div className=\"flex space-x-1 mt-4\">\n          {views.map(view => (\n            <button\n              key={view.id}\n              onClick={() => {\n                setSelectedView(view.id);\n                setSelectedStudent(null);\n              }}\n              className={`flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\n                selectedView === view.id\n                  ? 'bg-blue-500 text-white'\n                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              <span>{view.icon}</span>\n              <span>{view.name}</span>\n              {view.id === 'alerts' && alerts.length > 0 && (\n                <span className=\"bg-red-500 text-white text-xs rounded-full px-2 py-1\">\n                  {alerts.length}\n                </span>\n              )}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Content */}\n      <AnimatePresence mode=\"wait\">\n        <motion.div\n          key={selectedStudent ? 'student-detail' : selectedView}\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          exit={{ opacity: 0, y: -20 }}\n          transition={{ duration: 0.3 }}\n        >\n          {selectedStudent ? renderStudentDetails() :\n           selectedView === 'overview' ? renderOverview() :\n           selectedView === 'students' ? renderStudentList() :\n           selectedView === 'alerts' ? renderAlerts() :\n           renderOverview()}\n        </motion.div>\n      </AnimatePresence>\n    </div>\n  );\n};\n\nexport default TeacherParentDashboard;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\feedback\\EmptyState.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\feedback\\ErrorState.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\feedback\\LoadingState.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\feedback\\OfflineNotice.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\gamification\\AchievementGallery.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchAchievements'. Either include it or remove the dependency array.","line":12,"column":6,"nodeType":"ArrayExpression","endLine":12,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [fetchAchievements, userId]","fix":{"range":[450,458],"text":"[fetchAchievements, userId]"}}]},{"ruleId":"no-unused-vars","severity":1,"message":"'showNewAchievements' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":29,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nconst AchievementGallery = ({ userId, className = '' }) => {\n  const [achievements, setAchievements] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [newAchievements, setNewAchievements] = useState([]);\n\n  useEffect(() => {\n    fetchAchievements();\n  }, [userId]);\n\n  const fetchAchievements = async () => {\n    try {\n      const response = await fetch(`/api/gamification/achievements/user/${userId}`);\n      const data = await response.json();\n      \n      if (data.success) {\n        setAchievements(data);\n      }\n    } catch (error) {\n      console.error('Error fetching achievements:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const showNewAchievements = (newAchievementList) => {\n    setNewAchievements(newAchievementList);\n    setTimeout(() => setNewAchievements([]), 5000);\n  };\n\n  const categories = [\n    { id: 'all', name: 'All', icon: '' },\n    { id: 'learning', name: 'Learning', icon: '' },\n    { id: 'streak', name: 'Streaks', icon: '' },\n    { id: 'mastery', name: 'Mastery', icon: '' },\n    { id: 'social', name: 'Social', icon: '' }\n  ];\n\n  const getFilteredAchievements = () => {\n    if (!achievements) return [];\n    \n    if (selectedCategory === 'all') {\n      return achievements.achievements;\n    }\n    \n    return achievements.achievements.filter(a => a.category === selectedCategory);\n  };\n\n  if (loading) {\n    return (\n      <div className={`bg-white rounded-lg p-4 ${className}`}>\n        <div className=\"animate-pulse space-y-4\">\n          <div className=\"h-6 bg-gray-300 rounded w-1/3\"></div>\n          <div className=\"grid grid-cols-3 gap-4\">\n            {[1, 2, 3, 4, 5, 6].map(i => (\n              <div key={i} className=\"h-20 bg-gray-300 rounded\"></div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!achievements) {\n    return (\n      <div className={`bg-gray-100 rounded-lg p-4 text-center ${className}`}>\n        <p className=\"text-gray-600\">Unable to load achievements</p>\n      </div>\n    );\n  }\n\n  const filteredAchievements = getFilteredAchievements();\n\n  return (\n    <div className={`bg-white rounded-lg p-4 ${className}`}>\n      {/* New Achievement Notifications */}\n      <AnimatePresence>\n        {newAchievements.map((achievement, index) => (\n          <motion.div\n            key={achievement.id}\n            initial={{ opacity: 0, y: -50, scale: 0.8 }}\n            animate={{ opacity: 1, y: 0, scale: 1 }}\n            exit={{ opacity: 0, y: -50, scale: 0.8 }}\n            className=\"fixed top-4 right-4 bg-yellow-400 text-black p-4 rounded-lg shadow-lg z-50 max-w-sm\"\n            style={{ marginTop: index * 80 }}\n          >\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"text-3xl\">{achievement.icon}</div>\n              <div>\n                <div className=\"font-bold\">Achievement Unlocked!</div>\n                <div className=\"text-sm\">{achievement.name}</div>\n                <div className=\"text-xs opacity-75\">+{achievement.xpReward} XP</div>\n              </div>\n            </div>\n          </motion.div>\n        ))}\n      </AnimatePresence>\n\n      {/* Header */}\n      <div className=\"flex justify-between items-center mb-4\">\n        <div>\n          <h3 className=\"text-xl font-bold text-gray-800\">Achievements</h3>\n          <p className=\"text-sm text-gray-600\">\n            {achievements.stats.unlocked} of {achievements.stats.total} unlocked ({achievements.stats.progress}%)\n          </p>\n        </div>\n        <div className=\"text-3xl\"></div>\n      </div>\n\n      {/* Progress Bar */}\n      <div className=\"mb-6\">\n        <div className=\"w-full bg-gray-200 rounded-full h-2\">\n          <motion.div\n            className=\"bg-gradient-to-r from-yellow-400 to-orange-500 h-2 rounded-full\"\n            initial={{ width: 0 }}\n            animate={{ width: `${achievements.stats.progress}%` }}\n            transition={{ duration: 1, ease: \"easeOut\" }}\n          />\n        </div>\n      </div>\n\n      {/* Category Filter */}\n      <div className=\"flex space-x-2 mb-4 overflow-x-auto\">\n        {categories.map(category => (\n          <button\n            key={category.id}\n            onClick={() => setSelectedCategory(category.id)}\n            className={`flex items-center space-x-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap ${\n              selectedCategory === category.id\n                ? 'bg-blue-500 text-white'\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n            }`}\n          >\n            <span>{category.icon}</span>\n            <span>{category.name}</span>\n          </button>\n        ))}\n      </div>\n\n      {/* Achievement Grid */}\n      <div className=\"grid grid-cols-3 sm:grid-cols-4 lg:grid-cols-6 gap-3\">\n        {filteredAchievements.map((achievement, index) => (\n          <motion.div\n            key={achievement.id}\n            initial={{ opacity: 0, scale: 0.8 }}\n            animate={{ opacity: 1, scale: 1 }}\n            transition={{ delay: index * 0.1 }}\n            className={`relative bg-gray-50 rounded-lg p-3 text-center border-2 transition-all hover:shadow-md ${\n              achievement.unlocked\n                ? 'border-yellow-400 bg-gradient-to-br from-yellow-50 to-orange-50'\n                : 'border-gray-200 opacity-60'\n            }`}\n            title={achievement.description}\n          >\n            {/* Achievement Icon */}\n            <div className={`text-2xl mb-1 ${achievement.unlocked ? '' : 'grayscale'}`}>\n              {achievement.icon}\n            </div>\n            \n            {/* Achievement Name */}\n            <div className={`text-xs font-semibold ${\n              achievement.unlocked ? 'text-gray-800' : 'text-gray-500'\n            }`}>\n              {achievement.name}\n            </div>\n            \n            {/* XP Reward */}\n            <div className={`text-xs ${\n              achievement.unlocked ? 'text-yellow-600' : 'text-gray-400'\n            }`}>\n              {achievement.xpReward} XP\n            </div>\n\n            {/* Unlock Date */}\n            {achievement.unlocked && achievement.unlockedAt && (\n              <div className=\"text-xs text-gray-500 mt-1\">\n                {new Date(achievement.unlockedAt).toLocaleDateString()}\n              </div>\n            )}\n\n            {/* Lock Overlay for Unearned */}\n            {!achievement.unlocked && (\n              <div className=\"absolute inset-0 flex items-center justify-center bg-black/10 rounded-lg\">\n                <div className=\"text-lg opacity-50\"></div>\n              </div>\n            )}\n\n            {/* New Achievement Glow */}\n            {achievement.unlocked && achievement.isNew && (\n              <motion.div\n                className=\"absolute inset-0 border-2 border-yellow-400 rounded-lg\"\n                animate={{ \n                  boxShadow: [\n                    '0 0 0 0 rgba(250, 204, 21, 0)',\n                    '0 0 0 4px rgba(250, 204, 21, 0.3)',\n                    '0 0 0 0 rgba(250, 204, 21, 0)'\n                  ]\n                }}\n                transition={{ duration: 2, repeat: Infinity }}\n              />\n            )}\n          </motion.div>\n        ))}\n      </div>\n\n      {/* Empty State */}\n      {filteredAchievements.length === 0 && (\n        <div className=\"text-center py-8 text-gray-500\">\n          <div className=\"text-4xl mb-2\"></div>\n          <p>No achievements in this category yet</p>\n          <p className=\"text-sm\">Keep studying to unlock more!</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AchievementGallery;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\gamification\\GamificationDashboard.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'userId' is defined but never used. Allowed unused args must match /^_/u.","line":209,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":209,"endColumn":38}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport XPProgress from './XPProgress';\nimport StreakCounter from './StreakCounter';\nimport AchievementGallery from './AchievementGallery';\nimport Leaderboard from './Leaderboard';\n\nconst GamificationDashboard = ({ userId, subject = 'biology', className = '' }) => {\n  const [activeTab, setActiveTab] = useState('overview');\n  const [isCollapsed, setIsCollapsed] = useState(false);\n\n  const tabs = [\n    { id: 'overview', name: 'Overview', icon: '' },\n    { id: 'achievements', name: 'Achievements', icon: '' },\n    { id: 'leaderboard', name: 'Leaderboard', icon: '' },\n    { id: 'progress', name: 'Progress', icon: '' }\n  ];\n\n  const renderTabContent = () => {\n    switch (activeTab) {\n      case 'overview':\n        return (\n          <div className=\"space-y-6\">\n            {/* Main Stats Grid */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n              <XPProgress userId={userId} />\n              <StreakCounter userId={userId} />\n            </div>\n\n            {/* Quick Achievements Preview */}\n            <div className=\"bg-white rounded-lg p-4\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h3 className=\"text-lg font-bold text-gray-800\">Recent Achievements</h3>\n                <button\n                  onClick={() => setActiveTab('achievements')}\n                  className=\"text-sm text-blue-600 hover:text-blue-800 transition-colors\"\n                >\n                  View All \n                </button>\n              </div>\n              <AchievementGallery userId={userId} className=\"max-h-48 overflow-hidden\" />\n            </div>\n\n            {/* Quick Leaderboard Preview */}\n            <div className=\"bg-white rounded-lg p-4\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h3 className=\"text-lg font-bold text-gray-800\">Top Performers</h3>\n                <button\n                  onClick={() => setActiveTab('leaderboard')}\n                  className=\"text-sm text-blue-600 hover:text-blue-800 transition-colors\"\n                >\n                  View Full Rankings \n                </button>\n              </div>\n              <Leaderboard userId={userId} subject={subject} className=\"max-h-64 overflow-hidden\" />\n            </div>\n          </div>\n        );\n\n      case 'achievements':\n        return <AchievementGallery userId={userId} />;\n\n      case 'leaderboard':\n        return <Leaderboard userId={userId} subject={subject} />;\n\n      case 'progress':\n        return (\n          <div className=\"space-y-6\">\n            <XPProgress userId={userId} />\n            <StreakCounter userId={userId} />\n            \n            {/* Detailed Progress Charts */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n              <div className=\"bg-white rounded-lg p-4\">\n                <h3 className=\"text-lg font-bold text-gray-800 mb-4\">Weekly Progress</h3>\n                <WeeklyProgressChart userId={userId} />\n              </div>\n              \n              <div className=\"bg-white rounded-lg p-4\">\n                <h3 className=\"text-lg font-bold text-gray-800 mb-4\">Subject Mastery</h3>\n                <SubjectMasteryChart userId={userId} />\n              </div>\n            </div>\n          </div>\n        );\n\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className={`bg-gray-50 ${className}`}>\n      {/* Collapsible Header */}\n      <div className=\"bg-white border-b border-gray-200\">\n        <div className=\"flex items-center justify-between p-4\">\n          <div className=\"flex items-center space-x-3\">\n            <motion.div\n              animate={{ rotate: isCollapsed ? 180 : 0 }}\n              className=\"text-2xl\"\n            >\n              \n            </motion.div>\n            <div>\n              <h2 className=\"text-xl font-bold text-gray-800\">Gamification Hub</h2>\n              <p className=\"text-sm text-gray-600\">Track your learning journey</p>\n            </div>\n          </div>\n          \n          <button\n            onClick={() => setIsCollapsed(!isCollapsed)}\n            className=\"p-2 text-gray-500 hover:text-gray-700 transition-colors\"\n          >\n            <motion.div\n              animate={{ rotate: isCollapsed ? 180 : 0 }}\n              transition={{ duration: 0.2 }}\n            >\n              \n            </motion.div>\n          </button>\n        </div>\n\n        {/* Tab Navigation */}\n        {!isCollapsed && (\n          <div className=\"flex space-x-1 px-4 pb-4 overflow-x-auto\">\n            {tabs.map(tab => (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id)}\n                className={`flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap ${\n                  activeTab === tab.id\n                    ? 'bg-blue-500 text-white'\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                <span>{tab.icon}</span>\n                <span>{tab.name}</span>\n              </button>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Tab Content */}\n      <motion.div\n        initial={false}\n        animate={{ \n          height: isCollapsed ? 0 : 'auto',\n          opacity: isCollapsed ? 0 : 1\n        }}\n        transition={{ duration: 0.3 }}\n        className=\"overflow-hidden\"\n      >\n        <div className=\"p-4\">\n          <motion.div\n            key={activeTab}\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.3 }}\n          >\n            {renderTabContent()}\n          </motion.div>\n        </div>\n      </motion.div>\n    </div>\n  );\n};\n\n// Simple chart components for progress tracking\nconst WeeklyProgressChart = ({ userId }) => {\n  const [chartData, setChartData] = useState([]);\n\n  useEffect(() => {\n    // Mock data for weekly progress\n    const mockData = [\n      { day: 'Mon', xp: 120 },\n      { day: 'Tue', xp: 180 },\n      { day: 'Wed', xp: 90 },\n      { day: 'Thu', xp: 240 },\n      { day: 'Fri', xp: 150 },\n      { day: 'Sat', xp: 300 },\n      { day: 'Sun', xp: 200 }\n    ];\n    setChartData(mockData);\n  }, [userId]);\n\n  const maxXP = Math.max(...chartData.map(d => d.xp));\n\n  return (\n    <div className=\"space-y-3\">\n      {chartData.map((day, index) => (\n        <div key={day.day} className=\"flex items-center space-x-3\">\n          <div className=\"w-12 text-sm text-gray-600\">{day.day}</div>\n          <div className=\"flex-1 bg-gray-200 rounded-full h-3\">\n            <motion.div\n              className=\"bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full\"\n              initial={{ width: 0 }}\n              animate={{ width: `${(day.xp / maxXP) * 100}%` }}\n              transition={{ delay: index * 0.1, duration: 0.5 }}\n            />\n          </div>\n          <div className=\"w-12 text-sm font-semibold text-gray-800\">{day.xp}</div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nconst SubjectMasteryChart = ({ userId }) => {\n  const subjects = [\n    { name: 'Biology', progress: 75, color: 'from-green-500 to-emerald-500' },\n    { name: 'Chemistry', progress: 60, color: 'from-blue-500 to-cyan-500' },\n    { name: 'Physics', progress: 45, color: 'from-purple-500 to-pink-500' },\n    { name: 'Math', progress: 30, color: 'from-orange-500 to-red-500' }\n  ];\n\n  return (\n    <div className=\"space-y-4\">\n      {subjects.map((subject, index) => (\n        <div key={subject.name} className=\"space-y-2\">\n          <div className=\"flex justify-between text-sm\">\n            <span className=\"font-medium text-gray-700\">{subject.name}</span>\n            <span className=\"text-gray-600\">{subject.progress}%</span>\n          </div>\n          <div className=\"w-full bg-gray-200 rounded-full h-2\">\n            <motion.div\n              className={`bg-gradient-to-r ${subject.color} h-2 rounded-full`}\n              initial={{ width: 0 }}\n              animate={{ width: `${subject.progress}%` }}\n              transition={{ delay: index * 0.2, duration: 0.8 }}\n            />\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default GamificationDashboard;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\gamification\\Leaderboard.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchLeaderboard'. Either include it or remove the dependency array.","line":12,"column":6,"nodeType":"ArrayExpression","endLine":12,"endColumn":26,"suggestions":[{"desc":"Update the dependencies array to be: [fetchLeaderboard, subject, timeframe]","fix":{"range":[429,449],"text":"[fetchLeaderboard, subject, timeframe]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\n\nconst Leaderboard = ({ subject = 'biology', userId, className = '' }) => {\n  const [leaderboardData, setLeaderboardData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [timeframe, setTimeframe] = useState('weekly');\n  const [userRank, setUserRank] = useState(null);\n\n  useEffect(() => {\n    fetchLeaderboard();\n  }, [subject, timeframe]);\n\n  const fetchLeaderboard = async () => {\n    try {\n      const response = await fetch(`/api/gamification/xp/leaderboard?subject=${subject}&limit=50`);\n      const data = await response.json();\n      \n      if (data.success) {\n        setLeaderboardData(data.leaderboard);\n        \n        // Find user's rank\n        const userEntry = data.leaderboard.find(entry => entry.userId === userId);\n        setUserRank(userEntry?.rank || null);\n      }\n    } catch (error) {\n      console.error('Error fetching leaderboard:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const timeframes = [\n    { id: 'weekly', name: 'This Week', icon: '' },\n    { id: 'monthly', name: 'This Month', icon: '' },\n    { id: 'alltime', name: 'All Time', icon: '' }\n  ];\n\n  const getRankIcon = (rank) => {\n    switch (rank) {\n      case 1: return '';\n      case 2: return '';\n      case 3: return '';\n      default: return `#${rank}`;\n    }\n  };\n\n  const getRankStyle = (rank) => {\n    switch (rank) {\n      case 1: return 'bg-gradient-to-r from-yellow-400 to-yellow-600 text-white';\n      case 2: return 'bg-gradient-to-r from-gray-300 to-gray-500 text-white';\n      case 3: return 'bg-gradient-to-r from-amber-600 to-amber-800 text-white';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className={`bg-white rounded-lg p-4 ${className}`}>\n        <div className=\"animate-pulse space-y-4\">\n          <div className=\"h-6 bg-gray-300 rounded w-1/3\"></div>\n          <div className=\"space-y-3\">\n            {[1, 2, 3, 4, 5].map(i => (\n              <div key={i} className=\"flex items-center space-x-3\">\n                <div className=\"w-8 h-8 bg-gray-300 rounded-full\"></div>\n                <div className=\"flex-1 h-4 bg-gray-300 rounded\"></div>\n                <div className=\"w-16 h-4 bg-gray-300 rounded\"></div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!leaderboardData) {\n    return (\n      <div className={`bg-gray-100 rounded-lg p-4 text-center ${className}`}>\n        <p className=\"text-gray-600\">Unable to load leaderboard</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`bg-white rounded-lg p-4 ${className}`}>\n      {/* Header */}\n      <div className=\"flex justify-between items-center mb-4\">\n        <div>\n          <h3 className=\"text-xl font-bold text-gray-800\">Leaderboard</h3>\n          <p className=\"text-sm text-gray-600 capitalize\">{subject}  {timeframe}</p>\n        </div>\n        <div className=\"text-3xl\"></div>\n      </div>\n\n      {/* Timeframe Selector */}\n      <div className=\"flex space-x-2 mb-4 overflow-x-auto\">\n        {timeframes.map(tf => (\n          <button\n            key={tf.id}\n            onClick={() => setTimeframe(tf.id)}\n            className={`flex items-center space-x-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap ${\n              timeframe === tf.id\n                ? 'bg-blue-500 text-white'\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n            }`}\n          >\n            <span>{tf.icon}</span>\n            <span>{tf.name}</span>\n          </button>\n        ))}\n      </div>\n\n      {/* User's Rank (if not in top 10) */}\n      {userRank && userRank > 10 && (\n        <div className=\"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200\">\n          <div className=\"flex items-center justify-between\">\n            <span className=\"text-sm text-blue-700\">Your rank:</span>\n            <span className=\"font-bold text-blue-800\">#{userRank}</span>\n          </div>\n        </div>\n      )}\n\n      {/* Top 3 Podium */}\n      {leaderboardData.length >= 3 && (\n        <div className=\"mb-6\">\n          <div className=\"flex items-end justify-center space-x-4\">\n            {/* 2nd Place */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.2 }}\n              className=\"text-center\"\n            >\n              <div className=\"w-16 h-16 bg-gradient-to-br from-gray-300 to-gray-500 rounded-full flex items-center justify-center text-white font-bold text-lg mb-2\">\n                {leaderboardData[1]?.displayName?.[0] || '?'}\n              </div>\n              <div className=\"bg-gray-300 h-12 w-20 rounded-t-lg flex items-center justify-center\">\n                <span className=\"text-white font-bold\">2nd</span>\n              </div>\n              <div className=\"text-xs mt-1 text-gray-600\">{leaderboardData[1]?.displayName}</div>\n              <div className=\"text-xs font-bold text-gray-800\">{leaderboardData[1]?.xp?.toLocaleString()} XP</div>\n            </motion.div>\n\n            {/* 1st Place */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.1 }}\n              className=\"text-center\"\n            >\n              <div className=\"w-20 h-20 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-full flex items-center justify-center text-white font-bold text-xl mb-2 relative\">\n                {leaderboardData[0]?.displayName?.[0] || '?'}\n                <div className=\"absolute -top-2 -right-2 text-2xl\"></div>\n              </div>\n              <div className=\"bg-yellow-400 h-16 w-24 rounded-t-lg flex items-center justify-center\">\n                <span className=\"text-white font-bold\">1st</span>\n              </div>\n              <div className=\"text-sm mt-1 font-semibold text-gray-800\">{leaderboardData[0]?.displayName}</div>\n              <div className=\"text-sm font-bold text-yellow-600\">{leaderboardData[0]?.xp?.toLocaleString()} XP</div>\n            </motion.div>\n\n            {/* 3rd Place */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.3 }}\n              className=\"text-center\"\n            >\n              <div className=\"w-16 h-16 bg-gradient-to-br from-amber-600 to-amber-800 rounded-full flex items-center justify-center text-white font-bold text-lg mb-2\">\n                {leaderboardData[2]?.displayName?.[0] || '?'}\n              </div>\n              <div className=\"bg-amber-600 h-8 w-20 rounded-t-lg flex items-center justify-center\">\n                <span className=\"text-white font-bold\">3rd</span>\n              </div>\n              <div className=\"text-xs mt-1 text-gray-600\">{leaderboardData[2]?.displayName}</div>\n              <div className=\"text-xs font-bold text-gray-800\">{leaderboardData[2]?.xp?.toLocaleString()} XP</div>\n            </motion.div>\n          </div>\n        </div>\n      )}\n\n      {/* Full Leaderboard */}\n      <div className=\"space-y-2\">\n        {leaderboardData.slice(0, 10).map((entry, index) => (\n          <motion.div\n            key={entry.userId}\n            initial={{ opacity: 0, x: -20 }}\n            animate={{ opacity: 1, x: 0 }}\n            transition={{ delay: index * 0.1 }}\n            className={`flex items-center space-x-3 p-3 rounded-lg transition-all ${\n              entry.userId === userId\n                ? 'bg-blue-100 border-2 border-blue-300'\n                : 'bg-gray-50 hover:bg-gray-100'\n            } ${getRankStyle(entry.rank)}`}\n          >\n            {/* Rank */}\n            <div className=\"w-8 h-8 flex items-center justify-center font-bold\">\n              {getRankIcon(entry.rank)}\n            </div>\n\n            {/* Avatar */}\n            <div className=\"w-10 h-10 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center text-white font-bold\">\n              {entry.displayName?.[0] || '?'}\n            </div>\n\n            {/* Name and Level */}\n            <div className=\"flex-1 min-w-0\">\n              <div className=\"font-semibold text-gray-800 truncate\">\n                {entry.displayName}\n                {entry.userId === userId && (\n                  <span className=\"ml-2 text-xs bg-blue-500 text-white px-2 py-1 rounded-full\">You</span>\n                )}\n              </div>\n              <div className=\"text-sm text-gray-600\">Level {entry.level}</div>\n            </div>\n\n            {/* XP */}\n            <div className=\"text-right\">\n              <div className=\"font-bold text-gray-800\">{entry.xp?.toLocaleString()}</div>\n              <div className=\"text-xs text-gray-600\">XP</div>\n            </div>\n          </motion.div>\n        ))}\n      </div>\n\n      {/* Show More Button */}\n      {leaderboardData.length > 10 && (\n        <button className=\"w-full mt-4 py-2 text-sm text-blue-600 hover:text-blue-800 transition-colors\">\n          Show more rankings\n        </button>\n      )}\n\n      {/* Empty State */}\n      {leaderboardData.length === 0 && (\n        <div className=\"text-center py-8 text-gray-500\">\n          <div className=\"text-4xl mb-2\"></div>\n          <p>No rankings available yet</p>\n          <p className=\"text-sm\">Be the first to start learning!</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Leaderboard;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\gamification\\StreakCounter.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\gamification\\XPProgress.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchXPData'. Either include it or remove the dependency array.","line":11,"column":6,"nodeType":"ArrayExpression","endLine":11,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [fetchXPData, userId]","fix":{"range":[325,333],"text":"[fetchXPData, userId]"}}]},{"ruleId":"no-unused-vars","severity":1,"message":"'animateXPGain' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":28,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\n\nconst XPProgress = ({ userId, className = '' }) => {\n  const [xpData, setXpData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [recentXP, setRecentXP] = useState(0);\n\n  useEffect(() => {\n    fetchXPData();\n  }, [userId]);\n\n  const fetchXPData = async () => {\n    try {\n      const response = await fetch(`/api/gamification/xp/user/${userId}`);\n      const data = await response.json();\n      \n      if (data.success) {\n        setXpData(data);\n      }\n    } catch (error) {\n      console.error('Error fetching XP data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const animateXPGain = (xpGained) => {\n    setRecentXP(xpGained);\n    setTimeout(() => setRecentXP(0), 2000);\n  };\n\n  if (loading) {\n    return (\n      <div className={`bg-gradient-to-r from-blue-100 to-purple-100 rounded-lg p-4 ${className}`}>\n        <div className=\"animate-pulse\">\n          <div className=\"h-4 bg-gray-300 rounded w-3/4 mb-2\"></div>\n          <div className=\"h-8 bg-gray-300 rounded w-full mb-2\"></div>\n          <div className=\"h-3 bg-gray-300 rounded w-1/2\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!xpData) {\n    return (\n      <div className={`bg-gray-100 rounded-lg p-4 text-center ${className}`}>\n        <p className=\"text-gray-600\">Unable to load XP data</p>\n      </div>\n    );\n  }\n\n  const { user, progressInfo } = xpData;\n  const progressPercentage = progressInfo ? progressInfo.progress : 0;\n\n  return (\n    <div className={`bg-gradient-to-r from-blue-100 to-purple-100 rounded-lg p-4 relative overflow-hidden ${className}`}>\n      {/* Recent XP Animation */}\n      {recentXP > 0 && (\n        <motion.div\n          initial={{ opacity: 0, y: 0, scale: 0.8 }}\n          animate={{ opacity: 1, y: -30, scale: 1.2 }}\n          exit={{ opacity: 0, y: -50 }}\n          className=\"absolute top-2 right-2 text-green-600 font-bold text-lg z-10\"\n        >\n          +{recentXP} XP\n        </motion.div>\n      )}\n\n      {/* Level and XP Display */}\n      <div className=\"flex justify-between items-center mb-3\">\n        <div>\n          <h3 className=\"text-lg font-bold text-gray-800\">Level {user.level}</h3>\n          <p className=\"text-sm text-gray-600\">{user.xp.toLocaleString()} XP</p>\n        </div>\n        <div className=\"text-right\">\n          <div className=\"text-xs text-gray-500\">Accuracy</div>\n          <div className=\"text-lg font-semibold text-blue-600\">{user.accuracy}%</div>\n        </div>\n      </div>\n\n      {/* Progress Bar */}\n      {progressInfo && (\n        <div className=\"space-y-2\">\n          <div className=\"flex justify-between text-xs text-gray-600\">\n            <span>Progress to Level {progressInfo.nextLevel}</span>\n            <span>{progressInfo.xpToNext} XP to go</span>\n          </div>\n          \n          <div className=\"w-full bg-gray-200 rounded-full h-3 relative\">\n            <motion.div\n              className=\"bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full\"\n              initial={{ width: 0 }}\n              animate={{ width: `${Math.min(progressPercentage, 100)}%` }}\n              transition={{ duration: 1, ease: \"easeOut\" }}\n            />\n            \n            {/* Level indicator */}\n            <div className=\"absolute top-0 left-0 w-full h-full flex items-center justify-center\">\n              <span className=\"text-xs font-bold text-white drop-shadow\">\n                {Math.round(progressPercentage)}%\n              </span>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Stats */}\n      <div className=\"grid grid-cols-2 gap-4 mt-4 text-center\">\n        <div className=\"bg-white/50 rounded-lg p-2\">\n          <div className=\"text-lg font-bold text-gray-800\">{user.totalQuestionsAnswered}</div>\n          <div className=\"text-xs text-gray-600\">Questions</div>\n        </div>\n        <div className=\"bg-white/50 rounded-lg p-2\">\n          <div className=\"text-lg font-bold text-green-600\">{user.correctAnswers}</div>\n          <div className=\"text-xs text-gray-600\">Correct</div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default XPProgress;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\social\\CollaborativeQuizBattle.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'AnimatePresence' is defined but never used. Allowed unused vars must match /^React$/u.","line":2,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":33},{"ruleId":"no-unused-vars","severity":1,"message":"'reactions' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":22,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":19},{"ruleId":"no-unused-vars","severity":1,"message":"'powerUps' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":23,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":18},{"ruleId":"no-unused-vars","severity":1,"message":"'setPowerUps' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":23,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":31},{"ruleId":"no-unused-vars","severity":1,"message":"'websocketRef' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":24,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":21},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'loadNextQuestion' and 'userId'. Either include them or remove the dependency array. If 'setParticipants' needs the current value of 'userId', you can also switch to useReducer instead of useState and read 'userId' in the reducer.","line":98,"column":6,"nodeType":"ArrayExpression","endLine":98,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [loadNextQuestion, userId]","fix":{"range":[2952,2954],"text":"[loadNextQuestion, userId]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'updateParticipantProgress'. Either include it or remove the dependency array.","line":114,"column":6,"nodeType":"ArrayExpression","endLine":114,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [battleState, updateParticipantProgress]","fix":{"range":[3422,3435],"text":"[battleState, updateParticipantProgress]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleTimeUp'. Either include it or remove the dependency array.","line":127,"column":6,"nodeType":"ArrayExpression","endLine":127,"endColumn":34,"suggestions":[{"desc":"Update the dependencies array to be: [timeRemaining, battleState, handleTimeUp]","fix":{"range":[3775,3803],"text":"[timeRemaining, battleState, handleTimeUp]"}}]},{"ruleId":"no-unused-vars","severity":1,"message":"'isCorrect' is defined but never used. Allowed unused args must match /^_/u.","line":206,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":206,"endColumn":53}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nconst CollaborativeQuizBattle = ({ \n  battleId, \n  userId, \n  onComplete, \n  battleMode = 'team_vs_team', // 'team_vs_team', 'free_for_all', 'relay'\n  className = '' \n}) => {\n  const [battleState, setBattleState] = useState('waiting'); // 'waiting', 'active', 'completed'\n  const [currentQuestion, setCurrentQuestion] = useState(null);\n  const [questionIndex, setQuestionIndex] = useState(0);\n  const [participants, setParticipants] = useState([]);\n  const [teams, setTeams] = useState({ team1: [], team2: [] });\n  const [scores, setScores] = useState({ team1: 0, team2: 0 });\n  const [myAnswer, setMyAnswer] = useState(null);\n  const [timeRemaining, setTimeRemaining] = useState(30);\n  const [battleResults, setBattleResults] = useState(null);\n  const [chat, setChat] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [reactions, setReactions] = useState({});\n  const [powerUps, setPowerUps] = useState({});\n  const websocketRef = useRef(null);\n\n  // Sample battle configuration\n  const [battleConfig] = useState({\n    id: battleId,\n    name: \"Biology Module 7 Battle\",\n    subject: 'biology',\n    dotPoints: ['BIO11-7.1', 'BIO11-7.2'],\n    totalQuestions: 10,\n    timePerQuestion: 30,\n    powerUpsEnabled: true,\n    chatEnabled: true,\n    mode: battleMode\n  });\n\n  // Sample participants data\n  useEffect(() => {\n    // Mock participants - in real app, this would come from WebSocket\n    setParticipants([\n      { \n        userId: 'user1', \n        username: 'Sarah_Bio', \n        avatar: '', \n        team: 'team1',\n        score: 120,\n        streak: 3,\n        powerUps: ['hint', 'freeze_time']\n      },\n      { \n        userId: 'user2', \n        username: 'Mike_Science', \n        avatar: '', \n        team: 'team1',\n        score: 95,\n        streak: 2,\n        powerUps: ['double_points']\n      },\n      { \n        userId: 'user3', \n        username: 'Emma_Studies', \n        avatar: '', \n        team: 'team2',\n        score: 110,\n        streak: 4,\n        powerUps: ['hint', 'skip_question']\n      },\n      { \n        userId: userId, \n        username: 'You', \n        avatar: '', \n        team: 'team2',\n        score: 85,\n        streak: 1,\n        powerUps: ['hint', 'freeze_time', 'double_points']\n      }\n    ]);\n\n    // Group into teams\n    setTeams({\n      team1: [\n        { userId: 'user1', username: 'Sarah_Bio', avatar: '', score: 120, streak: 3 },\n        { userId: 'user2', username: 'Mike_Science', avatar: '', score: 95, streak: 2 }\n      ],\n      team2: [\n        { userId: 'user3', username: 'Emma_Studies', avatar: '', score: 110, streak: 4 },\n        { userId: userId, username: 'You', avatar: '', score: 85, streak: 1 }\n      ]\n    });\n\n    // Start battle simulation\n    setTimeout(() => {\n      setBattleState('active');\n      loadNextQuestion();\n    }, 2000);\n  }, []);\n\n  // WebSocket connection simulation\n  useEffect(() => {\n    // In real app, establish WebSocket connection\n    // websocketRef.current = new WebSocket(`ws://localhost:3001/battle/${battleId}`);\n    \n    // Simulate real-time updates\n    const interval = setInterval(() => {\n      if (battleState === 'active') {\n        // Simulate other players answering\n        updateParticipantProgress();\n      }\n    }, 3000);\n\n    return () => clearInterval(interval);\n  }, [battleState]);\n\n  // Question timer\n  useEffect(() => {\n    if (battleState === 'active' && timeRemaining > 0) {\n      const timer = setTimeout(() => {\n        setTimeRemaining(prev => prev - 1);\n      }, 1000);\n\n      return () => clearTimeout(timer);\n    } else if (timeRemaining === 0 && battleState === 'active') {\n      handleTimeUp();\n    }\n  }, [timeRemaining, battleState]);\n\n  const loadNextQuestion = () => {\n    // Mock question data\n    const questions = [\n      {\n        id: 'q1',\n        text: 'Which type of pathogen is responsible for causing malaria?',\n        options: ['Bacteria', 'Virus', 'Protozoa', 'Fungi'],\n        correctAnswer: 2,\n        difficulty: 'medium',\n        dotPoint: 'BIO11-7.1',\n        powerUpEffects: {\n          hint: 'This pathogen is a single-celled eukaryote transmitted by mosquitoes',\n          eliminate: [0, 1] // Eliminate bacteria and virus options\n        }\n      },\n      {\n        id: 'q2',\n        text: 'What is the primary function of T-helper cells in the immune response?',\n        options: [\n          'Direct killing of infected cells',\n          'Producing antibodies',\n          'Coordinating immune responses',\n          'Engulfing pathogens'\n        ],\n        correctAnswer: 2,\n        difficulty: 'hard',\n        dotPoint: 'BIO11-7.2'\n      }\n    ];\n\n    const question = questions[questionIndex % questions.length];\n    setCurrentQuestion(question);\n    setTimeRemaining(battleConfig.timePerQuestion);\n    setMyAnswer(null);\n  };\n\n  const handleAnswerSelect = (answerIndex) => {\n    if (myAnswer !== null || battleState !== 'active') return;\n    \n    setMyAnswer(answerIndex);\n    \n    // Calculate points based on speed and correctness\n    const isCorrect = answerIndex === currentQuestion.correctAnswer;\n    const speedBonus = Math.floor((timeRemaining / battleConfig.timePerQuestion) * 50);\n    const points = isCorrect ? 100 + speedBonus : 0;\n    \n    // Apply power-up effects\n    const finalPoints = applyPowerUpEffects(points, isCorrect);\n    \n    // Update score\n    updateScore(finalPoints, isCorrect);\n    \n    // Show result and move to next question\n    setTimeout(() => {\n      if (questionIndex < battleConfig.totalQuestions - 1) {\n        setQuestionIndex(prev => prev + 1);\n        loadNextQuestion();\n      } else {\n        endBattle();\n      }\n    }, 2000);\n  };\n\n  const handleTimeUp = () => {\n    if (myAnswer === null) {\n      setMyAnswer(-1); // Mark as no answer\n      setTimeout(() => {\n        if (questionIndex < battleConfig.totalQuestions - 1) {\n          setQuestionIndex(prev => prev + 1);\n          loadNextQuestion();\n        } else {\n          endBattle();\n        }\n      }, 1000);\n    }\n  };\n\n  const applyPowerUpEffects = (basePoints, isCorrect) => {\n    // Mock power-up application\n    return basePoints;\n  };\n\n  const updateScore = (points, isCorrect) => {\n    const myTeam = teams.team1.some(p => p.userId === userId) ? 'team1' : 'team2';\n    \n    setScores(prev => ({\n      ...prev,\n      [myTeam]: prev[myTeam] + points\n    }));\n\n    // Update my participant data\n    setParticipants(prev => prev.map(p => \n      p.userId === userId \n        ? { \n            ...p, \n            score: p.score + points,\n            streak: isCorrect ? p.streak + 1 : 0\n          }\n        : p\n    ));\n  };\n\n  const updateParticipantProgress = () => {\n    // Simulate other participants answering\n    setParticipants(prev => prev.map(p => {\n      if (p.userId !== userId && Math.random() > 0.7) {\n        return {\n          ...p,\n          score: p.score + Math.floor(Math.random() * 120),\n          streak: Math.random() > 0.3 ? p.streak + 1 : 0\n        };\n      }\n      return p;\n    }));\n  };\n\n  const endBattle = () => {\n    setBattleState('completed');\n    \n    // Calculate final results\n    const winner = scores.team1 > scores.team2 ? 'team1' : 'team2';\n    const myTeam = teams.team1.some(p => p.userId === userId) ? 'team1' : 'team2';\n    \n    setBattleResults({\n      winner,\n      myTeam,\n      won: winner === myTeam,\n      finalScores: scores,\n      mvp: participants.reduce((prev, current) => \n        prev.score > current.score ? prev : current\n      )\n    });\n\n    // Call completion callback\n    setTimeout(() => {\n      onComplete({\n        battleId,\n        result: winner === myTeam ? 'win' : 'loss',\n        finalScore: scores[myTeam],\n        personalScore: participants.find(p => p.userId === userId)?.score || 0,\n        questionsAnswered: questionIndex + 1\n      });\n    }, 5000);\n  };\n\n  const sendChatMessage = () => {\n    if (!newMessage.trim()) return;\n    \n    const message = {\n      id: Date.now(),\n      userId,\n      username: 'You',\n      message: newMessage,\n      timestamp: new Date(),\n      type: 'message'\n    };\n    \n    setChat(prev => [...prev, message]);\n    setNewMessage('');\n  };\n\n  const sendReaction = (type) => {\n    const reaction = {\n      id: Date.now(),\n      userId,\n      type,\n      timestamp: new Date()\n    };\n    \n    setReactions(prev => ({\n      ...prev,\n      [currentQuestion?.id]: [...(prev[currentQuestion?.id] || []), reaction]\n    }));\n  };\n\n  const activatePowerUp = (powerUpType) => {\n    // Implement power-up logic\n    console.log('Using power-up:', powerUpType);\n  };\n\n  if (battleState === 'waiting') {\n    return (\n      <div className={`bg-gradient-to-br from-blue-100 to-purple-100 rounded-lg p-6 text-center ${className}`}>\n        <motion.div\n          animate={{ scale: [1, 1.1, 1] }}\n          transition={{ duration: 2, repeat: Infinity }}\n          className=\"text-6xl mb-4\"\n        >\n          \n        </motion.div>\n        <h2 className=\"text-2xl font-bold text-gray-800 mb-2\">Battle Starting Soon!</h2>\n        <p className=\"text-gray-600 mb-4\">{battleConfig.name}</p>\n        <div className=\"grid grid-cols-2 gap-4\">\n          <div className=\"bg-blue-100 p-3 rounded-lg\">\n            <h3 className=\"font-semibold text-blue-800\">Team Alpha</h3>\n            <div className=\"space-y-1 mt-2\">\n              {teams.team1.map(member => (\n                <div key={member.userId} className=\"flex items-center space-x-2\">\n                  <span>{member.avatar}</span>\n                  <span className=\"text-sm\">{member.username}</span>\n                </div>\n              ))}\n            </div>\n          </div>\n          <div className=\"bg-purple-100 p-3 rounded-lg\">\n            <h3 className=\"font-semibold text-purple-800\">Team Beta</h3>\n            <div className=\"space-y-1 mt-2\">\n              {teams.team2.map(member => (\n                <div key={member.userId} className=\"flex items-center space-x-2\">\n                  <span>{member.avatar}</span>\n                  <span className=\"text-sm\">{member.username}</span>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (battleState === 'completed') {\n    return (\n      <div className={`bg-white rounded-lg p-6 text-center ${className}`}>\n        <motion.div\n          initial={{ scale: 0 }}\n          animate={{ scale: 1 }}\n          className=\"text-6xl mb-4\"\n        >\n          {battleResults.won ? '' : ''}\n        </motion.div>\n        <h2 className=\"text-2xl font-bold mb-2\">\n          {battleResults.won ? 'Victory!' : 'Good Fight!'}\n        </h2>\n        <p className=\"text-gray-600 mb-4\">\n          {battleResults.won ? 'Your team won the battle!' : 'Better luck next time!'}\n        </p>\n        \n        <div className=\"grid grid-cols-2 gap-4 mb-6\">\n          <div className=\"bg-blue-50 p-4 rounded-lg\">\n            <h3 className=\"font-semibold text-blue-800\">Team Alpha</h3>\n            <div className=\"text-2xl font-bold text-blue-600\">{battleResults.finalScores.team1}</div>\n          </div>\n          <div className=\"bg-purple-50 p-4 rounded-lg\">\n            <h3 className=\"font-semibold text-purple-800\">Team Beta</h3>\n            <div className=\"text-2xl font-bold text-purple-600\">{battleResults.finalScores.team2}</div>\n          </div>\n        </div>\n\n        <div className=\"bg-yellow-50 p-4 rounded-lg mb-4\">\n          <h4 className=\"font-semibold text-yellow-800 mb-2\"> MVP</h4>\n          <div className=\"flex items-center justify-center space-x-2\">\n            <span className=\"text-2xl\">{battleResults.mvp.avatar}</span>\n            <span className=\"font-medium\">{battleResults.mvp.username}</span>\n            <span className=\"text-sm text-gray-600\">({battleResults.mvp.score} points)</span>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`bg-white rounded-lg shadow-lg ${className}`}>\n      {/* Battle Header */}\n      <div className=\"bg-gradient-to-r from-blue-500 to-purple-500 text-white p-4 rounded-t-lg\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h2 className=\"text-xl font-bold\">{battleConfig.name}</h2>\n            <p className=\"text-sm opacity-90\">\n              Question {questionIndex + 1} of {battleConfig.totalQuestions}\n            </p>\n          </div>\n          <div className=\"text-right\">\n            <div className=\"text-2xl font-bold\">{timeRemaining}s</div>\n            <div className=\"text-sm opacity-90\">Time remaining</div>\n          </div>\n        </div>\n      </div>\n\n      {/* Team Scores */}\n      <div className=\"grid grid-cols-2 gap-4 p-4 bg-gray-50\">\n        <div className=\"bg-blue-100 p-3 rounded-lg\">\n          <div className=\"flex justify-between items-center\">\n            <h3 className=\"font-semibold text-blue-800\">Team Alpha</h3>\n            <div className=\"text-lg font-bold text-blue-600\">{scores.team1}</div>\n          </div>\n          <div className=\"flex space-x-1 mt-2\">\n            {teams.team1.map(member => (\n              <div key={member.userId} className=\"text-center\">\n                <div className=\"text-lg\">{member.avatar}</div>\n                <div className=\"text-xs text-blue-700\">{member.score}</div>\n              </div>\n            ))}\n          </div>\n        </div>\n        \n        <div className=\"bg-purple-100 p-3 rounded-lg\">\n          <div className=\"flex justify-between items-center\">\n            <h3 className=\"font-semibold text-purple-800\">Team Beta</h3>\n            <div className=\"text-lg font-bold text-purple-600\">{scores.team2}</div>\n          </div>\n          <div className=\"flex space-x-1 mt-2\">\n            {teams.team2.map(member => (\n              <div key={member.userId} className=\"text-center\">\n                <div className=\"text-lg\">{member.avatar}</div>\n                <div className=\"text-xs text-purple-700\">{member.score}</div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Current Question */}\n      {currentQuestion && (\n        <div className=\"p-6\">\n          <div className=\"mb-4\">\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-2\">\n              {currentQuestion.text}\n            </h3>\n            <div className=\"flex items-center space-x-2 text-sm text-gray-600\">\n              <span className=\"bg-gray-100 px-2 py-1 rounded\">{currentQuestion.difficulty}</span>\n              <span className=\"bg-blue-100 px-2 py-1 rounded\">{currentQuestion.dotPoint}</span>\n            </div>\n          </div>\n\n          <div className=\"space-y-3 mb-6\">\n            {currentQuestion.options.map((option, index) => (\n              <motion.button\n                key={index}\n                onClick={() => handleAnswerSelect(index)}\n                disabled={myAnswer !== null}\n                whileHover={{ scale: myAnswer === null ? 1.02 : 1 }}\n                whileTap={{ scale: 0.98 }}\n                className={`w-full p-4 text-left rounded-lg border-2 transition-all ${\n                  myAnswer === null\n                    ? 'border-gray-200 hover:border-blue-300 hover:bg-blue-50'\n                    : myAnswer === index\n                      ? index === currentQuestion.correctAnswer\n                        ? 'border-green-500 bg-green-100 text-green-800'\n                        : 'border-red-500 bg-red-100 text-red-800'\n                      : index === currentQuestion.correctAnswer\n                        ? 'border-green-500 bg-green-100 text-green-800'\n                        : 'border-gray-200 bg-gray-50 text-gray-500'\n                }`}\n              >\n                <div className=\"flex items-center justify-between\">\n                  <span>{option}</span>\n                  {myAnswer === index && (\n                    <span className=\"text-lg\">\n                      {index === currentQuestion.correctAnswer ? '' : ''}\n                    </span>\n                  )}\n                </div>\n              </motion.button>\n            ))}\n          </div>\n\n          {/* Power-ups */}\n          {battleConfig.powerUpsEnabled && (\n            <div className=\"flex space-x-2 mb-4\">\n              <button\n                onClick={() => activatePowerUp('hint')}\n                className=\"bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded text-sm\"\n              >\n                 Hint\n              </button>\n              <button\n                onClick={() => activatePowerUp('freeze_time')}\n                className=\"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm\"\n              >\n                 Freeze\n              </button>\n              <button\n                onClick={() => activatePowerUp('double_points')}\n                className=\"bg-purple-500 hover:bg-purple-600 text-white px-3 py-1 rounded text-sm\"\n              >\n                 2x Points\n              </button>\n            </div>\n          )}\n\n          {/* Reactions */}\n          <div className=\"flex space-x-2\">\n            {['', '', '', ''].map(emoji => (\n              <button\n                key={emoji}\n                onClick={() => sendReaction(emoji)}\n                className=\"text-2xl hover:scale-125 transition-transform\"\n              >\n                {emoji}\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Chat (if enabled) */}\n      {battleConfig.chatEnabled && (\n        <div className=\"border-t p-4\">\n          <div className=\"h-24 overflow-y-auto bg-gray-50 rounded p-2 mb-2\">\n            {chat.map(message => (\n              <div key={message.id} className=\"text-sm mb-1\">\n                <span className=\"font-medium\">{message.username}:</span>\n                <span className=\"ml-1\">{message.message}</span>\n              </div>\n            ))}\n          </div>\n          <div className=\"flex space-x-2\">\n            <input\n              type=\"text\"\n              value={newMessage}\n              onChange={(e) => setNewMessage(e.target.value)}\n              onKeyPress={(e) => e.key === 'Enter' && sendChatMessage()}\n              placeholder=\"Type a message...\"\n              className=\"flex-1 px-3 py-1 border rounded\"\n            />\n            <button\n              onClick={sendChatMessage}\n              className=\"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600\"\n            >\n              Send\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default CollaborativeQuizBattle;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\social\\GroupProgressTracker.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'AnimatePresence' is defined but never used. Allowed unused vars must match /^React$/u.","line":2,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":33},{"ruleId":"no-unused-vars","severity":1,"message":"'userId' is defined but never used. Allowed unused args must match /^_/u.","line":4,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":48},{"ruleId":"no-unused-vars","severity":1,"message":"'selectedMetric' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":24},{"ruleId":"no-unused-vars","severity":1,"message":"'setSelectedMetric' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":7,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":43},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchGroupProgress'. Either include it or remove the dependency array.","line":14,"column":6,"nodeType":"ArrayExpression","endLine":14,"endColumn":34,"suggestions":[{"desc":"Update the dependencies array to be: [fetchGroupProgress, groupId, selectedTimeframe]","fix":{"range":[585,613],"text":"[fetchGroupProgress, groupId, selectedTimeframe]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nconst GroupProgressTracker = ({ groupId, userId, className = '' }) => {\n  const [groupProgress, setGroupProgress] = useState(null);\n  const [selectedTimeframe, setSelectedTimeframe] = useState('week');\n  const [selectedMetric, setSelectedMetric] = useState('overview');\n  const [loading, setLoading] = useState(true);\n  const [memberProgress, setMemberProgress] = useState([]);\n  const [studyGoals, setStudyGoals] = useState([]);\n\n  useEffect(() => {\n    fetchGroupProgress();\n  }, [groupId, selectedTimeframe]);\n\n  const fetchGroupProgress = async () => {\n    try {\n      setLoading(true);\n      \n      // In a real app, this would fetch from the API\n      // const response = await fetch(`/api/study-groups/${groupId}/progress?timeframe=${selectedTimeframe}`);\n      // const data = await response.json();\n      \n      // Mock data for demonstration\n      const mockData = generateMockProgressData();\n      setGroupProgress(mockData.groupProgress);\n      setMemberProgress(mockData.memberProgress);\n      setStudyGoals(mockData.studyGoals);\n      \n    } catch (error) {\n      console.error('Error fetching group progress:', error);\n      const mockData = generateMockProgressData();\n      setGroupProgress(mockData.groupProgress);\n      setMemberProgress(mockData.memberProgress);\n      setStudyGoals(mockData.studyGoals);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const generateMockProgressData = () => ({\n    groupProgress: {\n      totalStudyHours: 127.5,\n      questionsCompleted: 1847,\n      averageAccuracy: 0.78,\n      conceptsMastered: [\n        'BIO11-5.1', 'BIO11-5.2', 'BIO11-6.1'\n      ],\n      weakAreas: [\n        'BIO11-7.2', 'BIO11-8.1'\n      ],\n      currentFocus: [\n        'BIO11-7.1', 'BIO11-7.2'\n      ],\n      weeklyProgress: {\n        studyHours: [8.5, 12.3, 15.2, 18.7, 21.4, 19.8, 22.1],\n        accuracy: [0.72, 0.75, 0.78, 0.76, 0.81, 0.79, 0.83],\n        questionsCompleted: [87, 134, 178, 203, 245, 267, 289]\n      },\n      subjectBreakdown: {\n        'Module 5': { mastery: 0.85, hours: 32.5, questions: 456 },\n        'Module 6': { mastery: 0.72, hours: 28.3, questions: 398 },\n        'Module 7': { mastery: 0.61, hours: 35.7, questions: 521 },\n        'Module 8': { mastery: 0.68, hours: 31.0, questions: 472 }\n      },\n      achievements: [\n        { type: 'study_streak', milestone: '7_days', achievedBy: ['user_1', 'user_2'] },\n        { type: 'collaboration', milestone: 'team_spirit', achievedBy: ['user_1', 'user_2', 'user_3'] },\n        { type: 'mastery', milestone: 'module_expert', achievedBy: ['user_1'] }\n      ]\n    },\n    memberProgress: [\n      {\n        userId: 'user_1',\n        displayName: 'Sarah Chen',\n        role: 'moderator',\n        stats: {\n          studyHours: 45.2,\n          questionsCompleted: 623,\n          accuracy: 0.87,\n          helpProvided: 23,\n          sessionsAttended: 12\n        },\n        strengths: ['BIO11-5.1', 'BIO11-5.2'],\n        weaknesses: ['BIO11-7.2'],\n        trend: 'improving',\n        lastActive: new Date(Date.now() - 2 * 60 * 60 * 1000) // 2 hours ago\n      },\n      {\n        userId: 'user_2',\n        displayName: 'Alex Kumar',\n        role: 'member',\n        stats: {\n          studyHours: 38.7,\n          questionsCompleted: 534,\n          accuracy: 0.74,\n          helpProvided: 15,\n          sessionsAttended: 10\n        },\n        strengths: ['BIO11-6.1'],\n        weaknesses: ['BIO11-8.1', 'BIO11-7.2'],\n        trend: 'stable',\n        lastActive: new Date(Date.now() - 4 * 60 * 60 * 1000) // 4 hours ago\n      },\n      {\n        userId: 'user_3',\n        displayName: 'Emma Watson',\n        role: 'member',\n        stats: {\n          studyHours: 43.6,\n          questionsCompleted: 690,\n          accuracy: 0.81,\n          helpProvided: 31,\n          sessionsAttended: 14\n        },\n        strengths: ['BIO11-6.1', 'BIO11-7.1'],\n        weaknesses: ['BIO11-8.2'],\n        trend: 'improving',\n        lastActive: new Date(Date.now() - 30 * 60 * 1000) // 30 minutes ago\n      }\n    ],\n    studyGoals: [\n      {\n        id: 'goal_1',\n        title: 'Master Module 7 Concepts',\n        description: 'Achieve 80% mastery in all Module 7 dot points',\n        targetDate: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000),\n        progress: 67,\n        type: 'mastery',\n        assignedTo: 'all',\n        milestones: [\n          { name: 'Complete pathogen structure questions', completed: true },\n          { name: 'Understand adaptive immunity', completed: false },\n          { name: 'Practice disease mechanisms', completed: false }\n        ]\n      },\n      {\n        id: 'goal_2',\n        title: 'Group Study Marathon',\n        description: 'Complete 100 hours of collective study time',\n        targetDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000),\n        progress: 85,\n        type: 'collaboration',\n        assignedTo: 'all',\n        milestones: [\n          { name: 'Reach 50 hours', completed: true },\n          { name: 'Reach 75 hours', completed: true },\n          { name: 'Reach 100 hours', completed: false }\n        ]\n      },\n      {\n        id: 'goal_3',\n        title: 'Weekly Quiz Challenge',\n        description: 'Each member completes 50 questions this week',\n        targetDate: new Date(Date.now() + 3 * 24 * 60 * 60 * 1000),\n        progress: 78,\n        type: 'practice',\n        assignedTo: 'individual',\n        milestones: [\n          { name: 'Everyone at 25 questions', completed: true },\n          { name: 'Everyone at 40 questions', completed: false },\n          { name: 'Everyone at 50 questions', completed: false }\n        ]\n      }\n    ]\n  });\n\n  const renderOverviewMetrics = () => (\n    <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6\">\n      {[\n        { \n          label: 'Total Study Hours', \n          value: `${groupProgress.totalStudyHours}h`, \n          icon: '', \n          color: 'blue',\n          change: '+12.5%'\n        },\n        { \n          label: 'Questions Completed', \n          value: groupProgress.questionsCompleted.toLocaleString(), \n          icon: '', \n          color: 'green',\n          change: '+8.3%'\n        },\n        { \n          label: 'Average Accuracy', \n          value: `${Math.round(groupProgress.averageAccuracy * 100)}%`, \n          icon: '', \n          color: 'purple',\n          change: '+2.1%'\n        },\n        { \n          label: 'Concepts Mastered', \n          value: groupProgress.conceptsMastered.length, \n          icon: '', \n          color: 'orange',\n          change: '+3 new'\n        }\n      ].map((metric, index) => (\n        <motion.div\n          key={index}\n          initial={{ opacity: 0, scale: 0.9 }}\n          animate={{ opacity: 1, scale: 1 }}\n          transition={{ delay: index * 0.1 }}\n          className={`bg-gradient-to-br from-${metric.color}-50 to-${metric.color}-100 p-4 rounded-lg border border-${metric.color}-200`}\n        >\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-gray-600\">{metric.label}</p>\n              <p className=\"text-2xl font-bold text-gray-800\">{metric.value}</p>\n              <p className={`text-xs font-medium ${metric.change.startsWith('+') ? 'text-green-600' : 'text-red-600'}`}>\n                {metric.change} this week\n              </p>\n            </div>\n            <div className=\"text-3xl\">{metric.icon}</div>\n          </div>\n        </motion.div>\n      ))}\n    </div>\n  );\n\n  const renderWeeklyProgressChart = () => (\n    <div className=\"bg-white p-6 rounded-lg border mb-6\">\n      <h4 className=\"text-lg font-semibold text-gray-800 mb-4\"> Weekly Progress</h4>\n      \n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Study Hours Chart */}\n        <div>\n          <h5 className=\"font-medium text-gray-700 mb-3\">Study Hours</h5>\n          <div className=\"flex items-end space-x-1 h-32\">\n            {groupProgress.weeklyProgress.studyHours.map((hours, index) => (\n              <div key={index} className=\"flex-1 flex flex-col items-center\">\n                <motion.div\n                  className=\"bg-blue-500 rounded-t w-full\"\n                  initial={{ height: 0 }}\n                  animate={{ height: `${(hours / Math.max(...groupProgress.weeklyProgress.studyHours)) * 100}%` }}\n                  transition={{ duration: 0.8, delay: index * 0.1 }}\n                />\n                <span className=\"text-xs text-gray-500 mt-1\">\n                  {['M', 'T', 'W', 'T', 'F', 'S', 'S'][index]}\n                </span>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Accuracy Chart */}\n        <div>\n          <h5 className=\"font-medium text-gray-700 mb-3\">Accuracy</h5>\n          <div className=\"flex items-end space-x-1 h-32\">\n            {groupProgress.weeklyProgress.accuracy.map((accuracy, index) => (\n              <div key={index} className=\"flex-1 flex flex-col items-center\">\n                <motion.div\n                  className=\"bg-green-500 rounded-t w-full\"\n                  initial={{ height: 0 }}\n                  animate={{ height: `${accuracy * 100}%` }}\n                  transition={{ duration: 0.8, delay: index * 0.1 }}\n                />\n                <span className=\"text-xs text-gray-500 mt-1\">\n                  {['M', 'T', 'W', 'T', 'F', 'S', 'S'][index]}\n                </span>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Questions Chart */}\n        <div>\n          <h5 className=\"font-medium text-gray-700 mb-3\">Questions</h5>\n          <div className=\"flex items-end space-x-1 h-32\">\n            {groupProgress.weeklyProgress.questionsCompleted.map((questions, index) => (\n              <div key={index} className=\"flex-1 flex flex-col items-center\">\n                <motion.div\n                  className=\"bg-purple-500 rounded-t w-full\"\n                  initial={{ height: 0 }}\n                  animate={{ height: `${(questions / Math.max(...groupProgress.weeklyProgress.questionsCompleted)) * 100}%` }}\n                  transition={{ duration: 0.8, delay: index * 0.1 }}\n                />\n                <span className=\"text-xs text-gray-500 mt-1\">\n                  {['M', 'T', 'W', 'T', 'F', 'S', 'S'][index]}\n                </span>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderMemberProgress = () => (\n    <div className=\"bg-white p-6 rounded-lg border mb-6\">\n      <h4 className=\"text-lg font-semibold text-gray-800 mb-4\"> Member Progress</h4>\n      \n      <div className=\"space-y-4\">\n        {memberProgress.map((member, index) => (\n          <motion.div\n            key={member.userId}\n            initial={{ opacity: 0, x: -20 }}\n            animate={{ opacity: 1, x: 0 }}\n            transition={{ delay: index * 0.1 }}\n            className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"\n          >\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"relative\">\n                <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold\">\n                  {member.displayName.charAt(0)}\n                </div>\n                <div className={`absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-white ${\n                  new Date() - member.lastActive < 60 * 60 * 1000 ? 'bg-green-500' : 'bg-gray-400'\n                }`} />\n              </div>\n              \n              <div>\n                <div className=\"flex items-center space-x-2\">\n                  <h5 className=\"font-semibold text-gray-800\">{member.displayName}</h5>\n                  <span className={`text-xs px-2 py-1 rounded-full ${\n                    member.role === 'moderator' ? 'bg-purple-100 text-purple-800' : 'bg-blue-100 text-blue-800'\n                  }`}>\n                    {member.role}\n                  </span>\n                  <span className={`text-xs px-2 py-1 rounded-full ${\n                    member.trend === 'improving' ? 'bg-green-100 text-green-800' :\n                    member.trend === 'stable' ? 'bg-yellow-100 text-yellow-800' :\n                    'bg-red-100 text-red-800'\n                  }`}>\n                    {member.trend === 'improving' ? '' : member.trend === 'stable' ? '' : ''} {member.trend}\n                  </span>\n                </div>\n                <p className=\"text-sm text-gray-600\">\n                  Last active: {getRelativeTime(member.lastActive)}\n                </p>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-3 gap-4 text-center\">\n              <div>\n                <p className=\"text-sm font-semibold text-gray-800\">{member.stats.studyHours}h</p>\n                <p className=\"text-xs text-gray-600\">Study Time</p>\n              </div>\n              <div>\n                <p className=\"text-sm font-semibold text-gray-800\">{Math.round(member.stats.accuracy * 100)}%</p>\n                <p className=\"text-xs text-gray-600\">Accuracy</p>\n              </div>\n              <div>\n                <p className=\"text-sm font-semibold text-gray-800\">{member.stats.helpProvided}</p>\n                <p className=\"text-xs text-gray-600\">Help Given</p>\n              </div>\n            </div>\n          </motion.div>\n        ))}\n      </div>\n    </div>\n  );\n\n  const renderSubjectBreakdown = () => (\n    <div className=\"bg-white p-6 rounded-lg border mb-6\">\n      <h4 className=\"text-lg font-semibold text-gray-800 mb-4\"> Subject Mastery</h4>\n      \n      <div className=\"space-y-4\">\n        {Object.entries(groupProgress.subjectBreakdown).map(([subject, data], index) => (\n          <div key={subject} className=\"space-y-2\">\n            <div className=\"flex justify-between items-center\">\n              <span className=\"font-medium text-gray-800\">{subject}</span>\n              <div className=\"text-sm text-gray-600\">\n                {Math.round(data.mastery * 100)}%  {data.hours}h  {data.questions} questions\n              </div>\n            </div>\n            <div className=\"w-full bg-gray-200 rounded-full h-3\">\n              <motion.div\n                className={`h-3 rounded-full ${\n                  data.mastery > 0.8 ? 'bg-green-500' :\n                  data.mastery > 0.6 ? 'bg-yellow-500' : 'bg-red-500'\n                }`}\n                initial={{ width: 0 }}\n                animate={{ width: `${data.mastery * 100}%` }}\n                transition={{ duration: 1, delay: index * 0.2 }}\n              />\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n\n  const renderStudyGoals = () => (\n    <div className=\"bg-white p-6 rounded-lg border mb-6\">\n      <h4 className=\"text-lg font-semibold text-gray-800 mb-4\"> Study Goals</h4>\n      \n      <div className=\"space-y-4\">\n        {studyGoals.map((goal, index) => (\n          <motion.div\n            key={goal.id}\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: index * 0.1 }}\n            className=\"border rounded-lg p-4\"\n          >\n            <div className=\"flex justify-between items-start mb-3\">\n              <div className=\"flex-1\">\n                <h5 className=\"font-semibold text-gray-800\">{goal.title}</h5>\n                <p className=\"text-sm text-gray-600\">{goal.description}</p>\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  Due: {goal.targetDate.toLocaleDateString()}\n                </p>\n              </div>\n              <div className=\"text-right\">\n                <span className={`text-xs px-2 py-1 rounded-full ${\n                  goal.type === 'mastery' ? 'bg-purple-100 text-purple-800' :\n                  goal.type === 'collaboration' ? 'bg-blue-100 text-blue-800' :\n                  'bg-green-100 text-green-800'\n                }`}>\n                  {goal.type}\n                </span>\n                <p className=\"text-sm font-semibold text-gray-800 mt-1\">{goal.progress}%</p>\n              </div>\n            </div>\n\n            {/* Progress Bar */}\n            <div className=\"w-full bg-gray-200 rounded-full h-2 mb-3\">\n              <motion.div\n                className={`h-2 rounded-full ${\n                  goal.progress > 80 ? 'bg-green-500' :\n                  goal.progress > 50 ? 'bg-yellow-500' : 'bg-red-500'\n                }`}\n                initial={{ width: 0 }}\n                animate={{ width: `${goal.progress}%` }}\n                transition={{ duration: 1, delay: index * 0.2 }}\n              />\n            </div>\n\n            {/* Milestones */}\n            <div className=\"space-y-1\">\n              {goal.milestones.map((milestone, mIndex) => (\n                <div key={mIndex} className=\"flex items-center space-x-2 text-sm\">\n                  <span className={`${milestone.completed ? 'text-green-600' : 'text-gray-400'}`}>\n                    {milestone.completed ? '' : ''}\n                  </span>\n                  <span className={`${milestone.completed ? 'text-gray-800' : 'text-gray-600'}`}>\n                    {milestone.name}\n                  </span>\n                </div>\n              ))}\n            </div>\n          </motion.div>\n        ))}\n      </div>\n    </div>\n  );\n\n  const getRelativeTime = (date) => {\n    const diff = new Date() - date;\n    const minutes = Math.floor(diff / (1000 * 60));\n    const hours = Math.floor(diff / (1000 * 60 * 60));\n    const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n\n    if (minutes < 60) return `${minutes}m ago`;\n    if (hours < 24) return `${hours}h ago`;\n    return `${days}d ago`;\n  };\n\n  if (loading) {\n    return (\n      <div className={`bg-white rounded-lg p-6 shadow-lg ${className}`}>\n        <div className=\"animate-pulse space-y-4\">\n          <div className=\"h-6 bg-gray-300 rounded w-1/3\"></div>\n          <div className=\"grid grid-cols-4 gap-4\">\n            {[1, 2, 3, 4].map(i => (\n              <div key={i} className=\"h-20 bg-gray-300 rounded\"></div>\n            ))}\n          </div>\n          <div className=\"h-40 bg-gray-300 rounded\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`bg-gray-50 ${className}`}>\n      {/* Header */}\n      <div className=\"bg-white p-6 rounded-lg shadow-sm mb-6\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-800\">Group Progress Tracker</h2>\n            <p className=\"text-gray-600\">Monitor your study group&apos;s collective learning journey</p>\n          </div>\n          \n          {/* Time Range Selector */}\n          <div className=\"flex space-x-2\">\n            {[\n              { value: 'week', label: 'This Week' },\n              { value: 'month', label: 'This Month' },\n              { value: 'all', label: 'All Time' }\n            ].map(option => (\n              <button\n                key={option.value}\n                onClick={() => setSelectedTimeframe(option.value)}\n                className={`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${\n                  selectedTimeframe === option.value\n                    ? 'bg-blue-500 text-white'\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                {option.label}\n              </button>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Overview Metrics */}\n      {renderOverviewMetrics()}\n\n      {/* Weekly Progress Charts */}\n      {renderWeeklyProgressChart()}\n\n      {/* Member Progress */}\n      {renderMemberProgress()}\n\n      {/* Subject Breakdown */}\n      {renderSubjectBreakdown()}\n\n      {/* Study Goals */}\n      {renderStudyGoals()}\n\n      {/* Group Achievements */}\n      <div className=\"bg-white p-6 rounded-lg border\">\n        <h4 className=\"text-lg font-semibold text-gray-800 mb-4\"> Recent Achievements</h4>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          {groupProgress.achievements.map((achievement, index) => (\n            <motion.div\n              key={index}\n              initial={{ opacity: 0, scale: 0.9 }}\n              animate={{ opacity: 1, scale: 1 }}\n              transition={{ delay: index * 0.2 }}\n              className={`p-4 rounded-lg border-l-4 ${\n                achievement.type === 'study_streak' ? 'border-orange-500 bg-orange-50' :\n                achievement.type === 'collaboration' ? 'border-blue-500 bg-blue-50' :\n                'border-purple-500 bg-purple-50'\n              }`}\n            >\n              <div className=\"flex items-center space-x-2 mb-2\">\n                <span className=\"text-2xl\">\n                  {achievement.type === 'study_streak' ? '' :\n                   achievement.type === 'collaboration' ? '' : ''}\n                </span>\n                <h5 className=\"font-semibold text-gray-800\">\n                  {achievement.type === 'study_streak' ? 'Study Streak' :\n                   achievement.type === 'collaboration' ? 'Team Spirit' : 'Module Expert'}\n                </h5>\n              </div>\n              <p className=\"text-sm text-gray-600 mb-2\">\n                {achievement.milestone.replace('_', ' ').toUpperCase()}\n              </p>\n              <div className=\"flex items-center space-x-1\">\n                <span className=\"text-xs text-gray-500\">Achieved by:</span>\n                <div className=\"flex space-x-1\">\n                  {achievement.achievedBy.slice(0, 3).map((userId, i) => (\n                    <div key={i} className=\"w-6 h-6 bg-gray-300 rounded-full\"></div>\n                  ))}\n                  {achievement.achievedBy.length > 3 && (\n                    <span className=\"text-xs text-gray-500\">+{achievement.achievedBy.length - 3}</span>\n                  )}\n                </div>\n              </div>\n            </motion.div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default GroupProgressTracker;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\social\\LiveTutoringSession.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'sessionStarted' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":12,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":24},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchSession'. Either include it or remove the dependency array.","line":28,"column":6,"nodeType":"ArrayExpression","endLine":28,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [fetchSession, sessionId]","fix":{"range":[1071,1082],"text":"[fetchSession, sessionId]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nconst LiveTutoringSession = ({ sessionId, userId, role = 'tutee', onEndSession }) => {\n  const [session, setSession] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [chatMessages, setChatMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [activeQuestion, setActiveQuestion] = useState(null);\n  const [conceptNotes, setConceptNotes] = useState([]);\n  const [sessionTimer, setSessionTimer] = useState(0);\n  const [sessionStarted, setSessionStarted] = useState(false);\n  const [showWhiteboard, setShowWhiteboard] = useState(false);\n  const [currentConcept, setCurrentConcept] = useState('');\n  const [conceptExplanation, setConceptExplanation] = useState('');\n  const chatEndRef = useRef(null);\n  const timerRef = useRef(null);\n\n  useEffect(() => {\n    fetchSession();\n    startTimer();\n    \n    return () => {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n      }\n    };\n  }, [sessionId]);\n\n  useEffect(() => {\n    chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [chatMessages]);\n\n  const fetchSession = async () => {\n    try {\n      setLoading(true);\n      // Mock session data\n      const mockSession = {\n        sessionId,\n        tutor: {\n          userId: 'tutor_1',\n          displayName: 'Sarah Chen',\n          expertise: ['BIO11-5.1', 'BIO11-5.2', 'BIO11-6.1'],\n          rating: 4.8\n        },\n        tutee: {\n          userId: 'student_1',\n          displayName: 'Alex Student',\n          currentLevel: 'intermediate'\n        },\n        subject: 'biology',\n        topics: ['Meiosis', 'Inheritance Patterns'],\n        dotPoints: ['BIO11-5.1', 'BIO11-5.2'],\n        difficulty: 'intermediate',\n        duration: 60,\n        status: 'active',\n        sessionNotes: {\n          objectives: [\n            'Understand the process of meiosis',\n            'Learn inheritance patterns',\n            'Practice genetic crosses'\n          ],\n          conceptsExplained: [],\n          questionsAsked: []\n        }\n      };\n      \n      setSession(mockSession);\n      setSessionStarted(true);\n    } catch (error) {\n      console.error('Error fetching session:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const startTimer = () => {\n    timerRef.current = setInterval(() => {\n      setSessionTimer(prev => prev + 1);\n    }, 1000);\n  };\n\n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const sendMessage = () => {\n    if (!newMessage.trim()) return;\n    \n    const message = {\n      id: Date.now(),\n      userId,\n      username: role === 'tutor' ? session.tutor.displayName : session.tutee.displayName,\n      message: newMessage,\n      timestamp: new Date(),\n      type: 'chat'\n    };\n    \n    setChatMessages(prev => [...prev, message]);\n    setNewMessage('');\n  };\n\n  const addConceptExplanation = async () => {\n    if (!currentConcept || !conceptExplanation) return;\n    \n    try {\n      const conceptData = {\n        dotPoint: currentConcept,\n        explanation: conceptExplanation,\n        example: '',\n        understood: true,\n        userId\n      };\n\n      // Add to local state\n      const newConcept = {\n        id: Date.now(),\n        ...conceptData,\n        timestamp: new Date()\n      };\n      \n      setConceptNotes(prev => [...prev, newConcept]);\n      \n      // Add system message\n      const systemMessage = {\n        id: Date.now() + 1,\n        userId: 'system',\n        username: 'System',\n        message: ` ${role === 'tutor' ? 'Tutor' : 'Student'} added explanation for ${currentConcept}`,\n        timestamp: new Date(),\n        type: 'system'\n      };\n      \n      setChatMessages(prev => [...prev, systemMessage]);\n      \n      setCurrentConcept('');\n      setConceptExplanation('');\n      \n    } catch (error) {\n      console.error('Error adding concept explanation:', error);\n    }\n  };\n\n  const startPracticeQuestion = () => {\n    const mockQuestion = {\n      id: 'question_1',\n      dotPoint: 'BIO11-5.1',\n      question: 'During meiosis, when does crossing over occur?',\n      options: [\n        'Prophase I',\n        'Metaphase I', \n        'Anaphase I',\n        'Telophase I'\n      ],\n      correctAnswer: 0,\n      explanation: 'Crossing over occurs during prophase I when homologous chromosomes pair up and exchange genetic material.'\n    };\n    \n    setActiveQuestion(mockQuestion);\n    \n    const systemMessage = {\n      id: Date.now(),\n      userId: 'system',\n      username: 'System',\n      message: ' Practice question started',\n      timestamp: new Date(),\n      type: 'system'\n    };\n    \n    setChatMessages(prev => [...prev, systemMessage]);\n  };\n\n  const answerQuestion = (answerIndex) => {\n    if (!activeQuestion) return;\n    \n    const isCorrect = answerIndex === activeQuestion.correctAnswer;\n    \n    const resultMessage = {\n      id: Date.now(),\n      userId: 'system',\n      username: 'System',\n      message: `${isCorrect ? ' Correct!' : ' Incorrect.'} ${activeQuestion.explanation}`,\n      timestamp: new Date(),\n      type: 'system'\n    };\n    \n    setChatMessages(prev => [...prev, resultMessage]);\n    setActiveQuestion(null);\n  };\n\n  const endSession = async () => {\n    try {\n      const sessionSummary = {\n        userId,\n        feedback: {\n          rating: 5,\n          comments: 'Great session!',\n          helpfulness: 5\n        },\n        outcomes: {\n          conceptsLearned: conceptNotes.length,\n          questionsResolved: 1,\n          masteryImprovement: { before: 0.6, after: 0.8 }\n        },\n        followUpNeeded: false\n      };\n\n      // Call parent callback\n      if (onEndSession) {\n        onEndSession(sessionSummary);\n      }\n      \n    } catch (error) {\n      console.error('Error ending session:', error);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-96\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading session...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-screen flex flex-col bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-white border-b p-4 flex items-center justify-between\">\n        <div className=\"flex items-center space-x-4\">\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white font-bold\">\n              {role === 'tutor' ? session.tutee.displayName?.charAt(0) : session.tutor.displayName?.charAt(0)}\n            </div>\n            <div>\n              <h3 className=\"font-semibold\">\n                {role === 'tutor' ? `Tutoring ${session.tutee.displayName}` : `Session with ${session.tutor.displayName}`}\n              </h3>\n              <p className=\"text-sm text-gray-600\">{session.subject}  {session.difficulty}</p>\n            </div>\n          </div>\n          <div className=\"flex items-center space-x-4 text-sm text-gray-600\">\n            <span> {formatTime(sessionTimer)}</span>\n            <span className=\"flex items-center space-x-1\">\n              <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></div>\n              <span>Live</span>\n            </span>\n          </div>\n        </div>\n        \n        <div className=\"flex items-center space-x-2\">\n          <button\n            onClick={() => setShowWhiteboard(!showWhiteboard)}\n            className={`px-3 py-2 rounded-lg text-sm transition-colors ${\n              showWhiteboard ? 'bg-blue-100 text-blue-800' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n            }`}\n          >\n             Whiteboard\n          </button>\n          <button\n            onClick={endSession}\n            className=\"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors\"\n          >\n            End Session\n          </button>\n        </div>\n      </div>\n\n      <div className=\"flex-1 flex overflow-hidden\">\n        {/* Main Content Area */}\n        <div className=\"flex-1 flex flex-col\">\n          {/* Session Tools */}\n          <div className=\"bg-white border-b p-3\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex space-x-2\">\n                {role === 'tutor' && (\n                  <>\n                    <button\n                      onClick={startPracticeQuestion}\n                      className=\"bg-blue-500 text-white px-3 py-1.5 rounded text-sm hover:bg-blue-600 transition-colors\"\n                    >\n                       Start Quiz\n                    </button>\n                    <button\n                      onClick={() => setShowWhiteboard(true)}\n                      className=\"bg-purple-500 text-white px-3 py-1.5 rounded text-sm hover:bg-purple-600 transition-colors\"\n                    >\n                       Draw\n                    </button>\n                  </>\n                )}\n                <button className=\"bg-green-500 text-white px-3 py-1.5 rounded text-sm hover:bg-green-600 transition-colors\">\n                   Share Screen\n                </button>\n              </div>\n              \n              <div className=\"text-sm text-gray-600\">\n                Topics: {session.topics.join(', ')}\n              </div>\n            </div>\n          </div>\n\n          {/* Active Question */}\n          <AnimatePresence>\n            {activeQuestion && (\n              <motion.div\n                initial={{ opacity: 0, y: -20 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: -20 }}\n                className=\"bg-blue-50 border-b p-4\"\n              >\n                <h4 className=\"font-semibold text-blue-800 mb-3\">Practice Question</h4>\n                <p className=\"text-gray-800 mb-3\">{activeQuestion.question}</p>\n                <div className=\"grid grid-cols-2 gap-2\">\n                  {activeQuestion.options.map((option, index) => (\n                    <button\n                      key={index}\n                      onClick={() => answerQuestion(index)}\n                      className=\"p-2 text-left bg-white border border-blue-200 rounded hover:bg-blue-100 transition-colors\"\n                    >\n                      {String.fromCharCode(65 + index)}. {option}\n                    </button>\n                  ))}\n                </div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n\n          {/* Chat Area */}\n          <div className=\"flex-1 overflow-y-auto p-4 space-y-3\">\n            {/* Session Objectives */}\n            <div className=\"bg-yellow-50 p-3 rounded-lg border border-yellow-200\">\n              <h4 className=\"font-semibold text-yellow-800 mb-2\">Session Objectives</h4>\n              <ul className=\"list-disc list-inside text-sm text-yellow-700 space-y-1\">\n                {session.sessionNotes.objectives.map((objective, index) => (\n                  <li key={index}>{objective}</li>\n                ))}\n              </ul>\n            </div>\n\n            {/* Chat Messages */}\n            {chatMessages.map(message => (\n              <motion.div\n                key={message.id}\n                initial={{ opacity: 0, y: 10 }}\n                animate={{ opacity: 1, y: 0 }}\n                className={`flex ${message.userId === userId ? 'justify-end' : 'justify-start'}`}\n              >\n                <div className={`max-w-xs lg:max-w-md px-3 py-2 rounded-lg ${\n                  message.type === 'system' ? 'bg-gray-100 text-gray-700 text-sm' :\n                  message.userId === userId ? 'bg-blue-500 text-white' : 'bg-white border border-gray-200'\n                }`}>\n                  {message.type !== 'system' && (\n                    <p className=\"text-xs opacity-75 mb-1\">{message.username}</p>\n                  )}\n                  <p className=\"text-sm\">{message.message}</p>\n                  <p className=\"text-xs opacity-50 mt-1\">\n                    {message.timestamp.toLocaleTimeString()}\n                  </p>\n                </div>\n              </motion.div>\n            ))}\n            <div ref={chatEndRef} />\n          </div>\n\n          {/* Message Input */}\n          <div className=\"bg-white border-t p-4\">\n            <div className=\"flex space-x-2\">\n              <input\n                type=\"text\"\n                value={newMessage}\n                onChange={(e) => setNewMessage(e.target.value)}\n                onKeyPress={(e) => e.key === 'Enter' && sendMessage()}\n                placeholder=\"Type your message...\"\n                className=\"flex-1 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              />\n              <button\n                onClick={sendMessage}\n                className=\"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors\"\n              >\n                Send\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Sidebar */}\n        <div className=\"w-80 bg-white border-l\">\n          {/* Tabs */}\n          <div className=\"border-b\">\n            <div className=\"flex\">\n              <button className=\"flex-1 py-2 px-3 text-sm font-medium bg-blue-50 text-blue-600 border-b-2 border-blue-500\">\n                 Notes\n              </button>\n              <button className=\"flex-1 py-2 px-3 text-sm font-medium text-gray-600 hover:bg-gray-50\">\n                 Resources\n              </button>\n            </div>\n          </div>\n\n          {/* Notes Content */}\n          <div className=\"p-4 h-full overflow-y-auto\">\n            {/* Add Concept Form */}\n            {role === 'tutor' && (\n              <div className=\"mb-4 p-3 bg-gray-50 rounded-lg\">\n                <h5 className=\"font-semibold text-gray-800 mb-2\">Add Concept Explanation</h5>\n                <select\n                  value={currentConcept}\n                  onChange={(e) => setCurrentConcept(e.target.value)}\n                  className=\"w-full p-2 mb-2 border border-gray-300 rounded text-sm\"\n                >\n                  <option value=\"\">Select concept...</option>\n                  {session.dotPoints.map(dp => (\n                    <option key={dp} value={dp}>{dp}</option>\n                  ))}\n                </select>\n                <textarea\n                  value={conceptExplanation}\n                  onChange={(e) => setConceptExplanation(e.target.value)}\n                  placeholder=\"Explain the concept...\"\n                  rows={3}\n                  className=\"w-full p-2 mb-2 border border-gray-300 rounded text-sm\"\n                />\n                <button\n                  onClick={addConceptExplanation}\n                  disabled={!currentConcept || !conceptExplanation}\n                  className=\"w-full bg-green-500 text-white py-1.5 rounded text-sm hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                >\n                  Add Explanation\n                </button>\n              </div>\n            )}\n\n            {/* Concept Notes */}\n            <div>\n              <h5 className=\"font-semibold text-gray-800 mb-3\">Concepts Covered</h5>\n              <div className=\"space-y-3\">\n                {conceptNotes.map(note => (\n                  <div key={note.id} className=\"p-3 bg-blue-50 rounded-lg border border-blue-200\">\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"text-sm font-medium text-blue-800\">{note.dotPoint}</span>\n                      <span className=\"text-xs text-blue-600\">\n                        {note.timestamp.toLocaleTimeString()}\n                      </span>\n                    </div>\n                    <p className=\"text-sm text-gray-700\">{note.explanation}</p>\n                  </div>\n                ))}\n                \n                {conceptNotes.length === 0 && (\n                  <div className=\"text-center text-gray-500 py-8\">\n                    <div className=\"text-3xl mb-2\"></div>\n                    <p className=\"text-sm\">No concept notes yet</p>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Whiteboard Modal */}\n      <AnimatePresence>\n        {showWhiteboard && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\"\n            onClick={() => setShowWhiteboard(false)}\n          >\n            <motion.div\n              initial={{ scale: 0.9, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.9, opacity: 0 }}\n              className=\"bg-white rounded-lg w-4/5 h-4/5 p-4\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold\">Shared Whiteboard</h3>\n                <button\n                  onClick={() => setShowWhiteboard(false)}\n                  className=\"text-gray-500 hover:text-gray-700\"\n                >\n                  \n                </button>\n              </div>\n              <div className=\"h-full bg-gray-50 rounded-lg flex items-center justify-center\">\n                <div className=\"text-center text-gray-500\">\n                  <div className=\"text-4xl mb-2\"></div>\n                  <p>Whiteboard functionality would be implemented here</p>\n                  <p className=\"text-sm\">Real-time collaborative drawing canvas</p>\n                </div>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n};\n\nexport default LiveTutoringSession;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\social\\PeerTutoring.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'fetchAvailableTutors' and 'fetchUserSessions'. Either include them or remove the dependency array.","line":25,"column":6,"nodeType":"ArrayExpression","endLine":25,"endColumn":34,"suggestions":[{"desc":"Update the dependencies array to be: [activeTab, userId, subject, fetchAvailableTutors, fetchUserSessions]","fix":{"range":[829,857],"text":"[activeTab, userId, subject, fetchAvailableTutors, fetchUserSessions]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nconst PeerTutoring = ({ userId, subject = 'biology', className = '' }) => {\n  const [activeTab, setActiveTab] = useState('find-tutor');\n  const [availableTutors, setAvailableTutors] = useState([]);\n  const [userSessions, setUserSessions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [selectedTutor, setSelectedTutor] = useState(null);\n  const [sessionRequest, setSessionRequest] = useState({\n    topics: [],\n    dotPoints: [],\n    difficulty: 'intermediate',\n    preferredTime: '',\n    duration: 60,\n    objectives: []\n  });\n\n  useEffect(() => {\n    if (activeTab === 'find-tutor') {\n      fetchAvailableTutors();\n    } else if (activeTab === 'my-sessions') {\n      fetchUserSessions();\n    }\n  }, [activeTab, userId, subject]);\n\n  const fetchAvailableTutors = async () => {\n    try {\n      setLoading(true);\n      const response = await fetch(`/api/peer-tutoring/tutors/search?subject=${subject}&difficulty=${sessionRequest.difficulty}&maxResults=10`);\n      const data = await response.json();\n      \n      if (data.success) {\n        setAvailableTutors(data.tutors);\n      }\n    } catch (error) {\n      console.error('Error fetching tutors:', error);\n      setAvailableTutors(generateMockTutors());\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchUserSessions = async () => {\n    try {\n      setLoading(true);\n      const response = await fetch(`/api/peer-tutoring/sessions/user/${userId}`);\n      const data = await response.json();\n      \n      if (data.success) {\n        setUserSessions(data.sessions);\n      }\n    } catch (error) {\n      console.error('Error fetching sessions:', error);\n      setUserSessions(generateMockSessions());\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const generateMockTutors = () => [\n    {\n      userId: 'tutor_1',\n      displayName: 'Sarah Chen',\n      expertise: [{ subject: 'biology', dotPoints: ['BIO11-5.1', 'BIO11-5.2'], proficiencyLevel: 0.95 }],\n      stats: { averageRating: 4.8, totalSessions: 124, successRate: 0.96 },\n      availability: { timezone: 'Australia/Sydney' },\n      verification: { isVerified: true, badges: ['expert', 'patient'] },\n      matchScore: 0.92\n    },\n    {\n      userId: 'tutor_2',\n      displayName: 'Alex Kumar',\n      expertise: [{ subject: 'biology', dotPoints: ['BIO11-6.1', 'BIO11-7.1'], proficiencyLevel: 0.88 }],\n      stats: { averageRating: 4.6, totalSessions: 87, successRate: 0.91 },\n      availability: { timezone: 'Australia/Sydney' },\n      verification: { isVerified: true, badges: ['helpful'] },\n      matchScore: 0.85\n    },\n    {\n      userId: 'tutor_3',\n      displayName: 'Emma Watson',\n      expertise: [{ subject: 'biology', dotPoints: ['BIO11-8.1', 'BIO11-8.2'], proficiencyLevel: 0.91 }],\n      stats: { averageRating: 4.9, totalSessions: 156, successRate: 0.94 },\n      availability: { timezone: 'Australia/Sydney' },\n      verification: { isVerified: true, badges: ['top_rated', 'expert'] },\n      matchScore: 0.89\n    }\n  ];\n\n  const generateMockSessions = () => [\n    {\n      sessionId: 'session_1',\n      tutor: { displayName: 'Sarah Chen', userId: 'tutor_1' },\n      tutee: { displayName: 'You', userId: userId },\n      subject: 'biology',\n      topics: ['Meiosis', 'Inheritance'],\n      difficulty: 'intermediate',\n      scheduledTime: new Date(Date.now() + 24 * 60 * 60 * 1000),\n      duration: 60,\n      status: 'scheduled'\n    },\n    {\n      sessionId: 'session_2',\n      tutor: { displayName: 'Alex Kumar', userId: 'tutor_2' },\n      tutee: { displayName: 'You', userId: userId },\n      subject: 'biology',\n      topics: ['Genetic Mutations'],\n      difficulty: 'advanced',\n      scheduledTime: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000),\n      duration: 45,\n      status: 'completed',\n      feedback: {\n        tuteeFeedback: { rating: 5, helpfulness: 5, clarity: 5 }\n      }\n    }\n  ];\n\n  const requestTutoringSession = async (tutorId) => {\n    try {\n      setLoading(true);\n      \n      const sessionData = {\n        tutorId,\n        tuteeId: userId,\n        subject,\n        topics: sessionRequest.topics,\n        dotPoints: sessionRequest.dotPoints,\n        difficulty: sessionRequest.difficulty,\n        scheduledTime: sessionRequest.preferredTime,\n        duration: sessionRequest.duration,\n        objectives: sessionRequest.objectives\n      };\n\n      const response = await fetch('/api/peer-tutoring/sessions/request', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(sessionData)\n      });\n\n      const data = await response.json();\n      \n      if (data.success) {\n        alert('Tutoring session requested successfully!');\n        setSelectedTutor(null);\n        setActiveTab('my-sessions');\n        fetchUserSessions();\n      } else {\n        alert(data.message || 'Failed to request session');\n      }\n    } catch (error) {\n      console.error('Error requesting session:', error);\n      alert('Error requesting tutoring session');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const renderTutorCard = (tutor) => (\n    <motion.div\n      key={tutor.userId}\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"bg-white rounded-lg p-4 border border-gray-200 hover:shadow-lg transition-all duration-300\"\n    >\n      <div className=\"flex items-start justify-between mb-3\">\n        <div className=\"flex items-center space-x-3\">\n          <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-lg\">\n            {tutor.displayName?.charAt(0)}\n          </div>\n          <div>\n            <h4 className=\"font-semibold text-gray-800\">{tutor.displayName}</h4>\n            <div className=\"flex items-center space-x-2\">\n              <div className=\"flex items-center\">\n                {[...Array(5)].map((_, i) => (\n                  <span key={i} className={`text-sm ${i < Math.floor(tutor.stats.averageRating) ? 'text-yellow-500' : 'text-gray-300'}`}>\n                    \n                  </span>\n                ))}\n                <span className=\"text-sm text-gray-600 ml-1\">\n                  {tutor.stats.averageRating.toFixed(1)} ({tutor.stats.totalSessions} sessions)\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"flex flex-col items-end\">\n          <div className=\"text-sm font-semibold text-blue-600\">\n            {Math.round(tutor.matchScore * 100)}% match\n          </div>\n          {tutor.verification?.isVerified && (\n            <div className=\"flex items-center text-green-600 text-xs mt-1\">\n              <span className=\"mr-1\"></span>\n              Verified\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Expertise Tags */}\n      <div className=\"mb-3\">\n        <p className=\"text-xs text-gray-600 mb-2\">Expertise:</p>\n        <div className=\"flex flex-wrap gap-1\">\n          {tutor.expertise[0]?.dotPoints?.slice(0, 3).map((dotPoint, index) => (\n            <span key={index} className=\"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full\">\n              {dotPoint}\n            </span>\n          ))}\n          {tutor.expertise[0]?.dotPoints?.length > 3 && (\n            <span className=\"text-xs text-gray-500\">+{tutor.expertise[0].dotPoints.length - 3} more</span>\n          )}\n        </div>\n      </div>\n\n      {/* Badges */}\n      {tutor.verification?.badges && (\n        <div className=\"flex flex-wrap gap-1 mb-3\">\n          {tutor.verification.badges.map((badge, index) => (\n            <span key={index} className={`text-xs px-2 py-1 rounded-full ${\n              badge === 'expert' ? 'bg-purple-100 text-purple-800' :\n              badge === 'top_rated' ? 'bg-yellow-100 text-yellow-800' :\n              badge === 'helpful' ? 'bg-green-100 text-green-800' :\n              'bg-gray-100 text-gray-800'\n            }`}>\n              {badge.replace('_', ' ')}\n            </span>\n          ))}\n        </div>\n      )}\n\n      {/* Stats */}\n      <div className=\"grid grid-cols-2 gap-2 mb-3 text-xs text-gray-600\">\n        <div>Success Rate: {Math.round(tutor.stats.successRate * 100)}%</div>\n        <div>Response Time: Fast</div>\n      </div>\n\n      <button\n        onClick={() => setSelectedTutor(tutor)}\n        className=\"w-full bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors\"\n      >\n        Request Session\n      </button>\n    </motion.div>\n  );\n\n  const renderSessionCard = (session) => (\n    <motion.div\n      key={session.sessionId}\n      initial={{ opacity: 0, x: -20 }}\n      animate={{ opacity: 1, x: 0 }}\n      className=\"bg-white rounded-lg p-4 border border-gray-200 mb-3\"\n    >\n      <div className=\"flex items-start justify-between mb-3\">\n        <div>\n          <h4 className=\"font-semibold text-gray-800\">\n            {session.tutor.userId === userId ? `Tutoring ${session.tutee.displayName}` : `Session with ${session.tutor.displayName}`}\n          </h4>\n          <p className=\"text-sm text-gray-600\">{session.subject}  {session.difficulty}</p>\n        </div>\n        <span className={`text-xs px-2 py-1 rounded-full ${\n          session.status === 'scheduled' ? 'bg-blue-100 text-blue-800' :\n          session.status === 'active' ? 'bg-green-100 text-green-800' :\n          session.status === 'completed' ? 'bg-gray-100 text-gray-800' :\n          'bg-red-100 text-red-800'\n        }`}>\n          {session.status}\n        </span>\n      </div>\n\n      <div className=\"text-sm text-gray-600 mb-3\">\n        <p> {new Date(session.scheduledTime).toLocaleString()}</p>\n        <p> {session.duration} minutes</p>\n        {session.topics && session.topics.length > 0 && (\n          <p> Topics: {session.topics.join(', ')}</p>\n        )}\n      </div>\n\n      {session.status === 'completed' && session.feedback?.tuteeFeedback && (\n        <div className=\"bg-gray-50 p-2 rounded text-sm\">\n          <p className=\"text-gray-600\">Your Rating:</p>\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"flex\">\n              {[...Array(5)].map((_, i) => (\n                <span key={i} className={`${i < session.feedback.tuteeFeedback.rating ? 'text-yellow-500' : 'text-gray-300'}`}>\n                  \n                </span>\n              ))}\n            </div>\n            <span className=\"text-gray-600\">Helpfulness: {session.feedback.tuteeFeedback.helpfulness}/5</span>\n          </div>\n        </div>\n      )}\n\n      {session.status === 'scheduled' && (\n        <div className=\"flex space-x-2\">\n          <button className=\"flex-1 bg-green-500 text-white py-2 px-3 rounded text-sm hover:bg-green-600 transition-colors\">\n            Join Session\n          </button>\n          <button className=\"flex-1 bg-gray-500 text-white py-2 px-3 rounded text-sm hover:bg-gray-600 transition-colors\">\n            Reschedule\n          </button>\n        </div>\n      )}\n    </motion.div>\n  );\n\n  const renderSessionRequestModal = () => (\n    <AnimatePresence>\n      {selectedTutor && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n          onClick={() => setSelectedTutor(null)}\n        >\n          <motion.div\n            initial={{ scale: 0.9, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            exit={{ scale: 0.9, opacity: 0 }}\n            className=\"bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-semibold\">Request Session with {selectedTutor.displayName}</h3>\n              <button\n                onClick={() => setSelectedTutor(null)}\n                className=\"text-gray-500 hover:text-gray-700\"\n              >\n                \n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              {/* Topics */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Topics to Cover\n                </label>\n                <input\n                  type=\"text\"\n                  placeholder=\"e.g., Meiosis, Inheritance patterns\"\n                  className=\"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  onChange={(e) => setSessionRequest({\n                    ...sessionRequest,\n                    topics: e.target.value.split(',').map(t => t.trim()).filter(Boolean)\n                  })}\n                />\n              </div>\n\n              {/* Difficulty */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Difficulty Level\n                </label>\n                <select\n                  value={sessionRequest.difficulty}\n                  onChange={(e) => setSessionRequest({...sessionRequest, difficulty: e.target.value})}\n                  className=\"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                >\n                  <option value=\"beginner\">Beginner</option>\n                  <option value=\"intermediate\">Intermediate</option>\n                  <option value=\"advanced\">Advanced</option>\n                </select>\n              </div>\n\n              {/* Preferred Time */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Preferred Time\n                </label>\n                <input\n                  type=\"datetime-local\"\n                  className=\"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  onChange={(e) => setSessionRequest({...sessionRequest, preferredTime: e.target.value})}\n                />\n              </div>\n\n              {/* Duration */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Duration (minutes)\n                </label>\n                <select\n                  value={sessionRequest.duration}\n                  onChange={(e) => setSessionRequest({...sessionRequest, duration: parseInt(e.target.value)})}\n                  className=\"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                >\n                  <option value={30}>30 minutes</option>\n                  <option value={45}>45 minutes</option>\n                  <option value={60}>60 minutes</option>\n                  <option value={90}>90 minutes</option>\n                </select>\n              </div>\n\n              {/* Learning Objectives */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Learning Objectives\n                </label>\n                <textarea\n                  placeholder=\"What specific goals do you want to achieve in this session?\"\n                  rows={3}\n                  className=\"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  onChange={(e) => setSessionRequest({\n                    ...sessionRequest,\n                    objectives: e.target.value.split('\\n').filter(Boolean)\n                  })}\n                />\n              </div>\n\n              {/* Action Buttons */}\n              <div className=\"flex space-x-3 pt-4\">\n                <button\n                  onClick={() => setSelectedTutor(null)}\n                  className=\"flex-1 py-2 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={() => requestTutoringSession(selectedTutor.userId)}\n                  disabled={loading || !sessionRequest.preferredTime}\n                  className=\"flex-1 py-2 px-4 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                >\n                  {loading ? 'Requesting...' : 'Request Session'}\n                </button>\n              </div>\n            </div>\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n\n  return (\n    <div className={`bg-gray-50 ${className}`}>\n      {/* Header */}\n      <div className=\"bg-white p-6 rounded-lg shadow-sm mb-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-800\">Peer Tutoring</h2>\n            <p className=\"text-gray-600\">Get help from expert students or become a tutor yourself</p>\n          </div>\n          <div className=\"flex space-x-2\">\n            <button className=\"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors\">\n              Become a Tutor\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Tab Navigation */}\n      <div className=\"bg-white rounded-lg shadow-sm mb-6\">\n        <div className=\"flex border-b\">\n          {[\n            { id: 'find-tutor', label: 'Find a Tutor', icon: '' },\n            { id: 'my-sessions', label: 'My Sessions', icon: '' },\n            { id: 'become-tutor', label: 'Tutor Dashboard', icon: '' }\n          ].map(tab => (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id)}\n              className={`flex-1 flex items-center justify-center space-x-2 py-3 px-4 text-sm font-medium transition-colors ${\n                activeTab === tab.id\n                  ? 'border-b-2 border-blue-500 text-blue-600 bg-blue-50'\n                  : 'text-gray-600 hover:text-gray-800 hover:bg-gray-50'\n              }`}\n            >\n              <span>{tab.icon}</span>\n              <span>{tab.label}</span>\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Content */}\n      <AnimatePresence mode=\"wait\">\n        {activeTab === 'find-tutor' && (\n          <motion.div\n            key=\"find-tutor\"\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -20 }}\n            className=\"space-y-4\"\n          >\n            {loading ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {[1, 2, 3].map(i => (\n                  <div key={i} className=\"bg-white rounded-lg p-4 animate-pulse\">\n                    <div className=\"h-20 bg-gray-300 rounded mb-3\"></div>\n                    <div className=\"h-4 bg-gray-300 rounded mb-2\"></div>\n                    <div className=\"h-4 bg-gray-300 rounded w-2/3\"></div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {availableTutors.map(renderTutorCard)}\n              </div>\n            )}\n          </motion.div>\n        )}\n\n        {activeTab === 'my-sessions' && (\n          <motion.div\n            key=\"my-sessions\"\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -20 }}\n          >\n            {loading ? (\n              <div className=\"space-y-4\">\n                {[1, 2, 3].map(i => (\n                  <div key={i} className=\"bg-white rounded-lg p-4 animate-pulse\">\n                    <div className=\"h-6 bg-gray-300 rounded mb-2\"></div>\n                    <div className=\"h-4 bg-gray-300 rounded mb-2\"></div>\n                    <div className=\"h-4 bg-gray-300 rounded w-1/2\"></div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {userSessions.length > 0 ? (\n                  userSessions.map(renderSessionCard)\n                ) : (\n                  <div className=\"bg-white rounded-lg p-8 text-center\">\n                    <div className=\"text-6xl mb-4\"></div>\n                    <h3 className=\"text-lg font-semibold text-gray-800 mb-2\">No sessions yet</h3>\n                    <p className=\"text-gray-600 mb-4\">Book your first tutoring session to get started!</p>\n                    <button\n                      onClick={() => setActiveTab('find-tutor')}\n                      className=\"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors\"\n                    >\n                      Find a Tutor\n                    </button>\n                  </div>\n                )}\n              </div>\n            )}\n          </motion.div>\n        )}\n\n        {activeTab === 'become-tutor' && (\n          <motion.div\n            key=\"become-tutor\"\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -20 }}\n            className=\"bg-white rounded-lg p-8 text-center\"\n          >\n            <div className=\"text-6xl mb-4\"></div>\n            <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">Become a Tutor</h3>\n            <p className=\"text-gray-600 mb-6\">Share your knowledge and help fellow students while earning recognition</p>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\n              <div className=\"p-4 bg-blue-50 rounded-lg\">\n                <div className=\"text-2xl mb-2\"></div>\n                <h4 className=\"font-semibold\">Share Knowledge</h4>\n                <p className=\"text-sm text-gray-600\">Help students understand difficult concepts</p>\n              </div>\n              <div className=\"p-4 bg-green-50 rounded-lg\">\n                <div className=\"text-2xl mb-2\"></div>\n                <h4 className=\"font-semibold\">Build Reputation</h4>\n                <p className=\"text-sm text-gray-600\">Earn ratings and badges for your expertise</p>\n              </div>\n              <div className=\"p-4 bg-purple-50 rounded-lg\">\n                <div className=\"text-2xl mb-2\"></div>\n                <h4 className=\"font-semibold\">Flexible Schedule</h4>\n                <p className=\"text-sm text-gray-600\">Set your own availability and preferences</p>\n              </div>\n            </div>\n            <button className=\"bg-blue-500 text-white px-8 py-3 rounded-lg hover:bg-blue-600 transition-colors\">\n              Apply to Become a Tutor\n            </button>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Session Request Modal */}\n      {renderSessionRequestModal()}\n    </div>\n  );\n};\n\nexport default PeerTutoring;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\components\\social\\RealTimeCollaboration.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'AnimatePresence' is defined but never used. Allowed unused vars must match /^React$/u.","line":2,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":33},{"ruleId":"no-unused-vars","severity":1,"message":"'lastPingRef' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":25,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":20},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'connectWebSocket'. Either include it or remove the dependency array.","line":35,"column":6,"nodeType":"ArrayExpression","endLine":35,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [connectWebSocket, roomId]","fix":{"range":[1256,1264],"text":"[connectWebSocket, roomId]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'handleMockMessage'. Either include it or remove the dependency array.","line":94,"column":6,"nodeType":"ArrayExpression","endLine":94,"endColumn":32,"suggestions":[{"desc":"Update the dependencies array to be: [handleMockMessage, userId, userName]","fix":{"range":[3238,3264],"text":"[handleMockMessage, userId, userName]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nconst RealTimeCollaboration = ({ roomId, userId, userName, className = '' }) => {\n  const [isConnected, setIsConnected] = useState(false);\n  const [participants, setParticipants] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [activeUsers, setActiveUsers] = useState([]);\n  const [sharedScreen, setSharedScreen] = useState(null);\n  const [annotations, setAnnotations] = useState([]);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [currentTool, setCurrentTool] = useState('pointer');\n  const [connectionQuality, setConnectionQuality] = useState('excellent');\n  const [sessionStats, setSessionStats] = useState({\n    startTime: new Date(),\n    totalParticipants: 0,\n    messagesExchanged: 0,\n    annotationsMade: 0\n  });\n\n  const wsRef = useRef(null);\n  const canvasRef = useRef(null);\n  const chatEndRef = useRef(null);\n  const lastPingRef = useRef(Date.now());\n\n  // WebSocket connection management\n  useEffect(() => {\n    connectWebSocket();\n    return () => {\n      if (wsRef.current) {\n        wsRef.current.close();\n      }\n    };\n  }, [roomId]);\n\n  useEffect(() => {\n    chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  const connectWebSocket = useCallback(() => {\n    try {\n      // In a real app, this would connect to your WebSocket server\n      // wsRef.current = new WebSocket(`ws://localhost:8080/collaboration/${roomId}`);\n      \n      // Mock WebSocket behavior for demonstration\n      const mockConnection = {\n        send: (data) => {\n          console.log('Sending:', JSON.parse(data));\n          // Simulate echo back for demo\n          setTimeout(() => {\n            handleMockMessage(JSON.parse(data));\n          }, 100);\n        },\n        close: () => console.log('Connection closed'),\n        readyState: 1 // OPEN\n      };\n      \n      wsRef.current = mockConnection;\n      setIsConnected(true);\n      \n      // Simulate initial room state\n      setTimeout(() => {\n        setParticipants([\n          { id: userId, name: userName, role: 'moderator', joinedAt: new Date(), isActive: true },\n          { id: 'user_2', name: 'Sarah Chen', role: 'participant', joinedAt: new Date(Date.now() - 300000), isActive: true },\n          { id: 'user_3', name: 'Alex Kumar', role: 'participant', joinedAt: new Date(Date.now() - 180000), isActive: false }\n        ]);\n        \n        setMessages([\n          {\n            id: 'msg_1',\n            userId: 'system',\n            userName: 'System',\n            content: 'Welcome to the collaborative study session!',\n            timestamp: new Date(Date.now() - 600000),\n            type: 'system'\n          },\n          {\n            id: 'msg_2',\n            userId: 'user_2',\n            userName: 'Sarah Chen',\n            content: 'Hey everyone! Ready to tackle Module 7?',\n            timestamp: new Date(Date.now() - 300000),\n            type: 'chat'\n          }\n        ]);\n      }, 1000);\n      \n    } catch (error) {\n      console.error('WebSocket connection error:', error);\n      setConnectionQuality('poor');\n    }\n  }, [roomId, userId, userName]);\n\n  const handleMockMessage = (data) => {\n    switch (data.type) {\n      case 'chat':\n        setMessages(prev => [...prev, {\n          id: `msg_${Date.now()}`,\n          userId: data.userId,\n          userName: data.userName,\n          content: data.content,\n          timestamp: new Date(),\n          type: 'chat'\n        }]);\n        setSessionStats(prev => ({ ...prev, messagesExchanged: prev.messagesExchanged + 1 }));\n        break;\n      case 'user_activity':\n        setActiveUsers(data.activeUsers || []);\n        break;\n      case 'annotation':\n        setAnnotations(prev => [...prev, data.annotation]);\n        setSessionStats(prev => ({ ...prev, annotationsMade: prev.annotationsMade + 1 }));\n        break;\n      case 'cursor_position':\n        updateCursorPosition(data.userId, data.position);\n        break;\n    }\n  };\n\n  const sendMessage = (messageData) => {\n    if (wsRef.current && wsRef.current.readyState === 1) {\n      wsRef.current.send(JSON.stringify(messageData));\n    }\n  };\n\n  const handleSendChatMessage = () => {\n    if (!newMessage.trim()) return;\n    \n    sendMessage({\n      type: 'chat',\n      userId,\n      userName,\n      content: newMessage,\n      timestamp: new Date()\n    });\n    \n    setNewMessage('');\n  };\n\n  const startScreenShare = async () => {\n    try {\n      // In a real app, this would use WebRTC screen sharing\n      setSharedScreen({\n        userId,\n        userName,\n        startTime: new Date(),\n        type: 'screen'\n      });\n      \n      sendMessage({\n        type: 'screen_share_start',\n        userId,\n        userName\n      });\n      \n    } catch (error) {\n      console.error('Screen sharing error:', error);\n    }\n  };\n\n  const stopScreenShare = () => {\n    setSharedScreen(null);\n    sendMessage({\n      type: 'screen_share_stop',\n      userId\n    });\n  };\n\n  const addAnnotation = (x, y, tool, color = '#3b82f6') => {\n    const annotation = {\n      id: `annotation_${Date.now()}`,\n      userId,\n      userName,\n      type: tool,\n      position: { x, y },\n      color,\n      timestamp: new Date()\n    };\n    \n    setAnnotations(prev => [...prev, annotation]);\n    \n    sendMessage({\n      type: 'annotation',\n      annotation\n    });\n  };\n\n  const updateCursorPosition = (userId, position) => {\n    setActiveUsers(prev => prev.map(user => \n      user.id === userId \n        ? { ...user, cursorPosition: position }\n        : user\n    ));\n  };\n\n  const getConnectionStatusColor = () => {\n    switch (connectionQuality) {\n      case 'excellent': return 'green';\n      case 'good': return 'yellow';\n      case 'poor': return 'red';\n      default: return 'gray';\n    }\n  };\n\n  const renderParticipantsList = () => (\n    <div className=\"bg-white rounded-lg border p-4 mb-4\">\n      <h4 className=\"font-semibold text-gray-800 mb-3 flex items-center\">\n        <span className=\"mr-2\"></span>\n        Participants ({participants.length})\n      </h4>\n      \n      <div className=\"space-y-2\">\n        {participants.map(participant => (\n          <div key={participant.id} className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-2\">\n              <div className=\"relative\">\n                <div className=\"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-sm font-bold\">\n                  {participant.name.charAt(0)}\n                </div>\n                <div className={`absolute -bottom-1 -right-1 w-3 h-3 rounded-full border border-white ${\n                  participant.isActive ? 'bg-green-500' : 'bg-gray-400'\n                }`} />\n              </div>\n              <div>\n                <p className=\"text-sm font-medium text-gray-800\">{participant.name}</p>\n                <p className=\"text-xs text-gray-500\">\n                  {participant.isActive ? 'Active now' : 'Away'}\n                </p>\n              </div>\n            </div>\n            <span className={`text-xs px-2 py-1 rounded-full ${\n              participant.role === 'moderator' ? 'bg-purple-100 text-purple-800' : 'bg-blue-100 text-blue-800'\n            }`}>\n              {participant.role}\n            </span>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n\n  const renderToolbar = () => (\n    <div className=\"bg-white rounded-lg border p-3 mb-4\">\n      <h4 className=\"font-semibold text-gray-800 mb-3\"> Collaboration Tools</h4>\n      \n      <div className=\"grid grid-cols-2 gap-2\">\n        <button\n          onClick={sharedScreen ? stopScreenShare : startScreenShare}\n          className={`flex items-center justify-center space-x-2 py-2 px-3 rounded-lg text-sm transition-colors ${\n            sharedScreen \n              ? 'bg-red-500 text-white hover:bg-red-600' \n              : 'bg-green-500 text-white hover:bg-green-600'\n          }`}\n        >\n          <span></span>\n          <span>{sharedScreen ? 'Stop Share' : 'Share Screen'}</span>\n        </button>\n        \n        <button\n          onClick={() => setCurrentTool(currentTool === 'pointer' ? 'pen' : 'pointer')}\n          className={`flex items-center justify-center space-x-2 py-2 px-3 rounded-lg text-sm transition-colors ${\n            currentTool === 'pen'\n              ? 'bg-blue-500 text-white'\n              : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n          }`}\n        >\n          <span></span>\n          <span>Annotate</span>\n        </button>\n        \n        <button className=\"flex items-center justify-center space-x-2 py-2 px-3 rounded-lg text-sm bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors\">\n          <span></span>\n          <span>Files</span>\n        </button>\n        \n        <button className=\"flex items-center justify-center space-x-2 py-2 px-3 rounded-lg text-sm bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors\">\n          <span></span>\n          <span>Video Call</span>\n        </button>\n      </div>\n      \n      {/* Tool Options */}\n      {currentTool === 'pen' && (\n        <motion.div\n          initial={{ opacity: 0, height: 0 }}\n          animate={{ opacity: 1, height: 'auto' }}\n          className=\"mt-3 pt-3 border-t\"\n        >\n          <div className=\"flex items-center space-x-2\">\n            <span className=\"text-sm text-gray-600\">Color:</span>\n            {['#3b82f6', '#ef4444', '#10b981', '#f59e0b', '#8b5cf6'].map(color => (\n              <button\n                key={color}\n                className=\"w-6 h-6 rounded-full border-2 border-gray-300 hover:scale-110 transition-transform\"\n                style={{ backgroundColor: color }}\n                onClick={() => {/* Set annotation color */}}\n              />\n            ))}\n          </div>\n        </motion.div>\n      )}\n    </div>\n  );\n\n  const renderSharedScreen = () => (\n    <div className=\"bg-white rounded-lg border p-4 mb-4\">\n      <div className=\"flex items-center justify-between mb-3\">\n        <h4 className=\"font-semibold text-gray-800 flex items-center\">\n          <span className=\"mr-2\"></span>\n          {sharedScreen?.userName}&apos;s Screen\n        </h4>\n        {sharedScreen?.userId === userId && (\n          <button\n            onClick={stopScreenShare}\n            className=\"bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600 transition-colors\"\n          >\n            Stop Sharing\n          </button>\n        )}\n      </div>\n      \n      <div className=\"relative bg-gray-100 rounded-lg h-64 flex items-center justify-center\">\n        <canvas\n          ref={canvasRef}\n          className=\"absolute inset-0 w-full h-full\"\n          onMouseMove={(e) => {\n            if (currentTool === 'pen' && isDrawing) {\n              const rect = e.currentTarget.getBoundingClientRect();\n              addAnnotation(\n                e.clientX - rect.left,\n                e.clientY - rect.top,\n                'draw'\n              );\n            }\n          }}\n          onMouseDown={() => setIsDrawing(true)}\n          onMouseUp={() => setIsDrawing(false)}\n        />\n        \n        {/* Mock shared screen content */}\n        <div className=\"text-center text-gray-500\">\n          <div className=\"text-4xl mb-2\"></div>\n          <p className=\"text-lg font-medium\">Screen Share Active</p>\n          <p className=\"text-sm\">Biology Module 7 - Infectious Disease</p>\n        </div>\n        \n        {/* Annotations */}\n        {annotations.map(annotation => (\n          <div\n            key={annotation.id}\n            className=\"absolute pointer-events-none\"\n            style={{\n              left: annotation.position.x,\n              top: annotation.position.y,\n              color: annotation.color\n            }}\n          >\n            {annotation.type === 'pointer' && ''}\n            {annotation.type === 'draw' && (\n              <div \n                className=\"w-2 h-2 rounded-full\"\n                style={{ backgroundColor: annotation.color }}\n              />\n            )}\n          </div>\n        ))}\n        \n        {/* User cursors */}\n        {activeUsers.map(user => (\n          user.cursorPosition && user.id !== userId && (\n            <div\n              key={user.id}\n              className=\"absolute pointer-events-none\"\n              style={{\n                left: user.cursorPosition.x,\n                top: user.cursorPosition.y\n              }}\n            >\n              <div className=\"flex items-center space-x-1\">\n                <div className=\"w-2 h-2 bg-red-500 rounded-full\"></div>\n                <span className=\"text-xs bg-black text-white px-1 rounded\">\n                  {user.name}\n                </span>\n              </div>\n            </div>\n          )\n        ))}\n      </div>\n    </div>\n  );\n\n  const renderChat = () => (\n    <div className=\"bg-white rounded-lg border flex flex-col h-80\">\n      <div className=\"p-3 border-b\">\n        <h4 className=\"font-semibold text-gray-800 flex items-center\">\n          <span className=\"mr-2\"></span>\n          Group Chat\n        </h4>\n      </div>\n      \n      <div className=\"flex-1 overflow-y-auto p-3 space-y-3\">\n        {messages.map(message => (\n          <motion.div\n            key={message.id}\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            className={`${\n              message.type === 'system' \n                ? 'text-center' \n                : message.userId === userId \n                  ? 'flex justify-end' \n                  : 'flex justify-start'\n            }`}\n          >\n            {message.type === 'system' ? (\n              <div className=\"bg-gray-100 text-gray-600 text-sm py-2 px-3 rounded-lg\">\n                {message.content}\n              </div>\n            ) : (\n              <div className={`max-w-xs px-3 py-2 rounded-lg ${\n                message.userId === userId\n                  ? 'bg-blue-500 text-white'\n                  : 'bg-gray-100 text-gray-800'\n              }`}>\n                {message.userId !== userId && (\n                  <p className=\"text-xs opacity-75 mb-1\">{message.userName}</p>\n                )}\n                <p className=\"text-sm\">{message.content}</p>\n                <p className=\"text-xs opacity-50 mt-1\">\n                  {message.timestamp.toLocaleTimeString()}\n                </p>\n              </div>\n            )}\n          </motion.div>\n        ))}\n        <div ref={chatEndRef} />\n      </div>\n      \n      <div className=\"p-3 border-t\">\n        <div className=\"flex space-x-2\">\n          <input\n            type=\"text\"\n            value={newMessage}\n            onChange={(e) => setNewMessage(e.target.value)}\n            onKeyPress={(e) => e.key === 'Enter' && handleSendChatMessage()}\n            placeholder=\"Type your message...\"\n            className=\"flex-1 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\n          />\n          <button\n            onClick={handleSendChatMessage}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors\"\n          >\n            Send\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderSessionStats = () => (\n    <div className=\"bg-white rounded-lg border p-4\">\n      <h4 className=\"font-semibold text-gray-800 mb-3 flex items-center\">\n        <span className=\"mr-2\"></span>\n        Session Stats\n      </h4>\n      \n      <div className=\"grid grid-cols-2 gap-4 text-center\">\n        <div>\n          <p className=\"text-2xl font-bold text-blue-600\">{Math.floor((new Date() - sessionStats.startTime) / 60000)}</p>\n          <p className=\"text-xs text-gray-600\">Minutes Active</p>\n        </div>\n        <div>\n          <p className=\"text-2xl font-bold text-green-600\">{sessionStats.messagesExchanged}</p>\n          <p className=\"text-xs text-gray-600\">Messages</p>\n        </div>\n        <div>\n          <p className=\"text-2xl font-bold text-purple-600\">{sessionStats.annotationsMade}</p>\n          <p className=\"text-xs text-gray-600\">Annotations</p>\n        </div>\n        <div>\n          <p className=\"text-2xl font-bold text-orange-600\">{participants.length}</p>\n          <p className=\"text-xs text-gray-600\">Participants</p>\n        </div>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className={`bg-gray-50 ${className}`}>\n      {/* Header */}\n      <div className=\"bg-white p-4 rounded-lg shadow-sm mb-6\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h2 className=\"text-xl font-bold text-gray-800\">Real-Time Collaboration</h2>\n            <p className=\"text-gray-600\">Study together in real-time</p>\n          </div>\n          \n          <div className=\"flex items-center space-x-4\">\n            <div className=\"flex items-center space-x-2\">\n              <div className={`w-3 h-3 rounded-full bg-${getConnectionStatusColor()}-500 ${isConnected ? 'animate-pulse' : ''}`} />\n              <span className=\"text-sm text-gray-600\">\n                {isConnected ? 'Connected' : 'Connecting...'}\n              </span>\n            </div>\n            <span className=\"text-sm text-gray-500\">\n              Room: {roomId}\n            </span>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Main Collaboration Area */}\n        <div className=\"lg:col-span-2 space-y-4\">\n          {renderToolbar()}\n          {sharedScreen && renderSharedScreen()}\n          {renderChat()}\n        </div>\n\n        {/* Sidebar */}\n        <div className=\"space-y-4\">\n          {renderParticipantsList()}\n          {renderSessionStats()}\n          \n          {/* Quick Actions */}\n          <div className=\"bg-white rounded-lg border p-4\">\n            <h4 className=\"font-semibold text-gray-800 mb-3\"> Quick Actions</h4>\n            <div className=\"space-y-2\">\n              <button className=\"w-full bg-blue-500 text-white py-2 px-3 rounded-lg text-sm hover:bg-blue-600 transition-colors\">\n                 Share Study Plan\n              </button>\n              <button className=\"w-full bg-green-500 text-white py-2 px-3 rounded-lg text-sm hover:bg-green-600 transition-colors\">\n                 Start Quiz Battle\n              </button>\n              <button className=\"w-full bg-purple-500 text-white py-2 px-3 rounded-lg text-sm hover:bg-purple-600 transition-colors\">\n                 Set Group Goal\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RealTimeCollaboration;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\context\\AuthContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":156,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":156,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useReducer, useEffect } from 'react';\n\nconst AuthContext = createContext();\n\nconst authReducer = (state, action) => {\n  switch (action.type) {\n    case 'SET_LOADING':\n      return { ...state, isLoading: action.payload };\n    case 'SET_USER':\n      return {\n        ...state,\n        user: action.payload,\n        isAuthenticated: !!action.payload,\n        isLoading: false\n      };\n    case 'SET_TOKEN':\n      return { ...state, token: action.payload };\n    case 'LOGIN_SUCCESS':\n      return {\n        ...state,\n        user: action.payload.user,\n        token: action.payload.token,\n        isAuthenticated: true,\n        isLoading: false\n      };\n    case 'LOGOUT':\n      return {\n        user: null,\n        token: null,\n        isAuthenticated: false,\n        isLoading: false\n      };\n    case 'SET_ERROR':\n      return { ...state, error: action.payload, isLoading: false };\n    case 'CLEAR_ERROR':\n      return { ...state, error: null };\n    default:\n      return state;\n  }\n};\n\nconst initialState = {\n  user: null,\n  token: null,\n  isAuthenticated: false,\n  isLoading: true,\n  error: null,\n};\n\nexport const AuthProvider = ({ children }) => {\n  console.log(' AuthProvider initializing...');\n  const [state, dispatch] = useReducer(authReducer, initialState);\n  console.log(' AuthProvider state:', state);\n\n  useEffect(() => {\n    console.log(' AuthProvider useEffect running...');\n    const token = localStorage.getItem('token');\n    const user = localStorage.getItem('user');\n    const tokenExpiration = localStorage.getItem('tokenExpiration');\n    console.log(' Token from localStorage:', token ? 'exists' : 'none');\n    console.log(' User from localStorage:', user ? 'exists' : 'none');\n\n    if (token && user) {\n      // Check if token has expired\n      if (tokenExpiration) {\n        const expirationDate = new Date(tokenExpiration);\n        const now = new Date();\n        \n        if (now > expirationDate) {\n          console.log(' Token has expired, clearing session');\n          localStorage.removeItem('token');\n          localStorage.removeItem('user');\n          localStorage.removeItem('tokenExpiration');\n          localStorage.removeItem('rememberMe');\n          dispatch({ type: 'SET_LOADING', payload: false });\n          return;\n        }\n      }\n\n      try {\n        const parsedUser = JSON.parse(user);\n        console.log(' AuthContext: Restoring user session:', parsedUser);\n        dispatch({\n          type: 'LOGIN_SUCCESS',\n          payload: { user: parsedUser, token }\n        });\n      } catch (error) {\n        console.error(' AuthContext: Error parsing stored user:', error);\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n        localStorage.removeItem('tokenExpiration');\n        localStorage.removeItem('rememberMe');\n        dispatch({ type: 'SET_LOADING', payload: false });\n      }\n    } else {\n      console.log(' No stored session, setting loading to false');\n      dispatch({ type: 'SET_LOADING', payload: false });\n    }\n  }, []);\n\n  const login = (user, token, rememberMe = false) => {\n    if (rememberMe) {\n      // Set longer expiration for \"Remember Me\" (30 days)\n      const expirationDate = new Date();\n      expirationDate.setDate(expirationDate.getDate() + 30);\n      localStorage.setItem('tokenExpiration', expirationDate.toISOString());\n    } else {\n      // Set shorter expiration (1 day)\n      const expirationDate = new Date();\n      expirationDate.setDate(expirationDate.getDate() + 1);\n      localStorage.setItem('tokenExpiration', expirationDate.toISOString());\n    }\n    \n    localStorage.setItem('token', token);\n    localStorage.setItem('user', JSON.stringify(user));\n    localStorage.setItem('rememberMe', rememberMe.toString());\n    dispatch({ type: 'LOGIN_SUCCESS', payload: { user, token } });\n  };\n\n  const logout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    localStorage.removeItem('tokenExpiration');\n    localStorage.removeItem('rememberMe');\n    dispatch({ type: 'LOGOUT' });\n  };\n\n  const setError = (error) => {\n    dispatch({ type: 'SET_ERROR', payload: error });\n  };\n\n  const clearError = () => {\n    dispatch({ type: 'CLEAR_ERROR' });\n  };\n\n  const setLoading = (isLoading) => {\n    dispatch({ type: 'SET_LOADING', payload: isLoading });\n  };\n\n  const value = {\n    ...state,\n    login,\n    logout,\n    setError,\n    clearError,\n    setLoading,\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\context\\GamificationContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":25,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":25,"endColumn":36}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext } from 'react';\r\nimport { useGamification } from '../hooks/useGamification';\r\n\r\nconst GamificationContext = createContext(null);\r\n\r\n/**\r\n * Provides gamification data (XP, streak, etc.) and a refetch function\r\n * to all child components.\r\n */\r\nexport const GamificationProvider = ({ children }) => {\r\n  // We'll use a hardcoded userId for now. This would be dynamic in a real app.\r\n  const userId = 'user-123';\r\n  const gamificationData = useGamification(userId);\r\n\r\n  return (\r\n    <GamificationContext.Provider value={gamificationData}>\r\n      {children}\r\n    </GamificationContext.Provider>\r\n  );\r\n};\r\n\r\n/**\r\n * Custom hook to easily access the gamification context.\r\n */\r\nexport const useGamificationContext = () => {\r\n  const context = useContext(GamificationContext);\r\n  if (!context) {\r\n    throw new Error('useGamificationContext must be used within a GamificationProvider');\r\n  }\r\n  return context;\r\n};","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\data\\biologyModule5Pathway.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\data\\biologyModule6Pathway.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\data\\chemistryModule5Pathway.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\data\\learningPathways-backup.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\data\\learningPathways-original.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\data\\learningPathways.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\hooks\\useAnalytics.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'event' is defined but never used. Allowed unused args must match /^_/u.","line":131,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":131,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useCallback, useEffect } from 'react';\n\n// Analytics events enum\nexport const ANALYTICS_EVENTS = {\n  // Authentication\n  USER_LOGIN: 'user_login',\n  USER_SIGNUP: 'user_signup',\n  USER_LOGOUT: 'user_logout',\n  PASSWORD_RESET: 'password_reset',\n\n  // Navigation\n  PAGE_VIEW: 'page_view',\n  SUBJECT_SELECTED: 'subject_selected',\n\n  // Quiz System\n  QUIZ_STARTED: 'quiz_started',\n  QUIZ_COMPLETED: 'quiz_completed',\n  QUIZ_ABANDONED: 'quiz_abandoned',\n  QUESTION_ANSWERED: 'question_answered',\n  ANSWER_CHANGED: 'answer_changed',\n\n  // Gamification\n  XP_EARNED: 'xp_earned',\n  LEVEL_UP: 'level_up',\n  ACHIEVEMENT_UNLOCKED: 'achievement_unlocked',\n  STREAK_UPDATED: 'streak_updated',\n  STREAK_FREEZE_USED: 'streak_freeze_used',\n\n  // Performance\n  PERFORMANCE_METRIC: 'performance_metric',\n  ERROR_OCCURRED: 'error_occurred',\n  API_CALL: 'api_call',\n\n  // Engagement\n  PULL_TO_REFRESH: 'pull_to_refresh',\n  BUTTON_CLICKED: 'button_clicked',\n  FEATURE_USED: 'feature_used'\n};\n\n// Simple analytics implementation\nclass AnalyticsManager {\n  constructor() {\n    this.events = [];\n    this.sessionId = this.generateSessionId();\n    this.userId = null;\n    this.isEnabled = true;\n  }\n\n  generateSessionId() {\n    return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  setUserId(userId) {\n    this.userId = userId;\n  }\n\n  track(eventName, properties = {}) {\n    if (!this.isEnabled) return;\n\n    const event = {\n      eventName,\n      properties: {\n        ...properties,\n        timestamp: new Date().toISOString(),\n        sessionId: this.sessionId,\n        userId: this.userId,\n        userAgent: navigator.userAgent,\n        url: window.location.href,\n        referrer: document.referrer\n      }\n    };\n\n    // Store in localStorage for offline scenarios\n    this.events.push(event);\n    this.saveToStorage();\n\n    // Log in development\n    if (process.env.NODE_ENV === 'development') {\n      console.log(' Analytics Event:', event);\n    }\n\n    // Send to analytics service (would be real endpoint in production)\n    this.sendEvent(event);\n  }\n\n  trackPerformance(metricName, value, unit = 'ms') {\n    this.track(ANALYTICS_EVENTS.PERFORMANCE_METRIC, {\n      metricName,\n      value,\n      unit,\n      deviceMemory: navigator.deviceMemory || 'unknown',\n      connection: navigator.connection?.effectiveType || 'unknown'\n    });\n  }\n\n  trackError(error, context = {}) {\n    this.track(ANALYTICS_EVENTS.ERROR_OCCURRED, {\n      error: error.message,\n      stack: error.stack,\n      context,\n      url: window.location.href\n    });\n  }\n\n  trackPageView(pageName, properties = {}) {\n    this.track(ANALYTICS_EVENTS.PAGE_VIEW, {\n      pageName,\n      ...properties\n    });\n  }\n\n  saveToStorage() {\n    try {\n      localStorage.setItem('hsc_analytics_events', JSON.stringify(this.events.slice(-100)));\n    } catch (e) {\n      console.warn('Failed to save analytics to localStorage:', e);\n    }\n  }\n\n  loadFromStorage() {\n    try {\n      const stored = localStorage.getItem('hsc_analytics_events');\n      if (stored) {\n        this.events = JSON.parse(stored);\n      }\n    } catch (e) {\n      console.warn('Failed to load analytics from localStorage:', e);\n    }\n  }\n\n  async sendEvent(event) {\n    try {\n      // In production, this would send to your analytics service\n      // For now, we'll just simulate the API call\n      if (navigator.onLine) {\n        // Simulate API call\n        await new Promise(resolve => setTimeout(resolve, 100));\n\n        // Here you would send to your analytics endpoint:\n        // await fetch('/api/analytics/track', {\n        //   method: 'POST',\n        //   headers: { 'Content-Type': 'application/json' },\n        //   body: JSON.stringify(event)\n        // });\n      }\n    } catch (error) {\n      console.warn('Failed to send analytics event:', error);\n    }\n  }\n\n  getSessionSummary() {\n    return {\n      sessionId: this.sessionId,\n      totalEvents: this.events.length,\n      sessionDuration: Date.now() - parseInt(this.sessionId.split('_')[1]),\n      userId: this.userId,\n      events: this.events\n    };\n  }\n\n  flushEvents() {\n    this.events = [];\n    this.saveToStorage();\n  }\n}\n\n// Create singleton instance\nconst analytics = new AnalyticsManager();\n\n// Load persisted events on initialization\nanalytics.loadFromStorage();\n\n// Auto-flush events before page unload\nwindow.addEventListener('beforeunload', () => {\n  analytics.flushEvents();\n});\n\nexport const useAnalytics = () => {\n  const track = useCallback((eventName, properties = {}) => {\n    analytics.track(eventName, properties);\n  }, []);\n\n  const trackPerformance = useCallback((metricName, value, unit) => {\n    analytics.trackPerformance(metricName, value, unit);\n  }, []);\n\n  const trackError = useCallback((error, context) => {\n    analytics.trackError(error, context);\n  }, []);\n\n  const trackPageView = useCallback((pageName, properties) => {\n    analytics.trackPageView(pageName, properties);\n  }, []);\n\n  const setUserId = useCallback((userId) => {\n    analytics.setUserId(userId);\n  }, []);\n\n  const getSessionSummary = useCallback(() => {\n    return analytics.getSessionSummary();\n  }, []);\n\n  // Track page views automatically\n  useEffect(() => {\n    const path = window.location.pathname;\n    trackPageView(path);\n  }, [trackPageView]);\n\n  // Track performance metrics\n  useEffect(() => {\n    // Track initial page load performance\n    if (window.performance && window.performance.timing) {\n      const timing = window.performance.timing;\n      const pageLoadTime = timing.loadEventEnd - timing.navigationStart;\n      if (pageLoadTime > 0) {\n        trackPerformance('page_load_time', pageLoadTime);\n      }\n    }\n\n    // Track memory usage if available\n    if (window.performance && window.performance.memory) {\n      const memory = window.performance.memory;\n      trackPerformance('memory_used', memory.usedJSHeapSize, 'bytes');\n    }\n  }, [trackPerformance]);\n\n  return {\n    track,\n    trackPerformance,\n    trackError,\n    trackPageView,\n    setUserId,\n    getSessionSummary,\n    EVENTS: ANALYTICS_EVENTS\n  };\n};\n\nexport default useAnalytics;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\hooks\\useChemistryModule5Progress.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\hooks\\useGamification.js","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'syncOfflineData'. Either include it or remove the dependency array.","line":33,"column":6,"nodeType":"ArrayExpression","endLine":33,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [syncOfflineData]","fix":{"range":[1007,1009],"text":"[syncOfflineData]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'checkNewAchievements' and 'updateStudyStreak'. Either include them or remove the dependency array.","line":117,"column":6,"nodeType":"ArrayExpression","endLine":117,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [checkNewAchievements, updateStudyStreak]","fix":{"range":[3578,3580],"text":"[checkNewAchievements, updateStudyStreak]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'processQuizResults'. Either include it or remove the dependency array.","line":247,"column":6,"nodeType":"ArrayExpression","endLine":247,"endColumn":46,"suggestions":[{"desc":"Update the dependencies array to be: [quizResults, gamification.userProgress, processQuizResults]","fix":{"range":[7322,7362],"text":"[quizResults, gamification.userProgress, processQuizResults]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback } from 'react';\nimport { gamificationAPI } from '../utils/gamificationAPI';\n\nexport const useGamification = () => {\n  const [userProgress, setUserProgress] = useState(null);\n  const [achievements, setAchievements] = useState([]);\n  const [streak, setStreak] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [isOffline, setIsOffline] = useState(!navigator.onLine);\n\n  // Load initial data\n  useEffect(() => {\n    loadGamificationData();\n\n    // Listen for online/offline events\n    const handleOnline = () => {\n      setIsOffline(false);\n      syncOfflineData();\n    };\n\n    const handleOffline = () => {\n      setIsOffline(true);\n    };\n\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n\n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n    };\n  }, []);\n\n  const loadGamificationData = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const [progressData, achievementsData, streakData] = await Promise.all([\n        gamificationAPI.getUserProgress(),\n        gamificationAPI.getUserAchievements(),\n        gamificationAPI.getStreak()\n      ]);\n\n      setUserProgress(progressData);\n      setAchievements(achievementsData.achievements || []);\n      setStreak(streakData);\n    } catch (error) {\n      setError(error.message);\n      console.error('Error loading gamification data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const syncOfflineData = async () => {\n    try {\n      await gamificationAPI.syncOfflineData();\n      // Reload data after sync\n      loadGamificationData();\n    } catch (error) {\n      console.error('Error syncing offline data:', error);\n    }\n  };\n\n  const updateProgress = useCallback(async (quizResults) => {\n    try {\n      const { correctAnswers, totalQuestions, timeSpent, subject, difficulty } = quizResults;\n      const xpEarned = correctAnswers * 10;\n\n      // Update progress\n      const progressUpdate = {\n        xpEarned,\n        correctAnswers,\n        totalQuestions,\n        timeSpent,\n        subject,\n        difficulty,\n        quizDate: new Date().toISOString()\n      };\n\n      const result = await gamificationAPI.updateUserProgress(progressUpdate);\n\n      if (result.success) {\n        // Update local state\n        setUserProgress(prev => ({\n          ...prev,\n          currentXP: (prev?.currentXP || 0) + xpEarned,\n          totalQuestions: (prev?.totalQuestions || 0) + totalQuestions,\n          // Recalculate average score\n          averageScore: Math.round(\n            ((prev?.averageScore || 0) * (prev?.quizzesCompleted || 0) +\n             (correctAnswers / totalQuestions * 100)) /\n            ((prev?.quizzesCompleted || 0) + 1)\n          ),\n          quizzesCompleted: (prev?.quizzesCompleted || 0) + 1\n        }));\n\n        // Check for achievements\n        const achievementResult = await checkNewAchievements(quizResults);\n        if (achievementResult.newAchievements?.length > 0) {\n          setAchievements(prev => [...prev, ...achievementResult.newAchievements]);\n        }\n\n        // Update streak\n        await updateStudyStreak();\n\n        return { success: true, xpEarned, newAchievements: achievementResult.newAchievements };\n      }\n\n      return result;\n    } catch (error) {\n      console.error('Error updating progress:', error);\n      return { success: false, error: error.message };\n    }\n  }, []);\n\n  const checkNewAchievements = useCallback(async (quizData) => {\n    try {\n      const result = await gamificationAPI.checkAchievements(quizData);\n      return result;\n    } catch (error) {\n      console.error('Error checking achievements:', error);\n      return { newAchievements: [] };\n    }\n  }, []);\n\n  const updateStudyStreak = useCallback(async () => {\n    try {\n      const result = await gamificationAPI.updateStreak();\n      if (result.success) {\n        setStreak(prev => ({\n          ...prev,\n          currentStreak: result.currentStreak,\n          lastStudyDate: result.lastStudyDate,\n          longestStreak: Math.max(prev?.longestStreak || 0, result.currentStreak)\n        }));\n      }\n      return result;\n    } catch (error) {\n      console.error('Error updating streak:', error);\n      return { success: false, error: error.message };\n    }\n  }, []);\n\n  const useStreakFreeze = useCallback(async () => {\n    try {\n      const result = await gamificationAPI.useStreakFreeze();\n      if (result.success) {\n        setStreak(prev => ({\n          ...prev,\n          freezesAvailable: result.freezesRemaining\n        }));\n      }\n      return result;\n    } catch (error) {\n      console.error('Error using streak freeze:', error);\n      return { success: false, error: error.message };\n    }\n  }, []);\n\n  const addXP = useCallback(async (amount, source) => {\n    try {\n      const result = await gamificationAPI.addXP(amount, source);\n      if (result.success) {\n        setUserProgress(prev => ({\n          ...prev,\n          currentXP: (prev?.currentXP || 0) + amount\n        }));\n\n        // Check for level up\n        const levelCheck = await gamificationAPI.checkLevelUp((userProgress?.currentXP || 0) + amount);\n        if (levelCheck.leveledUp) {\n          setUserProgress(prev => ({\n            ...prev,\n            currentLevel: levelCheck.newLevel\n          }));\n          return { ...result, leveledUp: true, newLevel: levelCheck.newLevel };\n        }\n      }\n      return result;\n    } catch (error) {\n      console.error('Error adding XP:', error);\n      return { success: false, error: error.message };\n    }\n  }, [userProgress?.currentXP]);\n\n  const getAnalytics = useCallback(async (timeframe = '30d') => {\n    try {\n      const analytics = await gamificationAPI.getStudyAnalytics(timeframe);\n      return analytics;\n    } catch (error) {\n      console.error('Error getting analytics:', error);\n      return null;\n    }\n  }, []);\n\n  const refreshData = useCallback(() => {\n    loadGamificationData();\n  }, []);\n\n  return {\n    // Data\n    userProgress,\n    achievements,\n    streak,\n    loading,\n    error,\n    isOffline,\n\n    // Actions\n    updateProgress,\n    updateStudyStreak,\n    useStreakFreeze,\n    addXP,\n    checkNewAchievements,\n    getAnalytics,\n    refreshData,\n    syncOfflineData,\n\n    // Computed values\n    currentLevel: userProgress?.currentLevel || 1,\n    currentXP: userProgress?.currentXP || 0,\n    xpToNextLevel: userProgress?.xpToNextLevel || 250,\n    totalAchievements: achievements.length,\n    earnedAchievements: achievements.filter(a => a.earned).length,\n    currentStreak: streak?.currentStreak || 0,\n    longestStreak: streak?.longestStreak || 0,\n  };\n};\n\n// Specific hook for quiz results\nexport const useQuizGamification = (quizResults) => {\n  const [processedResults, setProcessedResults] = useState(null);\n  const [newAchievements, setNewAchievements] = useState([]);\n  const [xpGained, setXpGained] = useState(0);\n  const [leveledUp, setLeveledUp] = useState(false);\n  const [processing, setProcessing] = useState(true);\n\n  const gamification = useGamification();\n\n  useEffect(() => {\n    if (quizResults && gamification.userProgress) {\n      processQuizResults();\n    }\n  }, [quizResults, gamification.userProgress]);\n\n  const processQuizResults = async () => {\n    try {\n      setProcessing(true);\n\n      const result = await gamification.updateProgress(quizResults);\n\n      if (result.success) {\n        setXpGained(result.xpEarned || 0);\n        setNewAchievements(result.newAchievements || []);\n        setLeveledUp(result.leveledUp || false);\n        setProcessedResults(result);\n      }\n    } catch (error) {\n      console.error('Error processing quiz results:', error);\n    } finally {\n      setProcessing(false);\n    }\n  };\n\n  return {\n    ...gamification,\n    processedResults,\n    newAchievements,\n    xpGained,\n    leveledUp,\n    processing\n  };\n};\n\nexport default useGamification;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\hooks\\useMobileOptimization.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\hooks\\useModule5Progress.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\hooks\\useModule6Progress.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'quizType' is defined but never used. Allowed unused args must match /^_/u.","line":69,"column":53,"nodeType":"Identifier","messageId":"unusedVar","endLine":69,"endColumn":61},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'getNextDotPoints'. Either include it or remove the dependency array.","line":193,"column":6,"nodeType":"ArrayExpression","endLine":193,"endColumn":37,"suggestions":[{"desc":"Update the dependencies array to be: [getNextDotPoints, pathwayProgress, saveProgress]","fix":{"range":[6493,6524],"text":"[getNextDotPoints, pathwayProgress, saveProgress]"}}]},{"ruleId":"no-unused-vars","severity":1,"message":"'hasContent' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":217,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":217,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback } from 'react';\nimport { BIOLOGY_MODULE_6_PATHWAY } from '../data/biologyModule6Pathway';\n\n// Content Access Tracking Hook for Module 6 Biology Pathway\nexport const useModule6Progress = (userId = 'demo-user') => {\n  const [pathwayProgress, setPathwayProgress] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  // Initialize user progress structure\n  const initializeProgress = useCallback(() => {\n    const savedProgress = localStorage.getItem(`module6-progress-${userId}`);\n    \n    if (savedProgress) {\n      return JSON.parse(savedProgress);\n    }\n\n    // Initialize with IQ1.1 unlocked (starting point)\n    return {\n      userId,\n      moduleId: 'biology-module-6',\n      startedAt: new Date().toISOString(),\n      lastAccessedAt: new Date().toISOString(),\n      unlockedDotPoints: ['IQ1.1'], // Only first dot point unlocked\n      contentAccess: {}, // Track content access per dot point\n      quizProgress: {}, // Track quiz attempts and scores\n      completedDotPoints: [],\n      overallProgress: 0,\n      analytics: {\n        totalTimeSpent: 0,\n        contentAccessLog: [],\n        quizAttemptLog: [],\n        strugglingAreas: [],\n        strongAreas: []\n      }\n    };\n  }, [userId]);\n\n  // Load progress on mount\n  useEffect(() => {\n    setLoading(true);\n    const progress = initializeProgress();\n    setPathwayProgress(progress);\n    setLoading(false);\n  }, [initializeProgress]);\n\n  // Save progress to localStorage\n  const saveProgress = useCallback((updatedProgress) => {\n    localStorage.setItem(`module6-progress-${userId}`, JSON.stringify(updatedProgress));\n    setPathwayProgress(updatedProgress);\n  }, [userId]);\n\n  // Check if dot point is accessible (unlocked)\n  const isContentAccessible = useCallback((dotPointId) => {\n    if (!pathwayProgress) return false;\n    return pathwayProgress.unlockedDotPoints.includes(dotPointId);\n  }, [pathwayProgress]);\n\n  // Check if all content for a dot point has been accessed\n  const hasAccessedAllContent = useCallback((dotPointId) => {\n    if (!pathwayProgress) return false;\n    \n    const contentAccess = pathwayProgress.contentAccess[dotPointId];\n    if (!contentAccess) return false;\n\n    return contentAccess.podcast && contentAccess.video && contentAccess.slides;\n  }, [pathwayProgress]);\n\n  // Check if quiz is accessible for a dot point\n  const isQuizAccessible = useCallback((dotPointId, quizType) => {\n    if (!pathwayProgress) return false;\n    \n    // Must be unlocked and have accessed all content\n    return isContentAccessible(dotPointId) && hasAccessedAllContent(dotPointId);\n  }, [pathwayProgress, isContentAccessible, hasAccessedAllContent]);\n\n  // Track content access\n  const trackContentAccess = useCallback((dotPointId, contentType, contentId) => {\n    if (!pathwayProgress || !isContentAccessible(dotPointId)) {\n      return { success: false, reason: 'Not accessible' };\n    }\n\n    const updatedProgress = { ...pathwayProgress };\n    \n    // Initialize content access for this dot point if needed\n    if (!updatedProgress.contentAccess[dotPointId]) {\n      updatedProgress.contentAccess[dotPointId] = {\n        podcast: false,\n        video: false,\n        slides: false\n      };\n    }\n\n    // Mark this content as accessed\n    updatedProgress.contentAccess[dotPointId][contentType] = true;\n    \n    // Log access\n    updatedProgress.analytics.contentAccessLog.push({\n      dotPointId,\n      contentType,\n      contentId,\n      accessedAt: new Date().toISOString()\n    });\n\n    // Update last accessed time\n    updatedProgress.lastAccessedAt = new Date().toISOString();\n\n    // Check if all content accessed for this dot point\n    const allContentAccessed = hasAccessedAllContent(dotPointId);\n\n    saveProgress(updatedProgress);\n\n    return {\n      success: true,\n      allContentAccessed,\n      unlockedQuizzes: allContentAccessed\n    };\n  }, [pathwayProgress, isContentAccessible, hasAccessedAllContent, saveProgress]);\n\n  // Submit quiz attempt and unlock next content if passed\n  const submitQuizAttempt = useCallback((dotPointId, quizType, score, answers, timeSpent) => {\n    if (!pathwayProgress) return { success: false };\n\n    const updatedProgress = { ...pathwayProgress };\n    const passed = score >= BIOLOGY_MODULE_6_PATHWAY.requiredPassPercentage;\n\n    // Initialize quiz progress for this dot point if needed\n    if (!updatedProgress.quizProgress[dotPointId]) {\n      updatedProgress.quizProgress[dotPointId] = {\n        quickQuizAttempts: 0,\n        quickQuizBestScore: 0,\n        quickQuizPassed: false,\n        longResponseAttempts: 0,\n        longResponseBestScore: 0,\n        longResponsePassed: false\n      };\n    }\n\n    const quizProgress = updatedProgress.quizProgress[dotPointId];\n\n    // Update quiz-specific progress\n    if (quizType === 'quickQuiz') {\n      quizProgress.quickQuizAttempts += 1;\n      quizProgress.quickQuizBestScore = Math.max(quizProgress.quickQuizBestScore, score);\n      if (passed) quizProgress.quickQuizPassed = true;\n    } else {\n      quizProgress.longResponseAttempts += 1;\n      quizProgress.longResponseBestScore = Math.max(quizProgress.longResponseBestScore, score);\n      if (passed) quizProgress.longResponsePassed = true;\n    }\n\n    // Log quiz attempt\n    updatedProgress.analytics.quizAttemptLog.push({\n      dotPointId,\n      quizType,\n      score,\n      passed,\n      timeSpent,\n      attemptedAt: new Date().toISOString()\n    });\n\n    let unlockedContent = false;\n\n    // Check if dot point is completed (both quizzes passed with 65%+)\n    if (quizProgress.quickQuizPassed && quizProgress.longResponsePassed) {\n      if (!updatedProgress.completedDotPoints.includes(dotPointId)) {\n        updatedProgress.completedDotPoints.push(dotPointId);\n        \n        // Unlock next dot point(s)\n        const nextDotPoints = getNextDotPoints(dotPointId);\n        nextDotPoints.forEach(nextDotPoint => {\n          if (!updatedProgress.unlockedDotPoints.includes(nextDotPoint)) {\n            updatedProgress.unlockedDotPoints.push(nextDotPoint);\n            unlockedContent = true;\n          }\n        });\n      }\n    }\n\n    // Update overall progress\n    updatedProgress.overallProgress = Math.round(\n      (updatedProgress.completedDotPoints.length / BIOLOGY_MODULE_6_PATHWAY.totalDotPoints) * 100\n    );\n\n    saveProgress(updatedProgress);\n\n    return {\n      success: true,\n      passed,\n      score,\n      unlockedContent,\n      overallProgress: updatedProgress.overallProgress\n    };\n  }, [pathwayProgress, saveProgress]);\n\n  // Get next dot points to unlock based on prerequisites\n  const getNextDotPoints = useCallback((completedDotPointId) => {\n    const nextDotPoints = [];\n    \n    // Check all dot points to see which ones have this as a prerequisite\n    Object.values(BIOLOGY_MODULE_6_PATHWAY.inquiryQuestions).forEach(iq => {\n      Object.entries(iq.dotPoints).forEach(([dotPointId, dotPoint]) => {\n        if (dotPoint.prerequisites && dotPoint.prerequisites.includes(completedDotPointId)) {\n          nextDotPoints.push(dotPointId);\n        }\n      });\n    });\n\n    return nextDotPoints;\n  }, []);\n\n  // Get dot point status for UI display\n  const getDotPointStatus = useCallback((dotPointId) => {\n    if (!pathwayProgress) return { status: 'locked', progress: 0, icon: '' };\n\n    const isUnlocked = pathwayProgress.unlockedDotPoints.includes(dotPointId);\n    const isCompleted = pathwayProgress.completedDotPoints.includes(dotPointId);\n    const hasContent = hasAccessedAllContent(dotPointId);\n    const quizProgress = pathwayProgress.quizProgress[dotPointId];\n\n    if (isCompleted) {\n      return { status: 'completed', progress: 100, icon: '' };\n    }\n\n    if (!isUnlocked) {\n      return { status: 'locked', progress: 0, icon: '' };\n    }\n\n    // Calculate progress based on content access and quiz completion\n    let progress = 0;\n    const contentAccess = pathwayProgress.contentAccess[dotPointId];\n    \n    if (contentAccess) {\n      const accessedCount = Object.values(contentAccess).filter(Boolean).length;\n      progress += (accessedCount / 3) * 60; // Content worth 60% of progress\n    }\n\n    if (quizProgress) {\n      if (quizProgress.quickQuizPassed) progress += 20; // Quick quiz worth 20%\n      if (quizProgress.longResponsePassed) progress += 20; // Long response worth 20%\n    }\n\n    const status = progress > 0 ? 'in_progress' : 'available';\n    const icon = progress > 0 ? '' : '';\n\n    return { status, progress: Math.round(progress), icon };\n  }, [pathwayProgress, hasAccessedAllContent]);\n\n  // Get overall pathway statistics\n  const getPathwayStats = useCallback(() => {\n    if (!pathwayProgress) return null;\n\n    return {\n      overallProgress: pathwayProgress.overallProgress,\n      unlockedDotPoints: pathwayProgress.unlockedDotPoints.length,\n      completedDotPoints: pathwayProgress.completedDotPoints.length,\n      totalDotPoints: BIOLOGY_MODULE_6_PATHWAY.totalDotPoints,\n      totalQuizzesPassed: Object.values(pathwayProgress.quizProgress).reduce((total, dp) => {\n        return total + (dp.quickQuizPassed ? 1 : 0) + (dp.longResponsePassed ? 1 : 0);\n      }, 0)\n    };\n  }, [pathwayProgress]);\n\n  return {\n    pathwayProgress,\n    loading,\n    trackContentAccess,\n    submitQuizAttempt,\n    isContentAccessible,\n    hasAccessedAllContent,\n    isQuizAccessible,\n    getDotPointStatus,\n    getPathwayStats\n  };\n};","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\hooks\\useOfflineStorage.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'module' is defined but never used. Allowed unused args must match /^_/u.","line":209,"column":57,"nodeType":"Identifier","messageId":"unusedVar","endLine":209,"endColumn":63}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback } from 'react';\n\nconst DB_NAME = 'hsc-learning-offline';\nconst DB_VERSION = 1;\nconst STORES = {\n  QUIZ_DATA: 'quiz_data',\n  USER_PROGRESS: 'user_progress',\n  CACHED_RESPONSES: 'cached_responses',\n  PENDING_REQUESTS: 'pending_requests'\n};\n\nexport const useOfflineStorage = () => {\n  const [db, setDb] = useState(null);\n  const [isReady, setIsReady] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Initialize IndexedDB\n  useEffect(() => {\n    const initDB = async () => {\n      try {\n        const request = indexedDB.open(DB_NAME, DB_VERSION);\n\n        request.onerror = () => {\n          setError('Failed to open database');\n        };\n\n        request.onsuccess = (event) => {\n          const database = event.target.result;\n          setDb(database);\n          setIsReady(true);\n        };\n\n        request.onupgradeneeded = (event) => {\n          const database = event.target.result;\n\n          // Create object stores\n          Object.values(STORES).forEach(storeName => {\n            if (!database.objectStoreNames.contains(storeName)) {\n              const store = database.createObjectStore(storeName, { \n                keyPath: 'id',\n                autoIncrement: true \n              });\n              \n              // Add indexes for common queries\n              if (storeName === STORES.QUIZ_DATA) {\n                store.createIndex('subject', 'subject', { unique: false });\n                store.createIndex('module', 'module', { unique: false });\n              }\n              \n              if (storeName === STORES.USER_PROGRESS) {\n                store.createIndex('userId', 'userId', { unique: false });\n                store.createIndex('timestamp', 'timestamp', { unique: false });\n              }\n              \n              if (storeName === STORES.CACHED_RESPONSES) {\n                store.createIndex('url', 'url', { unique: false });\n                store.createIndex('timestamp', 'timestamp', { unique: false });\n              }\n              \n              if (storeName === STORES.PENDING_REQUESTS) {\n                store.createIndex('priority', 'priority', { unique: false });\n                store.createIndex('timestamp', 'timestamp', { unique: false });\n              }\n            }\n          });\n        };\n      } catch (err) {\n        setError(err.message);\n      }\n    };\n\n    initDB();\n  }, []);\n\n  // Generic function to add data to a store\n  const addData = useCallback(async (storeName, data) => {\n    if (!db) {\n      throw new Error('Database not ready');\n    }\n\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction([storeName], 'readwrite');\n      const store = transaction.objectStore(storeName);\n      \n      const dataWithTimestamp = {\n        ...data,\n        timestamp: Date.now()\n      };\n      \n      const request = store.add(dataWithTimestamp);\n      \n      request.onsuccess = () => resolve(request.result);\n      request.onerror = () => reject(request.error);\n    });\n  }, [db]);\n\n  // Generic function to get data from a store\n  const getData = useCallback(async (storeName, key) => {\n    if (!db) {\n      throw new Error('Database not ready');\n    }\n\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction([storeName], 'readonly');\n      const store = transaction.objectStore(storeName);\n      const request = store.get(key);\n      \n      request.onsuccess = () => resolve(request.result);\n      request.onerror = () => reject(request.error);\n    });\n  }, [db]);\n\n  // Generic function to get all data from a store\n  const getAllData = useCallback(async (storeName, indexName = null, indexValue = null) => {\n    if (!db) {\n      throw new Error('Database not ready');\n    }\n\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction([storeName], 'readonly');\n      const store = transaction.objectStore(storeName);\n      \n      let request;\n      if (indexName && indexValue) {\n        const index = store.index(indexName);\n        request = index.getAll(indexValue);\n      } else {\n        request = store.getAll();\n      }\n      \n      request.onsuccess = () => resolve(request.result);\n      request.onerror = () => reject(request.error);\n    });\n  }, [db]);\n\n  // Generic function to update data in a store\n  const updateData = useCallback(async (storeName, data) => {\n    if (!db) {\n      throw new Error('Database not ready');\n    }\n\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction([storeName], 'readwrite');\n      const store = transaction.objectStore(storeName);\n      \n      const dataWithTimestamp = {\n        ...data,\n        updatedAt: Date.now()\n      };\n      \n      const request = store.put(dataWithTimestamp);\n      \n      request.onsuccess = () => resolve(request.result);\n      request.onerror = () => reject(request.error);\n    });\n  }, [db]);\n\n  // Generic function to delete data from a store\n  const deleteData = useCallback(async (storeName, key) => {\n    if (!db) {\n      throw new Error('Database not ready');\n    }\n\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction([storeName], 'readwrite');\n      const store = transaction.objectStore(storeName);\n      const request = store.delete(key);\n      \n      request.onsuccess = () => resolve();\n      request.onerror = () => reject(request.error);\n    });\n  }, [db]);\n\n  // Clear old cached data\n  const clearOldData = useCallback(async (storeName, maxAge = 7 * 24 * 60 * 60 * 1000) => {\n    if (!db) {\n      throw new Error('Database not ready');\n    }\n\n    const cutoffTime = Date.now() - maxAge;\n    \n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction([storeName], 'readwrite');\n      const store = transaction.objectStore(storeName);\n      const index = store.index('timestamp');\n      const range = IDBKeyRange.upperBound(cutoffTime);\n      \n      const request = index.openCursor(range);\n      \n      request.onsuccess = (event) => {\n        const cursor = event.target.result;\n        if (cursor) {\n          cursor.delete();\n          cursor.continue();\n        } else {\n          resolve();\n        }\n      };\n      \n      request.onerror = () => reject(request.error);\n    });\n  }, [db]);\n\n  // Quiz-specific functions\n  const cacheQuizData = useCallback(async (quizData) => {\n    return addData(STORES.QUIZ_DATA, quizData);\n  }, [addData]);\n\n  const getCachedQuizData = useCallback(async (subject, module) => {\n    return getAllData(STORES.QUIZ_DATA, 'subject', subject);\n  }, [getAllData]);\n\n  // User progress functions\n  const saveUserProgress = useCallback(async (progressData) => {\n    return addData(STORES.USER_PROGRESS, progressData);\n  }, [addData]);\n\n  const getUserProgress = useCallback(async (userId) => {\n    return getAllData(STORES.USER_PROGRESS, 'userId', userId);\n  }, [getAllData]);\n\n  // API response caching\n  const cacheResponse = useCallback(async (url, responseData) => {\n    return addData(STORES.CACHED_RESPONSES, {\n      url,\n      data: responseData\n    });\n  }, [addData]);\n\n  const getCachedResponse = useCallback(async (url) => {\n    const responses = await getAllData(STORES.CACHED_RESPONSES, 'url', url);\n    return responses.length > 0 ? responses[0] : null;\n  }, [getAllData]);\n\n  // Pending requests for sync when online\n  const addPendingRequest = useCallback(async (requestData) => {\n    return addData(STORES.PENDING_REQUESTS, {\n      ...requestData,\n      priority: requestData.priority || 1\n    });\n  }, [addData]);\n\n  const getPendingRequests = useCallback(async () => {\n    return getAllData(STORES.PENDING_REQUESTS);\n  }, [getAllData]);\n\n  const removePendingRequest = useCallback(async (requestId) => {\n    return deleteData(STORES.PENDING_REQUESTS, requestId);\n  }, [deleteData]);\n\n  // Storage size management\n  const getStorageSize = useCallback(async () => {\n    if (!navigator.storage || !navigator.storage.estimate) {\n      return null;\n    }\n\n    const estimate = await navigator.storage.estimate();\n    return {\n      quota: estimate.quota,\n      usage: estimate.usage,\n      percentUsed: (estimate.usage / estimate.quota) * 100\n    };\n  }, []);\n\n  // Clear all offline data\n  const clearAllData = useCallback(async () => {\n    if (!db) {\n      throw new Error('Database not ready');\n    }\n\n    const promises = Object.values(STORES).map(storeName => {\n      return new Promise((resolve, reject) => {\n        const transaction = db.transaction([storeName], 'readwrite');\n        const store = transaction.objectStore(storeName);\n        const request = store.clear();\n        \n        request.onsuccess = () => resolve();\n        request.onerror = () => reject(request.error);\n      });\n    });\n\n    return Promise.all(promises);\n  }, [db]);\n\n  return {\n    // State\n    isReady,\n    error,\n    \n    // Generic operations\n    addData,\n    getData,\n    getAllData,\n    updateData,\n    deleteData,\n    clearOldData,\n    \n    // Quiz-specific\n    cacheQuizData,\n    getCachedQuizData,\n    \n    // User progress\n    saveUserProgress,\n    getUserProgress,\n    \n    // API caching\n    cacheResponse,\n    getCachedResponse,\n    \n    // Sync functionality\n    addPendingRequest,\n    getPendingRequests,\n    removePendingRequest,\n    \n    // Storage management\n    getStorageSize,\n    clearAllData\n  };\n};","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\hooks\\useOnlineStatus.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\hooks\\usePWA.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\hooks\\useProgressTracking.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'getNextTopic' is defined but never used. Allowed unused vars must match /^React$/u.","line":3,"column":73,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":85},{"ruleId":"no-unused-vars","severity":1,"message":"'getAllTopicIds' is defined but never used. Allowed unused vars must match /^React$/u.","line":3,"column":87,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":101},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadUserProgress'. Either include it or remove the dependency array.","line":43,"column":6,"nodeType":"ArrayExpression","endLine":43,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [loadUserProgress, user]","fix":{"range":[1439,1445],"text":"[loadUserProgress, user]"}}]},{"ruleId":"no-unused-vars","severity":1,"message":"'level' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":324,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":324,"endColumn":28},{"ruleId":"no-unused-vars","severity":1,"message":"'totalXP' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":324,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":324,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { learningPathways, getUnlockedTopics, calculateSubjectProgress, getNextTopic, getAllTopicIds } from '../data/learningPathways';\r\nimport { progressAPI } from '../utils/progressAPI.js';\r\nimport syncManager from '../utils/syncManager.js';\r\nimport { useOnlineStatus } from './useOnlineStatus.js';\r\n\r\n// Real progress tracking hook - fixed loading issue!\r\nexport const useProgressTracking = () => {\r\n  const { user } = useAuth();\r\n  const { isOnline } = useOnlineStatus();\r\n  const [userProgress, setUserProgress] = useState({\r\n    biology: {\r\n      completedTopics: [],\r\n      currentTopic: null,\r\n      streak: 0,\r\n      totalXP: 0,\r\n      level: 1,\r\n      lastStudied: null\r\n    },\r\n    chemistry: {\r\n      completedTopics: [],\r\n      currentTopic: null,\r\n      streak: 0,\r\n      totalXP: 0,\r\n      level: 1,\r\n      lastStudied: null\r\n    },\r\n    dailyGoal: 3,\r\n    dailyCompleted: 0,\r\n    joinedDate: new Date().toISOString().split('T')[0]\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    console.log(' useProgressTracking useEffect: user changed:', user?.email);\r\n    if (user) {\r\n      console.log(' useProgressTracking useEffect: calling loadUserProgress');\r\n      loadUserProgress();\r\n    } else {\r\n      console.log(' useProgressTracking useEffect: no user, not loading progress');\r\n    }\r\n  }, [user]);\r\n\r\n  // Sync pending progress when coming online\r\n  useEffect(() => {\r\n    if (isOnline && user) {\r\n      console.log(' useProgressTracking: online status changed, attempting sync');\r\n      syncManager.syncProgressQueue();\r\n    }\r\n  }, [isOnline, user]);\r\n\r\n  const loadUserProgress = async () => {\r\n    try {\r\n      console.log(' loadUserProgress: Starting for user:', user?.email);\r\n      setLoading(true);\r\n      \r\n      let localProgress = null;\r\n      let backendProgress = null;\r\n      \r\n      // Load from localStorage\r\n      const savedProgress = localStorage.getItem(`progress_${user.email}`);\r\n      if (savedProgress) {\r\n        localProgress = JSON.parse(savedProgress);\r\n        console.log(' loadUserProgress: Found local progress');\r\n      }\r\n      \r\n      // Try to load from backend if online\r\n      if (isOnline) {\r\n        try {\r\n          backendProgress = await progressAPI.getProgress();\r\n          console.log(' loadUserProgress: Found backend progress');\r\n        } catch (error) {\r\n          console.warn(' loadUserProgress: Backend unavailable, using local only:', error.message);\r\n          \r\n          // If authentication failed, clear local data\r\n          if (error.message.includes('Authentication failed')) {\r\n            console.warn(' loadUserProgress: Authentication failed, clearing local progress');\r\n            localStorage.removeItem(`progress_${user.email}`);\r\n            localProgress = null;\r\n          }\r\n        }\r\n      }\r\n      \r\n      // Resolve conflicts and merge progress\r\n      const resolvedProgress = await resolveProgressConflicts(localProgress, backendProgress);\r\n      \r\n      if (resolvedProgress) {\r\n        console.log(' loadUserProgress: Using resolved progress');\r\n        setUserProgress(resolvedProgress);\r\n        // Save resolved progress locally\r\n        localStorage.setItem(`progress_${user.email}`, JSON.stringify(resolvedProgress));\r\n      } else {\r\n        console.log(' loadUserProgress: No saved progress, creating initial progress');\r\n        // New user - start with clean slate\r\n        const initialProgress = {\r\n          biology: {\r\n            completedTopics: [],\r\n            currentTopic: 'dna-structure', // First topic\r\n            streak: 0,\r\n            totalXP: 0,\r\n            level: 1,\r\n            lastStudied: null\r\n          },\r\n          chemistry: {\r\n            completedTopics: [],\r\n            currentTopic: 'equilibrium-intro', // First topic\r\n            streak: 0,\r\n            totalXP: 0,\r\n            level: 1,\r\n            lastStudied: null\r\n          },\r\n          dailyGoal: 3,\r\n          dailyCompleted: 0,\r\n          joinedDate: new Date().toISOString().split('T')[0],\r\n          lastSyncedAt: Date.now()\r\n        };\r\n        \r\n        setUserProgress(initialProgress);\r\n        saveProgress(initialProgress);\r\n      }\r\n    } catch (error) {\r\n      console.error(' loadUserProgress: Error loading user progress:', error);\r\n    } finally {\r\n      console.log(' loadUserProgress: Completed, setting loading to false');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Conflict resolution function for multi-device sync\r\n  const resolveProgressConflicts = async (localProgress, backendProgress) => {\r\n    if (!localProgress && !backendProgress) {\r\n      return null;\r\n    }\r\n    \r\n    if (!localProgress) {\r\n      return { ...backendProgress, lastSyncedAt: Date.now() };\r\n    }\r\n    \r\n    if (!backendProgress) {\r\n      return { ...localProgress, lastSyncedAt: Date.now() };\r\n    }\r\n    \r\n    // Both exist - merge with conflict resolution\r\n    const resolved = { ...localProgress };\r\n    \r\n    // Use most recent timestamp for basic fields\r\n    const localTimestamp = localProgress.lastSyncedAt || 0;\r\n    const backendTimestamp = backendProgress.lastSyncedAt || 0;\r\n    \r\n    if (backendTimestamp > localTimestamp) {\r\n      resolved.dailyGoal = backendProgress.dailyGoal;\r\n      resolved.dailyCompleted = backendProgress.dailyCompleted;\r\n      resolved.joinedDate = backendProgress.joinedDate;\r\n    }\r\n    \r\n    // Merge subject progress (union of completed topics, highest XP/level)\r\n    ['biology', 'chemistry'].forEach(subject => {\r\n      if (backendProgress[subject] && localProgress[subject]) {\r\n        const local = localProgress[subject];\r\n        const backend = backendProgress[subject];\r\n        \r\n        // Union of completed topics\r\n        const allCompletedTopics = [...new Set([\r\n          ...local.completedTopics,\r\n          ...backend.completedTopics\r\n        ])];\r\n        \r\n        // Use highest values for numerical fields\r\n        resolved[subject] = {\r\n          completedTopics: allCompletedTopics,\r\n          currentTopic: backend.totalXP > local.totalXP ? backend.currentTopic : local.currentTopic,\r\n          streak: Math.max(local.streak, backend.streak),\r\n          totalXP: Math.max(local.totalXP, backend.totalXP),\r\n          level: Math.max(local.level, backend.level),\r\n          lastStudied: backend.lastStudied > local.lastStudied ? backend.lastStudied : local.lastStudied\r\n        };\r\n      } else if (backendProgress[subject]) {\r\n        resolved[subject] = backendProgress[subject];\r\n      }\r\n    });\r\n    \r\n    resolved.lastSyncedAt = Date.now();\r\n    return resolved;\r\n  };\r\n\r\n  const saveProgress = (progress) => {\r\n    try {\r\n      // Add sync timestamp\r\n      const progressWithTimestamp = {\r\n        ...progress,\r\n        lastSyncedAt: Date.now()\r\n      };\r\n      \r\n      // Always save to localStorage first (never lose data)\r\n      try {\r\n        localStorage.setItem(`progress_${user.email}`, JSON.stringify(progressWithTimestamp));\r\n        console.log(' saveProgress: Saved to localStorage successfully');\r\n      } catch (localError) {\r\n        console.error(' saveProgress: Failed to save to localStorage:', localError);\r\n        // Continue - still try to queue for backend sync\r\n      }\r\n      \r\n      // Queue for backend sync (whether online or offline)\r\n      try {\r\n        syncManager.addProgressToQueue({\r\n          action: 'SAVE_PROGRESS',\r\n          data: progressWithTimestamp,\r\n          priority: 2 // Medium priority\r\n        });\r\n        \r\n        if (!isOnline) {\r\n          console.log(' saveProgress: Queued for backend sync when online');\r\n        }\r\n      } catch (queueError) {\r\n        console.error(' saveProgress: Failed to queue for sync:', queueError);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error saving progress:', error);\r\n      \r\n      // Try to save progress to a backup key if main save fails\r\n      try {\r\n        const backupKey = `progress_backup_${user.email}_${Date.now()}`;\r\n        localStorage.setItem(backupKey, JSON.stringify(progress));\r\n        console.log(' saveProgress: Saved backup progress to localStorage');\r\n      } catch (backupError) {\r\n        console.error(' saveProgress: Failed to save backup progress:', backupError);\r\n      }\r\n    }\r\n  };\r\n\r\n  const completeQuiz = (subjectId, topicId, score, questionsAnswered) => {\r\n    setUserProgress(prev => {\r\n      const updated = { ...prev };\r\n      const subject = updated[subjectId];\r\n      \r\n      // Only add to completed if not already completed\r\n      let topicDetails = null;\n\n      if (!subject.completedTopics.includes(topicId)) {\n        subject.completedTopics.push(topicId);\n        \n        // Award XP based on score and topic\n        topicDetails = learningPathways[subjectId]?.modules\n          ?.flatMap(m => m.topics)\n          ?.find(t => t.id === topicId);\n        \n        if (topicDetails) {\n          const xpMultiplier = score / 100; // XP based on score percentage\n          const earnedXP = Math.round(topicDetails.xpReward * xpMultiplier);\n          subject.totalXP += earnedXP;\n          \n          // Recalculate level\n          subject.level = Math.floor(subject.totalXP / 500) + 1;\n        } else {\r\n          // Fallback XP system if no topic found\r\n          const earnedXP = Math.round((score / 100) * 100); // Base 100 XP per quiz\r\n          subject.totalXP += earnedXP;\r\n          subject.level = Math.floor(subject.totalXP / 500) + 1;\r\n        }\r\n      }\r\n      \r\n      // Update current topic to next available\r\n      const nextTopic = getNextUnlockedTopic(subjectId, subject.completedTopics);\r\n      if (nextTopic) {\r\n        subject.currentTopic = nextTopic.id;\r\n      }\r\n      \r\n      // Update daily progress\r\n      updated.dailyCompleted += 1;\r\n      \r\n      // Update streak if studied today\r\n      const today = new Date().toISOString().split('T')[0];\r\n      if (subject.lastStudied !== today) {\r\n        const yesterday = new Date();\r\n        yesterday.setDate(yesterday.getDate() - 1);\r\n        const yesterdayStr = yesterday.toISOString().split('T')[0];\r\n        \r\n        if (subject.lastStudied === yesterdayStr) {\r\n          subject.streak += 1;\r\n        } else if (subject.lastStudied !== today) {\r\n          subject.streak = 1; // Reset streak if gap\r\n        }\r\n      }\r\n      \r\n      subject.lastStudied = today;\r\n      \r\n      // Save progress and also sync quiz completion specifically\r\n      saveProgress(updated);\r\n      \r\n      // Add quiz completion to sync queue with high priority\r\n      const quizCompletionData = {\r\n        userId: user.email,\r\n        subjectId,\r\n        topicId,\r\n        score,\n        questionsAnswered,\n        completedAt: Date.now(),\n        earnedXP: topicDetails ? Math.round(topicDetails.xpReward * (score / 100)) : Math.round((score / 100) * 100),\n        timestamp: Date.now()\n      };\n      \r\n      syncManager.addProgressToQueue({\r\n        action: 'QUIZ_COMPLETION',\r\n        data: quizCompletionData,\r\n        priority: 3 // High priority\r\n      });\r\n      \r\n      return updated;\r\n    });\r\n  };\r\n\r\n  const getNextUnlockedTopic = (subjectId, completedTopics) => {\r\n    const unlockedTopics = getUnlockedTopics(subjectId, completedTopics);\r\n    return unlockedTopics.find(topic => !completedTopics.includes(topic.id));\r\n  };\r\n\r\n  const getSubjectData = (subjectId) => {\r\n    const subjectProgress = userProgress[subjectId];\r\n    const pathwayData = learningPathways[subjectId];\r\n    \r\n    if (!subjectProgress || !pathwayData) return null;\r\n    \r\n    const { progress, level, totalXP } = calculateSubjectProgress(subjectId, subjectProgress.completedTopics);\r\n    const unlockedTopics = getUnlockedTopics(subjectId, subjectProgress.completedTopics);\r\n    const nextTopic = getNextUnlockedTopic(subjectId, subjectProgress.completedTopics);\r\n    \r\n    // Process modules to add progress information\r\n    const processedModules = pathwayData.modules.map(module => ({\r\n      ...module,\r\n      progress: module.topics ? \r\n        Math.round((module.topics.filter(topic => subjectProgress.completedTopics.includes(topic.id)).length / module.topics.length) * 100) \r\n        : 0,\r\n      topicsCount: module.topics ? module.topics.length : 0\r\n    }));\r\n    \r\n    return {\r\n      ...pathwayData,\r\n      modules: processedModules,\r\n      progress,\r\n      level: subjectProgress.level,\r\n      totalXP: subjectProgress.totalXP,\r\n      streak: subjectProgress.streak,\r\n      completedTopics: subjectProgress.completedTopics,\r\n      unlockedTopics,\r\n      nextTopic,\r\n      lastStudied: subjectProgress.lastStudied,\r\n      totalTopics: pathwayData.modules.reduce((sum, module) => sum + (module.topics ? module.topics.length : 0), 0),\r\n      completedCount: subjectProgress.completedTopics.length\r\n    };\r\n  };\r\n\r\n  const isTopicUnlocked = (subjectId, topicId) => {\r\n    const unlockedTopics = getUnlockedTopics(subjectId, userProgress[subjectId]?.completedTopics || []);\r\n    return unlockedTopics.some(topic => topic.id === topicId);\r\n  };\r\n\r\n  const getTopicDetails = (subjectId, topicId) => {\r\n    const subject = learningPathways[subjectId];\r\n    if (!subject) return null;\r\n    \r\n    for (const module of subject.modules) {\r\n      const topic = module.topics.find(t => t.id === topicId);\r\n      if (topic) {\r\n        return {\r\n          ...topic,\r\n          moduleId: module.id,\r\n          moduleName: module.name,\r\n          isUnlocked: isTopicUnlocked(subjectId, topicId),\r\n          isCompleted: userProgress[subjectId]?.completedTopics.includes(topicId) || false\r\n        };\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const resetProgress = (subjectId) => {\r\n    setUserProgress(prev => {\r\n      const updated = { ...prev };\r\n      updated[subjectId] = {\r\n        completedTopics: [],\r\n        currentTopic: subjectId === 'biology' ? 'dna-structure' : 'equilibrium-intro',\r\n        streak: 0,\r\n        totalXP: 0,\r\n        level: 1,\r\n        lastStudied: null\r\n      };\r\n      saveProgress(updated);\r\n      \r\n      // Also sync reset specifically\r\n      syncManager.addProgressToQueue({\r\n        action: 'RESET_SUBJECT',\r\n        data: { subjectId },\r\n        priority: 2 // Medium priority\r\n      });\r\n      \r\n      return updated;\r\n    });\r\n  };\r\n\r\n  const updateDailyGoal = (newGoal) => {\r\n    setUserProgress(prev => {\r\n      const updated = { ...prev, dailyGoal: newGoal };\r\n      saveProgress(updated);\r\n      \r\n      // Also sync daily goal specifically\r\n      syncManager.addProgressToQueue({\r\n        action: 'UPDATE_DAILY_GOAL',\r\n        data: { goal: newGoal },\r\n        priority: 1 // Low priority\r\n      });\r\n      \r\n      return updated;\r\n    });\r\n  };\r\n\r\n  return {\r\n    userProgress,\r\n    loading,\r\n    completeQuiz,\r\n    getSubjectData,\r\n    isTopicUnlocked,\r\n    getTopicDetails,\r\n    resetProgress,\r\n    updateDailyGoal,\r\n    saveProgress,\r\n    syncStatus: syncManager.getStatus().progressQueue,\r\n    isOnline\r\n  };\r\n};\r\n\r\nexport default useProgressTracking;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\hooks\\useUserData.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\main.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\pages\\Dashboard.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'StudentAnalytics' is defined but never used. Allowed unused vars must match /^React$/u.","line":11,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":24},{"ruleId":"no-unused-vars","severity":1,"message":"'XPDisplay' is defined but never used. Allowed unused vars must match /^React$/u.","line":19,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":17},{"ruleId":"no-unused-vars","severity":1,"message":"'StreakDisplay' is defined but never used. Allowed unused vars must match /^React$/u.","line":20,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'QuizLoader' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":41,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":41,"endColumn":17},{"ruleId":"no-unused-vars","severity":1,"message":"'logout' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":61,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":61,"endColumn":23},{"ruleId":"no-unused-vars","severity":1,"message":"'setNotifications' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":69,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":69,"endColumn":41},{"ruleId":"no-unused-vars","severity":1,"message":"'currentXP' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":83,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":83,"endColumn":14},{"ruleId":"no-unused-vars","severity":1,"message":"'currentLevel' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":84,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":84,"endColumn":17},{"ruleId":"no-unused-vars","severity":1,"message":"'xpToNextLevel' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":85,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":85,"endColumn":18},{"ruleId":"no-unused-vars","severity":1,"message":"'currentStreak' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":86,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":86,"endColumn":18},{"ruleId":"no-unused-vars","severity":1,"message":"'longestStreak' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":87,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":87,"endColumn":18},{"ruleId":"no-unused-vars","severity":1,"message":"'userProgress' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":88,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":88,"endColumn":17},{"ruleId":"no-unused-vars","severity":1,"message":"'streak' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":89,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":89,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'handleGoalCreate' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":206,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":206,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'handleGoalUpdate' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":210,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":210,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'studentData' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":217,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":217,"endColumn":20},{"ruleId":"no-unused-vars","severity":1,"message":"'studyPatterns' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":231,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":231,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'insights' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":243,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":243,"endColumn":17},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":776,"column":53,"nodeType":"Identifier","messageId":"unusedVar","endLine":776,"endColumn":58}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":19,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useUserData } from '../hooks/useUserData';\r\nimport ProgressRing from '../components/ProgressRing';\r\nimport ProgressBar from '../components/ProgressBar';\r\nimport StatCard from '../components/StatCard';\r\nimport PullToRefresh from '../components/PullToRefresh';\r\nimport GamingNavigation from '../components/GamingNavigation';\r\nimport CharacterProgression from '../components/CharacterProgression';\r\nimport StudentAnalytics from '../components/StudentAnalytics';\r\nimport ModernAnalyticsDashboard from '../components/ModernAnalyticsDashboard';\r\nimport TeacherDashboard from '../components/TeacherDashboard';\r\nimport AchievementSystem from '../components/AchievementSystem';\r\nimport LeaderboardSystem from '../components/LeaderboardSystem';\r\nimport MultiplayerQuizBattle from '../components/MultiplayerQuizBattle';\r\nimport BossBattleInterface from '../components/BossBattleInterface';\r\nimport MiniGameInterface from '../components/MiniGameInterface';\r\nimport XPDisplay from '../components/XPDisplay';\r\nimport StreakDisplay from '../components/StreakDisplay';\r\nimport { useGamificationContext } from '../context/GamificationContext';\r\n\r\n// Import quiz components directly to avoid dynamic import issues - CACHE BREAKER v2\r\nimport PathwayQuizSetup from './PathwayQuizSetup.jsx';\r\nimport Quiz from './Quiz.jsx';\r\nimport QuizResults from './QuizResults.jsx';\r\nimport QuizSetup from './QuizSetup.jsx';\r\nimport Module5Pathway from '../components/Module5Pathway.jsx';\r\nimport Module6Pathway from '../components/Module6Pathway.jsx';\r\nimport Module5AdminDashboard from '../components/Module5AdminDashboard.jsx';\r\nimport LoadingState from '../components/feedback/LoadingState';\r\nimport ErrorState from '../components/feedback/ErrorState';\r\nimport BiologyHub from '../components/BiologyHub.jsx';\r\nimport ChemistryHub from '../components/ChemistryHub.jsx';\r\nimport ChemistryModulePathway from '../components/ChemistryModulePathway.jsx';\r\nimport ChemistryModule5Pathway from '../components/ChemistryModule5Pathway.jsx';\r\nimport { useOnlineStatus } from '../hooks/useOnlineStatus';\r\nimport OfflineNotice from '../components/feedback/OfflineNotice';\r\n\r\n// Quiz loading component\r\nconst QuizLoader = () => (\r\n  <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 flex items-center justify-center\">\r\n    <div className=\"text-center\">\r\n      <div className=\"animate-pulse\">\r\n        <div className=\"w-16 h-16 bg-blue-200 rounded-full mx-auto mb-4\"></div>\r\n        <div className=\"h-4 bg-blue-200 rounded w-32 mx-auto mb-2\"></div>\r\n        <div className=\"h-3 bg-blue-100 rounded w-24 mx-auto\"></div>\r\n      </div>\r\n      <p className=\"text-blue-600 font-medium mt-4\">Preparing your quiz...</p>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst DashboardFixed = ({\r\n  PathwayQuizSetupComponent = PathwayQuizSetup,\r\n  QuizSetupComponent = QuizSetup,\r\n  QuizComponent = Quiz,\r\n  QuizResultsComponent = QuizResults,\r\n}) => {\r\n  console.log(' DashboardFixed component loaded - cache should be cleared now!');\r\n  const { user, logout } = useAuth();\r\n  const { isOnline } = useOnlineStatus();\r\n  const [currentTime, setCurrentTime] = useState(new Date());\r\n  const [selectedSubject, setSelectedSubject] = useState(null);\r\n  const [currentView, setCurrentView] = useState('dashboard'); // dashboard, subject, quiz-setup, quiz, quiz-results, analytics, character, boss-battles, mini-games, module5-pathway, module6-pathway, chemistry-module5-pathway, chemistry-module5, chemistry-module6, chemistry-module7, chemistry-module8, module5-admin, teacher, achievements, leaderboard, multiplayer\r\n  const [quizConfig, setQuizConfig] = useState(null);\r\n  const [quizResults, setQuizResults] = useState(null);\r\n  const [studentGoals, setStudentGoals] = useState([]);\r\n  const [notifications, setNotifications] = useState([]);\r\n\r\n  // Use custom hook for user data\r\n  const {\r\n    userData,\r\n    achievements,\r\n    subjects,\r\n    loading,\r\n    error,\r\n    refreshData,\r\n  } = useUserData();\r\n\r\n  // Use gamification context\r\n  const {\r\n    currentXP,\r\n    currentLevel,\r\n    xpToNextLevel,\r\n    currentStreak,\r\n    longestStreak,\r\n    userProgress,\r\n    streak\r\n  } = useGamificationContext();\r\n\r\n  useEffect(() => {\r\n    const timer = setInterval(() => setCurrentTime(new Date()), 1000);\r\n    return () => clearInterval(timer);\r\n  }, []);\r\n\r\n  const getGreeting = () => {\r\n    const hour = currentTime.getHours();\r\n    const name = user?.name?.split(' ')[0] || 'Student';\r\n\r\n    if (hour < 12) return `Good morning, ${name}! Let's make today count.`;\r\n    if (hour < 17) return `Good afternoon, ${name}! Keep the momentum going.`;\r\n    return `Good evening, ${name}! You're finishing strong.`;\r\n  };\r\n\r\n  const getMotivationMessage = () => {\r\n    const messages = [\r\n      \"You're crushing it! Keep the momentum going!\",\r\n      'Every question brings you closer to your HSC goals.',\r\n      'Your future self will thank you for studying today.',\r\n      'Small progress each day leads to big results.',\r\n      \"You've got this! One topic at a time!\",\r\n    ];\r\n    return messages[Math.floor(Math.random() * messages.length)];\r\n  };\r\n\r\n  // Loading state\r\n  if (loading) {\r\n    return (\r\n      <LoadingState\r\n        title=\"Loading your progress\"\r\n        message=\"Hang tight while we personalize your dashboard experience.\"\r\n      />\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <ErrorState\r\n        title=\"We couldn't load your dashboard\"\r\n        message=\"Please check your connection and try again.\"\r\n        actionLabel=\"Reload\"\r\n        onRetry={refreshData}\r\n        details={error?.message}\r\n      />\r\n    );\r\n  }\r\n  // Quiz flow handlers\r\n  const handleStartQuiz = (config) => {\r\n    setQuizConfig(config);\r\n    setCurrentView('quiz');\r\n  };\r\n\r\n  const handleQuizComplete = (results) => {\r\n    setQuizResults(results);\r\n    setCurrentView('quiz-results');\r\n  };\r\n\r\n  const handleRetakeQuiz = () => {\r\n    setCurrentView('quiz-setup');\r\n  };\r\n\r\n  const handleBackToDashboard = () => {\r\n    setCurrentView('dashboard');\r\n    setSelectedSubject(null);\r\n    setQuizConfig(null);\r\n    setQuizResults(null);\r\n  };\r\n\r\n  const handleSubjectSelect = (subject) => {\r\n    setSelectedSubject(subject);\r\n    if (subject?.id === 'biology') {\r\n      setCurrentView('biology-hub'); // Route to BiologyHub for rich Module 5 content\r\n    } else if (subject?.id === 'chemistry') {\r\n      setCurrentView('chemistry-hub'); // Route to ChemistryHub for consistent formatting\r\n    } else {\r\n      setCurrentView('subject');\r\n    }\r\n  };\r\n\r\n  const getModuleDescription = (moduleId, subjectId) => {\r\n    const descriptions = {\r\n      biology: {\r\n        5: 'DNA, genes, inheritance patterns, and genetic variation',\r\n        6: 'Mutations, biotechnology, genetic engineering',\r\n        7: 'Pathogens, immune system, and disease prevention',\r\n        8: 'Cancer, genetic disorders, and lifestyle diseases'\r\n      },\r\n      chemistry: {\r\n        5: 'Chemical equilibrium, acids, bases, and buffer systems',\r\n        6: 'Advanced acid-base chemistry and analytical techniques',\r\n        7: 'Carbon compounds, functional groups, and reactions',\r\n        8: 'Industrial chemistry, materials, and environmental applications'\r\n      }\r\n    };\r\n    return descriptions[subjectId]?.[moduleId] || 'HSC Module content';\r\n  };\r\n\r\n  const handleQuizSetup = () => {\r\n    if (selectedSubject) {\r\n      setQuizConfig({\r\n        subject: selectedSubject,\r\n        module: null, // Will be selected in quiz setup\r\n        difficulty: null,\r\n        length: 10,\r\n        timer: true\r\n      });\r\n    }\r\n    setCurrentView('quiz-setup');\r\n  };\r\n\r\n  const handleNavigate = (view) => {\r\n    setCurrentView(view);\r\n  };\r\n\r\n  const handleGoalCreate = (goal) => {\r\n    setStudentGoals([...studentGoals, goal]);\r\n  };\r\n\r\n  const handleGoalUpdate = (goalId, updates) => {\r\n    setStudentGoals(studentGoals.map(goal =>\r\n      goal.id === goalId ? { ...goal, ...updates } : goal\r\n    ));\r\n  };\r\n\r\n  // Student data (fallback when API unavailable)\r\n  const studentData = {\r\n    averageScore: 78,\r\n    biologyScore: 82,\r\n    chemistryScore: 74,\r\n    learningVelocity: 85,\r\n    scoreHistory: [65, 70, 75, 78, 80, 78],\r\n    confidenceBySubject: [\r\n      { name: 'Biology Module 5', confidence: 85 },\r\n      { name: 'Biology Module 6', confidence: 72 },\r\n      { name: 'Chemistry Module 5', confidence: 68 },\r\n      { name: 'Chemistry Module 6', confidence: 79 }\r\n    ]\r\n  };\r\n\r\n  const studyPatterns = {\r\n    timePreference: 'morning',\r\n    optimalSessionLength: 25,\r\n    averageBreak: 7,\r\n    currentStreak: userData?.streak || 0,\r\n    optimalTimeBoost: 15,\r\n    weeklyPattern: [\r\n      { studied: true }, { studied: true }, { studied: false },\r\n      { studied: true }, { studied: true }, { studied: false }, { studied: true }\r\n    ]\r\n  };\r\n\r\n  const insights = {\r\n    weakAreas: [\r\n      { topic: 'Organic Chemistry', score: 65 },\r\n      { topic: 'Cell Division', score: 58 }\r\n    ],\r\n    recentAchievements: [\r\n      { id: 1, icon: '', name: 'Week Streak', description: 'Studied 7 days in a row!' },\r\n      { id: 2, icon: '', name: 'Perfect Score', description: 'Got 100% on Biology quiz!' }\r\n    ]\r\n  };\r\n\r\n  const characterData = {\r\n    level: userData?.level || 5,\r\n    xp: userData?.xp || 1250,\r\n    xpToNext: 1500,\r\n    biologyLevel: 6,\r\n    chemistryLevel: 4,\r\n    biologyXP: 1800,\r\n    chemistryXP: 1200,\r\n    achievements: achievements || []\r\n  };\r\n\r\n  // Render different views based on current state  \r\n  if (currentView === 'quiz-setup') {\r\n    const QuizSetupView = PathwayQuizSetupComponent || QuizSetupComponent;\r\n    console.log(' Rendering quiz setup view with error boundary protection');\r\n    return (\r\n      <div key=\"quiz-setup-wrapper\">\r\n        <QuizSetupView\r\n          subject={selectedSubject}\r\n          onBack={() => setCurrentView('subject')}\r\n          onStartQuiz={handleStartQuiz}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (currentView === 'quiz') {\r\n    return (\r\n      <QuizComponent\r\n        quizConfig={quizConfig}\r\n        onQuizComplete={handleQuizComplete}\r\n        onExit={() => setCurrentView('subject')}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (currentView === 'quiz-results') {\r\n    return (\r\n      <QuizResultsComponent\r\n        quizData={quizResults}\r\n        onRetakeQuiz={handleRetakeQuiz}\r\n        onBackToDashboard={handleBackToDashboard}\r\n        onReviewAnswers={() => console.log('Review answers')}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (currentView === 'biology-hub') {\r\n    return (\r\n      <BiologyHub\r\n        onBack={() => setCurrentView('dashboard')}\r\n        onModuleSelect={(moduleType) => {\r\n          if (moduleType === 'module5') {\r\n            setCurrentView('module5-pathway');\r\n          } else if (moduleType === 'module6') {\r\n            setCurrentView('module6-pathway');\r\n          }\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (currentView === 'chemistry-hub') {\r\n    return (\r\n      <ChemistryHub\r\n        onBack={() => setCurrentView('dashboard')}\r\n        onModuleSelect={(moduleType) => {\r\n          if (moduleType === 'module5') {\r\n            setCurrentView('chemistry-module5-pathway');\r\n          } else if (moduleType === 'module6') {\r\n            setCurrentView('chemistry-module6');\r\n          } else if (moduleType === 'module7') {\r\n            setCurrentView('chemistry-module7');\r\n          } else if (moduleType === 'module8') {\r\n            setCurrentView('chemistry-module8');\r\n          }\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (currentView === 'module5-pathway') {\r\n    return (\r\n      <Module5Pathway\r\n        onBack={() => setCurrentView('biology-hub')}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (currentView === 'module6-pathway') {\r\n    return (\r\n      <Module6Pathway\r\n        onBack={() => setCurrentView('biology-hub')}\r\n      />\r\n    );\r\n  }\r\n\r\n  // Chemistry Module Pathways\r\n  if (currentView === 'chemistry-module5-pathway') {\r\n    return (\r\n      <ChemistryModule5Pathway\r\n        onBack={() => setCurrentView('chemistry-hub')}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (currentView === 'chemistry-module5') {\r\n    return (\r\n      <ChemistryModulePathway\r\n        moduleId=\"module5\"\r\n        onBack={() => setCurrentView('chemistry-hub')}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (currentView === 'chemistry-module6') {\r\n    return (\r\n      <ChemistryModulePathway\r\n        moduleId=\"module6\"\r\n        onBack={() => setCurrentView('chemistry-hub')}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (currentView === 'chemistry-module7') {\r\n    return (\r\n      <ChemistryModulePathway\r\n        moduleId=\"module7\"\r\n        onBack={() => setCurrentView('chemistry-hub')}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (currentView === 'chemistry-module8') {\r\n    return (\r\n      <ChemistryModulePathway\r\n        moduleId=\"module8\"\r\n        onBack={() => setCurrentView('chemistry-hub')}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (currentView === 'module5-admin') {\r\n    return (\r\n      <Module5AdminDashboard\r\n        onBack={() => setCurrentView('dashboard')}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (currentView === 'subject') {\r\n    return (\r\n      <SubjectView\r\n        subject={selectedSubject}\r\n        onBack={() => setCurrentView('dashboard')}\r\n        onStartQuiz={handleQuizSetup}\r\n        onModuleSelect={(module) => {\r\n          // Map to QuizSetup expected format\r\n          const quizSetupModule = {\r\n            id: module.id,\r\n            name: `Module ${module.id}`,\r\n            title: module.name.replace(`Module ${module.id}: `, ''),\r\n            description: getModuleDescription(module.id, selectedSubject.id),\r\n            difficulty: 'Medium'\r\n          };\r\n          \r\n          setQuizConfig({\r\n            subject: selectedSubject,\r\n            module: quizSetupModule,\r\n            difficulty: { id: 'medium', name: 'Medium' },\r\n            length: 10,\r\n            timer: true\r\n          });\r\n          setCurrentView('quiz-setup');\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (currentView === 'analytics') {\r\n    return (\r\n      <div className=\"min-h-screen\">\r\n        <ModernAnalyticsDashboard onBack={() => setCurrentView('dashboard')} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (currentView === 'character') {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 pb-20\">\r\n        <GamingNavigation\r\n          currentView={currentView}\r\n          onNavigate={handleNavigate}\r\n          userLevel={userData?.level || 1}\r\n          userXP={userData?.xp || 0}\r\n          userXPToNext={userData?.xpToNext || 100}\r\n          notifications={notifications}\r\n          dailyStreak={userData?.streak || 0}\r\n        />\r\n        <div className=\"p-4\">\r\n          <CharacterProgression\r\n            character={characterData}\r\n            level={characterData.level}\r\n            xp={characterData.xp}\r\n            xpToNext={characterData.xpToNext}\r\n            biologyLevel={characterData.biologyLevel}\r\n            chemistryLevel={characterData.chemistryLevel}\r\n            biologyXP={characterData.biologyXP}\r\n            chemistryXP={characterData.chemistryXP}\r\n            achievements={characterData.achievements}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (currentView === 'boss-battles') {\r\n    return (\r\n      <BossBattleInterface\r\n        boss={{ name: 'Module 5 Biology Boss', maxHealth: 100 }}\r\n        studentHealth={85}\r\n        bossHealth={60}\r\n        question={{\r\n          text: 'Which organelle is responsible for cellular respiration?',\r\n          answers: [\r\n            { text: 'Nucleus', correct: false },\r\n            { text: 'Mitochondria', correct: true },\r\n            { text: 'Ribosome', correct: false },\r\n            { text: 'Endoplasmic Reticulum', correct: false }\r\n          ]\r\n        }}\r\n        onAnswerSelect={(index) => console.log('Answer selected:', index)}\r\n        onEscape={() => setCurrentView('dashboard')}\r\n        gameState=\"battle\"\r\n        comboCount={2}\r\n        timeLeft={25}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (currentView === 'mini-games') {\r\n    return (\r\n      <MiniGameInterface\r\n        gameType=\"speed-quiz\"\r\n        gameData={{\r\n          questions: [\r\n            {\r\n              text: 'What is the powerhouse of the cell?',\r\n              answers: [\r\n                { text: 'Nucleus', correct: false },\r\n                { text: 'Mitochondria', correct: true },\r\n                { text: 'Ribosome', correct: false },\r\n                { text: 'Vacuole', correct: false }\r\n              ]\r\n            }\r\n          ]\r\n        }}\r\n        onGameComplete={(results) => {\r\n          console.log('Game completed:', results);\r\n          setCurrentView('dashboard');\r\n        }}\r\n        onGameExit={() => setCurrentView('dashboard')}\r\n        timeLimit={60}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (currentView === 'teacher') {\r\n    return (\r\n      <TeacherDashboard\r\n        onBack={() => setCurrentView('dashboard')}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (currentView === 'achievements') {\r\n    return (\r\n      <AchievementSystem\r\n        onClose={() => setCurrentView('dashboard')}\r\n        userProgress={userData}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (currentView === 'leaderboard') {\r\n    return (\r\n      <LeaderboardSystem\r\n        onClose={() => setCurrentView('dashboard')}\r\n        currentUser={user}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (currentView === 'multiplayer') {\r\n    return (\r\n      <MultiplayerQuizBattle\r\n        onExit={() => setCurrentView('dashboard')}\r\n        currentUser={user}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 pb-20\">\r\n      {/* Gaming Navigation */}\r\n      <GamingNavigation\r\n        currentView={currentView}\r\n        onNavigate={handleNavigate}\r\n        userLevel={userData?.level || 1}\r\n        userXP={userData?.xp || 0}\r\n        userXPToNext={userData?.xpToNext || 100}\r\n        notifications={notifications}\r\n        dailyStreak={userData?.streak || 0}\r\n      />\r\n\r\n      <PullToRefresh onRefresh={refreshData}>\r\n        <div className=\"px-4 py-6 max-w-md mx-auto space-y-6\">\r\n          {!isOnline && (\r\n            <OfflineNotice message=\"You&#39;re offline. Recently viewed content is still available.\" />\r\n          )}\r\n        {/* Welcome Section */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          className=\"text-center\"\r\n        >\r\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\r\n            {getGreeting()}\r\n          </h1>\r\n          <p className=\"text-gray-600 text-sm\">\r\n            {getMotivationMessage()}\r\n          </p>\r\n        </motion.div>\r\n\r\n        {/* Daily Progress Ring */}\r\n        <motion.div\r\n          initial={{ opacity: 0, scale: 0.9 }}\r\n          animate={{ opacity: 1, scale: 1 }}\r\n          transition={{ delay: 0.1 }}\r\n          className=\"gaming-card p-6 text-center\"\r\n        >\r\n          <ProgressRing\r\n            progress={((userData?.dailyCompleted || 0) / (userData?.dailyGoal || 5)) * 100}\r\n            size={100}\r\n            color=\"#10b981\"\r\n          >\r\n            <div className=\"text-center\">\r\n              <div className=\"text-xl font-bold text-gray-900\">{userData?.dailyCompleted || 0}</div>\r\n              <div className=\"text-xs text-gray-600\">of {userData?.dailyGoal || 5}</div>\r\n            </div>\r\n          </ProgressRing>\r\n          <h3 className=\"font-semibold text-gray-900 mt-3\">Daily Goal</h3>\r\n          <p className=\"text-sm text-gray-600\">Questions completed today</p>\r\n        </motion.div>\r\n\r\n        {/* Stats Grid */}\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          <StatCard\r\n            icon={\r\n              <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\"/>\r\n              </svg>\r\n            }\r\n            title=\"Study Streak\"\r\n            value={`${userData?.streak || 0} days`}\r\n            subtitle=\"Keep it going! \"\r\n            color=\"warning\"\r\n            delay={0.2}\r\n          />\r\n          <StatCard\r\n            icon={\r\n              <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path d=\"M13 2.05v3.03c3.39.49 6 3.39 6 6.92 0 .9-.18 1.75-.48 2.54l2.6 1.53c.56-1.24.88-2.62.88-4.07 0-5.18-3.95-9.45-9-9.95z\"/>\r\n                <path d=\"M12 19c-3.87 0-7-3.13-7-7 0-3.53 2.61-6.43 6-6.92V2.05c-5.06.5-9 4.76-9 9.95 0 5.52 4.47 10 9.99 10 3.31 0 6.24-1.61 8.06-4.09l-2.6-1.53C16.17 17.98 14.21 19 12 19z\"/>\r\n              </svg>\r\n            }\r\n            title=\"Average Score\"\r\n            value={`${userData?.averageScore || 0}%`}\r\n            subtitle=\"Excellent work! \"\r\n            color=\"success\"\r\n            delay={0.3}\r\n          />\r\n        </div>\r\n\r\n        {/* XP Progress */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.4 }}\r\n          className=\"gaming-card p-4\"\r\n        >\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <h3 className=\"font-semibold text-gray-900\">Level Progress</h3>\r\n            <span className=\"text-sm text-gray-600\">Level {(userData?.level || 1) + 1}</span>\r\n          </div>\r\n          <ProgressBar\r\n            progress={((userData?.xp || 0) / (userData?.xpToNext || 100)) * 100}\r\n            color=\"#8b5cf6\"\r\n            label={`${userData?.xp || 0} / ${userData?.xpToNext || 100} XP`}\r\n            showPercentage={false}\r\n          />\r\n        </motion.div>\r\n\r\n        {/* Subject Selection */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.5 }}\r\n          className=\"space-y-4\"\r\n        >\r\n          <h2 className=\"text-lg font-bold text-gray-900\">Choose Your Subject</h2>\r\n          {(subjects || []).map((subject, index) => (\r\n            <motion.button\r\n              key={subject?.id || index}\r\n              initial={{ opacity: 0, x: -20 }}\r\n              animate={{ opacity: 1, x: 0 }}\r\n              transition={{ delay: 0.6 + index * 0.1 }}\r\n              whileTap={{ scale: 0.98 }}\r\n              onClick={() => handleSubjectSelect(subject)}\r\n              className=\"w-full bg-white/70 backdrop-blur-sm rounded-2xl p-4 border border-white/50 hover:shadow-lg transition-all duration-200\"\r\n            >\r\n              <div className=\"flex items-center space-x-4\">\r\n                <div className={`w-16 h-16 bg-gradient-to-r ${subject?.color || 'from-gray-400 to-gray-500'} rounded-2xl flex items-center justify-center text-2xl shadow-lg`}>\r\n                  {subject?.icon || ''}\r\n                </div>\r\n                <div className=\"flex-1 text-left\">\r\n                  <h3 className=\"font-bold text-gray-900 text-lg\">{String(subject?.name) || 'Subject'}</h3>\r\n                  <p className=\"text-gray-600 text-sm mb-2\">Last studied {String(subject?.lastStudied) || 'Never'}</p>\r\n                  <ProgressBar\r\n                    progress={Number(subject?.progress) || 0}\r\n                    height={6}\r\n                    color={subject?.id === 'biology' ? '#10b981' : '#8b5cf6'}\r\n                    showPercentage={false}\r\n                  />\r\n                  <p className=\"text-xs text-gray-500 mt-1\">{Math.round(Number(subject?.progress) || 0)}% complete</p>\r\n                </div>\r\n                <svg className=\"w-6 h-6 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\r\n                </svg>\r\n              </div>\r\n            </motion.button>\r\n          ))}\r\n        </motion.div>\r\n\r\n        {/* Quick Actions */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.8 }}\r\n          className=\"space-y-3\"\r\n        >\r\n          \r\n          <div className=\"grid grid-cols-2 gap-3\">\r\n            <button \r\n              onClick={() => setCurrentView('achievements')}\r\n              className=\"bg-gradient-to-r from-purple-500 to-pink-500 text-white font-semibold py-4 px-4 rounded-xl hover:shadow-lg transition-shadow\"\r\n            >\r\n              <div className=\"text-2xl mb-1\"></div>\r\n              <div className=\"text-sm\">Achievements</div>\r\n            </button>\r\n            <button \r\n              onClick={() => setCurrentView('leaderboard')}\r\n              className=\"bg-gradient-to-r from-orange-500 to-red-500 text-white font-semibold py-4 px-4 rounded-xl hover:shadow-lg transition-shadow\"\r\n            >\r\n              <div className=\"text-2xl mb-1\"></div>\r\n              <div className=\"text-sm\">Leaderboard</div>\r\n            </button>\r\n            <button \r\n              onClick={() => setCurrentView('multiplayer')}\r\n              className=\"bg-gradient-to-r from-green-500 to-teal-500 text-white font-semibold py-4 px-4 rounded-xl hover:shadow-lg transition-shadow\"\r\n            >\r\n              <div className=\"text-2xl mb-1\"></div>\r\n              <div className=\"text-sm\">Battle Quiz</div>\r\n            </button>\r\n            <button \r\n              onClick={() => setCurrentView('analytics')}\r\n              className=\"bg-gradient-to-r from-blue-500 to-indigo-500 text-white font-semibold py-4 px-4 rounded-xl hover:shadow-lg transition-shadow\"\r\n            >\r\n              <div className=\"text-2xl mb-1\"></div>\r\n              <div className=\"text-sm\">Analytics</div>\r\n            </button>\r\n          </div>\r\n\r\n          {/* Admin Access (hidden for most users) */}\r\n          <div className=\"mt-3 space-y-3\">\r\n            <button\r\n              onClick={() => setCurrentView('module5-admin')}\r\n              className=\"w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold py-3 px-4 rounded-xl hover:shadow-lg transition-all text-sm\"\r\n            >\r\n              <div className=\"flex items-center justify-center space-x-2\">\r\n                <span className=\"text-lg\"></span>\r\n                <span>Module 5 Admin Dashboard</span>\r\n                <span className=\"bg-yellow-400 text-yellow-900 text-xs font-bold px-2 py-1 rounded-full\">\r\n                  ADMIN\r\n                </span>\r\n              </div>\r\n            </button>\r\n            \r\n            <button\r\n              onClick={() => setCurrentView('teacher')}\r\n              className=\"w-full bg-gradient-to-r from-green-600 to-teal-600 text-white font-semibold py-3 px-4 rounded-xl hover:shadow-lg transition-all text-sm\"\r\n            >\r\n              <div className=\"flex items-center justify-center space-x-2\">\r\n                <span className=\"text-lg\"></span>\r\n                <span>Teacher Dashboard</span>\r\n                <span className=\"bg-green-400 text-green-900 text-xs font-bold px-2 py-1 rounded-full\">\r\n                  TEACHER\r\n                </span>\r\n              </div>\r\n            </button>\r\n          </div>\r\n        </motion.div>\r\n\r\n        {/* Recent Achievements */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.9 }}\r\n          className=\"bg-white/70 backdrop-blur-sm rounded-2xl p-4 border border-white/50\"\r\n        >\r\n          <h3 className=\"font-semibold text-gray-900 mb-3\">Recent Achievements</h3>\r\n          <div className=\"flex space-x-3 overflow-x-auto\">\r\n            {(achievements || []).map((achievement, index) => (\r\n              <div\r\n                key={achievement.id}\r\n                className={`flex-shrink-0 w-16 h-16 rounded-xl flex flex-col items-center justify-center text-xs font-medium border-2 ${\r\n                  achievement.earned\r\n                    ? 'bg-gradient-to-r from-yellow-400 to-orange-500 border-yellow-300 text-white'\r\n                    : 'bg-gray-100 border-gray-200 text-gray-400'\r\n                }`}\r\n              >\r\n                <div className=\"text-lg\">{achievement.icon}</div>\r\n                <div className=\"text-xs mt-1 text-center leading-tight\">{achievement.name.split(' ')[0]}</div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </motion.div>\r\n\r\n        {/* Bottom spacing for mobile */}\r\n        <div className=\"h-8\" />\r\n        </div>\r\n      </PullToRefresh>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Subject Detail View Component\r\nconst SubjectView = ({ subject, onBack, onStartQuiz, onModuleSelect }) => {\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50\">\r\n      {/* Header */}\r\n      <div className=\"bg-white/80 backdrop-blur-sm shadow-sm border-b border-white/50\">\r\n        <div className=\"px-4 py-4 flex items-center\">\r\n          <button\r\n            onClick={onBack}\r\n            className=\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors mr-3\"\r\n          >\r\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n            </svg>\r\n          </button>\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className={`w-10 h-10 bg-gradient-to-r ${subject.color} rounded-full flex items-center justify-center text-white text-lg`}>\r\n              {subject.icon}\r\n            </div>\r\n            <h1 className=\"text-xl font-bold text-gray-900\">{String(subject.name || 'Subject')}</h1>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"px-4 py-6 max-w-md mx-auto space-y-6\">\r\n        {/* Overall Progress */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          className=\"bg-white/70 backdrop-blur-sm rounded-2xl p-6 border border-white/50 text-center\"\r\n        >\r\n          <ProgressRing\r\n            progress={Number(subject.progress) || 0}\r\n            size={120}\r\n            color={subject.id === 'biology' ? '#10b981' : '#8b5cf6'}\r\n          >\r\n            <div className=\"text-center\">\r\n              <div className=\"text-2xl font-bold text-gray-900\">{Math.round(Number(subject.progress) || 0)}%</div>\r\n              <div className=\"text-xs text-gray-600\">Complete</div>\r\n            </div>\r\n          </ProgressRing>\r\n          <h3 className=\"font-bold text-gray-900 mt-4 text-lg\">{String(subject.name || 'Subject')} Progress</h3>\r\n          <p className=\"text-sm text-gray-600\">Next: {String(subject.nextTopic?.name) || 'No more topics'}</p>\r\n        </motion.div>\r\n\r\n        {/* Modules */}\r\n        <div className=\"space-y-3\">\r\n          <h2 className=\"text-lg font-bold text-gray-900\">HSC Modules</h2>\r\n          {(subject.modules || []).map((module, index) => (\r\n            <motion.div\r\n              key={module.id || module.name || index}\r\n              initial={{ opacity: 0, x: -20 }}\r\n              animate={{ opacity: 1, x: 0 }}\r\n              transition={{ delay: index * 0.1 }}\r\n              onClick={() => onModuleSelect && onModuleSelect(module)}\r\n              className=\"bg-white/70 backdrop-blur-sm rounded-xl p-4 border border-white/50 cursor-pointer hover:bg-white/80 transition-colors\"\r\n            >\r\n              <div className=\"flex items-center justify-between mb-3\">\r\n                <h3 className=\"font-semibold text-gray-900\">{String(module.name || 'Module')}</h3>\r\n                <span className=\"text-sm text-gray-600\">\r\n                  {Number(module.topicsCount) || 0} topics\r\n                </span>\r\n              </div>\r\n              <ProgressBar\r\n                progress={Number(module.progress) || 0}\r\n                color={subject.id === 'biology' ? '#10b981' : '#8b5cf6'}\r\n                height={8}\r\n              />\r\n            </motion.div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"space-y-3\">\r\n          <motion.button\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: 0.5 }}\r\n            onClick={onStartQuiz}\r\n            className={`w-full bg-gradient-to-r ${subject.color} text-white font-bold py-4 px-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow`}\r\n          >\r\n            <div className=\"flex items-center justify-center space-x-2\">\r\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\r\n              </svg>\r\n              <span>Take {String(subject.name || 'Subject')} Quiz</span>\r\n            </div>\r\n          </motion.button>\r\n\r\n          <motion.button\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: 0.6 }}\r\n            onClick={() => alert('Study Notes feature coming soon!')}\r\n            className=\"w-full bg-white/70 backdrop-blur-sm border border-gray-200 text-gray-700 font-medium py-4 px-6 rounded-xl hover:bg-white/90 transition-all\"\r\n          >\r\n            <div className=\"flex items-center justify-center space-x-2\">\r\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C20.168 18.477 18.582 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\" />\r\n              </svg>\r\n              <span>Study Notes</span>\r\n            </div>\r\n          </motion.button>\r\n        </div>\r\n\r\n        <div className=\"h-8\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DashboardFixed;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\pages\\ForgotPassword.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\pages\\Login.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\pages\\PathwayQuizSetup.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'AnimatePresence' is defined but never used. Allowed unused vars must match /^React$/u.","line":2,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":33},{"ruleId":"no-unused-vars","severity":1,"message":"'getTopicById' is defined but never used. Allowed unused vars must match /^React$/u.","line":6,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":41},{"ruleId":"no-unused-vars","severity":1,"message":"'getTopicDetails' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":9,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":40}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useProgressTracking } from '../hooks/useProgressTracking';\r\nimport LoadingState from '../components/feedback/LoadingState';\r\nimport ErrorState from '../components/feedback/ErrorState';\r\nimport { getUnlockedTopics, getTopicById } from '../data/learningPathways';\r\n\r\nconst PathwayQuizSetup = ({ subject, onBack, onStartQuiz }) => {\r\n  const { userProgress, getTopicDetails, isTopicUnlocked } = useProgressTracking();\r\n  const [selectedTopic, setSelectedTopic] = useState(null);\r\n  const [selectedLength, setSelectedLength] = useState(10);\r\n  const [showTimer, setShowTimer] = useState(true);\r\n  const [unlockedTopics, setUnlockedTopics] = useState([]);\r\n  const [topicsReady, setTopicsReady] = useState(false);\r\n\r\n  const subjectProgress = subject ? userProgress?.[subject.id] : null;\r\n  const completedTopics = subjectProgress?.completedTopics || [];\r\n\r\n  useEffect(() => {\r\n    if (!subject || !userProgress) {\r\n      return;\r\n    }\r\n\r\n    setTopicsReady(false);\r\n\r\n    const completed = subjectProgress?.completedTopics || [];\r\n    const topics = getUnlockedTopics(subject.id, completed);\r\n    setUnlockedTopics(topics);\r\n\r\n    // Auto-select the next recommended topic\r\n    const nextTopic = topics.find(topic => !completed.includes(topic.id));\r\n    if (nextTopic) {\r\n      setSelectedTopic(nextTopic);\r\n    }\r\n\r\n    setTopicsReady(true);\r\n  }, [subject, userProgress, subjectProgress]);\r\n\r\n\r\n  const getDifficultyColor = (difficulty) => {\r\n    switch (difficulty) {\r\n      case 'beginner': return 'text-green-600 bg-green-100';\r\n      case 'intermediate': return 'text-yellow-600 bg-yellow-100';\r\n      case 'advanced': return 'text-orange-600 bg-orange-100';\r\n      case 'expert': return 'text-red-600 bg-red-100';\r\n      default: return 'text-gray-600 bg-gray-100';\r\n    }\r\n  };\r\n\r\n  const handleStartQuiz = () => {\r\n    if (!selectedTopic) return;\r\n\r\n    const quizConfig = {\r\n      subject: subject,\r\n      topic: selectedTopic,\r\n      length: Math.min(selectedLength, selectedTopic.questions), // Don't exceed available questions\r\n      timer: showTimer,\r\n      difficulty: selectedTopic.difficulty\r\n    };\r\n\r\n    onStartQuiz(quizConfig);\r\n  };\r\n\r\n\r\n  const getCompletionStatus = (topic) => {\r\n    const isCompleted = completedTopics.includes(topic.id);\r\n    const isUnlocked = subject ? isTopicUnlocked(subject.id, topic.id) : false;\r\n\r\n    if (isCompleted) return { status: 'completed', icon: '', color: 'text-green-600' };\r\n    if (isUnlocked) return { status: 'available', icon: '', color: 'text-blue-600' };\r\n    return { status: 'locked', icon: '', color: 'text-gray-400' };\r\n  };\r\n\r\n  if (!subject) {\r\n    return (\r\n      <ErrorState\r\n        title=\"Select a subject first\"\r\n        message=\"Choose a subject from your dashboard to set up a quiz.\"\r\n        actionLabel=\"Back to dashboard\"\r\n        onRetry={onBack}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (!userProgress) {\r\n    return (\r\n      <LoadingState\r\n        title={subject ? `Preparing ${subject.name} quiz` : 'Loading your progress'}\r\n        message=\"Gathering your unlocked topics...\"\r\n      />\r\n    );\r\n  }\r\n\r\n  if (!topicsReady) {\r\n    return (\r\n      <LoadingState\r\n        title={subject ? `Preparing ${subject.name} quiz` : 'Loading your progress'}\r\n        message=\"Just a moment while we load your learning path.\"\r\n      />\r\n    );\r\n  }\r\n\r\n  if (!unlockedTopics.length) {\r\n    return (\r\n      <ErrorState\r\n        title=\"No topics unlocked yet\"\r\n        message=\"Work through the previous lessons to unlock quizzes for this subject.\"\r\n        actionLabel=\"Back to dashboard\"\r\n        onRetry={onBack}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50\">\r\n      {/* Header */}\r\n      <div className=\"bg-white/80 backdrop-blur-sm shadow-sm border-b border-white/50\">\r\n        <div className=\"px-4 py-4 flex items-center\">\r\n          <button\r\n            onClick={onBack}\r\n            className=\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors mr-3\"\r\n          >\r\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n            </svg>\r\n          </button>\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className={`w-10 h-10 bg-gradient-to-r ${subject.color} rounded-full flex items-center justify-center text-white text-lg`}>\r\n              {subject.icon}\r\n            </div>\r\n            <div>\r\n              <h1 className=\"text-xl font-bold text-gray-900\">{subject.name} Quiz</h1>\r\n              <p className=\"text-sm text-gray-600\">Choose your learning path</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"px-4 py-6 max-w-md mx-auto space-y-6\">\r\n        {/* Learning Path Progress */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          className=\"bg-white/70 backdrop-blur-sm rounded-2xl p-4 border border-white/50\"\r\n        >\r\n          <h2 className=\"font-semibold text-gray-900 mb-3\">Your Learning Journey</h2>\r\n          <div className=\"text-sm text-gray-600 mb-2\">\r\n            {unlockedTopics.length} topics unlocked  {userProgress[subject.id]?.completedTopics.length || 0} completed\r\n          </div>\r\n          <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n            <div \r\n              className={`bg-gradient-to-r ${subject.color} h-2 rounded-full transition-all duration-500`}\r\n              style={{ width: `${(userProgress[subject.id]?.completedTopics.length || 0) / 24 * 100}%` }}\r\n            />\r\n          </div>\r\n        </motion.div>\r\n\r\n        {/* Topic Selection */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.1 }}\r\n          className=\"space-y-4\"\r\n        >\r\n          <h2 className=\"text-lg font-bold text-gray-900\">Available Topics</h2>\r\n          \r\n          <div className=\"space-y-3 max-h-96 overflow-y-auto\">\r\n            {unlockedTopics.map((topic, index) => {\r\n              const completion = getCompletionStatus(topic);\r\n              const isSelected = selectedTopic?.id === topic.id;\r\n              \r\n              return (\r\n                <motion.button\r\n                  key={topic.id}\r\n                  initial={{ opacity: 0, x: -20 }}\r\n                  animate={{ opacity: 1, x: 0 }}\r\n                  transition={{ delay: 0.2 + index * 0.1 }}\r\n                  onClick={() => setSelectedTopic(topic)}\r\n                  className={`w-full p-4 rounded-xl border-2 text-left transition-all ${\r\n                    isSelected\r\n                      ? 'border-blue-500 bg-blue-50/50'\r\n                      : 'border-gray-200 bg-white/50 hover:border-gray-300'\r\n                  }`}\r\n                >\r\n                  <div className=\"flex items-start justify-between\">\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"flex items-center space-x-2 mb-1\">\r\n                        <span className={completion.color}>{completion.icon}</span>\r\n                        <span className=\"font-semibold text-gray-900\">Level {topic.level}</span>\r\n                        <span className={`text-xs px-2 py-1 rounded-full ${getDifficultyColor(topic.difficulty)}`}>\r\n                          {topic.difficulty}\r\n                        </span>\r\n                      </div>\r\n                      <h3 className=\"font-medium text-gray-900\">{topic.name}</h3>\r\n                      <p className=\"text-sm text-gray-600 mt-1\">{topic.description}</p>\r\n                      <div className=\"flex items-center space-x-4 mt-2 text-xs text-gray-500\">\r\n                        <span> {topic.questions} questions</span>\r\n                        <span> {topic.estimatedTime}</span>\r\n                        <span> {topic.xpReward} XP</span>\r\n                      </div>\r\n                    </div>\r\n                    {isSelected && (\r\n                      <div className=\"ml-2\">\r\n                        <div className=\"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center\">\r\n                          <svg className=\"w-4 h-4 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                            <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\r\n                          </svg>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </motion.button>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          {unlockedTopics.length === 0 && (\r\n            <div className=\"text-center py-8\">\r\n              <div className=\"text-6xl mb-4\"></div>\r\n              <h3 className=\"font-semibold text-gray-900 mb-2\">No Topics Available</h3>\r\n              <p className=\"text-gray-600\">Complete previous topics to unlock new content!</p>\r\n            </div>\r\n          )}\r\n        </motion.div>\r\n\r\n        {/* Quiz Configuration */}\r\n        {selectedTopic && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: 0.3 }}\r\n            className=\"bg-white/70 backdrop-blur-sm rounded-2xl p-4 border border-white/50 space-y-4\"\r\n          >\r\n            <h3 className=\"font-semibold text-gray-900\">Quiz Settings</h3>\r\n            \r\n            {/* Question Count */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Number of Questions: {selectedLength}\r\n              </label>\r\n              <input\r\n                type=\"range\"\r\n                min=\"5\"\r\n                max={Math.min(selectedTopic.questions, 20)}\r\n                value={selectedLength}\r\n                onChange={(e) => setSelectedLength(parseInt(e.target.value))}\r\n                className=\"w-full\"\r\n              />\r\n              <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\r\n                <span>5</span>\r\n                <span>Max: {Math.min(selectedTopic.questions, 20)}</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Timer Toggle */}\r\n            <div className=\"flex items-center justify-between\">\r\n              <label className=\"text-sm font-medium text-gray-700\">Enable Timer</label>\r\n              <button\r\n                onClick={() => setShowTimer(!showTimer)}\r\n                className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${\r\n                  showTimer ? 'bg-blue-600' : 'bg-gray-200'\r\n                }`}\r\n              >\r\n                <span\r\n                  className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${\r\n                    showTimer ? 'translate-x-6' : 'translate-x-1'\r\n                  }`}\r\n                />\r\n              </button>\r\n            </div>\r\n\r\n            {/* Prerequisites Check */}\r\n            {selectedTopic.prerequisites.length > 0 && (\r\n              <div className=\"text-sm\">\r\n                <span className=\"text-gray-600\">Prerequisites: </span>\r\n                <span className=\"text-green-600\"> All completed</span>\r\n              </div>\r\n            )}\r\n          </motion.div>\r\n        )}\r\n\r\n        {/* Start Quiz Button */}\r\n        <motion.button\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.4 }}\r\n          onClick={handleStartQuiz}\r\n          disabled={!selectedTopic}\r\n          className={`w-full py-4 px-6 rounded-xl font-bold text-white shadow-lg transition-all ${\r\n            selectedTopic\r\n              ? `bg-gradient-to-r ${subject.color} hover:shadow-xl transform hover:scale-105`\r\n              : 'bg-gray-400 cursor-not-allowed'\r\n          }`}\r\n        >\r\n          {selectedTopic ? (\r\n            <div className=\"flex items-center justify-center space-x-2\">\r\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n              </svg>\r\n              <span>Start {selectedTopic.name} Quiz</span>\r\n            </div>\r\n          ) : (\r\n            'Select a Topic to Continue'\r\n          )}\r\n        </motion.button>\r\n\r\n        <div className=\"h-8\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PathwayQuizSetup;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\pages\\Quiz.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'OfflineNotice' is defined but never used. Allowed unused vars must match /^React$/u.","line":5,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'isOnline' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":13,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":19},{"ruleId":"no-unused-vars","severity":1,"message":"'shuffledQuestions' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":24,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":27},{"ruleId":"no-unused-vars","severity":1,"message":"'setShuffledQuestions' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":24,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":49},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadQuestions'. Either include it or remove the dependency array.","line":39,"column":6,"nodeType":"ArrayExpression","endLine":39,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [loadQuestions]","fix":{"range":[1767,1769],"text":"[loadQuestions]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleTimeUp'. Either include it or remove the dependency array.","line":120,"column":6,"nodeType":"ArrayExpression","endLine":120,"endColumn":55,"suggestions":[{"desc":"Update the dependencies array to be: [timeRemaining, isAnswerLocked, quizConfig.timer, handleTimeUp]","fix":{"range":[4455,4504],"text":"[timeRemaining, isAnswerLocked, quizConfig.timer, handleTimeUp]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { quizAPI } from '../utils/quizAPI';\r\nimport { useOnlineStatus } from '../hooks/useOnlineStatus';\r\nimport OfflineNotice from '../components/feedback/OfflineNotice';\r\nimport LoadingState from '../components/feedback/LoadingState';\r\nimport ErrorState from '../components/feedback/ErrorState';\r\nimport EmptyState from '../components/feedback/EmptyState';\r\nimport { useProgressTracking } from '../hooks/useProgressTracking';\r\n\r\nconst Quiz = ({ quizConfig, onQuizComplete, onExit }) => {\r\n  const { completeQuiz } = useProgressTracking();\r\n  const { isOnline } = useOnlineStatus();\r\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\r\n  const [selectedAnswer, setSelectedAnswer] = useState(null);\r\n  const [answers, setAnswers] = useState({});\r\n  const [timeRemaining, setTimeRemaining] = useState(quizConfig.timer ? 120 : null);\r\n  const [isAnswerLocked, setIsAnswerLocked] = useState(false);\r\n  const [showExplanation, setShowExplanation] = useState(false);\r\n  const [questions, setQuestions] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [quizStartTime] = useState(Date.now());\r\n  const [shuffledQuestions, setShuffledQuestions] = useState([]);\r\n\r\n  // Utility function to shuffle array\r\n  const shuffleArray = (array) => {\r\n    const shuffled = [...array];\r\n    for (let i = shuffled.length - 1; i > 0; i--) {\r\n      const j = Math.floor(Math.random() * (i + 1));\r\n      [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\r\n    }\r\n    return shuffled;\r\n  };\r\n\r\n  // Load questions on mount\r\n  useEffect(() => {\r\n    loadQuestions();\r\n  }, []);\r\n\r\n  const loadQuestions = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      let response;\r\n\r\n      if (quizConfig.topic?.id) {\r\n        // Pathway-based quiz: get questions for specific topic\r\n        response = await quizAPI.getTopicQuestions(\r\n          quizConfig.subject.id,\r\n          quizConfig.topic.id,\r\n          quizConfig.length\r\n        );\r\n      } else if (quizConfig.module?.id) {\r\n        // Legacy module-based quiz\r\n        const api = quizAPI[quizConfig.subject.id];\r\n        response = await api.getQuestions(\r\n          quizConfig.module.id,\r\n          quizConfig.difficulty.id,\r\n          quizConfig.length\r\n        );\r\n      } else {\r\n        throw new Error('Invalid quiz configuration');\r\n      }\r\n\r\n      if (response.success && response.questions) {\r\n        // Shuffle the answer options for each multiple choice question\r\n        const questionsWithShuffledOptions = response.questions.map(question => {\r\n          if (question.options && Array.isArray(question.options)) {\r\n            // Create mapping of original indices to shuffled indices\r\n            const originalOptions = [...question.options];\r\n            const shuffledOptions = shuffleArray(originalOptions);\r\n            \r\n            // Find new index of correct answer\r\n            const originalCorrectAnswer = question.correctAnswer;\r\n            const correctAnswerText = originalOptions[originalCorrectAnswer];\r\n            const newCorrectIndex = shuffledOptions.findIndex(option => option === correctAnswerText);\r\n            \r\n            return {\r\n              ...question,\r\n              options: shuffledOptions,\r\n              correctAnswer: newCorrectIndex\r\n            };\r\n          }\r\n          return question;\r\n        });\r\n        \r\n        setQuestions(questionsWithShuffledOptions);\r\n      } else {\r\n        throw new Error(response.error || 'Failed to load questions');\r\n      }\r\n    } catch (error) {\r\n      setError(error.message);\r\n      console.error('Error loading questions:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const currentQuestion = questions[currentQuestionIndex];\r\n  const totalQuestions = questions.length;\r\n  const progress = totalQuestions > 0 ? ((currentQuestionIndex + 1) / totalQuestions) * 100 : 0;\r\n\r\n  // Timer logic\r\n  useEffect(() => {\r\n    if (!quizConfig.timer || timeRemaining === null || isAnswerLocked) return;\r\n\r\n    const timer = setInterval(() => {\r\n      setTimeRemaining((prev) => {\r\n        if (prev <= 1) {\r\n          handleTimeUp();\r\n          return 0;\r\n        }\r\n        return prev - 1;\r\n      });\r\n    }, 1000);\r\n\r\n    return () => clearInterval(timer);\r\n  }, [timeRemaining, isAnswerLocked, quizConfig.timer]);\r\n\r\n  const handleTimeUp = useCallback(() => {\r\n    if (!isAnswerLocked) {\r\n      setIsAnswerLocked(true);\r\n      setShowExplanation(true);\r\n    }\r\n  }, [isAnswerLocked]);\r\n\r\n  const handleAnswerSelect = (answerIndex) => {\r\n    if (isAnswerLocked) return;\r\n\r\n    setSelectedAnswer(answerIndex);\r\n    setAnswers(prev => ({\r\n      ...prev,\r\n      [currentQuestion.id]: {\r\n        selected: answerIndex,\r\n        correct: answerIndex === currentQuestion.correctAnswer,\r\n        timeSpent: quizConfig.timer ? (120 - timeRemaining) : null\r\n      }\r\n    }));\r\n  };\r\n\r\n  const handleConfirmAnswer = () => {\r\n    if (selectedAnswer === null) return;\r\n\r\n    setIsAnswerLocked(true);\r\n    setShowExplanation(true);\r\n  };\r\n\r\n  const handleNextQuestion = () => {\r\n    if (currentQuestionIndex < totalQuestions - 1) {\r\n      setCurrentQuestionIndex(prev => prev + 1);\r\n      setSelectedAnswer(null);\r\n      setIsAnswerLocked(false);\r\n      setShowExplanation(false);\r\n      setTimeRemaining(quizConfig.timer ? 120 : null);\r\n    } else {\r\n      // Quiz complete - calculate results and update progress\r\n      const correctAnswers = Object.values(answers).filter(answer => answer.correct).length;\r\n      const score = Math.round((correctAnswers / totalQuestions) * 100);\r\n      const timeSpent = Math.round((Date.now() - quizStartTime) / 1000);\r\n      \r\n      // Update progress tracking for pathway system\r\n      if (quizConfig.topic?.id) {\r\n        completeQuiz(quizConfig.subject.id, quizConfig.topic.id, score, totalQuestions);\r\n      }\r\n      \r\n      onQuizComplete({\r\n        answers,\r\n        totalQuestions,\r\n        correctAnswers,\r\n        score,\r\n        timeSpent,\r\n        config: quizConfig\r\n      });\r\n    }\r\n  };\r\n\r\n  const formatTime = (seconds) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  if (loading) {\n    return (\n      <LoadingState\n        title=\"Generating your quiz\"\n        message=\"Hang tight while we load your questions.\"\n      />\n    );\n  }\n\n  if (error) {\n    return (\n      <ErrorState\n        title=\"We couldn't load the quiz\"\n        message={error || 'Please try again or choose a different topic.'}\n        actionLabel=\"Try again\"\n        onRetry={loadQuestions}\n        details={error}\n      />\n    );\n  }\n\n  if (!questions.length) {\n    return (\n      <EmptyState\n        title=\"No questions available\"\n        message=\"We couldn't find questions for this quiz yet. Pick another topic or adjust your settings.\"\n        actionLabel={onExit ? 'Back to setup' : undefined}\n        onAction={onExit}\n        showBackground\n      />\n    );\n  }\n  const getAnswerButtonStyle = (answerIndex) => {\r\n    const isSelected = selectedAnswer === answerIndex;\r\n    const isCorrect = answerIndex === currentQuestion.correctAnswer;\r\n    const isWrong = isSelected && !isCorrect && isAnswerLocked;\r\n\r\n    if (!isAnswerLocked) {\r\n      return isSelected\r\n        ? 'border-blue-500 bg-blue-50 text-blue-700 cursor-pointer'\r\n        : 'border-gray-200 bg-white hover:border-blue-300 hover:bg-blue-25 cursor-pointer';\r\n    }\r\n\r\n    if (isCorrect) {\r\n      return 'border-green-500 bg-green-50 text-green-700';\r\n    }\r\n\r\n    if (isWrong) {\r\n      return 'border-red-500 bg-red-50 text-red-700';\r\n    }\r\n\r\n    return 'border-gray-200 bg-gray-50 text-gray-400';\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 flex flex-col\">\r\n      {/* Header */}\r\n      <div className=\"bg-white/80 backdrop-blur-sm shadow-sm border-b border-white/50 sticky top-0 z-10\">\r\n        <div className=\"px-4 py-3\">\r\n          {/* Top row: Back button and timer */}\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <button\r\n              onClick={onExit}\r\n              className=\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors\"\r\n            >\r\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n              </svg>\r\n            </button>\r\n\r\n            {quizConfig.timer && (\r\n              <div className={`px-3 py-1 rounded-full text-sm font-medium ${\r\n                timeRemaining <= 30\r\n                  ? 'bg-red-100 text-red-700'\r\n                  : timeRemaining <= 60\r\n                  ? 'bg-yellow-100 text-yellow-700'\r\n                  : 'bg-green-100 text-green-700'\r\n              }`}>\r\n                 {formatTime(timeRemaining)}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Progress bar */}\r\n          <div className=\"space-y-2\">\r\n            <div className=\"flex justify-between text-sm\">\r\n              <span className=\"font-medium text-gray-700\">\r\n                Question {currentQuestionIndex + 1} of {totalQuestions}\r\n              </span>\r\n              <span className=\"text-gray-500\">\r\n                {Math.round(progress)}% Complete\r\n              </span>\r\n            </div>\r\n            <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n              <motion.div\r\n                className=\"bg-gradient-to-r from-primary-500 to-secondary-500 h-2 rounded-full\"\r\n                initial={{ width: 0 }}\r\n                animate={{ width: `${progress}%` }}\r\n                transition={{ duration: 0.5 }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Question Content */}\r\n      <div className=\"flex-1 px-4 py-6 max-w-md mx-auto w-full\">\r\n        <AnimatePresence mode=\"wait\">\r\n          <motion.div\r\n            key={currentQuestionIndex}\r\n            initial={{ opacity: 0, x: 50 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            exit={{ opacity: 0, x: -50 }}\r\n            transition={{ duration: 0.3 }}\r\n            className=\"space-y-6\"\r\n          >\r\n            {/* Question Card */}\r\n            <div className=\"bg-white/70 backdrop-blur-sm rounded-2xl p-6 border border-white/50 shadow-lg\">\r\n              <div className=\"flex items-start space-x-3 mb-4\">\r\n                <div className={`w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold ${\r\n                  currentQuestion.difficulty === 'easy' ? 'bg-green-500' :\r\n                  currentQuestion.difficulty === 'medium' ? 'bg-yellow-500' :\r\n                  'bg-red-500'\r\n                }`}>\r\n                  {currentQuestionIndex + 1}\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                  <h2 className=\"text-lg font-semibold text-gray-900 leading-relaxed\">\r\n                    {currentQuestion.question}\r\n                  </h2>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Answer Options */}\r\n            <div className=\"space-y-3\">\r\n              {currentQuestion.options.map((option, index) => (\r\n                <motion.button\r\n                  key={index}\r\n                  initial={{ opacity: 0, y: 20 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  transition={{ delay: index * 0.1 }}\r\n                  onClick={() => handleAnswerSelect(index)}\r\n                  disabled={isAnswerLocked}\r\n                  className={`w-full p-4 rounded-xl border-2 transition-all duration-200 text-left ${getAnswerButtonStyle(index)}`}\r\n                >\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <div className={`w-6 h-6 rounded-full border-2 flex items-center justify-center text-xs font-bold ${\r\n                      selectedAnswer === index\r\n                        ? 'border-current bg-current text-white'\r\n                        : 'border-gray-300'\r\n                    }`}>\r\n                      {String.fromCharCode(65 + index)}\r\n                    </div>\r\n                    <span className=\"flex-1 font-medium\">{option}</span>\r\n\r\n                    {/* Correct/Wrong indicators */}\r\n                    {isAnswerLocked && (\r\n                      <div>\r\n                        {index === currentQuestion.correctAnswer && (\r\n                          <div className=\"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center\">\r\n                            <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n                            </svg>\r\n                          </div>\r\n                        )}\r\n                        {selectedAnswer === index && index !== currentQuestion.correctAnswer && (\r\n                          <div className=\"w-6 h-6 bg-red-500 rounded-full flex items-center justify-center\">\r\n                            <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                            </svg>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </motion.button>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Explanation */}\r\n            <AnimatePresence>\r\n              {showExplanation && (\r\n                <motion.div\r\n                  initial={{ opacity: 0, y: 20 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  exit={{ opacity: 0, y: -20 }}\r\n                  className=\"bg-blue-50 border border-blue-200 rounded-xl p-4\"\r\n                >\r\n                  <div className=\"flex items-start space-x-2\">\r\n                    <div className=\"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5\">\r\n                      <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                      </svg>\r\n                    </div>\r\n                    <div>\r\n                      <h3 className=\"font-semibold text-blue-900 mb-1\">Explanation</h3>\r\n                      <p className=\"text-blue-800 text-sm leading-relaxed\">{currentQuestion.explanation}</p>\r\n                    </div>\r\n                  </div>\r\n                </motion.div>\r\n              )}\r\n            </AnimatePresence>\r\n          </motion.div>\r\n        </AnimatePresence>\r\n      </div>\r\n\r\n      {/* Bottom Action Buttons */}\r\n      <div className=\"px-4 pb-6 max-w-md mx-auto w-full sticky bottom-0\">\r\n        <div className=\"bg-white/80 backdrop-blur-sm rounded-xl p-4 border border-white/50 shadow-lg\">\r\n          {!isAnswerLocked ? (\r\n            <button\r\n              onClick={handleConfirmAnswer}\r\n              disabled={selectedAnswer === null}\r\n              className={`w-full py-4 px-6 rounded-xl font-bold transition-all ${\r\n                selectedAnswer !== null\r\n                  ? 'bg-gradient-to-r from-primary-500 to-secondary-500 text-white hover:shadow-lg'\r\n                  : 'bg-gray-200 text-gray-400 cursor-not-allowed'\r\n              }`}\r\n            >\r\n              Confirm Answer\r\n            </button>\r\n          ) : (\r\n            <div className=\"space-y-3\">\r\n              {/* Score display */}\r\n              <div className=\"text-center\">\r\n                {selectedAnswer === currentQuestion.correctAnswer ? (\r\n                  <div className=\"text-green-600 font-semibold\">\r\n                     Correct! +10 XP\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-red-600 font-semibold\">\r\n                     Incorrect. Keep trying!\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <button\r\n                onClick={handleNextQuestion}\r\n                className=\"w-full bg-gradient-to-r from-primary-500 to-secondary-500 text-white font-bold py-4 px-6 rounded-xl hover:shadow-lg transition-all\"\r\n              >\r\n                {currentQuestionIndex < totalQuestions - 1 ? 'Next Question' : 'Complete Quiz'}\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Quiz;\r\n\r\n\r\n\r\n\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\pages\\QuizResults.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'EmptyState' is defined but never used. Allowed unused vars must match /^React$/u.","line":9,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":18},{"ruleId":"no-unused-vars","severity":1,"message":"'showLevelUp' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":26,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'performance' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":95,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":95,"endColumn":20},{"ruleId":"no-unused-vars","severity":1,"message":"'total' is defined but never used. Allowed unused args must match /^_/u.","line":97,"column":63,"nodeType":"Identifier","messageId":"unusedVar","endLine":97,"endColumn":68},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used. Allowed unused args must match /^_/u.","line":252,"column":50,"nodeType":"Identifier","messageId":"unusedVar","endLine":252,"endColumn":55}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { useProgressTracking } from '../hooks/useProgressTracking';\r\nimport { getTopicById, getNextTopic } from '../data/learningPathways';\r\nimport ScoreCard from '../components/ScoreCard';\r\nimport XPDisplay from '../components/XPDisplay';\r\nimport AchievementBadge from '../components/AchievementBadge';\r\nimport StreakDisplay from '../components/StreakDisplay';\r\nimport EmptyState from '../components/feedback/EmptyState';\r\n\r\nconst QuizResults = ({ quizData, onRetakeQuiz, onBackToDashboard, onReviewAnswers }) => {\r\n  const safeQuizData = quizData ?? {};\r\n  const {\n    answers = {},\n    totalQuestions = 0,\n    correctAnswers,\n    score,\n    timeSpent,\n    config = {},\n  } = safeQuizData;\n  const subjectId = config.subjectId || config.subject?.id || safeQuizData.subjectId || null;\n  const safeAnswers = typeof answers === 'object' && answers !== null ? answers : {};\r\n  const questionTotal = totalQuestions || Object.keys(safeAnswers).length;\r\n  const { userProgress: progressData, getSubjectData } = useProgressTracking();\r\n  const [newAchievements, setNewAchievements] = useState([]);\r\n  const [showLevelUp, setShowLevelUp] = useState(false);\r\n  const [nextTopic, setNextTopic] = useState(null);\r\n\r\n  // Use passed values or calculate from answers if not provided\r\n  const calculatedCorrectAnswers = typeof correctAnswers === 'number'\r\n    ? correctAnswers\r\n    : Object.values(safeAnswers).filter((answer) => answer?.correct).length;\r\n  const scorePercentage = typeof score === 'number' && Number.isFinite(score)\r\n    ? score\r\n    : (questionTotal > 0 ? Math.round((calculatedCorrectAnswers / questionTotal) * 100) : 0);\r\n  \r\n  // Calculate XP based on topic reward and performance\r\n  let xpEarned = 0;\r\n  if (config.topic?.id && subjectId) {\r\n    const topic = getTopicById(subjectId, config.topic.id);\r\n    if (topic) {\r\n      const xpMultiplier = scorePercentage / 100;\r\n      xpEarned = Math.round(topic.xpReward * xpMultiplier);\r\n    }\r\n  } else if (typeof calculatedCorrectAnswers === 'number') {\r\n    xpEarned = calculatedCorrectAnswers * 10;\r\n  }\r\n  const totalTimeSpent = typeof timeSpent === 'number'\r\n    ? timeSpent\r\n    : (config.timer ? Object.values(safeAnswers).reduce((sum, answer) => sum + (answer?.timeSpent || 0), 0) : null);\r\n  const averageTime = typeof totalTimeSpent === 'number' && questionTotal > 0\r\n    ? Math.round(totalTimeSpent / questionTotal)\r\n    : null;\r\n\r\n  // Get real user progress data\r\n  const subjectData = subjectId ? getSubjectData(subjectId) : null;\r\n  const userProgressData = {\r\n    currentXP: subjectData?.totalXP || 0,\r\n    previousXP: (subjectData?.totalXP || 0) - xpEarned,\r\n    currentLevel: subjectData?.level || 1,\r\n    xpToNextLevel: (subjectData?.level || 1) * 500,\r\n    currentStreak: subjectData?.streak || 0,\r\n    longestStreak: subjectData?.longestStreak || 0,\r\n    lastStudyDate: new Date().toISOString(),\r\n    streakFreeze: 0\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!progressData || !subjectId) {\r\n      setNextTopic(null);\r\n      return;\r\n    }\r\n\r\n    const achievements = checkNewAchievements(scorePercentage, calculatedCorrectAnswers, averageTime, questionTotal);\r\n    setNewAchievements(achievements);\r\n\r\n    if (config.topic?.id) {\r\n      const completedTopics = progressData[subjectId]?.completedTopics || [];\r\n      const next = getNextTopic(subjectId, config.topic.id, completedTopics);\r\n      setNextTopic(next);\r\n    } else {\r\n      setNextTopic(null);\r\n    }\r\n  }, [progressData, subjectId, scorePercentage, calculatedCorrectAnswers, averageTime, questionTotal, config]);\r\n\r\n  // Performance categories\r\n  const getPerformanceLevel = (percentage) => {\r\n    if (percentage >= 90) return { level: 'Excellent', color: 'from-green-500 to-emerald-600', emoji: '', message: 'Outstanding! You\\'ve mastered this topic!' };\r\n    if (percentage >= 80) return { level: 'Very Good', color: 'from-blue-500 to-cyan-600', emoji: '', message: 'Great work! You\\'re well-prepared for the HSC.' };\r\n    if (percentage >= 70) return { level: 'Good', color: 'from-yellow-500 to-orange-600', emoji: '', message: 'Good progress! Review the topics you missed.' };\r\n    if (percentage >= 60) return { level: 'Fair', color: 'from-orange-500 to-red-500', emoji: '', message: 'Keep studying! Focus on understanding concepts.' };\r\n    return { level: 'Needs Work', color: 'from-red-500 to-red-600', emoji: '', message: 'Don\\'t give up! Practice makes perfect.' };\r\n  };\r\n\r\n  const performance = getPerformanceLevel(scorePercentage);\r\n\r\n  const checkNewAchievements = (percentage, correct, avgTime, total) => {\r\n    const achievements = [];\r\n\r\n    if (percentage === 100) {\r\n      achievements.push({\r\n        id: 'perfect_score',\r\n        name: 'Perfect Score',\r\n        icon: '',\r\n        description: 'Answered every question correctly!',\r\n        color: 'from-yellow-400 to-orange-500',\r\n        rarity: 'epic',\r\n        earned: true,\r\n        earnedDate: new Date().toISOString()\r\n      });\r\n    }\r\n\r\n    if (correct >= 5) {\r\n      achievements.push({\r\n        id: 'quiz_master',\r\n        name: 'Quiz Master',\r\n        icon: '',\r\n        description: 'Scored 5+ correct answers in a quiz',\r\n        color: 'from-blue-400 to-purple-500',\r\n        rarity: 'rare',\r\n        earned: true,\r\n        earnedDate: new Date().toISOString()\r\n      });\r\n    }\r\n\r\n    if (avgTime && avgTime <= 60) {\r\n      achievements.push({\r\n        id: 'speed_demon',\r\n        name: 'Speed Demon',\r\n        icon: '',\r\n        description: 'Average under 60 seconds per question',\r\n        color: 'from-green-400 to-emerald-500',\r\n        rarity: 'rare',\r\n        earned: true,\r\n        earnedDate: new Date().toISOString()\r\n      });\r\n    }\r\n\r\n    if (percentage >= 90) {\r\n      achievements.push({\r\n        id: 'excellence',\r\n        name: 'Excellence',\r\n        icon: '',\r\n        description: 'Scored 90% or higher on a quiz',\r\n        color: 'from-purple-400 to-pink-500',\r\n        rarity: 'common',\r\n        earned: true,\r\n        earnedDate: new Date().toISOString()\r\n      });\r\n    }\r\n\r\n    return achievements;\r\n  };\r\n\r\n  const handleLevelUp = () => {\r\n    setShowLevelUp(true);\r\n  };\r\n\r\n  const handleStreakFreeze = () => {\r\n    // Handle streak freeze logic\r\n    console.log('Streak freeze used!');\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50\">\r\n      <div className=\"px-4 py-8 max-w-md mx-auto space-y-6\">\r\n        {/* Header */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: -20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          className=\"text-center\"\r\n        >\r\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Quiz Complete!</h1>\r\n          <p className=\"text-gray-600\">\r\n            {config.topic ? (\r\n              `${config.subject.name}  ${config.topic.name}  Level ${config.topic.level}`\r\n            ) : (\r\n              `${config.subject.name}  Module ${config.module?.id}  ${config.difficulty?.name}`\r\n            )}\r\n          </p>\r\n        </motion.div>\r\n\r\n        {/* Enhanced Score Display */}\r\n        <ScoreCard\r\n          score={calculatedCorrectAnswers}\r\n          totalQuestions={totalQuestions}\r\n          timeSpent={totalTimeSpent}\r\n          averageTime={averageTime}\r\n        />\r\n\r\n        {/* XP and Level Progress */}\r\n        <XPDisplay\r\n          currentXP={userProgressData.currentXP}\r\n          xpGained={xpEarned}\r\n          currentLevel={userProgressData.currentLevel}\r\n          xpToNextLevel={userProgressData.xpToNextLevel}\r\n          onLevelUp={handleLevelUp}\r\n          animated={true}\r\n        />\r\n\r\n        {/* Streak Display */}\r\n        <StreakDisplay\r\n          currentStreak={userProgressData.currentStreak}\r\n          longestStreak={userProgressData.longestStreak}\r\n          lastStudyDate={userProgressData.lastStudyDate}\r\n          streakFreeze={userProgressData.streakFreeze}\r\n          onStreakFreeze={handleStreakFreeze}\r\n          animated={true}\r\n        />\r\n\r\n        {/* Newly Unlocked Content */}\r\n        {nextTopic && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: 0.4 }}\r\n            className=\"bg-gradient-to-r from-purple-500 to-pink-600 rounded-2xl p-6 border border-white/50 shadow-xl\"\r\n          >\r\n            <motion.div\r\n              initial={{ scale: 0 }}\r\n              animate={{ scale: 1 }}\r\n              transition={{ delay: 0.6, type: \"spring\" }}\r\n              className=\"text-center\"\r\n            >\r\n              <div className=\"text-4xl mb-2\"></div>\r\n              <h3 className=\"text-white font-bold text-lg mb-2\">New Topic Unlocked!</h3>\r\n              <p className=\"text-white/90 text-sm mb-3\">{nextTopic.name}</p>\r\n              <div className=\"text-white/80 text-xs\">\r\n                Level {nextTopic.level}  {nextTopic.xpReward} XP  {nextTopic.difficulty}\r\n              </div>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n\r\n        {/* New Achievements */}\r\n        {newAchievements.length > 0 && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: 0.6 }}\r\n            className=\"bg-gradient-to-r from-yellow-400 to-orange-500 rounded-3xl p-6 border border-white/50 shadow-xl\"\r\n          >\r\n            <motion.h3\r\n              initial={{ scale: 0 }}\r\n              animate={{ scale: 1 }}\r\n              transition={{ delay: 0.8, type: \"spring\" }}\r\n              className=\"text-white font-bold text-center text-xl mb-4\"\r\n            >\r\n               New Achievements Unlocked!\r\n            </motion.h3>\r\n            <div className=\"flex justify-center space-x-4 flex-wrap gap-2\">\r\n              {newAchievements.map((achievement, index) => (\r\n                <AchievementBadge\r\n                  key={achievement.id}\r\n                  achievement={achievement}\r\n                  size=\"large\"\r\n                  showAnimation={true}\r\n                />\r\n              ))}\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n\r\n        {/* Detailed Breakdown */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.8 }}\r\n          className=\"bg-white/70 backdrop-blur-sm rounded-2xl p-4 border border-white/50\"\r\n        >\r\n          <h3 className=\"font-bold text-gray-900 mb-3\">Question Breakdown</h3>\r\n          <div className=\"space-y-2\">\r\n            {Object.entries(answers).map(([questionId, answer], index) => (\r\n              <div key={questionId} className=\"flex items-center justify-between p-2 rounded-lg bg-gray-50/50\">\r\n                <span className=\"text-sm font-medium text-gray-700\">Question {index + 1}</span>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  {config.timer && (\r\n                    <span className=\"text-xs text-gray-500\">{answer.timeSpent || 0}s</span>\r\n                  )}\r\n                  <div className={`w-6 h-6 rounded-full flex items-center justify-center ${\r\n                    answer.correct ? 'bg-green-500' : 'bg-red-500'\r\n                  }`}>\r\n                    {answer.correct ? (\r\n                      <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n                      </svg>\r\n                    ) : (\r\n                      <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                      </svg>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </motion.div>\r\n\r\n        {/* Action Buttons */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 1.0 }}\r\n          className=\"space-y-3\"\r\n        >\r\n          <button\r\n            onClick={onReviewAnswers}\r\n            className=\"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold py-4 px-6 rounded-xl hover:shadow-lg transition-all\"\r\n          >\r\n            Review Answers\r\n          </button>\r\n\r\n          <div className=\"grid grid-cols-2 gap-3\">\r\n            <button\r\n              onClick={onRetakeQuiz}\r\n              className=\"bg-white/70 backdrop-blur-sm border border-gray-200 text-gray-700 font-medium py-3 px-4 rounded-xl hover:bg-white/90 transition-all\"\r\n            >\r\n              Retake Quiz\r\n            </button>\r\n            <button\r\n              onClick={onBackToDashboard}\r\n              className=\"bg-gradient-to-r from-gray-600 to-gray-700 text-white font-medium py-3 px-4 rounded-xl hover:shadow-lg transition-all\"\r\n            >\r\n              Dashboard\r\n            </button>\r\n          </div>\r\n        </motion.div>\r\n\r\n        {/* Study Recommendations */}\r\n        {scorePercentage < 80 && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: 1.2 }}\r\n            className=\"bg-blue-50 border border-blue-200 rounded-xl p-4\"\r\n          >\r\n            <div className=\"flex items-start space-x-2\">\r\n              <div className=\"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5\">\r\n                <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C20.168 18.477 18.582 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\" />\r\n                </svg>\r\n              </div>\r\n              <div>\r\n                <h3 className=\"font-semibold text-blue-900 mb-1\">Study Recommendations</h3>\r\n                <ul className=\"text-blue-800 text-sm space-y-1\">\r\n                  <li> Review {config.module.name} concepts</li>\r\n                  <li> Practice more {config.difficulty.name.toLowerCase()} level questions</li>\r\n                  <li> Focus on understanding rather than memorizing</li>\r\n                  <li> Try the AI tutor for personalized help</li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n\r\n        {/* Bottom spacing */}\r\n        <div className=\"h-8\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuizResults;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\pages\\QuizSetup.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\pages\\SignUp.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'confirmPassword' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":30,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { useForm } from 'react-hook-form';\n\nconst SignUp = ({ onBack, onSignIn, onSignUp }) => {\n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const {\n    register,\n    handleSubmit,\n    watch,\n    formState: { errors },\n    setError,\n  } = useForm();\n\n  const password = watch('password');\n\n  const onSubmit = async (data, event) => {\n    // Prevent default form submission behavior\n    if (event) {\n      event.preventDefault();\n    }\n    \n    console.log(' Starting signup process...', { email: data.email, name: data.name });\n    setIsLoading(true);\n    \n    try {\n      const { confirmPassword, ...signupData } = data;\n      console.log(' Calling signup API with data:', signupData);\n      \n      await onSignUp(signupData);\n      console.log(' Signup successful!');\n      \n    } catch (error) {\n      console.error(' Signup failed:', error);\n      const errorMessage = error.message || 'Sign up failed. Please try again.';\n      console.error(' Setting error message:', errorMessage);\n      \n      setError('root', {\n        message: errorMessage,\n      });\n    } finally {\n      setIsLoading(false);\n      console.log(' Signup process completed');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 px-4 py-8 flex flex-col\">\n      {/* Header */}\n      <motion.div\n        initial={{ opacity: 0, y: -20 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"flex items-center mb-8\"\n      >\n        <button\n          onClick={onBack}\n          className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\n        >\n          <svg className=\"w-6 h-6 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n          </svg>\n        </button>\n        <h1 className=\"text-xl font-semibold text-gray-900 ml-2\">Create Account</h1>\n      </motion.div>\n\n      {/* Form */}\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.1 }}\n        className=\"flex-1 max-w-sm mx-auto w-full\"\n      >\n        <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-5\">\n          {/* Name Field */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Full Name\n            </label>\n            <input\n              type=\"text\"\n              className={`input ${errors.name ? 'input-error' : ''}`}\n              placeholder=\"Enter your full name\"\n              {...register('name', {\n                required: 'Full name is required',\n                minLength: {\n                  value: 2,\n                  message: 'Name must be at least 2 characters',\n                },\n              })}\n            />\n            {errors.name && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.name.message}</p>\n            )}\n          </div>\n\n          {/* Email Field */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Email Address\n            </label>\n            <input\n              type=\"email\"\n              className={`input ${errors.email ? 'input-error' : ''}`}\n              placeholder=\"Enter your email\"\n              {...register('email', {\n                required: 'Email is required',\n                pattern: {\n                  value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\n                  message: 'Invalid email address',\n                },\n              })}\n            />\n            {errors.email && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.email.message}</p>\n            )}\n          </div>\n\n          {/* Password Field */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Password\n            </label>\n            <div className=\"relative\">\n              <input\n                type={showPassword ? 'text' : 'password'}\n                className={`input pr-12 ${errors.password ? 'input-error' : ''}`}\n                placeholder=\"Create a password\"\n                {...register('password', {\n                  required: 'Password is required',\n                  minLength: {\n                    value: 8,\n                    message: 'Password must be at least 8 characters',\n                  },\n                  pattern: {\n                    value: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)/,\n                    message: 'Password must contain uppercase, lowercase, and number',\n                  },\n                })}\n              />\n              <button\n                type=\"button\"\n                onClick={() => setShowPassword(!showPassword)}\n                className=\"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600\"\n              >\n                {showPassword ? (\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21\" />\n                  </svg>\n                ) : (\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                  </svg>\n                )}\n              </button>\n            </div>\n            {errors.password && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.password.message}</p>\n            )}\n            <p className=\"text-xs text-gray-500 mt-1\">\n              Must include uppercase, lowercase, and number\n            </p>\n          </div>\n\n          {/* Confirm Password Field */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Confirm Password\n            </label>\n            <div className=\"relative\">\n              <input\n                type={showConfirmPassword ? 'text' : 'password'}\n                className={`input pr-12 ${errors.confirmPassword ? 'input-error' : ''}`}\n                placeholder=\"Confirm your password\"\n                {...register('confirmPassword', {\n                  required: 'Please confirm your password',\n                  validate: (value) =>\n                    value === password || 'Passwords do not match',\n                })}\n              />\n              <button\n                type=\"button\"\n                onClick={() => setShowConfirmPassword(!showConfirmPassword)}\n                className=\"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600\"\n              >\n                {showConfirmPassword ? (\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21\" />\n                  </svg>\n                ) : (\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                  </svg>\n                )}\n              </button>\n            </div>\n            {errors.confirmPassword && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.confirmPassword.message}</p>\n            )}\n          </div>\n\n          {/* Error Message */}\n          {errors.root && (\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\n              <p className=\"text-red-600 text-sm\">{errors.root.message}</p>\n            </div>\n          )}\n\n          {/* Terms Agreement */}\n          <div className=\"text-xs text-gray-500 text-center\">\n            By creating an account, you agree to our{' '}\n            <a href=\"#\" className=\"text-primary-600 hover:text-primary-700\">\n              Terms of Service\n            </a>{' '}\n            and{' '}\n            <a href=\"#\" className=\"text-primary-600 hover:text-primary-700\">\n              Privacy Policy\n            </a>\n          </div>\n\n          {/* Submit Button */}\n          <button\n            type=\"submit\"\n            disabled={isLoading}\n            className=\"btn-primary w-full py-4 text-base font-semibold disabled:opacity-50\"\n          >\n            {isLoading ? (\n              <div className=\"flex items-center justify-center\">\n                <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" fill=\"none\" viewBox=\"0 0 24 24\">\n                  <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" className=\"opacity-25\" />\n                  <path fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" className=\"opacity-75\" />\n                </svg>\n                Creating Account...\n              </div>\n            ) : (\n              'Create Account'\n            )}\n          </button>\n        </form>\n\n        {/* Sign In Link */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 0.3 }}\n          className=\"mt-6 text-center\"\n        >\n          <p className=\"text-gray-600\">\n            Already have an account?{' '}\n            <button\n              onClick={onSignIn}\n              className=\"text-primary-600 hover:text-primary-700 font-semibold\"\n            >\n              Sign In\n            </button>\n          </p>\n        </motion.div>\n      </motion.div>\n\n      {/* Bottom spacing */}\n      <div className=\"h-8\" />\n    </div>\n  );\n};\n\nexport default SignUp;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\pages\\Welcome.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\services\\analyticsService.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'questionService' is defined but never used. Allowed unused vars must match /^React$/u.","line":6,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":23},{"ruleId":"no-unused-vars","severity":1,"message":"'contentService' is defined but never used. Allowed unused vars must match /^React$/u.","line":7,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'userId' is defined but never used. Allowed unused args must match /^_/u.","line":342,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":342,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Analytics Service - Comprehensive learning analytics and reporting\n// Aggregates data from all agents and provides real-time insights\n\nimport learningService from './learningService';\nimport progressSyncService from './progressSyncService';\nimport questionService from './questionService';\nimport contentService from './contentService';\n\nclass AnalyticsService {\n  constructor() {\n    this.cache = new Map();\n    this.cacheTimeout = 2 * 60 * 1000; // 2 minutes\n    this.realTimeListeners = new Set();\n    this.metricsHistory = [];\n    this.maxHistorySize = 1000;\n    \n    // Initialize real-time analytics\n    this.setupRealTimeTracking();\n  }\n\n  // Setup real-time progress tracking for analytics\n  setupRealTimeTracking() {\n    progressSyncService.addProgressListener((event) => {\n      this.processRealTimeEvent(event);\n    });\n  }\n\n  // Process real-time events for analytics\n  processRealTimeEvent(event) {\n    const analyticsEvent = {\n      id: Date.now() + Math.random(),\n      timestamp: new Date().toISOString(),\n      type: event.type,\n      agent: event.agent,\n      data: event.data,\n      processed: true\n    };\n\n    // Add to metrics history\n    this.metricsHistory.unshift(analyticsEvent);\n    if (this.metricsHistory.length > this.maxHistorySize) {\n      this.metricsHistory = this.metricsHistory.slice(0, this.maxHistorySize);\n    }\n\n    // Notify all analytics listeners\n    this.notifyRealTimeListeners(analyticsEvent);\n  }\n\n  // Get comprehensive analytics dashboard data\n  async getDashboardAnalytics(userId = 'demo-user', timeframe = '7d') {\n    const cacheKey = `dashboard-${userId}-${timeframe}`;\n    \n    if (this.cache.has(cacheKey)) {\n      return this.cache.get(cacheKey);\n    }\n\n    try {\n      console.log(` Generating dashboard analytics for ${userId} (${timeframe})`);\n\n      // Collect data from all sources\n      const [\n        overallMetrics,\n        subjectAnalytics,\n        performanceData,\n        engagementMetrics,\n        recentActivity\n      ] = await Promise.all([\n        this.getOverallMetrics(userId),\n        this.getSubjectAnalytics(userId),\n        this.getPerformanceAnalytics(userId, timeframe),\n        this.getEngagementMetrics(userId, timeframe),\n        this.getRecentActivity(userId, 20)\n      ]);\n\n      const dashboardData = {\n        overall: overallMetrics,\n        subjects: subjectAnalytics,\n        performance: performanceData,\n        engagement: engagementMetrics,\n        recentActivity,\n        realTimeEvents: this.getRecentRealTimeEvents(50),\n        lastUpdated: new Date().toISOString(),\n        timeframe\n      };\n\n      // Cache the results\n      this.cache.set(cacheKey, dashboardData);\n      setTimeout(() => this.cache.delete(cacheKey), this.cacheTimeout);\n\n      return dashboardData;\n\n    } catch (error) {\n      console.error('Error generating dashboard analytics:', error);\n      return this.getFallbackDashboardData(userId, timeframe);\n    }\n  }\n\n  // Get overall learning metrics\n  async getOverallMetrics(userId) {\n    try {\n      const [biologyAnalytics, chemistryAnalytics, serviceHealth] = await Promise.all([\n        learningService.getLearningAnalytics('biology', 'module-5', userId),\n        learningService.getLearningAnalytics('chemistry', 'module-5', userId),\n        learningService.checkServiceHealth()\n      ]);\n\n      const biologyData = biologyAnalytics?.analytics?.progress || {};\n      const chemistryData = chemistryAnalytics?.analytics?.progress || {};\n\n      return {\n        totalSubjects: 2,\n        totalModules: 2,\n        overallProgress: Math.round((\n          (biologyData.overallProgress || 0) + \n          (chemistryData.overallProgress || 0)\n        ) / 2),\n        averageScore: Math.round((\n          (biologyData.averageQuizScore || 0) + \n          (chemistryData.averageQuizScore || 0)\n        ) / 2),\n        totalTimeSpent: (biologyData.totalTimeSpent || 0) + (chemistryData.totalTimeSpent || 0),\n        questionsAnswered: this.calculateTotalQuestions(biologyData, chemistryData),\n        streakDays: this.calculateStreak(userId),\n        achievements: this.calculateAchievements(biologyData, chemistryData),\n        serviceHealth: serviceHealth.overall,\n        lastActivity: this.getLastActivityTime(biologyData, chemistryData)\n      };\n\n    } catch (error) {\n      console.warn('Error getting overall metrics:', error);\n      return this.getFallbackOverallMetrics();\n    }\n  }\n\n  // Get subject-specific analytics\n  async getSubjectAnalytics(userId) {\n    try {\n      const subjects = {};\n\n      // Biology analytics\n      const biologyResults = await Promise.all([\n        learningService.getLearningAnalytics('biology', 'module-5', userId),\n        learningService.getLearningAnalytics('biology', 'module-6', userId)\n      ]);\n\n      subjects.biology = {\n        modules: {\n          'module-5': this.processSubjectAnalytics(biologyResults[0]),\n          'module-6': this.processSubjectAnalytics(biologyResults[1])\n        },\n        overall: this.calculateSubjectOverall(biologyResults),\n        strongAreas: this.extractStrongAreas(biologyResults),\n        strugglingAreas: this.extractStrugglingAreas(biologyResults)\n      };\n\n      // Chemistry analytics\n      const chemistryResults = await Promise.all([\n        learningService.getLearningAnalytics('chemistry', 'module-5', userId)\n      ]);\n\n      subjects.chemistry = {\n        modules: {\n          'module-5': this.processSubjectAnalytics(chemistryResults[0])\n        },\n        overall: this.calculateSubjectOverall(chemistryResults),\n        strongAreas: this.extractStrongAreas(chemistryResults),\n        strugglingAreas: this.extractStrugglingAreas(chemistryResults)\n      };\n\n      return subjects;\n\n    } catch (error) {\n      console.warn('Error getting subject analytics:', error);\n      return this.getFallbackSubjectAnalytics();\n    }\n  }\n\n  // Get performance analytics with trends\n  async getPerformanceAnalytics(userId, timeframe) {\n    try {\n      // This would typically come from a dedicated analytics database\n      // For now, we'll generate representative data based on current progress\n      \n      const trends = this.generatePerformanceTrends(timeframe);\n      const distributions = await this.getPerformanceDistributions(userId);\n      const comparisons = this.generatePeerComparisons();\n\n      return {\n        trends,\n        distributions,\n        comparisons,\n        improvements: this.calculateImprovements(trends),\n        recommendations: this.generateRecommendations(distributions)\n      };\n\n    } catch (error) {\n      console.warn('Error getting performance analytics:', error);\n      return this.getFallbackPerformanceData();\n    }\n  }\n\n  // Get engagement metrics\n  async getEngagementMetrics(userId, timeframe) {\n    try {\n      const sessionData = this.getSessionMetrics(timeframe);\n      const contentEngagement = await this.getContentEngagementMetrics(userId);\n      const activityPatterns = this.getActivityPatterns(timeframe);\n\n      return {\n        sessionsCount: sessionData.count,\n        averageSessionLength: sessionData.averageLength,\n        totalTimeSpent: sessionData.totalTime,\n        contentCompletionRate: contentEngagement.completionRate,\n        quizCompletionRate: contentEngagement.quizCompletionRate,\n        mostActiveHours: activityPatterns.peakHours,\n        mostActiveDays: activityPatterns.peakDays,\n        engagementScore: this.calculateEngagementScore(sessionData, contentEngagement)\n      };\n\n    } catch (error) {\n      console.warn('Error getting engagement metrics:', error);\n      return this.getFallbackEngagementMetrics();\n    }\n  }\n\n  // Get recent activity feed\n  async getRecentActivity(userId, limit = 20) {\n    try {\n      // Combine real-time events with historical data\n      const realtimeEvents = this.getRecentRealTimeEvents(limit / 2);\n      const historicalEvents = this.generateHistoricalActivity(userId, limit / 2);\n\n      const allEvents = [...realtimeEvents, ...historicalEvents]\n        .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp))\n        .slice(0, limit);\n\n      return allEvents.map(event => ({\n        id: event.id || Date.now() + Math.random(),\n        type: event.type,\n        subject: event.data?.subject || event.agent,\n        module: event.data?.moduleId,\n        description: this.getEventDescription(event),\n        timestamp: event.timestamp,\n        score: event.data?.score,\n        achievement: event.data?.achievement\n      }));\n\n    } catch (error) {\n      console.warn('Error getting recent activity:', error);\n      return [];\n    }\n  }\n\n  // Helper methods for analytics processing\n  processSubjectAnalytics(analyticsResult) {\n    if (!analyticsResult?.success || !analyticsResult.analytics) {\n      return null;\n    }\n\n    const { progress, questions, content } = analyticsResult.analytics;\n\n    return {\n      progress: progress?.overallProgress || 0,\n      score: progress?.averageQuizScore || 0,\n      timeSpent: progress?.totalTimeSpent || 0,\n      questionsAnswered: questions?.totalQuestions || 0,\n      contentAccessed: content?.accessedCount || 0,\n      lastActivity: progress?.lastActivity\n    };\n  }\n\n  calculateSubjectOverall(results) {\n    const validResults = results.filter(r => r?.success);\n    if (validResults.length === 0) return null;\n\n    const totals = validResults.reduce((acc, result) => {\n      const progress = result.analytics?.progress || {};\n      return {\n        progress: acc.progress + (progress.overallProgress || 0),\n        score: acc.score + (progress.averageQuizScore || 0),\n        timeSpent: acc.timeSpent + (progress.totalTimeSpent || 0)\n      };\n    }, { progress: 0, score: 0, timeSpent: 0 });\n\n    return {\n      averageProgress: Math.round(totals.progress / validResults.length),\n      averageScore: Math.round(totals.score / validResults.length),\n      totalTimeSpent: totals.timeSpent\n    };\n  }\n\n  extractStrongAreas(results) {\n    const areas = new Set();\n    results.forEach(result => {\n      const strongAreas = result?.analytics?.progress?.strongAreas || [];\n      strongAreas.forEach(area => areas.add(area));\n    });\n    return Array.from(areas);\n  }\n\n  extractStrugglingAreas(results) {\n    const areas = new Set();\n    results.forEach(result => {\n      const strugglingAreas = result?.analytics?.progress?.strugglingAreas || [];\n      strugglingAreas.forEach(area => areas.add(area));\n    });\n    return Array.from(areas);\n  }\n\n  // Generate performance trends based on timeframe\n  generatePerformanceTrends(timeframe) {\n    const days = timeframe === '1d' ? 1 : timeframe === '7d' ? 7 : 30;\n    const trends = [];\n\n    for (let i = days - 1; i >= 0; i--) {\n      const date = new Date();\n      date.setDate(date.getDate() - i);\n      \n      trends.push({\n        date: date.toISOString().split('T')[0],\n        score: 65 + Math.random() * 30, // Simulated improving trend\n        timeSpent: 30 + Math.random() * 90,\n        questionsAnswered: 5 + Math.floor(Math.random() * 15)\n      });\n    }\n\n    return trends;\n  }\n\n  // Get recent real-time events\n  getRecentRealTimeEvents(limit) {\n    return this.metricsHistory.slice(0, limit);\n  }\n\n  // Calculate total questions from analytics data\n  calculateTotalQuestions(biologyData, chemistryData) {\n    return (biologyData.dotPointsCompleted || 0) * 8 + \n           (chemistryData.dotPointsCompleted || 0) * 8;\n  }\n\n  // Calculate current streak\n  calculateStreak(userId) {\n    // This would typically come from stored user data\n    return 3; // Simulated streak\n  }\n\n  // Calculate achievements\n  calculateAchievements(biologyData, chemistryData) {\n    let achievements = 0;\n    \n    if ((biologyData.averageQuizScore || 0) >= 80) achievements++;\n    if ((chemistryData.averageQuizScore || 0) >= 80) achievements++;\n    if ((biologyData.overallProgress || 0) >= 50) achievements++;\n    if ((chemistryData.overallProgress || 0) >= 50) achievements++;\n    \n    return achievements;\n  }\n\n  // Get last activity time\n  getLastActivityTime(biologyData, chemistryData) {\n    const biologyTime = biologyData.lastActivity;\n    const chemistryTime = chemistryData.lastActivity;\n    \n    if (!biologyTime && !chemistryTime) return new Date().toISOString();\n    if (!biologyTime) return chemistryTime;\n    if (!chemistryTime) return biologyTime;\n    \n    return new Date(Math.max(new Date(biologyTime), new Date(chemistryTime))).toISOString();\n  }\n\n  // Add analytics event listener\n  addRealTimeListener(callback) {\n    this.realTimeListeners.add(callback);\n    return () => this.realTimeListeners.delete(callback);\n  }\n\n  // Notify real-time listeners\n  notifyRealTimeListeners(event) {\n    this.realTimeListeners.forEach(listener => {\n      try {\n        listener(event);\n      } catch (error) {\n        console.warn('Error in analytics listener:', error);\n      }\n    });\n  }\n\n  // Generate event description for activity feed\n  getEventDescription(event) {\n    switch (event.type) {\n      case 'quiz_completed':\n        return `Completed quiz with ${event.data?.score || 0}% score`;\n      case 'progress_update':\n        return `Updated progress in ${event.data?.subject || 'subject'}`;\n      case 'achievement_unlocked':\n        return `Unlocked achievement: ${event.data?.achievement || 'New Achievement'}`;\n      case 'content_access':\n        return `Accessed content: ${event.data?.contentType || 'material'}`;\n      default:\n        return 'Learning activity completed';\n    }\n  }\n\n  // Fallback data methods\n  getFallbackDashboardData(userId, timeframe) {\n    return {\n      overall: this.getFallbackOverallMetrics(),\n      subjects: this.getFallbackSubjectAnalytics(),\n      performance: this.getFallbackPerformanceData(),\n      engagement: this.getFallbackEngagementMetrics(),\n      recentActivity: [],\n      realTimeEvents: [],\n      lastUpdated: new Date().toISOString(),\n      timeframe,\n      fallback: true\n    };\n  }\n\n  getFallbackOverallMetrics() {\n    return {\n      totalSubjects: 2,\n      totalModules: 2,\n      overallProgress: 45,\n      averageScore: 72,\n      totalTimeSpent: 180,\n      questionsAnswered: 45,\n      streakDays: 3,\n      achievements: 2,\n      serviceHealth: 'degraded',\n      lastActivity: new Date().toISOString()\n    };\n  }\n\n  getFallbackSubjectAnalytics() {\n    return {\n      biology: {\n        modules: {\n          'module-5': { progress: 55, score: 78, timeSpent: 120, questionsAnswered: 25 },\n          'module-6': { progress: 35, score: 68, timeSpent: 90, questionsAnswered: 15 }\n        },\n        overall: { averageProgress: 45, averageScore: 73, totalTimeSpent: 210 },\n        strongAreas: ['Genetics', 'Cell Biology'],\n        strugglingAreas: ['Evolution']\n      },\n      chemistry: {\n        modules: {\n          'module-5': { progress: 40, score: 75, timeSpent: 150, questionsAnswered: 20 }\n        },\n        overall: { averageProgress: 40, averageScore: 75, totalTimeSpent: 150 },\n        strongAreas: ['Chemical Equations', 'pH Calculations'],\n        strugglingAreas: ['Equilibrium']\n      }\n    };\n  }\n\n  getFallbackPerformanceData() {\n    return {\n      trends: this.generatePerformanceTrends('7d'),\n      distributions: { excellent: 20, good: 45, fair: 30, poor: 5 },\n      comparisons: { betterThan: 68 },\n      improvements: { scoreImprovement: 8, timeEfficiency: 15 },\n      recommendations: ['Focus on equilibrium concepts', 'Practice more evolution questions']\n    };\n  }\n\n  getFallbackEngagementMetrics() {\n    return {\n      sessionsCount: 12,\n      averageSessionLength: 35,\n      totalTimeSpent: 420,\n      contentCompletionRate: 78,\n      quizCompletionRate: 82,\n      mostActiveHours: [14, 15, 16, 20],\n      mostActiveDays: ['Monday', 'Wednesday', 'Saturday'],\n      engagementScore: 76\n    };\n  }\n\n  // Clear analytics cache\n  clearCache() {\n    this.cache.clear();\n    console.log(' Analytics cache cleared');\n  }\n\n  // Get cache statistics\n  getCacheStats() {\n    return {\n      size: this.cache.size,\n      historySize: this.metricsHistory.length,\n      listenersCount: this.realTimeListeners.size\n    };\n  }\n}\n\n// Create singleton instance\nconst analyticsService = new AnalyticsService();\n\nexport default analyticsService;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\services\\contentService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\services\\learningService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\services\\progressSyncService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\services\\questionService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\utils\\adaptiveQuestionEngine.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'competentCount' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":224,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":224,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'proficientCount' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":225,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":225,"endColumn":26},{"ruleId":"no-unused-vars","severity":1,"message":"'userState' is defined but never used. Allowed unused args must match /^_/u.","line":375,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":375,"endColumn":55},{"ruleId":"no-unused-vars","severity":1,"message":"'type' is defined but never used. Allowed unused args must match /^_/u.","line":466,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":466,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'type' is defined but never used. Allowed unused args must match /^_/u.","line":470,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":470,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nclass AdaptiveQuestionEngine {\r\n  constructor() {\r\n    this.learningModel = {\r\n      knowledgeState: {},\r\n      difficultyPreferences: {},\r\n      learningVelocity: {},\r\n      masteryThresholds: {\r\n        expert: 90,\r\n        proficient: 75,\r\n        competent: 60,\r\n        developing: 45,\r\n        novice: 0\r\n      },\r\n      questionTypeWeights: {\r\n        'multiple-choice': 1.0,\r\n        'multiple-select': 1.2,\r\n        'drag-sequence': 1.3,\r\n        'image-hotspot': 1.4,\r\n        'category-sort': 1.5,\r\n        'timeline-builder': 1.6,\r\n        'flowchart-complete': 1.7,\r\n        'graph-construct': 1.8,\r\n        'slider-scale': 1.3,\r\n        'venn-diagram': 1.6,\r\n        'virtual-microscope': 1.9\r\n      }\r\n    };\r\n    \r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    try {\r\n      const savedModel = localStorage.getItem('adaptiveLearningModel');\r\n      if (savedModel) {\r\n        this.learningModel = { ...this.learningModel, ...JSON.parse(savedModel) };\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading adaptive learning model:', error);\r\n    }\r\n  }\r\n\r\n  saveModel() {\r\n    try {\r\n      localStorage.setItem('adaptiveLearningModel', JSON.stringify(this.learningModel));\r\n    } catch (error) {\r\n      console.error('Error saving adaptive learning model:', error);\r\n    }\r\n  }\r\n\r\n  updateKnowledgeState(dotPoint, questionType, performance) {\r\n    if (!this.learningModel.knowledgeState[dotPoint]) {\r\n      this.learningModel.knowledgeState[dotPoint] = {};\r\n    }\r\n\r\n    if (!this.learningModel.knowledgeState[dotPoint][questionType]) {\r\n      this.learningModel.knowledgeState[dotPoint][questionType] = {\r\n        attempts: 0,\r\n        correctAttempts: 0,\r\n        averageScore: 0,\r\n        totalScore: 0,\r\n        averageTime: 0,\r\n        totalTime: 0,\r\n        confidence: [],\r\n        lastAttempt: null,\r\n        masteryLevel: 'novice',\r\n        consistencyScore: 0,\r\n        recentScores: []\r\n      };\r\n    }\r\n\r\n    const state = this.learningModel.knowledgeState[dotPoint][questionType];\r\n    \r\n    state.attempts += 1;\r\n    if (performance.correct) state.correctAttempts += 1;\r\n    \r\n    state.totalScore += performance.score;\r\n    state.averageScore = state.totalScore / state.attempts;\r\n    \r\n    state.totalTime += performance.timeSpent;\r\n    state.averageTime = state.totalTime / state.attempts;\r\n    \r\n    if (performance.confidence) {\r\n      state.confidence.push(performance.confidence);\r\n      if (state.confidence.length > 10) {\r\n        state.confidence = state.confidence.slice(-10);\r\n      }\r\n    }\r\n    \r\n    state.lastAttempt = performance.timestamp;\r\n    state.recentScores.push(performance.score);\r\n    if (state.recentScores.length > 5) {\r\n      state.recentScores = state.recentScores.slice(-5);\r\n    }\r\n    \r\n    state.consistencyScore = this.calculateConsistency(state.recentScores);\r\n    state.masteryLevel = this.calculateMasteryLevel(state);\r\n    \r\n    this.updateLearningVelocity(dotPoint, questionType, performance);\r\n    this.saveModel();\r\n  }\r\n\r\n  calculateConsistency(scores) {\r\n    if (scores.length < 2) return 100;\r\n    \r\n    const mean = scores.reduce((sum, score) => sum + score, 0) / scores.length;\r\n    const variance = scores.reduce((sum, score) => sum + Math.pow(score - mean, 2), 0) / scores.length;\r\n    const standardDeviation = Math.sqrt(variance);\r\n    \r\n    const consistencyScore = Math.max(0, 100 - (standardDeviation * 2));\r\n    return Math.round(consistencyScore);\r\n  }\r\n\r\n  calculateMasteryLevel(state) {\r\n    const accuracy = (state.correctAttempts / state.attempts) * 100;\r\n    const averageScore = state.averageScore;\r\n    const consistency = state.consistencyScore;\r\n    const avgConfidence = state.confidence.length > 0 \r\n      ? state.confidence.reduce((sum, c) => sum + c, 0) / state.confidence.length \r\n      : 3;\r\n\r\n    const masteryScore = (\r\n      accuracy * 0.4 + \r\n      averageScore * 0.3 + \r\n      consistency * 0.2 + \r\n      (avgConfidence / 5) * 100 * 0.1\r\n    );\r\n\r\n    if (masteryScore >= this.learningModel.masteryThresholds.expert) return 'expert';\r\n    if (masteryScore >= this.learningModel.masteryThresholds.proficient) return 'proficient';\r\n    if (masteryScore >= this.learningModel.masteryThresholds.competent) return 'competent';\r\n    if (masteryScore >= this.learningModel.masteryThresholds.developing) return 'developing';\r\n    return 'novice';\r\n  }\r\n\r\n  updateLearningVelocity(dotPoint, questionType, performance) {\r\n    const key = `${dotPoint}_${questionType}`;\r\n    \r\n    if (!this.learningModel.learningVelocity[key]) {\r\n      this.learningModel.learningVelocity[key] = {\r\n        improvementRate: 0,\r\n        timeToMastery: 0,\r\n        learningCurve: [],\r\n        plateauDetection: false\r\n      };\r\n    }\r\n\r\n    const velocity = this.learningModel.learningVelocity[key];\r\n    velocity.learningCurve.push({\r\n      timestamp: performance.timestamp,\r\n      score: performance.score,\r\n      attempt: this.learningModel.knowledgeState[dotPoint][questionType].attempts\r\n    });\r\n\r\n    if (velocity.learningCurve.length > 20) {\r\n      velocity.learningCurve = velocity.learningCurve.slice(-20);\r\n    }\r\n\r\n    velocity.improvementRate = this.calculateImprovementRate(velocity.learningCurve);\r\n    velocity.plateauDetection = this.detectPlateau(velocity.learningCurve);\r\n  }\r\n\r\n  calculateImprovementRate(learningCurve) {\r\n    if (learningCurve.length < 5) return 0;\r\n    \r\n    const recent = learningCurve.slice(-5);\r\n    const early = learningCurve.slice(0, 5);\r\n    \r\n    const recentAvg = recent.reduce((sum, point) => sum + point.score, 0) / recent.length;\r\n    const earlyAvg = early.reduce((sum, point) => sum + point.score, 0) / early.length;\r\n    \r\n    return recentAvg - earlyAvg;\r\n  }\r\n\r\n  detectPlateau(learningCurve) {\r\n    if (learningCurve.length < 10) return false;\r\n    \r\n    const recent = learningCurve.slice(-6);\r\n    const scores = recent.map(point => point.score);\r\n    \r\n    const variance = this.calculateVariance(scores);\r\n    const mean = scores.reduce((sum, score) => sum + score, 0) / scores.length;\r\n    \r\n    return variance < 25 && mean < 85;\r\n  }\r\n\r\n  calculateVariance(numbers) {\r\n    const mean = numbers.reduce((sum, num) => sum + num, 0) / numbers.length;\r\n    const squaredDifferences = numbers.map(num => Math.pow(num - mean, 2));\r\n    return squaredDifferences.reduce((sum, sq) => sum + sq, 0) / numbers.length;\r\n  }\r\n\r\n  selectAdaptiveQuestions(dotPoint, questionCount = 5, preferences = {}) {\r\n    const allQuestions = this.getQuestionBank(dotPoint);\r\n    if (!allQuestions || allQuestions.length === 0) return [];\r\n\r\n    const userState = this.learningModel.knowledgeState[dotPoint] || {};\r\n    const selectedQuestions = [];\r\n    \r\n    const targetDistribution = this.calculateTargetDistribution(userState, preferences);\r\n    \r\n    const categorizedQuestions = this.categorizeQuestions(allQuestions, userState);\r\n    \r\n    for (const category in targetDistribution) {\r\n      const count = Math.ceil(questionCount * targetDistribution[category]);\r\n      const categoryQuestions = categorizedQuestions[category] || [];\r\n      \r\n      const selected = this.selectFromCategory(categoryQuestions, count, userState);\r\n      selectedQuestions.push(...selected);\r\n    }\r\n    \r\n    const finalSelection = this.balanceAndOptimize(selectedQuestions, questionCount, userState);\r\n    \r\n    return this.shuffleArray(finalSelection);\r\n  }\r\n\r\n  calculateTargetDistribution(userState, preferences) {\r\n    const totalQuestions = Object.keys(userState).length;\r\n    const masteryLevels = Object.values(userState).map(state => state.masteryLevel);\r\n    \r\n    const noviceCount = masteryLevels.filter(level => level === 'novice').length;\r\n    const developingCount = masteryLevels.filter(level => level === 'developing').length;\r\n    const competentCount = masteryLevels.filter(level => level === 'competent').length;\r\n    const proficientCount = masteryLevels.filter(level => level === 'proficient').length;\r\n    const expertCount = masteryLevels.filter(level => level === 'expert').length;\r\n\r\n    let distribution = {\r\n      review: 0.1,\r\n      reinforce: 0.2,\r\n      challenge: 0.4,\r\n      advance: 0.2,\r\n      mastery: 0.1\r\n    };\r\n\r\n    if (noviceCount > totalQuestions * 0.5) {\r\n      distribution = { review: 0.4, reinforce: 0.4, challenge: 0.2, advance: 0, mastery: 0 };\r\n    } else if (developingCount > totalQuestions * 0.3) {\r\n      distribution = { review: 0.2, reinforce: 0.4, challenge: 0.3, advance: 0.1, mastery: 0 };\r\n    } else if (expertCount > totalQuestions * 0.7) {\r\n      distribution = { review: 0.1, reinforce: 0.1, challenge: 0.2, advance: 0.3, mastery: 0.3 };\r\n    }\r\n\r\n    if (preferences.focusWeak) {\r\n      distribution.review += 0.2;\r\n      distribution.reinforce += 0.2;\r\n      distribution.challenge -= 0.2;\r\n      distribution.advance -= 0.2;\r\n    }\r\n\r\n    if (preferences.accelerated) {\r\n      distribution.advance += 0.2;\r\n      distribution.mastery += 0.2;\r\n      distribution.review -= 0.2;\r\n      distribution.reinforce -= 0.2;\r\n    }\r\n\r\n    return distribution;\r\n  }\r\n\r\n  categorizeQuestions(questions, userState) {\r\n    const categorized = {\r\n      review: [],\r\n      reinforce: [],\r\n      challenge: [],\r\n      advance: [],\r\n      mastery: []\r\n    };\r\n\r\n    questions.forEach(question => {\r\n      const state = userState[question.type] || {};\r\n      const masteryLevel = state.masteryLevel || 'novice';\r\n      const averageScore = state.averageScore || 0;\r\n      const attempts = state.attempts || 0;\r\n      \r\n      const difficulty = this.estimateQuestionDifficulty(question);\r\n      \r\n      if (masteryLevel === 'novice' || averageScore < 40) {\r\n        categorized.review.push(question);\r\n      } else if (masteryLevel === 'developing' || (averageScore < 70 && attempts >= 3)) {\r\n        categorized.reinforce.push(question);\r\n      } else if (masteryLevel === 'competent' || averageScore < 85) {\r\n        categorized.challenge.push(question);\r\n      } else if (masteryLevel === 'proficient' && difficulty >= 0.7) {\r\n        categorized.advance.push(question);\r\n      } else if (masteryLevel === 'expert' && difficulty >= 0.9) {\r\n        categorized.mastery.push(question);\r\n      } else {\r\n        categorized.challenge.push(question);\r\n      }\r\n    });\r\n\r\n    return categorized;\r\n  }\r\n\r\n  estimateQuestionDifficulty(question) {\r\n    const baseWeights = this.learningModel.questionTypeWeights;\r\n    const typeWeight = baseWeights[question.type] || 1.0;\r\n    \r\n    let complexity = 0.5;\r\n    \r\n    if (question.options && question.options.length > 4) complexity += 0.1;\r\n    if (question.correctAnswers && question.correctAnswers.length > 1) complexity += 0.2;\r\n    if (question.text && question.text.length > 200) complexity += 0.1;\r\n    if (question.requiresCalculation) complexity += 0.3;\r\n    if (question.requiresAnalysis) complexity += 0.2;\r\n    \r\n    const difficulty = Math.min(1.0, complexity * typeWeight);\r\n    return difficulty;\r\n  }\r\n\r\n  selectFromCategory(questions, count, userState) {\r\n    if (questions.length === 0) return [];\r\n    \r\n    const scored = questions.map(question => ({\r\n      ...question,\r\n      adaptiveScore: this.calculateAdaptiveScore(question, userState)\r\n    }));\r\n    \r\n    scored.sort((a, b) => b.adaptiveScore - a.adaptiveScore);\r\n    \r\n    return scored.slice(0, count);\r\n  }\r\n\r\n  calculateAdaptiveScore(question, userState) {\r\n    const state = userState[question.type] || {};\r\n    const timeSinceLastAttempt = state.lastAttempt \r\n      ? Date.now() - state.lastAttempt \r\n      : Infinity;\r\n    \r\n    const recencyBonus = Math.min(0.3, timeSinceLastAttempt / (1000 * 60 * 60 * 24));\r\n    \r\n    const masteryPenalty = {\r\n      'novice': 0,\r\n      'developing': 0.1,\r\n      'competent': 0.2,\r\n      'proficient': 0.4,\r\n      'expert': 0.6\r\n    };\r\n    \r\n    const masteryLevel = state.masteryLevel || 'novice';\r\n    const penalty = masteryPenalty[masteryLevel] || 0;\r\n    \r\n    const attempts = state.attempts || 0;\r\n    const attemptBonus = Math.max(0, 0.5 - (attempts * 0.1));\r\n    \r\n    const difficulty = this.estimateQuestionDifficulty(question);\r\n    const difficultyMatch = this.calculateDifficultyMatch(masteryLevel, difficulty);\r\n    \r\n    const adaptiveScore = (\r\n      recencyBonus * 0.3 +\r\n      attemptBonus * 0.2 +\r\n      difficultyMatch * 0.3 +\r\n      (1 - penalty) * 0.2\r\n    );\r\n    \r\n    return adaptiveScore;\r\n  }\r\n\r\n  calculateDifficultyMatch(masteryLevel, questionDifficulty) {\r\n    const optimalDifficulty = {\r\n      'novice': 0.3,\r\n      'developing': 0.5,\r\n      'competent': 0.7,\r\n      'proficient': 0.8,\r\n      'expert': 0.9\r\n    };\r\n    \r\n    const optimal = optimalDifficulty[masteryLevel] || 0.5;\r\n    const difference = Math.abs(optimal - questionDifficulty);\r\n    \r\n    return Math.max(0, 1 - (difference * 2));\r\n  }\r\n\r\n  balanceAndOptimize(questions, targetCount, userState) {\r\n    if (questions.length <= targetCount) return questions;\r\n    \r\n    const typeDistribution = {};\r\n    questions.forEach(q => {\r\n      typeDistribution[q.type] = (typeDistribution[q.type] || 0) + 1;\r\n    });\r\n    \r\n    const maxPerType = Math.ceil(targetCount / Object.keys(typeDistribution).length);\r\n    const balanced = [];\r\n    const typeCounts = {};\r\n    \r\n    questions.sort((a, b) => b.adaptiveScore - a.adaptiveScore);\r\n    \r\n    for (const question of questions) {\r\n      const currentCount = typeCounts[question.type] || 0;\r\n      \r\n      if (currentCount < maxPerType && balanced.length < targetCount) {\r\n        balanced.push(question);\r\n        typeCounts[question.type] = currentCount + 1;\r\n      }\r\n    }\r\n    \r\n    while (balanced.length < targetCount && questions.length > balanced.length) {\r\n      const remaining = questions.filter(q => !balanced.includes(q));\r\n      if (remaining.length === 0) break;\r\n      \r\n      balanced.push(remaining[0]);\r\n    }\r\n    \r\n    return balanced.slice(0, targetCount);\r\n  }\r\n\r\n  getQuestionBank(dotPoint) {\r\n    try {\r\n      const Module5QuizComponent = JSON.parse(localStorage.getItem('module5QuestionBank') || 'null');\r\n      \r\n      if (Module5QuizComponent && Module5QuizComponent[dotPoint]) {\r\n        return Module5QuizComponent[dotPoint];\r\n      }\r\n      \r\n      const mockQuestions = this.generateMockQuestions(dotPoint);\r\n      return mockQuestions;\r\n    } catch (error) {\r\n      console.error('Error loading question bank:', error);\r\n      return this.generateMockQuestions(dotPoint);\r\n    }\r\n  }\r\n\r\n  generateMockQuestions(dotPoint) {\r\n    const questionTypes = Object.keys(this.learningModel.questionTypeWeights);\r\n    const questions = [];\r\n    \r\n    for (let i = 0; i < 20; i++) {\r\n      const type = questionTypes[i % questionTypes.length];\r\n      questions.push({\r\n        id: `${dotPoint}-mock-${i + 1}`,\r\n        type,\r\n        question: `Mock question ${i + 1} for ${dotPoint}`,\r\n        options: type === 'multiple-choice' ? [\r\n          'Option A', 'Option B', 'Option C', 'Option D'\r\n        ] : undefined,\r\n        correctAnswers: type === 'multiple-choice' ? ['Option B'] : undefined,\r\n        difficulty: ['easy', 'medium', 'hard'][Math.floor(Math.random() * 3)],\r\n        explanation: `This is a mock explanation for question ${i + 1}`\r\n      });\r\n    }\r\n    \r\n    return questions;\r\n  }\r\n\r\n  shuffleArray(array) {\r\n    const shuffled = [...array];\r\n    for (let i = shuffled.length - 1; i > 0; i--) {\r\n      const j = Math.floor(Math.random() * (i + 1));\r\n      [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\r\n    }\r\n    return shuffled;\r\n  }\r\n\r\n  getRecommendations(dotPoint) {\r\n    const userState = this.learningModel.knowledgeState[dotPoint] || {};\r\n    const recommendations = {\r\n      focusAreas: [],\r\n      questionTypes: [],\r\n      studyStrategy: '',\r\n      timeAllocation: {},\r\n      nextSteps: []\r\n    };\r\n\r\n    const weakAreas = Object.entries(userState)\r\n      .filter(([type, state]) => state.masteryLevel === 'novice' || state.averageScore < 60)\r\n      .map(([type]) => type);\r\n\r\n    const strongAreas = Object.entries(userState)\r\n      .filter(([type, state]) => state.masteryLevel === 'expert' && state.averageScore >= 85)\r\n      .map(([type]) => type);\r\n\r\n    recommendations.focusAreas = weakAreas;\r\n\r\n    if (weakAreas.length > 3) {\r\n      recommendations.studyStrategy = 'foundation-building';\r\n      recommendations.timeAllocation = { review: 60, practice: 30, challenge: 10 };\r\n    } else if (strongAreas.length > weakAreas.length) {\r\n      recommendations.studyStrategy = 'advancement';\r\n      recommendations.timeAllocation = { review: 20, practice: 40, challenge: 40 };\r\n    } else {\r\n      recommendations.studyStrategy = 'balanced';\r\n      recommendations.timeAllocation = { review: 30, practice: 40, challenge: 30 };\r\n    }\r\n\r\n    const plateauAreas = Object.entries(this.learningModel.learningVelocity)\r\n      .filter(([key, velocity]) => velocity.plateauDetection && key.startsWith(dotPoint))\r\n      .map(([key]) => key.split('_')[1]);\r\n\r\n    if (plateauAreas.length > 0) {\r\n      recommendations.nextSteps.push('Consider different learning approaches for plateau areas');\r\n      recommendations.questionTypes = plateauAreas;\r\n    }\r\n\r\n    return recommendations;\r\n  }\r\n\r\n  exportLearningData() {\r\n    return {\r\n      knowledgeState: this.learningModel.knowledgeState,\r\n      learningVelocity: this.learningModel.learningVelocity,\r\n      exportDate: new Date().toISOString()\r\n    };\r\n  }\r\n\r\n  importLearningData(data) {\r\n    if (data.knowledgeState) {\r\n      this.learningModel.knowledgeState = { ...this.learningModel.knowledgeState, ...data.knowledgeState };\r\n    }\r\n    \r\n    if (data.learningVelocity) {\r\n      this.learningModel.learningVelocity = { ...this.learningModel.learningVelocity, ...data.learningVelocity };\r\n    }\r\n    \r\n    this.saveModel();\r\n  }\r\n}\r\n\r\nexport default AdaptiveQuestionEngine;\r\n\r\nexport const useAdaptiveEngine = () => {\r\n  const [engine] = React.useState(() => new AdaptiveQuestionEngine());\r\n  \r\n  return {\r\n    selectQuestions: (dotPoint, count, preferences) => \r\n      engine.selectAdaptiveQuestions(dotPoint, count, preferences),\r\n    \r\n    updatePerformance: (dotPoint, questionType, performance) => \r\n      engine.updateKnowledgeState(dotPoint, questionType, performance),\r\n    \r\n    getRecommendations: (dotPoint) => \r\n      engine.getRecommendations(dotPoint),\r\n    \r\n    exportData: () => \r\n      engine.exportLearningData(),\r\n    \r\n    importData: (data) => \r\n      engine.importLearningData(data),\r\n    \r\n    getMasteryLevel: (dotPoint, questionType) => {\r\n      const state = engine.learningModel.knowledgeState[dotPoint]?.[questionType];\r\n      return state?.masteryLevel || 'novice';\r\n    },\r\n    \r\n    getKnowledgeState: () => \r\n      engine.learningModel.knowledgeState\r\n  };\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\utils\\animations.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'motion' is defined but never used. Allowed unused vars must match /^React$/u.","line":1,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { motion } from 'framer-motion';\n\n// Animation variants for consistent motion across the app\nexport const fadeInUp = {\n  initial: { opacity: 0, y: 20 },\n  animate: { opacity: 1, y: 0 },\n  exit: { opacity: 0, y: -20 }\n};\n\nexport const fadeInDown = {\n  initial: { opacity: 0, y: -20 },\n  animate: { opacity: 1, y: 0 },\n  exit: { opacity: 0, y: 20 }\n};\n\nexport const fadeInLeft = {\n  initial: { opacity: 0, x: -20 },\n  animate: { opacity: 1, x: 0 },\n  exit: { opacity: 0, x: 20 }\n};\n\nexport const fadeInRight = {\n  initial: { opacity: 0, x: 20 },\n  animate: { opacity: 1, x: 0 },\n  exit: { opacity: 0, x: -20 }\n};\n\nexport const scaleIn = {\n  initial: { opacity: 0, scale: 0.8 },\n  animate: { opacity: 1, scale: 1 },\n  exit: { opacity: 0, scale: 0.8 }\n};\n\nexport const slideUp = {\n  initial: { opacity: 0, y: '100%' },\n  animate: { opacity: 1, y: 0 },\n  exit: { opacity: 0, y: '100%' }\n};\n\nexport const slideDown = {\n  initial: { opacity: 0, y: '-100%' },\n  animate: { opacity: 1, y: 0 },\n  exit: { opacity: 0, y: '-100%' }\n};\n\n// Staggered children animations\nexport const staggerContainer = {\n  animate: {\n    transition: {\n      staggerChildren: 0.1\n    }\n  }\n};\n\nexport const staggerItem = {\n  initial: { opacity: 0, y: 20 },\n  animate: { opacity: 1, y: 0 }\n};\n\n// Button press animations\nexport const buttonPress = {\n  scale: 0.95,\n  transition: { duration: 0.1 }\n};\n\nexport const buttonHover = {\n  scale: 1.02,\n  transition: { duration: 0.2 }\n};\n\n// Success/Error animations\nexport const successPulse = {\n  scale: [1, 1.1, 1],\n  transition: { duration: 0.6, times: [0, 0.5, 1] }\n};\n\nexport const errorShake = {\n  x: [-10, 10, -10, 10, 0],\n  transition: { duration: 0.5 }\n};\n\n// Loading animations\nexport const loadingSpinner = {\n  rotate: 360,\n  transition: { duration: 1, repeat: Infinity, ease: \"linear\" }\n};\n\nexport const loadingDots = {\n  scale: [1, 1.2, 1],\n  transition: { duration: 0.6, repeat: Infinity, repeatDelay: 0.2 }\n};\n\n// Quiz-specific animations\nexport const questionSlide = {\n  initial: { opacity: 0, x: 50 },\n  animate: { opacity: 1, x: 0 },\n  exit: { opacity: 0, x: -50 }\n};\n\nexport const answerReveal = {\n  initial: { opacity: 0, scale: 0.9 },\n  animate: { opacity: 1, scale: 1 },\n  transition: { delay: 0.2 }\n};\n\nexport const progressBar = {\n  initial: { width: 0 },\n  animate: { width: '100%' },\n  transition: { duration: 0.8, ease: 'easeOut' }\n};\n\n// Achievement animations\nexport const achievementPop = {\n  initial: { scale: 0, rotate: -180 },\n  animate: { scale: 1, rotate: 0 },\n  transition: { type: 'spring', stiffness: 200, damping: 15 }\n};\n\nexport const confettiParticle = {\n  initial: { opacity: 1, y: -10, scale: 0 },\n  animate: {\n    opacity: [1, 1, 0],\n    y: 100,\n    scale: [0, 1, 0.5],\n    rotate: [0, 180, 360]\n  },\n  transition: { duration: 2, ease: 'easeOut' }\n};\n\n// Level up animations\nexport const levelUpGlow = {\n  initial: { scale: 1, opacity: 0.8 },\n  animate: {\n    scale: [1, 1.2, 1],\n    opacity: [0.8, 1, 0.8]\n  },\n  transition: { duration: 2, repeat: Infinity }\n};\n\n// Streak fire animations\nexport const fireFlicker = {\n  animate: {\n    scale: [1, 1.1, 0.9, 1.05, 1],\n    rotate: [-2, 2, -1, 1, 0]\n  },\n  transition: { duration: 2, repeat: Infinity, ease: 'easeInOut' }\n};\n\n// Page transition animations\nexport const pageTransition = {\n  initial: { opacity: 0, scale: 0.95 },\n  animate: { opacity: 1, scale: 1 },\n  exit: { opacity: 0, scale: 1.05 },\n  transition: { duration: 0.3 }\n};\n\n// Card hover animations\nexport const cardHover = {\n  y: -5,\n  scale: 1.02,\n  boxShadow: '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',\n  transition: { duration: 0.2 }\n};\n\n// Haptic feedback simulation (for browsers that support it)\nexport const triggerHaptic = (intensity = 'medium') => {\n  if ('vibrate' in navigator) {\n    switch (intensity) {\n      case 'light':\n        navigator.vibrate(10);\n        break;\n      case 'medium':\n        navigator.vibrate(25);\n        break;\n      case 'heavy':\n        navigator.vibrate(50);\n        break;\n      default:\n        navigator.vibrate(25);\n    }\n  }\n};\n\n// Spring configurations\nexport const springConfigs = {\n  gentle: { type: 'spring', stiffness: 120, damping: 14 },\n  moderate: { type: 'spring', stiffness: 200, damping: 15 },\n  bouncy: { type: 'spring', stiffness: 300, damping: 10 },\n  quick: { type: 'spring', stiffness: 400, damping: 25 }\n};\n\n// Custom transition timing\nexport const easings = {\n  smooth: [0.25, 0.46, 0.45, 0.94],\n  snappy: [0.68, -0.55, 0.265, 1.55],\n  gentle: [0.25, 0.1, 0.25, 1]\n};\n\n// Animation utilities\nexport const createStaggeredList = (children, delay = 0.1) => ({\n  animate: {\n    transition: {\n      staggerChildren: delay,\n      delayChildren: 0.1\n    }\n  }\n});\n\nexport const createDelayedAnimation = (animation, delay = 0) => ({\n  ...animation,\n  transition: {\n    ...animation.transition,\n    delay\n  }\n});\n\n// Performance-optimized animations for mobile\nexport const mobileOptimized = {\n  // Use transform instead of changing layout properties\n  slideUpMobile: {\n    initial: { opacity: 0, transform: 'translateY(20px)' },\n    animate: { opacity: 1, transform: 'translateY(0px)' },\n    transition: { duration: 0.3 }\n  },\n\n  // Reduced motion for accessibility\n  reducedMotion: {\n    initial: { opacity: 0 },\n    animate: { opacity: 1 },\n    transition: { duration: 0.2 }\n  }\n};\n\n// Check if user prefers reduced motion\nexport const respectsReducedMotion = () => {\n  return window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n};\n\n// Get appropriate animation based on user preferences\nexport const getAccessibleAnimation = (animation) => {\n  return respectsReducedMotion() ? mobileOptimized.reducedMotion : animation;\n};\n\nexport default {\n  fadeInUp,\n  fadeInDown,\n  fadeInLeft,\n  fadeInRight,\n  scaleIn,\n  slideUp,\n  slideDown,\n  staggerContainer,\n  staggerItem,\n  buttonPress,\n  buttonHover,\n  successPulse,\n  errorShake,\n  loadingSpinner,\n  loadingDots,\n  questionSlide,\n  answerReveal,\n  progressBar,\n  achievementPop,\n  confettiParticle,\n  levelUpGlow,\n  fireFlicker,\n  pageTransition,\n  cardHover,\n  triggerHaptic,\n  springConfigs,\n  easings,\n  createStaggeredList,\n  createDelayedAnimation,\n  mobileOptimized,\n  respectsReducedMotion,\n  getAccessibleAnimation\n};","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\utils\\api.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\utils\\assetLoader.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'url' is defined but never used. Allowed unused args must match /^_/u.","line":107,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":107,"endColumn":31},{"ruleId":"no-unused-vars","severity":1,"message":"'quality' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":145,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":145,"endColumn":14},{"ruleId":"no-unused-vars","severity":1,"message":"'format' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":146,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":146,"endColumn":13},{"ruleId":"no-unused-vars","severity":1,"message":"'actualWidth' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":156,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":156,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'actualHeight' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":157,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":157,"endColumn":23},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a missing dependency: 'options'. Either include it or remove the dependency array.","line":216,"column":6,"nodeType":"ArrayExpression","endLine":216,"endColumn":29,"suggestions":[{"desc":"Update the dependencies array to be: [url, options.fallback, options]","fix":{"range":[6211,6234],"text":"[url, options.fallback, options]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\n// Asset Loader with fallbacks and lazy loading\nclass AssetLoader {\n  constructor() {\n    this.cache = new Map();\n    this.loadingPromises = new Map();\n    this.fallbackIcons = this.generateFallbackIcons();\n  }\n\n  // Generate fallback icons using SVG\n  generateFallbackIcons() {\n    const createSVGIcon = (size, color = '#3B82F6') => {\n      return `data:image/svg+xml,${encodeURIComponent(`\n        <svg width=\"${size}\" height=\"${size}\" viewBox=\"0 0 ${size} ${size}\" xmlns=\"http://www.w3.org/2000/svg\">\n          <rect width=\"${size}\" height=\"${size}\" rx=\"${size * 0.2}\" fill=\"${color}\"/>\n          <text x=\"50%\" y=\"50%\" font-family=\"Arial, sans-serif\" font-size=\"${size * 0.4}\" \n                font-weight=\"bold\" text-anchor=\"middle\" dy=\"0.35em\" fill=\"white\">H</text>\n        </svg>\n      `)}`;\n    };\n\n    return {\n      '16x16': createSVGIcon(16),\n      '32x32': createSVGIcon(32),\n      '72x72': createSVGIcon(72),\n      '96x96': createSVGIcon(96),\n      '128x128': createSVGIcon(128),\n      '144x144': createSVGIcon(144),\n      '152x152': createSVGIcon(152),\n      '192x192': createSVGIcon(192),\n      '384x384': createSVGIcon(384),\n      '512x512': createSVGIcon(512),\n    };\n  }\n\n  // Check if an asset exists\n  async assetExists(url) {\n    try {\n      const response = await fetch(url, { method: 'HEAD' });\n      return response.ok;\n    } catch {\n      return false;\n    }\n  }\n\n  // Load asset with fallback\n  async loadAsset(url, fallbackUrl = null) {\n    // Check cache first\n    if (this.cache.has(url)) {\n      return this.cache.get(url);\n    }\n\n    // Check if already loading\n    if (this.loadingPromises.has(url)) {\n      return this.loadingPromises.get(url);\n    }\n\n    const loadPromise = this.performAssetLoad(url, fallbackUrl);\n    this.loadingPromises.set(url, loadPromise);\n\n    try {\n      const result = await loadPromise;\n      this.cache.set(url, result);\n      return result;\n    } finally {\n      this.loadingPromises.delete(url);\n    }\n  }\n\n  async performAssetLoad(url, fallbackUrl) {\n    try {\n      // Try to load primary asset\n      if (await this.assetExists(url)) {\n        return url;\n      }\n\n      // Try fallback if provided\n      if (fallbackUrl && await this.assetExists(fallbackUrl)) {\n        console.warn(`Asset not found: ${url}, using fallback: ${fallbackUrl}`);\n        return fallbackUrl;\n      }\n\n      // Generate fallback based on asset type\n      return this.generateFallback(url);\n    } catch (error) {\n      console.error(`Failed to load asset: ${url}`, error);\n      return this.generateFallback(url);\n    }\n  }\n\n  generateFallback(url) {\n    // Determine asset type and generate appropriate fallback\n    if (url.includes('icon') || url.includes('favicon')) {\n      const sizeMatch = url.match(/(\\d+)x(\\d+)/);\n      if (sizeMatch) {\n        const size = sizeMatch[1];\n        return this.fallbackIcons[`${size}x${size}`] || this.fallbackIcons['192x192'];\n      }\n      return this.fallbackIcons['192x192'];\n    }\n\n    // For other images, return a placeholder\n    return this.generatePlaceholderImage(url);\n  }\n\n  generatePlaceholderImage(url) {\n    const width = 400;\n    const height = 300;\n    \n    return `data:image/svg+xml,${encodeURIComponent(`\n      <svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 ${width} ${height}\" xmlns=\"http://www.w3.org/2000/svg\">\n        <rect width=\"${width}\" height=\"${height}\" fill=\"#F3F4F6\"/>\n        <rect x=\"20\" y=\"20\" width=\"${width - 40}\" height=\"${height - 40}\" fill=\"#E5E7EB\" rx=\"8\"/>\n        <circle cx=\"${width / 2}\" cy=\"${height / 2 - 20}\" r=\"30\" fill=\"#9CA3AF\"/>\n        <rect x=\"${width / 2 - 40}\" y=\"${height / 2 + 20}\" width=\"80\" height=\"8\" fill=\"#9CA3AF\" rx=\"4\"/>\n        <rect x=\"${width / 2 - 60}\" y=\"${height / 2 + 35}\" width=\"120\" height=\"6\" fill=\"#D1D5DB\" rx=\"3\"/>\n      </svg>\n    `)}`;\n  }\n\n  // Preload critical assets\n  async preloadCriticalAssets() {\n    const criticalAssets = [\n      '/icon-192x192.png',\n      '/icon-512x512.png',\n      '/favicon.ico',\n      '/manifest.json'\n    ];\n\n    const promises = criticalAssets.map(asset => \n      this.loadAsset(asset).catch(err => \n        console.warn(`Failed to preload critical asset: ${asset}`, err)\n      )\n    );\n\n    await Promise.allSettled(promises);\n  }\n\n  // Get optimized image URL based on device capabilities\n  getOptimizedImageUrl(baseUrl, options = {}) {\n    const { \n      width, \n      height, \n      quality = 80, \n      format = 'auto',\n      devicePixelRatio = window.devicePixelRatio || 1 \n    } = options;\n\n    // If no dimensions provided, return original\n    if (!width && !height) {\n      return baseUrl;\n    }\n\n    // Calculate actual dimensions considering device pixel ratio\n    const actualWidth = width ? Math.round(width * devicePixelRatio) : undefined;\n    const actualHeight = height ? Math.round(height * devicePixelRatio) : undefined;\n\n    // For now, return original URL (would integrate with image optimization service)\n    return baseUrl;\n  }\n\n  // Clear cache\n  clearCache() {\n    this.cache.clear();\n    this.loadingPromises.clear();\n  }\n\n  // Get cache size\n  getCacheSize() {\n    return this.cache.size;\n  }\n}\n\n// Create singleton instance\nconst assetLoader = new AssetLoader();\n\n// React hook for asset loading\nexport const useAsset = (url, options = {}) => {\n  const [asset, setAsset] = React.useState(null);\n  const [loading, setLoading] = React.useState(true);\n  const [error, setError] = React.useState(null);\n\n  React.useEffect(() => {\n    let cancelled = false;\n\n    const loadAsset = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        \n        const optimizedUrl = assetLoader.getOptimizedImageUrl(url, options);\n        const loadedAsset = await assetLoader.loadAsset(optimizedUrl, options.fallback);\n        \n        if (!cancelled) {\n          setAsset(loadedAsset);\n        }\n      } catch (err) {\n        if (!cancelled) {\n          setError(err);\n          // Still set a fallback asset\n          setAsset(assetLoader.generateFallback(url));\n        }\n      } finally {\n        if (!cancelled) {\n          setLoading(false);\n        }\n      }\n    };\n\n    loadAsset();\n\n    return () => {\n      cancelled = true;\n    };\n  }, [url, options.fallback]);\n\n  return { asset, loading, error };\n};\n\n// Component for lazy-loaded images with fallbacks\nexport const LazyImage = ({ \n  src, \n  alt, \n  className = '', \n  fallback,\n  width,\n  height,\n  quality,\n  onLoad,\n  onError,\n  ...props \n}) => {\n  const { asset, loading, error } = useAsset(src, { \n    fallback, \n    width, \n    height, \n    quality \n  });\n\n  React.useEffect(() => {\n    if (!loading && !error && onLoad) {\n      onLoad();\n    }\n    if (error && onError) {\n      onError(error);\n    }\n  }, [loading, error, onLoad, onError]);\n\n  if (loading) {\n    return (\n      <div \n        className={`bg-gray-200 animate-pulse flex items-center justify-center ${className}`}\n        style={{ width, height }}\n        {...props}\n      >\n        <svg className=\"w-8 h-8 text-gray-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n          <path fillRule=\"evenodd\" d=\"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z\" clipRule=\"evenodd\" />\n        </svg>\n      </div>\n    );\n  }\n\n  return (\n    <img\n      src={asset}\n      alt={alt}\n      className={className}\n      width={width}\n      height={height}\n      loading=\"lazy\"\n      {...props}\n    />\n  );\n};\n\n// Initialize preloading when module loads\nif (typeof window !== 'undefined') {\n  assetLoader.preloadCriticalAssets();\n}\n\nexport default assetLoader;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\utils\\batteryOptimization.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\utils\\deviceDetection.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\utils\\gamificationAPI.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'quizData' is defined but never used. Allowed unused args must match /^_/u.","line":286,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":286,"endColumn":43}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import api from './api.js';\n\nconst isDev = Boolean(import.meta.env?.DEV);\nconst devBypass = isDev && import.meta.env?.VITE_DEV_BYPASS_AUTH === 'true';\n\nconst shouldUseOffline = () => {\n  if (devBypass) {\n    return true;\n  }\n\n  return typeof navigator !== 'undefined' && !navigator.onLine;\n};\n\nexport const gamificationAPI = {\n  // User Progress and XP\n  updateUserProgress: async (progressData) => {\n    if (shouldUseOffline()) {\n      return storeProgressOffline(progressData);\n    }\n\n    try {\n      const response = await api.post('/user/progress/update', progressData);\n      return response.data;\n    } catch (error) {\n      console.error('Failed to update user progress:', error);\n      // Offline fallback - store locally\n      return storeProgressOffline(progressData);\n    }\n  },\n\n  getUserProgress: async () => {\n    if (shouldUseOffline()) {\n      return getOfflineProgress();\n    }\n\n    try {\n      const response = await api.get('/user/progress');\n      return response.data;\n    } catch (error) {\n      console.error('Failed to get user progress:', error);\n      return getOfflineProgress();\n    }\n  },\n\n  // XP and Leveling\n  addXP: async (xpAmount, source) => {\n    if (shouldUseOffline()) {\n      return addXPOffline(xpAmount, source);\n    }\n\n    try {\n      const response = await api.post('/user/xp/add', {\n        amount: xpAmount,\n        source,\n        timestamp: new Date().toISOString()\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Failed to add XP:', error);\n      return addXPOffline(xpAmount, source);\n    }\n  },\n\n  checkLevelUp: async (currentXP) => {\n    if (shouldUseOffline()) {\n      return checkLevelUpOffline(currentXP);\n    }\n\n    try {\n      const response = await api.post('/user/level/check', { currentXP });\n      return response.data;\n    } catch (error) {\n      console.error('Failed to check level up:', error);\n      return checkLevelUpOffline(currentXP);\n    }\n  },\n\n  // Achievements\n  checkAchievements: async (quizData) => {\n    if (shouldUseOffline()) {\n      return checkAchievementsOffline(quizData);\n    }\n\n    try {\n      const response = await api.post('/user/achievements/check', quizData);\n      return response.data;\n    } catch (error) {\n      console.error('Failed to check achievements:', error);\n      return checkAchievementsOffline(quizData);\n    }\n  },\n\n  unlockAchievement: async (achievementId) => {\n    if (shouldUseOffline()) {\n      return unlockAchievementOffline(achievementId);\n    }\n\n    try {\n      const response = await api.post('/user/achievements/unlock', {\n        achievementId,\n        timestamp: new Date().toISOString()\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Failed to unlock achievement:', error);\n      return unlockAchievementOffline(achievementId);\n    }\n  },\n\n  getUserAchievements: async () => {\n    if (shouldUseOffline()) {\n      return getOfflineAchievements();\n    }\n\n    try {\n      const response = await api.get('/user/achievements');\n      return response.data;\n    } catch (error) {\n      console.error('Failed to get achievements:', error);\n      return getOfflineAchievements();\n    }\n  },\n\n  // Study Streaks\n  updateStreak: async (studyDate) => {\n    if (shouldUseOffline()) {\n      return updateStreakOffline(studyDate);\n    }\n\n    try {\n      const response = await api.post('/user/streak/update', {\n        studyDate: studyDate || new Date().toISOString()\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Failed to update streak:', error);\n      return updateStreakOffline(studyDate);\n    }\n  },\n\n  useStreakFreeze: async () => {\n    if (shouldUseOffline()) {\n      return applyStreakFreezeOffline();\n    }\n\n    try {\n      const response = await api.post('/user/streak/freeze');\n      return response.data;\n    } catch (error) {\n      console.error('Failed to use streak freeze:', error);\n      return applyStreakFreezeOffline();\n    }\n  },\n\n  getStreak: async () => {\n    if (shouldUseOffline()) {\n      return getOfflineStreak();\n    }\n\n    try {\n      const response = await api.get('/user/streak');\n      return response.data;\n    } catch (error) {\n      console.error('Failed to get streak:', error);\n      return getOfflineStreak();\n    }\n  },\n\n  // Analytics and Statistics\n  getStudyAnalytics: async (timeframe = '30d') => {\n    if (shouldUseOffline()) {\n      return getOfflineAnalytics();\n    }\n\n    try {\n      const response = await api.get(`/user/analytics?timeframe=${timeframe}`);\n      return response.data;\n    } catch (error) {\n      console.error('Failed to get analytics:', error);\n      return getOfflineAnalytics();\n    }\n  },\n\n  // Sync offline data when back online\n  syncOfflineData: async () => {\n    if (shouldUseOffline()) {\n      return { success: true, message: 'Offline mode active' };\n    }\n\n    try {\n      const offlineData = getOfflineGamificationData();\n      if (offlineData && Object.keys(offlineData).length > 0) {\n        const response = await api.post('/user/sync-offline', offlineData);\n        if (response.data.success) {\n          clearOfflineGamificationData();\n        }\n        return response.data;\n      }\n      return { success: true, message: 'No offline data to sync' };\n    } catch (error) {\n      console.error('Failed to sync offline data:', error);\n      return { success: false, error: error.message };\n    }\n  }\n};\n\n// Offline Storage Functions\nconst GAMIFICATION_STORAGE_KEY = 'hsc_gamification_offline';\n\nfunction getOfflineGamificationData() {\n  try {\n    const data = localStorage.getItem(GAMIFICATION_STORAGE_KEY);\n    return data ? JSON.parse(data) : {};\n  } catch (error) {\n    console.error('Error reading offline gamification data:', error);\n    return {};\n  }\n}\n\nfunction saveOfflineGamificationData(data) {\n  try {\n    localStorage.setItem(GAMIFICATION_STORAGE_KEY, JSON.stringify(data));\n  } catch (error) {\n    console.error('Error saving offline gamification data:', error);\n  }\n}\n\nfunction clearOfflineGamificationData() {\n  try {\n    localStorage.removeItem(GAMIFICATION_STORAGE_KEY);\n  } catch (error) {\n    console.error('Error clearing offline gamification data:', error);\n  }\n}\n\n// Offline Implementation Functions\nfunction storeProgressOffline(progressData) {\n  const offlineData = getOfflineGamificationData();\n  offlineData.progress = offlineData.progress || [];\n  offlineData.progress.push({\n    ...progressData,\n    timestamp: new Date().toISOString(),\n    synced: false\n  });\n  saveOfflineGamificationData(offlineData);\n  return { success: true, offline: true };\n}\n\nfunction getOfflineProgress() {\n  // Return mock progress when offline\n  return {\n    currentXP: 2850,\n    currentLevel: 12,\n    xpToNextLevel: 3200,\n    totalQuestions: 847,\n    averageScore: 87,\n    offline: true\n  };\n}\n\nfunction addXPOffline(xpAmount, source) {\n  const offlineData = getOfflineGamificationData();\n  offlineData.xp = offlineData.xp || [];\n  offlineData.xp.push({\n    amount: xpAmount,\n    source,\n    timestamp: new Date().toISOString(),\n    synced: false\n  });\n  saveOfflineGamificationData(offlineData);\n  return { success: true, offline: true, xpAdded: xpAmount };\n}\n\nfunction checkLevelUpOffline(currentXP) {\n  // Simple level calculation\n  const level = Math.floor(currentXP / 250) + 1;\n  const xpToNext = (level * 250) - currentXP;\n  return {\n    currentLevel: level,\n    xpToNextLevel: Math.max(xpToNext, 250),\n    leveledUp: false,\n    offline: true\n  };\n}\n\nfunction checkAchievementsOffline(quizData) {\n  // Return empty achievements when offline\n  return {\n    newAchievements: [],\n    allAchievements: getOfflineAchievements().achievements || [],\n    offline: true\n  };\n}\n\nfunction unlockAchievementOffline(achievementId) {\n  const offlineData = getOfflineGamificationData();\n  offlineData.achievements = offlineData.achievements || [];\n  offlineData.achievements.push({\n    achievementId,\n    timestamp: new Date().toISOString(),\n    synced: false\n  });\n  saveOfflineGamificationData(offlineData);\n  return { success: true, offline: true };\n}\n\nfunction getOfflineAchievements() {\n  return {\n    achievements: [\n      {\n        id: 'first_quiz',\n        name: 'First Steps',\n        icon: '',\n        description: 'Completed your first quiz',\n        earned: true,\n        earnedDate: new Date().toISOString()\n      }\n    ],\n    offline: true\n  };\n}\n\nfunction updateStreakOffline(studyDate) {\n  const offlineData = getOfflineGamificationData();\n  offlineData.streaks = offlineData.streaks || [];\n  offlineData.streaks.push({\n    studyDate: studyDate || new Date().toISOString(),\n    timestamp: new Date().toISOString(),\n    synced: false\n  });\n  saveOfflineGamificationData(offlineData);\n  return { success: true, offline: true };\n}\n\nfunction applyStreakFreezeOffline() {\n  const offlineData = getOfflineGamificationData();\n  offlineData.streakFreezes = offlineData.streakFreezes || [];\n  offlineData.streakFreezes.push({\n    timestamp: new Date().toISOString(),\n    synced: false\n  });\n  saveOfflineGamificationData(offlineData);\n  return { success: true, freezesRemaining: 2, offline: true };\n}\n\nfunction getOfflineStreak() {\n  return {\n    currentStreak: 7,\n    longestStreak: 15,\n    lastStudyDate: new Date().toISOString(),\n    freezesAvailable: 3,\n    offline: true\n  };\n}\n\nfunction getOfflineAnalytics() {\n  return {\n    questionsAnswered: 245,\n    averageScore: 87,\n    timeStudied: 3600, // seconds\n    subjectsStudied: ['biology', 'chemistry'],\n    streakHistory: [1, 2, 3, 4, 5, 6, 7],\n    offline: true\n  };\n}\n\n// Auto-sync when coming back online\nif (typeof window !== 'undefined') {\n  window.addEventListener('online', () => {\n    console.log('Back online - syncing gamification data...');\n    gamificationAPI.syncOfflineData().then(result => {\n      if (result.success) {\n        console.log('Gamification data synced successfully');\n      }\n    });\n  });\n}\n\nexport default gamificationAPI;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\utils\\healthCheck.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'authAPI' is defined but never used. Allowed unused vars must match /^React$/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Health check utility for verifying all systems are operational\nimport { authAPI } from './api';\nimport { quizAPI } from './quizAPI';\nimport { gamificationAPI } from './gamificationAPI';\n\nexport const healthCheck = {\n  // Test all API endpoints\n  async testAPIs() {\n    const results = {\n      mainAPI: { status: 'unknown', error: null },\n      biologyAPI: { status: 'unknown', error: null },\n      chemistryAPI: { status: 'unknown', error: null },\n      gamificationAPI: { status: 'unknown', error: null }\n    };\n\n    // Test main authentication API\n    try {\n      const response = await fetch('http://localhost:3004/api/health', {\n        method: 'GET',\n        timeout: 5000\n      });\n      results.mainAPI.status = response.ok ? 'healthy' : 'error';\n    } catch (error) {\n      results.mainAPI.status = 'offline';\n      results.mainAPI.error = error.message;\n      console.log('Main API (port 3001) is offline - using fallbacks');\n    }\n\n    // Test Biology API\n    try {\n      const response = await fetch('http://localhost:3002/health', {\n        method: 'GET',\n        timeout: 5000\n      });\n      results.biologyAPI.status = response.ok ? 'healthy' : 'error';\n    } catch (error) {\n      results.biologyAPI.status = 'offline';\n      results.biologyAPI.error = error.message;\n      console.log('Biology API (port 3002) is offline - using mock data');\n    }\n\n    // Test Chemistry API\n    try {\n      const response = await fetch('http://localhost:3003/health', {\n        method: 'GET',\n        timeout: 5000\n      });\n      results.chemistryAPI.status = response.ok ? 'healthy' : 'error';\n    } catch (error) {\n      results.chemistryAPI.status = 'offline';\n      results.chemistryAPI.error = error.message;\n      console.log('Chemistry API (port 3003) is offline - using mock data');\n    }\n\n    // Test Gamification system\n    try {\n      const mockQuizResults = {\n        correctAnswers: 8,\n        totalQuestions: 10,\n        timeSpent: 600,\n        subject: 'biology',\n        difficulty: 'medium'\n      };\n      const response = await gamificationAPI.updateUserProgress(mockQuizResults);\n      results.gamificationAPI.status = response.success ? 'healthy' : 'error';\n    } catch (error) {\n      results.gamificationAPI.status = 'error';\n      results.gamificationAPI.error = error.message;\n    }\n\n    return results;\n  },\n\n  // Test responsive design breakpoints\n  testResponsiveDesign() {\n    const breakpoints = {\n      mobile: window.matchMedia('(max-width: 768px)').matches,\n      tablet: window.matchMedia('(min-width: 769px) and (max-width: 1024px)').matches,\n      desktop: window.matchMedia('(min-width: 1025px)').matches,\n      touchSupport: 'ontouchstart' in window,\n      orientation: window.innerHeight > window.innerWidth ? 'portrait' : 'landscape'\n    };\n\n    const viewportInfo = {\n      width: window.innerWidth,\n      height: window.innerHeight,\n      devicePixelRatio: window.devicePixelRatio || 1,\n      colorDepth: window.screen.colorDepth,\n      pixelDepth: window.screen.pixelDepth\n    };\n\n    const performance = {\n      memory: window.performance?.memory ? {\n        used: Math.round(window.performance.memory.usedJSHeapSize / 1024 / 1024),\n        total: Math.round(window.performance.memory.totalJSHeapSize / 1024 / 1024),\n        limit: Math.round(window.performance.memory.jsHeapSizeLimit / 1024 / 1024)\n      } : null,\n      connection: navigator.connection ? {\n        effectiveType: navigator.connection.effectiveType,\n        downlink: navigator.connection.downlink,\n        rtt: navigator.connection.rtt\n      } : null\n    };\n\n    return {\n      breakpoints,\n      viewport: viewportInfo,\n      performance,\n      accessibility: {\n        reducedMotion: window.matchMedia('(prefers-reduced-motion: reduce)').matches,\n        highContrast: window.matchMedia('(prefers-contrast: high)').matches,\n        darkMode: window.matchMedia('(prefers-color-scheme: dark)').matches\n      }\n    };\n  },\n\n  // Test core app functionality\n  async testCoreFeatures() {\n    const features = {\n      localStorage: false,\n      sessionStorage: false,\n      indexedDB: false,\n      serviceWorker: false,\n      notifications: false,\n      geolocation: false,\n      camera: false,\n      vibration: false,\n      fullscreen: false,\n      webGL: false\n    };\n\n    // Test localStorage\n    try {\n      localStorage.setItem('test', 'test');\n      localStorage.removeItem('test');\n      features.localStorage = true;\n    } catch (e) {\n      console.warn('localStorage not available');\n    }\n\n    // Test sessionStorage\n    try {\n      sessionStorage.setItem('test', 'test');\n      sessionStorage.removeItem('test');\n      features.sessionStorage = true;\n    } catch (e) {\n      console.warn('sessionStorage not available');\n    }\n\n    // Test IndexedDB\n    features.indexedDB = 'indexedDB' in window;\n\n    // Test Service Worker\n    features.serviceWorker = 'serviceWorker' in navigator;\n\n    // Test Notifications\n    features.notifications = 'Notification' in window;\n\n    // Test Geolocation\n    features.geolocation = 'geolocation' in navigator;\n\n    // Test Camera/Media\n    features.camera = 'mediaDevices' in navigator && 'getUserMedia' in navigator.mediaDevices;\n\n    // Test Vibration\n    features.vibration = 'vibrate' in navigator;\n\n    // Test Fullscreen\n    features.fullscreen = 'requestFullscreen' in document.documentElement;\n\n    // Test WebGL\n    try {\n      const canvas = document.createElement('canvas');\n      features.webGL = !!(canvas.getContext('webgl') || canvas.getContext('experimental-webgl'));\n    } catch (e) {\n      features.webGL = false;\n    }\n\n    return features;\n  },\n\n  // Test quiz system functionality\n  async testQuizSystem() {\n    const results = {\n      biologyQuestions: false,\n      chemistryQuestions: false,\n      answerSubmission: false,\n      explanations: false,\n      gamificationUpdate: false\n    };\n\n    try {\n      // Test Biology questions\n      const bioQuestions = await quizAPI.biology.getQuestions(5, 'medium', 5);\n      results.biologyQuestions = bioQuestions.success && bioQuestions.questions.length > 0;\n\n      // Test Chemistry questions\n      const chemQuestions = await quizAPI.chemistry.getQuestions(6, 'easy', 5);\n      results.chemistryQuestions = chemQuestions.success && chemQuestions.questions.length > 0;\n\n      // Test answer submission (mock)\n      if (bioQuestions.questions && bioQuestions.questions.length > 0) {\n        const submission = await quizAPI.biology.submitAnswer(\n          bioQuestions.questions[0].id,\n          bioQuestions.questions[0].correctAnswer\n        );\n        results.answerSubmission = submission !== null;\n      }\n\n      // Test explanations\n      if (bioQuestions.questions && bioQuestions.questions.length > 0) {\n        const explanation = await quizAPI.biology.getExplanation(bioQuestions.questions[0].id);\n        results.explanations = explanation !== null;\n      }\n\n      // Test gamification update\n      const mockResults = {\n        correctAnswers: 4,\n        totalQuestions: 5,\n        timeSpent: 300,\n        subject: 'biology',\n        difficulty: 'medium'\n      };\n      const gamificationUpdate = await gamificationAPI.updateUserProgress(mockResults);\n      results.gamificationUpdate = gamificationUpdate.success || gamificationUpdate.offline;\n\n    } catch (error) {\n      console.error('Quiz system test error:', error);\n    }\n\n    return results;\n  },\n\n  // Run comprehensive system check\n  async runFullDiagnostic() {\n    console.log(' Starting comprehensive system diagnostic...');\n\n    const diagnostic = {\n      timestamp: new Date().toISOString(),\n      apis: await this.testAPIs(),\n      responsive: this.testResponsiveDesign(),\n      features: await this.testCoreFeatures(),\n      quizSystem: await this.testQuizSystem(),\n      browserInfo: {\n        userAgent: navigator.userAgent,\n        language: navigator.language,\n        platform: navigator.platform,\n        vendor: navigator.vendor,\n        cookieEnabled: navigator.cookieEnabled,\n        onLine: navigator.onLine\n      }\n    };\n\n    // Generate summary\n    const summary = {\n      overallHealth: 'healthy',\n      criticalIssues: [],\n      warnings: [],\n      recommendations: []\n    };\n\n    // Check for critical issues\n    if (!diagnostic.features.localStorage) {\n      summary.criticalIssues.push('localStorage not available - offline functionality disabled');\n      summary.overallHealth = 'degraded';\n    }\n\n    if (!diagnostic.quizSystem.biologyQuestions && !diagnostic.quizSystem.chemistryQuestions) {\n      summary.criticalIssues.push('No quiz questions available');\n      summary.overallHealth = 'critical';\n    }\n\n    // Check for warnings\n    if (diagnostic.apis.mainAPI.status === 'offline') {\n      summary.warnings.push('Main API offline - using fallback functionality');\n    }\n\n    if (diagnostic.apis.biologyAPI.status === 'offline') {\n      summary.warnings.push('Biology API offline - using mock questions');\n    }\n\n    if (diagnostic.apis.chemistryAPI.status === 'offline') {\n      summary.warnings.push('Chemistry API offline - using mock questions');\n    }\n\n    // Add recommendations\n    if (diagnostic.responsive.performance.memory && diagnostic.responsive.performance.memory.used > 50) {\n      summary.recommendations.push('High memory usage detected - consider refreshing the app');\n    }\n\n    if (diagnostic.responsive.performance.connection && diagnostic.responsive.performance.connection.effectiveType === 'slow-2g') {\n      summary.recommendations.push('Slow network detected - offline mode recommended');\n    }\n\n    diagnostic.summary = summary;\n\n    // Log results\n    console.log(' System Diagnostic Results:', diagnostic);\n\n    if (summary.overallHealth === 'healthy') {\n      console.log(' All systems operational!');\n    } else if (summary.overallHealth === 'degraded') {\n      console.log(' System operational with some limitations');\n    } else {\n      console.log(' Critical issues detected');\n    }\n\n    return diagnostic;\n  }\n};\n\n// Auto-run diagnostic in development\nif (process.env.NODE_ENV === 'development') {\n  // Run diagnostic after page load\n  window.addEventListener('load', () => {\n    setTimeout(() => {\n      healthCheck.runFullDiagnostic();\n    }, 2000);\n  });\n}\n\nexport default healthCheck;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\utils\\iconGenerator.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\utils\\mobileGestures.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\utils\\pathwayUtils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\utils\\performanceTesting.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used. Allowed unused args must match /^_/u.","line":192,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":192,"endColumn":47},{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used. Allowed unused args must match /^_/u.","line":196,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":196,"endColumn":45},{"ruleId":"no-unused-vars","severity":1,"message":"'result' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":242,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":242,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\n\n// Performance testing utilities for mobile devices\n\nexport class MobilePerformanceTester {\n  constructor() {\n    this.results = {\n      deviceInfo: {},\n      performanceMetrics: {},\n      featureSupport: {},\n      benchmarks: {}\n    };\n\n    this.init();\n  }\n\n  async init() {\n    await this.detectDevice();\n    this.setupPerformanceMonitoring();\n  }\n\n  async detectDevice() {\n    const userAgent = navigator.userAgent;\n    const deviceInfo = {\n      userAgent,\n      platform: navigator.platform,\n      vendor: navigator.vendor,\n      language: navigator.language,\n      cookieEnabled: navigator.cookieEnabled,\n      onLine: navigator.onLine,\n      hardwareConcurrency: navigator.hardwareConcurrency || 'unknown',\n      maxTouchPoints: navigator.maxTouchPoints || 0,\n      deviceMemory: navigator.deviceMemory || 'unknown',\n      connection: navigator.connection ? {\n        effectiveType: navigator.connection.effectiveType,\n        downlink: navigator.connection.downlink,\n        rtt: navigator.connection.rtt,\n        saveData: navigator.connection.saveData\n      } : 'unknown'\n    };\n\n    // Screen information\n    deviceInfo.screen = {\n      width: screen.width,\n      height: screen.height,\n      availWidth: screen.availWidth,\n      availHeight: screen.availHeight,\n      colorDepth: screen.colorDepth,\n      pixelDepth: screen.pixelDepth,\n      orientation: screen.orientation?.type || 'unknown',\n      devicePixelRatio: window.devicePixelRatio || 1\n    };\n\n    // Viewport information\n    deviceInfo.viewport = {\n      width: window.innerWidth,\n      height: window.innerHeight,\n      availWidth: window.screen.availWidth,\n      availHeight: window.screen.availHeight\n    };\n\n    // Battery information\n    if ('getBattery' in navigator) {\n      try {\n        const battery = await navigator.getBattery();\n        deviceInfo.battery = {\n          level: battery.level,\n          charging: battery.charging,\n          chargingTime: battery.chargingTime,\n          dischargingTime: battery.dischargingTime\n        };\n      } catch (error) {\n        deviceInfo.battery = 'unavailable';\n      }\n    }\n\n    // Device classification\n    deviceInfo.deviceClass = this.classifyDevice(deviceInfo);\n\n    this.results.deviceInfo = deviceInfo;\n    return deviceInfo;\n  }\n\n  classifyDevice(info) {\n    const { hardwareConcurrency, deviceMemory, connection, screen } = info;\n\n    // Budget device indicators\n    const isBudgetDevice = (\n      hardwareConcurrency <= 4 ||\n      deviceMemory <= 2 ||\n      (connection !== 'unknown' && connection.effectiveType === '2g') ||\n      screen.width <= 360 ||\n      screen.devicePixelRatio <= 1.5\n    );\n\n    // Mid-range device indicators\n    const isMidRange = (\n      hardwareConcurrency <= 6 &&\n      deviceMemory <= 4 &&\n      screen.width <= 414 &&\n      screen.devicePixelRatio <= 2.5\n    );\n\n    if (isBudgetDevice) return 'budget';\n    if (isMidRange) return 'mid-range';\n    return 'high-end';\n  }\n\n  setupPerformanceMonitoring() {\n    // Frame rate monitoring\n    this.monitorFrameRate();\n\n    // Memory monitoring\n    this.monitorMemoryUsage();\n\n    // Network monitoring\n    this.monitorNetworkPerformance();\n\n    // Touch response monitoring\n    this.monitorTouchPerformance();\n  }\n\n  monitorFrameRate() {\n    let frameCount = 0;\n    let lastTime = performance.now();\n    const frameTimes = [];\n\n    const measureFrame = (currentTime) => {\n      frameCount++;\n      frameTimes.push(currentTime - lastTime);\n\n      if (frameCount >= 60) { // Measure every 60 frames\n        const avgFrameTime = frameTimes.reduce((a, b) => a + b, 0) / frameTimes.length;\n        const fps = 1000 / avgFrameTime;\n\n        this.results.performanceMetrics.fps = {\n          current: Math.round(fps),\n          average: this.results.performanceMetrics.fps?.average\n            ? (this.results.performanceMetrics.fps.average + fps) / 2\n            : fps,\n          frameTime: avgFrameTime\n        };\n\n        frameCount = 0;\n        frameTimes.length = 0;\n      }\n\n      lastTime = currentTime;\n      requestAnimationFrame(measureFrame);\n    };\n\n    requestAnimationFrame(measureFrame);\n  }\n\n  monitorMemoryUsage() {\n    if (!('memory' in performance)) return;\n\n    const checkMemory = () => {\n      const memory = performance.memory;\n      this.results.performanceMetrics.memory = {\n        used: Math.round(memory.usedJSHeapSize / 1024 / 1024), // MB\n        total: Math.round(memory.totalJSHeapSize / 1024 / 1024), // MB\n        limit: Math.round(memory.jsHeapSizeLimit / 1024 / 1024), // MB\n        usage: Math.round((memory.usedJSHeapSize / memory.jsHeapSizeLimit) * 100) // %\n      };\n    };\n\n    checkMemory();\n    setInterval(checkMemory, 5000); // Check every 5 seconds\n  }\n\n  monitorNetworkPerformance() {\n    if (!navigator.connection) return;\n\n    const updateNetworkInfo = () => {\n      this.results.performanceMetrics.network = {\n        effectiveType: navigator.connection.effectiveType,\n        downlink: navigator.connection.downlink,\n        rtt: navigator.connection.rtt,\n        saveData: navigator.connection.saveData\n      };\n    };\n\n    updateNetworkInfo();\n    navigator.connection.addEventListener('change', updateNetworkInfo);\n  }\n\n  monitorTouchPerformance() {\n    let touchStartTime = 0;\n    const touchResponseTimes = [];\n\n    document.addEventListener('touchstart', (e) => {\n      touchStartTime = performance.now();\n    }, { passive: true });\n\n    document.addEventListener('touchend', (e) => {\n      if (touchStartTime) {\n        const responseTime = performance.now() - touchStartTime;\n        touchResponseTimes.push(responseTime);\n\n        // Keep only last 10 measurements\n        if (touchResponseTimes.length > 10) {\n          touchResponseTimes.shift();\n        }\n\n        const avgResponseTime = touchResponseTimes.reduce((a, b) => a + b, 0) / touchResponseTimes.length;\n\n        this.results.performanceMetrics.touch = {\n          averageResponseTime: Math.round(avgResponseTime),\n          lastResponseTime: Math.round(responseTime),\n          samples: touchResponseTimes.length\n        };\n      }\n    }, { passive: true });\n  }\n\n  async runBenchmarks() {\n    console.log('Running performance benchmarks...');\n\n    // CPU benchmark\n    await this.benchmarkCPU();\n\n    // Rendering benchmark\n    await this.benchmarkRendering();\n\n    // Animation benchmark\n    await this.benchmarkAnimations();\n\n    // Network benchmark\n    await this.benchmarkNetwork();\n\n    return this.results.benchmarks;\n  }\n\n  async benchmarkCPU() {\n    const iterations = 100000;\n    const start = performance.now();\n\n    // Simple CPU-intensive task\n    let result = 0;\n    for (let i = 0; i < iterations; i++) {\n      result += Math.sqrt(i) * Math.sin(i) * Math.cos(i);\n    }\n\n    const end = performance.now();\n    this.results.benchmarks.cpu = {\n      iterations,\n      timeMs: Math.round(end - start),\n      score: Math.round(iterations / (end - start))\n    };\n  }\n\n  async benchmarkRendering() {\n    return new Promise((resolve) => {\n      const canvas = document.createElement('canvas');\n      canvas.width = 300;\n      canvas.height = 300;\n      document.body.appendChild(canvas);\n\n      const ctx = canvas.getContext('2d');\n      const iterations = 1000;\n      let currentIteration = 0;\n      const start = performance.now();\n\n      const renderFrame = () => {\n        // Clear canvas\n        ctx.clearRect(0, 0, 300, 300);\n\n        // Draw complex shapes\n        for (let i = 0; i < 10; i++) {\n          ctx.beginPath();\n          ctx.arc(Math.random() * 300, Math.random() * 300, Math.random() * 50, 0, Math.PI * 2);\n          ctx.fillStyle = `hsl(${Math.random() * 360}, 50%, 50%)`;\n          ctx.fill();\n        }\n\n        currentIteration++;\n        if (currentIteration < iterations) {\n          requestAnimationFrame(renderFrame);\n        } else {\n          const end = performance.now();\n          document.body.removeChild(canvas);\n\n          this.results.benchmarks.rendering = {\n            iterations,\n            timeMs: Math.round(end - start),\n            fps: Math.round(iterations / ((end - start) / 1000))\n          };\n\n          resolve();\n        }\n      };\n\n      requestAnimationFrame(renderFrame);\n    });\n  }\n\n  async benchmarkAnimations() {\n    return new Promise((resolve) => {\n      const element = document.createElement('div');\n      element.style.cssText = `\n        position: fixed;\n        top: -100px;\n        left: -100px;\n        width: 50px;\n        height: 50px;\n        background: red;\n        transform: translateZ(0);\n      `;\n      document.body.appendChild(element);\n\n      const iterations = 100;\n      let currentIteration = 0;\n      const start = performance.now();\n\n      const animate = () => {\n        element.style.transform = `translateX(${Math.sin(currentIteration / 10) * 50}px) translateY(${Math.cos(currentIteration / 10) * 50}px) translateZ(0)`;\n\n        currentIteration++;\n        if (currentIteration < iterations) {\n          requestAnimationFrame(animate);\n        } else {\n          const end = performance.now();\n          document.body.removeChild(element);\n\n          this.results.benchmarks.animation = {\n            iterations,\n            timeMs: Math.round(end - start),\n            fps: Math.round(iterations / ((end - start) / 1000))\n          };\n\n          resolve();\n        }\n      };\n\n      requestAnimationFrame(animate);\n    });\n  }\n\n  async benchmarkNetwork() {\n    const start = performance.now();\n\n    try {\n      // Test with a small image\n      await fetch('/vite.svg', { cache: 'no-cache' });\n      const end = performance.now();\n\n      this.results.benchmarks.network = {\n        latency: Math.round(end - start),\n        success: true\n      };\n    } catch (error) {\n      this.results.benchmarks.network = {\n        latency: -1,\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  checkFeatureSupport() {\n    const features = {\n      serviceWorker: 'serviceWorker' in navigator,\n      pushNotifications: 'PushManager' in window,\n      notifications: 'Notification' in window,\n      geolocation: 'geolocation' in navigator,\n      battery: 'getBattery' in navigator,\n      deviceMemory: 'deviceMemory' in navigator,\n      connection: 'connection' in navigator,\n      webGL: !!document.createElement('canvas').getContext('webgl'),\n      webGL2: !!document.createElement('canvas').getContext('webgl2'),\n      indexedDB: 'indexedDB' in window,\n      localStorage: 'localStorage' in window,\n      sessionStorage: 'sessionStorage' in window,\n      touchEvents: 'ontouchstart' in window,\n      pointerEvents: 'onpointerdown' in window,\n      deviceOrientation: 'DeviceOrientationEvent' in window,\n      vibration: 'vibrate' in navigator,\n      speechSynthesis: 'speechSynthesis' in window,\n      speechRecognition: 'SpeechRecognition' in window || 'webkitSpeechRecognition' in window,\n      camera: 'mediaDevices' in navigator && 'getUserMedia' in navigator.mediaDevices,\n      fullscreen: 'requestFullscreen' in document.documentElement,\n      intersectionObserver: 'IntersectionObserver' in window,\n      mutationObserver: 'MutationObserver' in window,\n      performanceObserver: 'PerformanceObserver' in window\n    };\n\n    this.results.featureSupport = features;\n    return features;\n  }\n\n  generateReport() {\n    const { deviceInfo, performanceMetrics, featureSupport, benchmarks } = this.results;\n\n    const recommendations = [];\n\n    // Device-specific recommendations\n    if (deviceInfo.deviceClass === 'budget') {\n      recommendations.push('Enable battery saver mode');\n      recommendations.push('Disable complex animations');\n      recommendations.push('Reduce image quality');\n      recommendations.push('Limit background processes');\n    }\n\n    // Performance-based recommendations\n    if (performanceMetrics.fps?.current < 30) {\n      recommendations.push('Reduce animation complexity');\n      recommendations.push('Implement frame rate limiting');\n    }\n\n    if (performanceMetrics.memory?.usage > 80) {\n      recommendations.push('Implement memory cleanup');\n      recommendations.push('Reduce cached data');\n    }\n\n    if (performanceMetrics.touch?.averageResponseTime > 50) {\n      recommendations.push('Optimize touch event handlers');\n      recommendations.push('Reduce DOM manipulation during touch');\n    }\n\n    return {\n      deviceInfo,\n      performanceMetrics,\n      featureSupport,\n      benchmarks,\n      recommendations,\n      overallScore: this.calculateOverallScore(),\n      timestamp: new Date().toISOString()\n    };\n  }\n\n  calculateOverallScore() {\n    let score = 100;\n\n    // Deduct points based on performance\n    if (this.results.performanceMetrics.fps?.current < 30) score -= 20;\n    if (this.results.performanceMetrics.memory?.usage > 80) score -= 15;\n    if (this.results.performanceMetrics.touch?.averageResponseTime > 50) score -= 10;\n\n    // Deduct points for budget device\n    if (this.results.deviceInfo.deviceClass === 'budget') score -= 15;\n\n    // Add points for feature support\n    const supportedFeatures = Object.values(this.results.featureSupport || {}).filter(Boolean).length;\n    score += Math.min(supportedFeatures, 20);\n\n    return Math.max(0, Math.min(100, Math.round(score)));\n  }\n\n  getRecommendations() {\n    const report = this.generateReport();\n    return report.recommendations;\n  }\n}\n\n// Global instance\nexport const performanceTester = new MobilePerformanceTester();\n\n// React hook for performance testing\nexport const usePerformanceTesting = () => {\n  const [testResults, setTestResults] = useState(null);\n  const [isRunning, setIsRunning] = useState(false);\n\n  const runFullTest = async () => {\n    setIsRunning(true);\n\n    await performanceTester.checkFeatureSupport();\n    await performanceTester.runBenchmarks();\n\n    const report = performanceTester.generateReport();\n    setTestResults(report);\n    setIsRunning(false);\n\n    return report;\n  };\n\n  return {\n    testResults,\n    isRunning,\n    runFullTest,\n    getRecommendations: performanceTester.getRecommendations.bind(performanceTester)\n  };\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\utils\\personalizedFeedback.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'questionType' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":228,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":228,"endColumn":19},{"ruleId":"no-unused-vars","severity":1,"message":"'score' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":229,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":229,"endColumn":12},{"ruleId":"no-unused-vars","severity":1,"message":"'timeSpent' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":230,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":230,"endColumn":16},{"ruleId":"no-unused-vars","severity":1,"message":"'attempts' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":231,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":231,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'difficulty' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":232,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":232,"endColumn":17},{"ruleId":"no-unused-vars","severity":1,"message":"'confidence' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":233,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":233,"endColumn":17},{"ruleId":"no-unused-vars","severity":1,"message":"'recentPerformance' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":234,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":234,"endColumn":24},{"ruleId":"no-unused-vars","severity":1,"message":"'overallTrends' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":235,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":235,"endColumn":20},{"ruleId":"no-unused-vars","severity":1,"message":"'difficulty' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":251,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":251,"endColumn":51},{"ruleId":"no-unused-vars","severity":1,"message":"'overallTrends' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":284,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":284,"endColumn":52},{"ruleId":"no-unused-vars","severity":1,"message":"'difficulty' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":312,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":312,"endColumn":44},{"ruleId":"no-unused-vars","severity":1,"message":"'overallTrends' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":351,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":351,"endColumn":57},{"ruleId":"no-unused-vars","severity":1,"message":"'overallTrends' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":433,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":433,"endColumn":52},{"ruleId":"no-unused-vars","severity":1,"message":"'recentActivity' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":493,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":493,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useMemo } from 'react';\n\nclass PersonalizedFeedbackEngine {\n  constructor() {\r\n    this.feedbackTemplates = {\r\n      encouragement: [\r\n        \"Great job on improving your {topic} performance!\",\r\n        \"You're showing excellent progress in {topic}!\",\r\n        \"Keep up the fantastic work with {topic}!\",\r\n        \"Your dedication to {topic} is really paying off!\",\r\n        \"Impressive improvement in {topic} - you're on the right track!\"\r\n      ],\r\n      \r\n      constructive: [\r\n        \"Let's focus on strengthening your understanding of {topic}.\",\r\n        \"Consider spending more time reviewing {topic} concepts.\",\r\n        \"Your {topic} skills could benefit from additional practice.\",\r\n        \"Try breaking down {topic} problems into smaller steps.\",\r\n        \"Consider using different study methods for {topic}.\"\r\n      ],\r\n      \r\n      strategic: [\r\n        \"Try tackling {topic} questions more systematically.\",\r\n        \"Consider using visual aids to better understand {topic}.\",\r\n        \"Practice {topic} concepts daily in short sessions.\",\r\n        \"Connect {topic} to real-world examples you're familiar with.\",\r\n        \"Review {topic} fundamentals before attempting harder problems.\"\r\n      ],\r\n      \r\n      motivational: [\r\n        \"Every expert was once a beginner - keep practicing {topic}!\",\r\n        \"Your effort in {topic} will definitely pay off in your HSC!\",\r\n        \"Remember, understanding {topic} is a journey, not a destination.\",\r\n        \"You're building valuable {topic} skills step by step!\",\r\n        \"Each {topic} question you attempt makes you stronger!\"\r\n      ],\r\n      \r\n      celebration: [\r\n        \" Outstanding achievement in {topic}!\",\r\n        \" You've mastered {topic} - incredible work!\",\r\n        \" Your {topic} expertise is truly impressive!\",\r\n        \" Perfect performance in {topic} - you're amazing!\",\r\n        \" You've hit your {topic} targets - well done!\"\r\n      ]\r\n    };\r\n    \r\n    this.studyTips = {\r\n      'IQ1.1': {\r\n        topic: 'Sexual and Asexual Reproduction',\r\n        tips: [\r\n          'Create comparison charts between sexual and asexual reproduction methods',\r\n          'Use diagrams to visualize different reproductive strategies',\r\n          'Practice identifying reproductive methods in various organisms',\r\n          'Connect reproductive strategies to evolutionary advantages'\r\n        ]\r\n      },\r\n      'IQ1.2': {\r\n        topic: 'Reproductive Technologies',\r\n        tips: [\r\n          'Understand the science behind each reproductive technology',\r\n          'Consider ethical implications and social impacts',\r\n          'Practice comparing different assisted reproductive techniques',\r\n          'Connect technologies to biological principles'\r\n        ]\r\n      },\r\n      'IQ1.3': {\r\n        topic: 'Reproductive Hormones',\r\n        tips: [\r\n          'Create hormone pathway diagrams',\r\n          'Practice tracing feedback loops in reproductive systems',\r\n          'Use mnemonics to remember hormone functions',\r\n          'Connect hormones to observable reproductive behaviors'\r\n        ]\r\n      },\r\n      'IQ2.1': {\r\n        topic: 'Genetic Variation Sources',\r\n        tips: [\r\n          'Visualize crossing over and independent assortment',\r\n          'Practice calculating genetic diversity outcomes',\r\n          'Use Punnett squares for complex genetic scenarios',\r\n          'Connect genetic principles to population genetics'\r\n        ]\r\n      },\r\n      'IQ2.2': {\r\n        topic: 'Chromosome Structure and Inheritance',\r\n        tips: [\r\n          'Study chromosome structure at different cell cycle stages',\r\n          'Practice karyotype analysis and interpretation',\r\n          'Connect chromosome abnormalities to genetic disorders',\r\n          'Understand the relationship between DNA packaging and gene expression'\r\n        ]\r\n      },\r\n      'IQ3.1': {\r\n        topic: 'DNA and RNA Structure',\r\n        tips: [\r\n          'Build 3D models of DNA and RNA structures',\r\n          'Practice identifying structural differences between DNA and RNA',\r\n          'Connect structure to function in nucleic acids',\r\n          'Use visual aids to understand base pairing rules'\r\n        ]\r\n      },\r\n      'IQ3.2': {\r\n        topic: 'Gene Expression and Regulation',\r\n        tips: [\r\n          'Create flowcharts of transcription and translation',\r\n          'Practice identifying regulatory elements in gene sequences',\r\n          'Connect gene expression to cellular responses',\r\n          'Study examples of gene regulation in different organisms'\r\n        ]\r\n      },\r\n      'IQ3.3': {\r\n        topic: 'Biotechnology Applications',\r\n        tips: [\r\n          'Understand the scientific principles behind biotechnology tools',\r\n          'Practice analyzing biotechnology applications and their impacts',\r\n          'Consider ethical implications of genetic technologies',\r\n          'Connect biotechnology to current research and applications'\r\n        ]\r\n      },\r\n      'IQ4.1': {\r\n        topic: 'Evolutionary Processes',\r\n        tips: [\r\n          'Use examples to understand natural selection mechanisms',\r\n          'Practice identifying evolutionary pressures in different environments',\r\n          'Connect genetic variation to evolutionary outcomes',\r\n          'Study case studies of evolution in action'\r\n        ]\r\n      },\r\n      'IQ4.2': {\r\n        topic: 'Evolution Evidence',\r\n        tips: [\r\n          'Analyze different types of evolutionary evidence',\r\n          'Practice interpreting phylogenetic trees and fossil records',\r\n          'Connect molecular evidence to evolutionary relationships',\r\n          'Study comparative anatomy and embryology examples'\r\n        ]\r\n      },\r\n      'IQ5.1': {\r\n        topic: 'Population Genetics',\r\n        tips: [\r\n          'Practice Hardy-Weinberg equilibrium calculations',\r\n          'Understand factors affecting allele frequencies',\r\n          'Connect population genetics to evolutionary outcomes',\r\n          'Study real-world examples of population genetic changes'\r\n        ]\r\n      },\r\n      'IQ5.2': {\r\n        topic: 'Species and Speciation',\r\n        tips: [\r\n          'Understand different species concepts and their applications',\r\n          'Practice identifying speciation mechanisms',\r\n          'Study examples of speciation in different environments',\r\n          'Connect reproductive isolation to species formation'\r\n        ]\r\n      }\r\n    };\r\n    \r\n    this.difficultyAdjustments = {\r\n      struggling: {\r\n        recommendations: [\r\n          'Start with easier questions to build confidence',\r\n          'Take more time to understand basic concepts',\r\n          'Use visual aids and diagrams',\r\n          'Break complex topics into smaller parts',\r\n          'Seek additional help or resources'\r\n        ]\r\n      },\r\n      developing: {\r\n        recommendations: [\r\n          'Practice regularly with medium difficulty questions',\r\n          'Focus on understanding rather than memorizing',\r\n          'Connect new concepts to what you already know',\r\n          'Use active learning techniques',\r\n          'Review mistakes carefully'\r\n        ]\r\n      },\r\n      competent: {\r\n        recommendations: [\r\n          'Challenge yourself with harder questions',\r\n          'Focus on application and analysis',\r\n          'Practice explaining concepts to others',\r\n          'Look for connections between topics',\r\n          'Time yourself on practice questions'\r\n        ]\r\n      },\r\n      proficient: {\r\n        recommendations: [\r\n          'Tackle the most challenging questions',\r\n          'Focus on synthesis and evaluation',\r\n          'Help others learn the material',\r\n          'Explore advanced applications',\r\n          'Prepare for exam conditions'\r\n        ]\r\n      }\r\n    };\r\n    \r\n    this.personalityAdaptations = {\r\n      visual: {\r\n        suggestions: [\r\n          'Use diagrams, charts, and visual representations',\r\n          'Create mind maps for complex topics',\r\n          'Watch educational videos',\r\n          'Use color coding in your notes'\r\n        ]\r\n      },\r\n      auditory: {\r\n        suggestions: [\r\n          'Read concepts aloud',\r\n          'Discuss topics with study partners',\r\n          'Use educational podcasts',\r\n          'Create audio recordings of key points'\r\n        ]\r\n      },\r\n      kinesthetic: {\r\n        suggestions: [\r\n          'Use hands-on activities and models',\r\n          'Take breaks during study sessions',\r\n          'Walk while reviewing notes',\r\n          'Use physical manipulatives for concepts'\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  generatePersonalizedFeedback(performanceData) {\r\n    const {\r\n      dotPoint,\r\n      questionType,\r\n      score,\r\n      timeSpent,\r\n      attempts,\r\n      difficulty,\r\n      confidence,\r\n      recentPerformance = [],\r\n      overallTrends = {}\r\n    } = performanceData;\r\n\r\n    const feedback = {\r\n      primary: this.generatePrimaryFeedback(performanceData),\r\n      encouragement: this.generateEncouragement(performanceData),\r\n      suggestions: this.generateSuggestions(performanceData),\r\n      nextSteps: this.generateNextSteps(performanceData),\r\n      studyTips: this.getStudyTips(dotPoint, performanceData),\r\n      motivationalMessage: this.generateMotivationalMessage(performanceData)\r\n    };\r\n\r\n    return feedback;\r\n  }\r\n\r\n  generatePrimaryFeedback(data) {\r\n    const { score, attempts, timeSpent, difficulty, confidence } = data;\r\n    \r\n    let feedback = '';\r\n    \r\n    if (score >= 90) {\r\n      feedback = this.getRandomTemplate('celebration', data.dotPoint);\r\n    } else if (score >= 75) {\r\n      feedback = this.getRandomTemplate('encouragement', data.dotPoint);\r\n    } else if (score >= 60) {\r\n      feedback = this.getRandomTemplate('constructive', data.dotPoint);\r\n    } else {\r\n      feedback = this.getRandomTemplate('strategic', data.dotPoint);\r\n    }\r\n    \r\n    // Add specific performance observations\r\n    if (attempts > 3) {\r\n      feedback += ` Take your time to think through each question carefully.`;\r\n    }\r\n    \r\n    if (timeSpent > 120000) { // 2 minutes\r\n      feedback += ` Consider reviewing the fundamental concepts to improve your response time.`;\r\n    } else if (timeSpent < 30000 && score < 70) { // 30 seconds\r\n      feedback += ` Slow down and read questions more carefully for better accuracy.`;\r\n    }\r\n    \r\n    if (confidence && confidence < 3) {\r\n      feedback += ` Building confidence comes with practice - you're on the right path!`;\r\n    }\r\n    \r\n    return feedback;\r\n  }\r\n\r\n  generateEncouragement(data) {\r\n    const { score, recentPerformance, overallTrends } = data;\r\n    const encouragements = [];\r\n    \r\n    if (recentPerformance.length >= 3) {\r\n      const recentScores = recentPerformance.slice(-3).map(p => p.score);\r\n      const trend = this.calculateTrend(recentScores);\r\n      \r\n      if (trend > 5) {\r\n        encouragements.push(\"Your recent performance shows great improvement!\");\r\n      } else if (trend < -5) {\r\n        encouragements.push(\"Don't worry about recent setbacks - focus on understanding the concepts.\");\r\n      } else {\r\n        encouragements.push(\"You're maintaining consistent performance - keep it up!\");\r\n      }\r\n    }\r\n    \r\n    if (score >= 80) {\r\n      encouragements.push(\"Your strong performance shows you're mastering this topic!\");\r\n    } else if (score >= 60) {\r\n      encouragements.push(\"You're making good progress - keep practicing!\");\r\n    } else {\r\n      encouragements.push(\"Every attempt helps you learn - stay persistent!\");\r\n    }\r\n    \r\n    return encouragements;\r\n  }\r\n\r\n  generateSuggestions(data) {\r\n    const { score, questionType, difficulty, timeSpent, attempts } = data;\r\n    const suggestions = [];\r\n    \r\n    // Performance-based suggestions\r\n    if (score < 60) {\r\n      suggestions.push(...this.difficultyAdjustments.struggling.recommendations);\r\n    } else if (score < 75) {\r\n      suggestions.push(...this.difficultyAdjustments.developing.recommendations);\r\n    } else if (score < 85) {\r\n      suggestions.push(...this.difficultyAdjustments.competent.recommendations);\r\n    } else {\r\n      suggestions.push(...this.difficultyAdjustments.proficient.recommendations);\r\n    }\r\n    \r\n    // Question type specific suggestions\r\n    if (questionType === 'multiple-select' && score < 70) {\r\n      suggestions.push('For multiple-select questions, read each option carefully and consider all possibilities.');\r\n    } else if (questionType === 'drag-sequence' && score < 70) {\r\n      suggestions.push('For sequence questions, think about the logical order of biological processes.');\r\n    } else if (questionType === 'virtual-microscope' && score < 70) {\r\n      suggestions.push('Practice identifying cellular structures at different magnifications.');\r\n    }\r\n    \r\n    // Time-based suggestions\r\n    if (timeSpent > 120000) {\r\n      suggestions.push('Try to work more efficiently by reviewing key concepts beforehand.');\r\n    } else if (timeSpent < 30000 && score < 80) {\r\n      suggestions.push('Take more time to carefully consider each answer option.');\r\n    }\r\n    \r\n    // Attempt-based suggestions\r\n    if (attempts > 2) {\r\n      suggestions.push('Consider reviewing the topic thoroughly before attempting more questions.');\r\n    }\r\n    \r\n    return this.shuffleArray(suggestions).slice(0, 3);\r\n  }\r\n\r\n  generateNextSteps(data) {\r\n    const { dotPoint, score, questionType, overallTrends } = data;\r\n    const nextSteps = [];\r\n    \r\n    if (score >= 85) {\r\n      nextSteps.push(`Try more challenging ${questionType} questions`);\r\n      nextSteps.push(`Explore advanced applications of ${this.studyTips[dotPoint]?.topic || dotPoint}`);\r\n      nextSteps.push('Help others learn this topic to reinforce your understanding');\r\n    } else if (score >= 70) {\r\n      nextSteps.push(`Practice more ${questionType} questions at this difficulty level`);\r\n      nextSteps.push(`Review specific areas where you made mistakes`);\r\n      nextSteps.push(`Connect this topic to other related ${dotPoint} concepts`);\r\n    } else {\r\n      nextSteps.push(`Start with easier questions to build confidence`);\r\n      nextSteps.push(`Review fundamental concepts for ${this.studyTips[dotPoint]?.topic || dotPoint}`);\r\n      nextSteps.push(`Use additional learning resources like diagrams and videos`);\r\n    }\r\n    \r\n    // Add topic-specific next steps\r\n    if (this.studyTips[dotPoint]) {\r\n      const topicTips = this.studyTips[dotPoint].tips;\r\n      nextSteps.push(topicTips[Math.floor(Math.random() * topicTips.length)]);\r\n    }\r\n    \r\n    return nextSteps.slice(0, 3);\r\n  }\r\n\r\n  getStudyTips(dotPoint, data) {\r\n    const { score, questionType } = data;\r\n    const baseTips = this.studyTips[dotPoint]?.tips || [];\r\n    const customTips = [];\r\n    \r\n    // Add performance-specific tips\r\n    if (score < 60) {\r\n      customTips.push('Focus on understanding basic concepts before attempting practice questions');\r\n      customTips.push('Use multiple learning resources to reinforce understanding');\r\n    } else if (score < 80) {\r\n      customTips.push('Practice applying concepts in different contexts');\r\n      customTips.push('Create connections between different topics');\r\n    } else {\r\n      customTips.push('Challenge yourself with analysis and synthesis questions');\r\n      customTips.push('Look for real-world applications of these concepts');\r\n    }\r\n    \r\n    // Add question type specific tips\r\n    const questionTypeTips = this.getQuestionTypeSpecificTips(questionType);\r\n    \r\n    return [...baseTips, ...customTips, ...questionTypeTips].slice(0, 4);\r\n  }\r\n\r\n  getQuestionTypeSpecificTips(questionType) {\r\n    const tips = {\r\n      'multiple-choice': [\r\n        'Eliminate obviously wrong answers first',\r\n        'Look for key words that make options incorrect',\r\n        'Consider all options carefully before choosing'\r\n      ],\r\n      'multiple-select': [\r\n        'Read each option independently',\r\n        'Consider partial relationships and exceptions',\r\n        'Don\\'t assume there\\'s only one correct answer'\r\n      ],\r\n      'drag-sequence': [\r\n        'Think about the logical flow of biological processes',\r\n        'Consider cause and effect relationships',\r\n        'Use your knowledge of biological timelines'\r\n      ],\r\n      'image-hotspot': [\r\n        'Study anatomical diagrams regularly',\r\n        'Practice identifying structures at different scales',\r\n        'Connect structure to function in biological systems'\r\n      ],\r\n      'virtual-microscope': [\r\n        'Practice with real microscope images',\r\n        'Learn to identify structures at different magnifications',\r\n        'Understand the principles behind different staining techniques'\r\n      ]\r\n    };\r\n    \r\n    return tips[questionType] || [];\r\n  }\r\n\r\n  generateMotivationalMessage(data) {\r\n    const { score, recentPerformance, overallTrends } = data;\r\n    const messages = [];\r\n    \r\n    if (score >= 90) {\r\n      messages.push(\"You're demonstrating mastery-level understanding! \");\r\n      messages.push(\"Your hard work is clearly paying off! \");\r\n    } else if (score >= 75) {\r\n      messages.push(\"You're on track for HSC success! \");\r\n      messages.push(\"Your understanding is developing excellently! \");\r\n    } else if (score >= 60) {\r\n      messages.push(\"Keep building - you're making real progress! \");\r\n      messages.push(\"Every question brings you closer to mastery! \");\r\n    } else {\r\n      messages.push(\"Learning is a journey - you're taking important steps! \");\r\n      messages.push(\"Persistence is key to success - keep going! \");\r\n    }\r\n    \r\n    if (recentPerformance.length >= 3) {\r\n      const recentScores = recentPerformance.slice(-3).map(p => p.score);\r\n      const improvement = this.calculateTrend(recentScores);\r\n      \r\n      if (improvement > 10) {\r\n        messages.push(\"Your improvement trend is fantastic! \");\r\n      }\r\n    }\r\n    \r\n    return messages[Math.floor(Math.random() * messages.length)];\r\n  }\r\n\r\n  getRandomTemplate(category, topic) {\r\n    const templates = this.feedbackTemplates[category];\r\n    const template = templates[Math.floor(Math.random() * templates.length)];\r\n    return template.replace('{topic}', this.studyTips[topic]?.topic || topic);\r\n  }\r\n\r\n  calculateTrend(scores) {\r\n    if (scores.length < 2) return 0;\r\n    \r\n    const firstHalf = scores.slice(0, Math.floor(scores.length / 2));\r\n    const secondHalf = scores.slice(Math.floor(scores.length / 2));\r\n    \r\n    const firstAvg = firstHalf.reduce((sum, score) => sum + score, 0) / firstHalf.length;\r\n    const secondAvg = secondHalf.reduce((sum, score) => sum + score, 0) / secondHalf.length;\r\n    \r\n    return secondAvg - firstAvg;\r\n  }\r\n\r\n  shuffleArray(array) {\r\n    const shuffled = [...array];\r\n    for (let i = shuffled.length - 1; i > 0; i--) {\r\n      const j = Math.floor(Math.random() * (i + 1));\r\n      [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\r\n    }\r\n    return shuffled;\r\n  }\r\n\r\n  generateProgressReport(studentData) {\r\n    const { \r\n      overallPerformance,\r\n      topicPerformance,\r\n      recentActivity,\r\n      strengths,\r\n      improvements,\r\n      goals \r\n    } = studentData;\r\n\r\n    const report = {\r\n      summary: this.generateProgressSummary(overallPerformance),\r\n      achievements: this.identifyAchievements(topicPerformance, strengths),\r\n      focusAreas: this.identifyFocusAreas(improvements, topicPerformance),\r\n      recommendations: this.generateStudyRecommendations(studentData),\r\n      goalProgress: this.assessGoalProgress(goals, overallPerformance),\r\n      motivationalNote: this.generateProgressMotivation(overallPerformance)\r\n    };\r\n\r\n    return report;\r\n  }\r\n\r\n  generateProgressSummary(performance) {\r\n    const { averageScore, totalQuestions, studyTime, streak } = performance;\r\n    \r\n    let summary = '';\r\n    \r\n    if (averageScore >= 85) {\r\n      summary = `Excellent progress! You've maintained a ${averageScore}% average across ${totalQuestions} questions.`;\r\n    } else if (averageScore >= 70) {\r\n      summary = `Good progress! Your ${averageScore}% average shows solid understanding across ${totalQuestions} questions.`;\r\n    } else {\r\n      summary = `You're building your knowledge base with ${totalQuestions} questions completed. Keep practicing!`;\r\n    }\r\n    \r\n    if (streak > 0) {\r\n      summary += ` Your ${streak}-day study streak shows great consistency!`;\r\n    }\r\n    \r\n    if (studyTime > 0) {\r\n      const hours = Math.floor(studyTime / 60);\r\n      const minutes = studyTime % 60;\r\n      summary += ` Total study time: ${hours}h ${minutes}m.`;\r\n    }\r\n    \r\n    return summary;\r\n  }\r\n\r\n  identifyAchievements(topicPerformance, strengths) {\r\n    const achievements = [];\r\n    \r\n    Object.entries(topicPerformance).forEach(([topic, performance]) => {\r\n      if (performance.averageScore >= 90) {\r\n        achievements.push(` Mastered ${this.studyTips[topic]?.topic || topic}`);\r\n      } else if (performance.averageScore >= 80) {\r\n        achievements.push(` Excellent performance in ${this.studyTips[topic]?.topic || topic}`);\r\n      }\r\n      \r\n      if (performance.improvement > 20) {\r\n        achievements.push(` Significant improvement in ${this.studyTips[topic]?.topic || topic}`);\r\n      }\r\n    });\r\n    \r\n    strengths.forEach(strength => {\r\n      achievements.push(` Strong in ${strength}`);\r\n    });\r\n    \r\n    return achievements;\r\n  }\r\n\r\n  identifyFocusAreas(improvements, topicPerformance) {\r\n    const focusAreas = [];\r\n    \r\n    improvements.forEach(area => {\r\n      focusAreas.push({\r\n        area: area,\r\n        suggestion: this.getFocusAreaSuggestion(area),\r\n        priority: this.calculatePriority(area, topicPerformance)\r\n      });\r\n    });\r\n    \r\n    return focusAreas.sort((a, b) => b.priority - a.priority);\r\n  }\r\n\r\n  getFocusAreaSuggestion(area) {\r\n    const suggestions = {\r\n      'Cell Division': 'Practice identifying phases of mitosis and meiosis with diagrams',\r\n      'DNA Replication': 'Focus on understanding the molecular mechanisms and enzymes involved',\r\n      'Protein Synthesis': 'Create flowcharts of transcription and translation processes',\r\n      'Evolution': 'Study examples of natural selection and evolutionary evidence',\r\n      'Genetics': 'Practice solving genetic crosses and inheritance patterns'\r\n    };\r\n    \r\n    return suggestions[area] || 'Review fundamental concepts and practice related questions';\r\n  }\r\n\r\n  calculatePriority(area, topicPerformance) {\r\n    // Higher priority for areas with lower performance and higher question frequency\r\n    const areaPerformance = Object.values(topicPerformance).find(p => \r\n      p.topic && p.topic.toLowerCase().includes(area.toLowerCase())\r\n    );\r\n    \r\n    if (!areaPerformance) return 1;\r\n    \r\n    const scorePriority = (100 - areaPerformance.averageScore) / 100;\r\n    const frequencyPriority = areaPerformance.questionCount / 100;\r\n    \r\n    return scorePriority * 0.7 + frequencyPriority * 0.3;\r\n  }\r\n\r\n  generateStudyRecommendations(studentData) {\r\n    const { overallPerformance, learningStyle, timePreferences } = studentData;\r\n    const recommendations = [];\r\n    \r\n    // Performance-based recommendations\r\n    if (overallPerformance.averageScore < 60) {\r\n      recommendations.push('Focus on fundamental concepts before attempting practice questions');\r\n      recommendations.push('Consider forming a study group or seeking additional help');\r\n    } else if (overallPerformance.averageScore < 80) {\r\n      recommendations.push('Balance concept review with regular practice questions');\r\n      recommendations.push('Focus on understanding rather than memorization');\r\n    } else {\r\n      recommendations.push('Challenge yourself with more complex applications');\r\n      recommendations.push('Consider teaching others to reinforce your understanding');\r\n    }\r\n    \r\n    // Learning style adaptations\r\n    if (learningStyle) {\r\n      recommendations.push(...this.personalityAdaptations[learningStyle]?.suggestions || []);\r\n    }\r\n    \r\n    // Time-based recommendations\r\n    if (timePreferences === 'morning') {\r\n      recommendations.push('Schedule challenging topics for your morning study sessions');\r\n    } else if (timePreferences === 'evening') {\r\n      recommendations.push('Use evening sessions for review and consolidation');\r\n    }\r\n    \r\n    return recommendations.slice(0, 5);\r\n  }\r\n\r\n  assessGoalProgress(goals, performance) {\r\n    if (!goals || goals.length === 0) return null;\r\n    \r\n    const progress = goals.map(goal => {\r\n      let completion = 0;\r\n      \r\n      if (goal.type === 'score') {\r\n        completion = Math.min(100, (performance.averageScore / goal.target) * 100);\r\n      } else if (goal.type === 'questions') {\r\n        completion = Math.min(100, (performance.totalQuestions / goal.target) * 100);\r\n      } else if (goal.type === 'streak') {\r\n        completion = Math.min(100, (performance.streak / goal.target) * 100);\r\n      }\r\n      \r\n      return {\r\n        ...goal,\r\n        completion: Math.round(completion),\r\n        onTrack: completion >= 80\r\n      };\r\n    });\r\n    \r\n    return progress;\r\n  }\r\n\r\n  generateProgressMotivation(performance) {\r\n    const motivations = [\r\n      \"Your consistent effort is building towards HSC success! \",\r\n      \"Every question you complete strengthens your understanding! \",\r\n      \"You're developing the skills needed for academic excellence! \",\r\n      \"Your learning journey is preparing you for future challenges! \",\r\n      \"Keep building your knowledge - you're on the right path! \"\r\n    ];\r\n    \r\n    if (performance.averageScore >= 85) {\r\n      motivations.push(\"Your outstanding performance shows true mastery! \");\r\n    } else if (performance.improvement > 0) {\r\n      motivations.push(\"Your improvement shows that hard work pays off! \");\r\n    }\r\n    \r\n    return motivations[Math.floor(Math.random() * motivations.length)];\r\n  }\r\n}\r\n\r\nexport default PersonalizedFeedbackEngine;\r\n\r\nexport const usePersonalizedFeedback = () => {\n  const engine = useMemo(() => new PersonalizedFeedbackEngine(), []);\n  \n  return {\n    generateFeedback: (performanceData) => \n      engine.generatePersonalizedFeedback(performanceData),\n    \r\n    generateProgressReport: (studentData) => \r\n      engine.generateProgressReport(studentData),\r\n    \r\n    getStudyTips: (dotPoint, performanceData) => \r\n      engine.getStudyTips(dotPoint, performanceData),\r\n    \r\n    generateMotivation: (performanceData) => \r\n      engine.generateMotivationalMessage(performanceData)\r\n  };\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\utils\\progressAPI.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\utils\\quizAPI.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'learningPathways' is defined but never used. Allowed unused vars must match /^React$/u.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import api from './api.js';\nimport { learningPathways, getTopicById } from '../data/learningPathways.js';\n\nexport const quizAPI = {\n  // Biology Agent API calls (port 3002)\n  biology: {\n    // Get quiz questions for a specific module and difficulty\n    getQuestions: async (module, difficulty, count = 10) => {\n      try {\n        const response = await fetch(`http://localhost:3002/quiz/biology/module/${module}`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n          },\n          body: JSON.stringify({\n            difficulty,\n            count,\n            format: 'multiple-choice'\n          })\n        });\n        const result = await response.json();\n        if (result.success === false) {\n          throw new Error(result.error?.message || 'Biology API error');\n        }\n        return result;\n      } catch (error) {\n        console.log('Biology API not available, using mock data');\n        return getMockBiologyQuestions(module, difficulty, count);\n      }\n    },\n\n    // Submit answer for validation and explanation\n    submitAnswer: async (questionId, answer) => {\n      try {\n        const response = await fetch(`http://localhost:3002/quiz/biology/submit`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n          },\n          body: JSON.stringify({\n            questionId,\n            answer,\n            timestamp: new Date().toISOString()\n          })\n        });\n        return await response.json();\n      } catch (error) {\n        console.log('Biology submission API not available');\n        return { success: false, error: error.message };\n      }\n    },\n\n    // Get detailed explanation for a question\n    getExplanation: async (questionId) => {\n      try {\n        const response = await fetch(`http://localhost:3002/quiz/biology/explanation/${questionId}`, {\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        return await response.json();\n      } catch (error) {\n        console.log('Biology explanation API not available');\n        return null;\n      }\n    }\n  },\n\n  // Chemistry Agent API calls (port 3003)\n  chemistry: {\n    // Get quiz questions for a specific module and difficulty\n    getQuestions: async (module, difficulty, count = 10) => {\n      try {\n        const response = await fetch(`http://localhost:3003/quiz/chemistry/module/${module}`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n          },\n          body: JSON.stringify({\n            difficulty,\n            count,\n            format: 'multiple-choice'\n          })\n        });\n        const result = await response.json();\n        if (result.success === false) {\n          throw new Error(result.error?.message || 'Chemistry API error');\n        }\n        return result;\n      } catch (error) {\n        console.log('Chemistry API not available, using mock data');\n        return getMockChemistryQuestions(module, difficulty, count);\n      }\n    },\n\n    // Submit answer for validation (handles chemical equations)\n    submitAnswer: async (questionId, answer, workingOut = null) => {\n      try {\n        const response = await fetch(`http://localhost:3003/quiz/chemistry/submit`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n          },\n          body: JSON.stringify({\n            questionId,\n            answer,\n            workingOut,\n            timestamp: new Date().toISOString()\n          })\n        });\n        return await response.json();\n      } catch (error) {\n        console.log('Chemistry submission API not available');\n        return { success: false, error: error.message };\n      }\n    },\n\n    // Get detailed explanation with chemical equations\n    getExplanation: async (questionId) => {\n      try {\n        const response = await fetch(`http://localhost:3003/quiz/chemistry/explanation/${questionId}`, {\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        return await response.json();\n      } catch (error) {\n        console.log('Chemistry explanation API not available');\n        return null;\n      }\n    }\n  },\n\n  // Record quiz results\n  recordResults: async (quizResults) => {\n    try {\n      const response = await api.post('/user/quiz-results', quizResults);\n      return response.data;\n    } catch (error) {\n      console.error('Failed to record quiz results:', error);\n      return { success: false, error: error.message };\n    }\n  },\n\n  // Get user quiz history\n  getQuizHistory: async (subject = null, limit = 10) => {\n    try {\n      const params = new URLSearchParams();\n      if (subject) params.append('subject', subject);\n      params.append('limit', limit.toString());\n\n      const response = await api.get(`/user/quiz-history?${params}`);\n      return response.data;\n    } catch (error) {\n      console.error('Failed to get quiz history:', error);\n      return [];\n    }\n  },\n\n  // Get comprehensive quiz results for statistics\n  getAllQuizResults: async () => {\n    try {\n      const response = await api.get('/user/quiz-results');\n      return Array.isArray(response.data) ? response.data : [];\n    } catch (error) {\n      console.error('Failed to get all quiz results:', error);\n      return [];\n    }\n  },\n\n  // Get quiz results by date range\n  getQuizResultsByDateRange: async (startDate, endDate, subject = null) => {\n    try {\n      const params = new URLSearchParams();\n      params.append('startDate', startDate);\n      params.append('endDate', endDate);\n      if (subject) params.append('subject', subject);\n\n      const response = await api.get(`/user/quiz-results/range?${params}`);\n      return Array.isArray(response.data) ? response.data : [];\n    } catch (error) {\n      console.error('Failed to get quiz results by date range:', error);\n      return [];\n    }\n  },\n\n  // Get quiz statistics summary\n  getQuizStatistics: async () => {\n    try {\n      const response = await api.get('/user/quiz-results/statistics');\n      return response.data || {};\n    } catch (error) {\n      console.error('Failed to get quiz statistics:', error);\n      return {};\n    }\n  },\n\n  // Get questions for a specific topic (pathway-based)\n  getTopicQuestions: async (subjectId, topicId, count = 10) => {\n    const topic = getTopicById(subjectId, topicId);\n    if (!topic) {\n      return { success: false, error: 'Topic not found' };\n    }\n\n    try {\n      // Try API first\n      const api = quizAPI[subjectId];\n      if (api) {\n        // For pathway topics, we'll use module-based API with topic filtering\n        const moduleId = topic.module || 5; // fallback to module 5\n        const response = await api.getQuestions(moduleId, topic.difficulty, count);\n        \n        if (response.success && response.questions) {\n          // Filter questions to match topic content if possible\n          return {\n            success: true,\n            questions: response.questions.slice(0, Math.min(count, topic.questions))\n          };\n        }\n      }\n    } catch (error) {\n      console.log(`${subjectId} API not available for topic ${topicId}, using mock data`);\n    }\n\n    // Fallback to mock data for specific topic\n    return getTopicMockQuestions(subjectId, topicId, count);\n  },\n\n  // Get mixed questions from completed topics (for random quizzes)\n  getMixedQuestionsFromCompletedTopics: async (subjectId, completedTopics, count = 10) => {\n    if (!completedTopics || completedTopics.length === 0) {\n      return { success: false, error: 'No completed topics available' };\n    }\n\n    const allQuestions = [];\n    \n    // Collect questions from all completed topics\n    for (const topicId of completedTopics) {\n      const topicQuestions = await quizAPI.getTopicQuestions(subjectId, topicId, 5); // Get 5 from each topic\n      if (topicQuestions.success && topicQuestions.questions) {\n        allQuestions.push(...topicQuestions.questions);\n      }\n    }\n\n    if (allQuestions.length === 0) {\n      return { success: false, error: 'No questions available from completed topics' };\n    }\n\n    // Shuffle and select requested count\n    const shuffled = allQuestions.sort(() => Math.random() - 0.5);\n    return {\n      success: true,\n      questions: shuffled.slice(0, count)\n    };\n  }\n};\n\n// Mock data for development when APIs are not available\nconst getMockBiologyQuestions = (module, difficulty, count) => {\n  const questions = [\n    // Module 5 - Heredity questions\n    {\n      id: 'bio_m5_1',\n      type: 'multiple-choice',\n      question: 'What is the primary function of DNA polymerase during DNA replication?',\n      options: [\n        'Unwinding the DNA double helix',\n        'Adding nucleotides to the growing DNA strand',\n        'Proofreading for errors in the DNA sequence',\n        'Joining Okazaki fragments together'\n      ],\n      correctAnswer: 1,\n      explanation: 'DNA polymerase is responsible for adding complementary nucleotides to the growing DNA strand during replication. It reads the template strand and adds the appropriate nucleotides in the 5\\' to 3\\' direction.',\n      difficulty: 'medium',\n      module: 5,\n      timeLimit: 120\n    },\n    {\n      id: 'bio_m5_2',\n      type: 'multiple-choice',\n      question: 'What type of bond connects the two strands of DNA?',\n      options: [\n        'Covalent bonds',\n        'Ionic bonds',\n        'Hydrogen bonds',\n        'Van der Waals forces'\n      ],\n      correctAnswer: 2,\n      explanation: 'Hydrogen bonds form between complementary base pairs (A-T and G-C) to hold the two strands of DNA together in the double helix structure.',\n      difficulty: 'easy',\n      module: 5,\n      timeLimit: 120\n    },\n    {\n      id: 'bio_m5_3',\n      type: 'multiple-choice',\n      question: 'In which direction does DNA replication occur?',\n      options: [\n        '3\\' to 5\\' direction only',\n        '5\\' to 3\\' direction only',\n        'Both 3\\' to 5\\' and 5\\' to 3\\' directions',\n        'Direction depends on the chromosome'\n      ],\n      correctAnswer: 1,\n      explanation: 'DNA replication occurs in the 5\\' to 3\\' direction. This means nucleotides are added to the 3\\' end of the growing strand.',\n      difficulty: 'medium',\n      module: 5,\n      timeLimit: 120\n    },\n    // Module 6 - Genetic Change questions\n    {\n      id: 'bio_m6_1',\n      type: 'multiple-choice',\n      question: 'Which of the following best describes natural selection?',\n      options: [\n        'The process by which organisms acquire new traits during their lifetime',\n        'The survival and reproduction of individuals with favorable traits',\n        'The random changes in gene frequencies in a population',\n        'The movement of genes between different populations'\n      ],\n      correctAnswer: 1,\n      explanation: 'Natural selection is the process where individuals with traits that are advantageous for survival and reproduction in their environment are more likely to pass these traits to their offspring.',\n      difficulty: 'easy',\n      module: 6,\n      timeLimit: 120\n    },\n    {\n      id: 'bio_m6_2',\n      type: 'multiple-choice',\n      question: 'What is genetic drift?',\n      options: [\n        'Directed changes in allele frequency due to environmental pressure',\n        'Random changes in allele frequency in a population',\n        'The movement of alleles between populations',\n        'The creation of new alleles through mutation'\n      ],\n      correctAnswer: 1,\n      explanation: 'Genetic drift refers to random changes in allele frequencies that occur in populations, especially smaller ones, due to chance events during reproduction.',\n      difficulty: 'medium',\n      module: 6,\n      timeLimit: 120\n    },\n    {\n      id: 'bio_m6_3',\n      type: 'multiple-choice',\n      question: 'Which mechanism provides the raw material for evolution?',\n      options: [\n        'Natural selection',\n        'Genetic drift',\n        'Mutation',\n        'Gene flow'\n      ],\n      correctAnswer: 2,\n      explanation: 'Mutations provide the raw material for evolution by creating new alleles and genetic variations that other evolutionary forces can act upon.',\n      difficulty: 'medium',\n      module: 6,\n      timeLimit: 120\n    },\n    // Module 7 - Infectious Disease questions\n    {\n      id: 'bio_m7_1',\n      type: 'multiple-choice',\n      question: 'Which type of pathogen causes malaria?',\n      options: [\n        'Virus',\n        'Bacterium',\n        'Protozoan',\n        'Fungus'\n      ],\n      correctAnswer: 2,\n      explanation: 'Malaria is caused by Plasmodium species, which are protozoans. These single-celled parasites are transmitted through mosquito bites and infect red blood cells.',\n      difficulty: 'easy',\n      module: 7,\n      timeLimit: 120\n    },\n    {\n      id: 'bio_m7_2',\n      type: 'multiple-choice',\n      question: 'What is the primary function of antibodies?',\n      options: [\n        'To directly kill pathogens',\n        'To identify and mark pathogens for destruction',\n        'To prevent pathogen reproduction',\n        'To repair damaged tissues'\n      ],\n      correctAnswer: 1,\n      explanation: 'Antibodies primarily function to bind to specific antigens on pathogens, marking them for destruction by other immune cells like macrophages and neutrophils.',\n      difficulty: 'medium',\n      module: 7,\n      timeLimit: 120\n    },\n    {\n      id: 'bio_m7_3',\n      type: 'multiple-choice',\n      question: 'Which cells are responsible for immunological memory?',\n      options: [\n        'Neutrophils',\n        'Memory B and T cells',\n        'Macrophages',\n        'Natural killer cells'\n      ],\n      correctAnswer: 1,\n      explanation: 'Memory B cells and memory T cells are responsible for immunological memory, allowing for faster and stronger immune responses upon re-exposure to the same pathogen.',\n      difficulty: 'medium',\n      module: 7,\n      timeLimit: 120\n    },\n    // Module 8 - Non-infectious Disease questions\n    {\n      id: 'bio_m8_1',\n      type: 'multiple-choice',\n      question: 'What is a key characteristic of cancer cells?',\n      options: [\n        'They divide at a normal rate',\n        'They respond to growth inhibition signals',\n        'They can invade surrounding tissues',\n        'They undergo programmed cell death easily'\n      ],\n      correctAnswer: 2,\n      explanation: 'Cancer cells have the ability to invade surrounding tissues and potentially metastasize to other parts of the body. This invasiveness is one of the hallmarks that distinguishes cancer cells from normal cells.',\n      difficulty: 'medium',\n      module: 8,\n      timeLimit: 120\n    },\n    {\n      id: 'bio_m8_2',\n      type: 'multiple-choice',\n      question: 'Which of the following is a risk factor for cardiovascular disease?',\n      options: [\n        'Regular exercise',\n        'High HDL cholesterol',\n        'High blood pressure',\n        'Adequate sleep'\n      ],\n      correctAnswer: 2,\n      explanation: 'High blood pressure (hypertension) is a major risk factor for cardiovascular disease as it puts additional strain on the heart and blood vessels.',\n      difficulty: 'easy',\n      module: 8,\n      timeLimit: 120\n    },\n    {\n      id: 'bio_m8_3',\n      type: 'multiple-choice',\n      question: 'What is the difference between Type 1 and Type 2 diabetes?',\n      options: [\n        'Type 1 affects adults, Type 2 affects children',\n        'Type 1 is autoimmune, Type 2 is lifestyle-related',\n        'Type 1 is curable, Type 2 is not',\n        'Type 1 affects the kidneys, Type 2 affects the liver'\n      ],\n      correctAnswer: 1,\n      explanation: 'Type 1 diabetes is an autoimmune condition where the immune system destroys insulin-producing cells, while Type 2 diabetes is primarily lifestyle-related and involves insulin resistance.',\n      difficulty: 'hard',\n      module: 8,\n      timeLimit: 120\n    }\n  ];\n\n  return {\n    questions: questions\n      .filter(q => q.module === module)\n      .filter(q => difficulty === 'all' || q.difficulty === difficulty)\n      .slice(0, count),\n    success: true\n  };\n};\n\nconst getMockChemistryQuestions = (module, difficulty, count) => {\n  const questions = [\n    // Module 5 - Equilibrium & Acid Reactions questions\n    {\n      id: 'chem_m5_1',\n      type: 'multiple-choice',\n      question: 'What is the pH of a 0.01 M solution of hydrochloric acid (HCl)?',\n      options: [\n        'pH = 1',\n        'pH = 2',\n        'pH = 12',\n        'pH = 14'\n      ],\n      correctAnswer: 1,\n      explanation: 'HCl is a strong acid that completely ionizes. For a 0.01 M HCl solution: [H] = 0.01 M = 10 M. Therefore, pH = -log[H] = -log(10) = 2.',\n      difficulty: 'medium',\n      module: 5,\n      timeLimit: 120\n    },\n    {\n      id: 'chem_m5_2',\n      type: 'multiple-choice',\n      question: 'According to Le Chatelier\\'s principle, what happens when temperature is increased in an exothermic reaction?',\n      options: [\n        'The equilibrium shifts to the right',\n        'The equilibrium shifts to the left',\n        'The equilibrium position remains unchanged',\n        'The reaction rate increases but equilibrium is unchanged'\n      ],\n      correctAnswer: 1,\n      explanation: 'For an exothermic reaction, increasing temperature shifts the equilibrium to the left (toward reactants) to counteract the temperature increase by absorbing heat.',\n      difficulty: 'medium',\n      module: 5,\n      timeLimit: 120\n    },\n    {\n      id: 'chem_m5_3',\n      type: 'multiple-choice',\n      question: 'What is a buffer solution?',\n      options: [\n        'A solution that maintains constant pH',\n        'A solution with a pH of exactly 7',\n        'A solution that resists changes in pH',\n        'A solution with equal concentrations of acid and base'\n      ],\n      correctAnswer: 2,\n      explanation: 'A buffer solution resists changes in pH when small amounts of acid or base are added. It consists of a weak acid and its conjugate base (or weak base and its conjugate acid).',\n      difficulty: 'easy',\n      module: 5,\n      timeLimit: 120\n    },\n    // Module 6 - Acid/Base Reactions questions\n    {\n      id: 'chem_m6_1',\n      type: 'multiple-choice',\n      question: 'In a titration, what is the equivalence point?',\n      options: [\n        'When the indicator changes color',\n        'When equal moles of acid and base have reacted',\n        'When the pH equals 7',\n        'When the solution becomes neutral'\n      ],\n      correctAnswer: 1,\n      explanation: 'The equivalence point occurs when the number of moles of acid equals the number of moles of base added. This may not necessarily be at pH 7, especially for weak acid-strong base or strong acid-weak base titrations.',\n      difficulty: 'medium',\n      module: 6,\n      timeLimit: 120\n    },\n    {\n      id: 'chem_m6_2',\n      type: 'multiple-choice',\n      question: 'What is the difference between a strong acid and a weak acid?',\n      options: [\n        'Strong acids have higher concentrations',\n        'Strong acids completely ionize in water',\n        'Strong acids have lower pH values',\n        'Strong acids are more corrosive'\n      ],\n      correctAnswer: 1,\n      explanation: 'Strong acids completely ionize (dissociate) in water, releasing all their hydrogen ions, while weak acids only partially ionize.',\n      difficulty: 'easy',\n      module: 6,\n      timeLimit: 120\n    },\n    {\n      id: 'chem_m6_3',\n      type: 'multiple-choice',\n      question: 'What happens at the equivalence point of a weak acid-strong base titration?',\n      options: [\n        'pH = 7',\n        'pH > 7',\n        'pH < 7',\n        'pH is unpredictable'\n      ],\n      correctAnswer: 1,\n      explanation: 'At the equivalence point of a weak acid-strong base titration, the pH > 7 because the salt formed undergoes hydrolysis to produce OH ions.',\n      difficulty: 'hard',\n      module: 6,\n      timeLimit: 120\n    },\n    // Module 7 - Organic Chemistry questions\n    {\n      id: 'chem_m7_1',\n      type: 'multiple-choice',\n      question: 'What functional group is present in alcohols?',\n      options: [\n        'Carbonyl (-C=O)',\n        'Hydroxyl (-OH)',\n        'Carboxyl (-COOH)',\n        'Amino (-NH)'\n      ],\n      correctAnswer: 1,\n      explanation: 'Alcohols contain the hydroxyl functional group (-OH) attached to a carbon atom. This functional group is responsible for many of the characteristic properties of alcohols.',\n      difficulty: 'easy',\n      module: 7,\n      timeLimit: 120\n    },\n    {\n      id: 'chem_m7_2',\n      type: 'multiple-choice',\n      question: 'What type of reaction converts an alkene to an alkane?',\n      options: [\n        'Substitution',\n        'Addition',\n        'Elimination',\n        'Condensation'\n      ],\n      correctAnswer: 1,\n      explanation: 'Addition reactions convert alkenes to alkanes by adding hydrogen (hydrogenation) across the double bond, typically using a metal catalyst.',\n      difficulty: 'medium',\n      module: 7,\n      timeLimit: 120\n    },\n    {\n      id: 'chem_m7_3',\n      type: 'multiple-choice',\n      question: 'Which type of isomerism occurs when molecules have the same molecular formula but different structural arrangements?',\n      options: [\n        'Optical isomerism',\n        'Geometric isomerism',\n        'Structural isomerism',\n        'Conformational isomerism'\n      ],\n      correctAnswer: 2,\n      explanation: 'Structural isomerism occurs when compounds have the same molecular formula but different structural arrangements of atoms, such as chain, positional, or functional group isomers.',\n      difficulty: 'medium',\n      module: 7,\n      timeLimit: 120\n    },\n    // Module 8 - Applying Chemical Ideas questions\n    {\n      id: 'chem_m8_1',\n      type: 'multiple-choice',\n      question: 'Which process is used to extract aluminum from its ore?',\n      options: [\n        'Fractional distillation',\n        'Electrolysis',\n        'Precipitation',\n        'Crystallization'\n      ],\n      correctAnswer: 1,\n      explanation: 'Aluminum is extracted from bauxite ore using electrolysis in the Hall-Hroult process. The aluminum oxide is dissolved in molten cryolite and electrolyzed to produce pure aluminum metal.',\n      difficulty: 'medium',\n      module: 8,\n      timeLimit: 120\n    },\n    {\n      id: 'chem_m8_2',\n      type: 'multiple-choice',\n      question: 'What is the main advantage of using catalysts in industrial processes?',\n      options: [\n        'They increase the yield of products',\n        'They lower the activation energy',\n        'They change the equilibrium position',\n        'They prevent side reactions'\n      ],\n      correctAnswer: 1,\n      explanation: 'Catalysts lower the activation energy required for reactions, allowing them to proceed faster and under milder conditions, making industrial processes more efficient and economical.',\n      difficulty: 'easy',\n      module: 8,\n      timeLimit: 120\n    },\n    {\n      id: 'chem_m8_3',\n      type: 'multiple-choice',\n      question: 'What is nanotechnology primarily concerned with?',\n      options: [\n        'Materials at the atomic and molecular scale',\n        'Very large molecular structures',\n        'High-temperature chemical reactions',\n        'Biological systems only'\n      ],\n      correctAnswer: 0,\n      explanation: 'Nanotechnology involves manipulating matter at the atomic and molecular scale (typically 1-100 nanometers) to create materials and devices with novel properties.',\n      difficulty: 'easy',\n      module: 8,\n      timeLimit: 120\n    }\n  ];\n\n  return {\n    questions: questions\n      .filter(q => q.module === module)\n      .filter(q => difficulty === 'all' || q.difficulty === difficulty)\n      .slice(0, count),\n    success: true\n  };\n};\n\n// Mock questions for specific pathway topics\nconst getTopicMockQuestions = (subjectId, topicId, count) => {\n  const topic = getTopicById(subjectId, topicId);\n  if (!topic) {\n    return { success: false, error: 'Topic not found' };\n  }\n\n  // Map topic IDs to mock questions based on the pathway structure\n  const topicQuestions = {\n    // Biology topics\n    'dna-structure': [\n      {\n        id: 'bio_dna_1',\n        type: 'multiple-choice',\n        question: 'What is the primary function of DNA polymerase during DNA replication?',\n        options: [\n          'Unwinding the DNA double helix',\n          'Adding nucleotides to the growing DNA strand',\n          'Proofreading for errors in the DNA sequence',\n          'Joining Okazaki fragments together'\n        ],\n        correctAnswer: 1,\n        explanation: 'DNA polymerase is responsible for adding complementary nucleotides to the growing DNA strand during replication.',\n        difficulty: topic.difficulty,\n        timeLimit: 120\n      },\n      {\n        id: 'bio_dna_2',\n        type: 'multiple-choice',\n        question: 'What type of bond connects the two strands of DNA?',\n        options: [\n          'Covalent bonds',\n          'Ionic bonds',\n          'Hydrogen bonds',\n          'Van der Waals forces'\n        ],\n        correctAnswer: 2,\n        explanation: 'Hydrogen bonds form between complementary base pairs (A-T and G-C) to hold the two strands of DNA together.',\n        difficulty: topic.difficulty,\n        timeLimit: 120\n      }\n    ],\n    'protein-synthesis': [\n      {\n        id: 'bio_protein_1',\n        type: 'multiple-choice',\n        question: 'Where does transcription occur in eukaryotic cells?',\n        options: [\n          'Cytoplasm',\n          'Nucleus',\n          'Ribosomes',\n          'Mitochondria'\n        ],\n        correctAnswer: 1,\n        explanation: 'In eukaryotic cells, transcription occurs in the nucleus where DNA is transcribed into mRNA.',\n        difficulty: topic.difficulty,\n        timeLimit: 120\n      }\n    ],\n    // Chemistry topics\n    'atomic-structure': [\n      {\n        id: 'chem_atomic_1',\n        type: 'multiple-choice',\n        question: 'What determines the chemical properties of an element?',\n        options: [\n          'Number of protons',\n          'Number of neutrons',\n          'Number of electrons in the outermost shell',\n          'Atomic mass'\n        ],\n        correctAnswer: 2,\n        explanation: 'The number of electrons in the outermost shell (valence electrons) determines the chemical properties of an element.',\n        difficulty: topic.difficulty,\n        timeLimit: 120\n      }\n    ]\n  };\n\n  // Get questions for the specific topic, or use module-based fallback\n  let questions = topicQuestions[topicId] || [];\n  \n  if (questions.length === 0) {\n    // Fallback to module-based questions if topic-specific ones aren't available\n    if (subjectId === 'biology') {\n      const moduleQuestions = getMockBiologyQuestions(5, topic.difficulty, count * 2);\n      questions = moduleQuestions.questions || [];\n    } else if (subjectId === 'chemistry') {\n      const moduleQuestions = getMockChemistryQuestions(5, topic.difficulty, count * 2);\n      questions = moduleQuestions.questions || [];\n    }\n  }\n\n  return {\n    success: true,\n    questions: questions.slice(0, Math.min(count, topic.questions))\n  };\n};\n\nexport default quizAPI;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\utils\\quizStatistics.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'forceRefresh' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":314,"column":53,"nodeType":"Identifier","messageId":"unusedVar","endLine":314,"endColumn":65},{"ruleId":"no-unused-vars","severity":1,"message":"'forceRefresh' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":326,"column":53,"nodeType":"Identifier","messageId":"unusedVar","endLine":326,"endColumn":65}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { quizAPI } from './quizAPI.js';\n\n// Cache for quiz statistics (5 minutes)\nconst CACHE_DURATION = 5 * 60 * 1000; // 5 minutes in milliseconds\nlet statisticsCache = {\n  data: null,\n  timestamp: 0,\n  loading: false\n};\n\n// Helper functions for statistical calculations\nconst calculateMean = (numbers) => {\n  if (!numbers || numbers.length === 0) return 0;\n  return numbers.reduce((sum, num) => sum + num, 0) / numbers.length;\n};\n\nconst calculateMedian = (numbers) => {\n  if (!numbers || numbers.length === 0) return 0;\n  const sorted = [...numbers].sort((a, b) => a - b);\n  const mid = Math.floor(sorted.length / 2);\n  return sorted.length % 2 === 0 \n    ? (sorted[mid - 1] + sorted[mid]) / 2 \n    : sorted[mid];\n};\n\nconst calculateStandardDeviation = (numbers) => {\n  if (!numbers || numbers.length <= 1) return 0;\n  const mean = calculateMean(numbers);\n  const squaredDiffs = numbers.map(num => Math.pow(num - mean, 2));\n  const variance = calculateMean(squaredDiffs);\n  return Math.sqrt(variance);\n};\n\n// Get date ranges for trends\nconst getDateRanges = () => {\n  const now = new Date();\n  const last7Days = new Date(now.getTime() - (7 * 24 * 60 * 60 * 1000));\n  const last30Days = new Date(now.getTime() - (30 * 24 * 60 * 60 * 1000));\n  \n  return {\n    last7Days: last7Days.toISOString().split('T')[0],\n    last30Days: last30Days.toISOString().split('T')[0],\n    today: now.toISOString().split('T')[0]\n  };\n};\n\n// Filter quiz results by date range\nconst filterByDateRange = (quizResults, startDate, endDate = null) => {\n  const start = new Date(startDate);\n  const end = endDate ? new Date(endDate) : new Date();\n  \n  return quizResults.filter(quiz => {\n    const quizDate = new Date(quiz.completedAt || quiz.timestamp || quiz.date);\n    return quizDate >= start && quizDate <= end;\n  });\n};\n\n// Filter quiz results by subject\nconst filterBySubject = (quizResults, subject) => {\n  if (!subject) return quizResults;\n  return quizResults.filter(quiz => \n    quiz.subject === subject || quiz.subjectId === subject\n  );\n};\n\n// Filter quiz results by module\nconst filterByModule = (quizResults, moduleId) => {\n  if (!moduleId) return quizResults;\n  return quizResults.filter(quiz => \n    quiz.module === moduleId || quiz.moduleId === moduleId\n  );\n};\n\n// Calculate comprehensive quiz statistics\nconst calculateQuizStatistics = (quizResults) => {\n  if (!quizResults || quizResults.length === 0) {\n    return {\n      totalQuizzes: 0,\n      averageScore: 0,\n      medianScore: 0,\n      bestScore: 0,\n      worstScore: 0,\n      standardDeviation: 0,\n      totalQuestions: 0,\n      perfectScores: 0,\n      improvementTrend: 0,\n      subjectBreakdown: {},\n      moduleBreakdown: {},\n      recentTrends: {\n        last7Days: { count: 0, avgScore: 0 },\n        last30Days: { count: 0, avgScore: 0 }\n      }\n    };\n  }\n\n  // Extract scores and ensure they're numbers\n  const scores = quizResults\n    .map(quiz => {\n      const score = quiz.score || quiz.percentage || quiz.finalScore;\n      return typeof score === 'number' ? score : parseFloat(score) || 0;\n    })\n    .filter(score => !isNaN(score) && score >= 0 && score <= 100);\n\n  if (scores.length === 0) {\n    return {\n      totalQuizzes: quizResults.length,\n      averageScore: 0,\n      medianScore: 0,\n      bestScore: 0,\n      worstScore: 0,\n      standardDeviation: 0,\n      totalQuestions: 0,\n      perfectScores: 0,\n      improvementTrend: 0,\n      subjectBreakdown: {},\n      moduleBreakdown: {},\n      recentTrends: {\n        last7Days: { count: 0, avgScore: 0 },\n        last30Days: { count: 0, avgScore: 0 }\n      }\n    };\n  }\n\n  // Basic statistics\n  const averageScore = calculateMean(scores);\n  const medianScore = calculateMedian(scores);\n  const bestScore = Math.max(...scores);\n  const worstScore = Math.min(...scores);\n  const standardDeviation = calculateStandardDeviation(scores);\n  const perfectScores = scores.filter(score => score === 100).length;\n  const totalQuestions = quizResults.reduce((sum, quiz) => \n    sum + (quiz.totalQuestions || quiz.questionsAnswered || 0), 0\n  );\n\n  // Calculate improvement trend (compare first half vs second half of results)\n  const midPoint = Math.floor(scores.length / 2);\n  const firstHalf = scores.slice(0, midPoint);\n  const secondHalf = scores.slice(midPoint);\n  const improvementTrend = firstHalf.length > 0 && secondHalf.length > 0 \n    ? calculateMean(secondHalf) - calculateMean(firstHalf)\n    : 0;\n\n  // Subject breakdown\n  const subjectBreakdown = {};\n  const subjectGroups = quizResults.reduce((groups, quiz) => {\n    const subject = quiz.subject || quiz.subjectId || 'unknown';\n    if (!groups[subject]) groups[subject] = [];\n    const score = quiz.score || quiz.percentage || quiz.finalScore;\n    if (typeof score === 'number' && !isNaN(score)) {\n      groups[subject].push(score);\n    }\n    return groups;\n  }, {});\n\n  Object.keys(subjectGroups).forEach(subject => {\n    const subjectScores = subjectGroups[subject];\n    if (subjectScores.length > 0) {\n      subjectBreakdown[subject] = {\n        totalQuizzes: subjectScores.length,\n        averageScore: calculateMean(subjectScores),\n        medianScore: calculateMedian(subjectScores),\n        bestScore: Math.max(...subjectScores),\n        worstScore: Math.min(...subjectScores)\n      };\n    }\n  });\n\n  // Module breakdown\n  const moduleBreakdown = {};\n  const moduleGroups = quizResults.reduce((groups, quiz) => {\n    const module = quiz.module || quiz.moduleId || 'unknown';\n    if (!groups[module]) groups[module] = [];\n    const score = quiz.score || quiz.percentage || quiz.finalScore;\n    if (typeof score === 'number' && !isNaN(score)) {\n      groups[module].push(score);\n    }\n    return groups;\n  }, {});\n\n  Object.keys(moduleGroups).forEach(module => {\n    const moduleScores = moduleGroups[module];\n    if (moduleScores.length > 0) {\n      moduleBreakdown[module] = {\n        totalQuizzes: moduleScores.length,\n        averageScore: calculateMean(moduleScores),\n        medianScore: calculateMedian(moduleScores),\n        bestScore: Math.max(...moduleScores),\n        worstScore: Math.min(...moduleScores)\n      };\n    }\n  });\n\n  // Recent trends\n  const dateRanges = getDateRanges();\n  const last7DaysResults = filterByDateRange(quizResults, dateRanges.last7Days);\n  const last30DaysResults = filterByDateRange(quizResults, dateRanges.last30Days);\n\n  const last7DaysScores = last7DaysResults\n    .map(quiz => quiz.score || quiz.percentage || quiz.finalScore)\n    .filter(score => typeof score === 'number' && !isNaN(score));\n\n  const last30DaysScores = last30DaysResults\n    .map(quiz => quiz.score || quiz.percentage || quiz.finalScore)\n    .filter(score => typeof score === 'number' && !isNaN(score));\n\n  return {\n    totalQuizzes: quizResults.length,\n    averageScore: Math.round(averageScore * 100) / 100,\n    medianScore: Math.round(medianScore * 100) / 100,\n    bestScore: Math.round(bestScore * 100) / 100,\n    worstScore: Math.round(worstScore * 100) / 100,\n    standardDeviation: Math.round(standardDeviation * 100) / 100,\n    totalQuestions,\n    perfectScores,\n    improvementTrend: Math.round(improvementTrend * 100) / 100,\n    subjectBreakdown,\n    moduleBreakdown,\n    recentTrends: {\n      last7Days: {\n        count: last7DaysResults.length,\n        avgScore: last7DaysScores.length > 0 \n          ? Math.round(calculateMean(last7DaysScores) * 100) / 100 \n          : 0\n      },\n      last30Days: {\n        count: last30DaysResults.length,\n        avgScore: last30DaysScores.length > 0 \n          ? Math.round(calculateMean(last30DaysScores) * 100) / 100 \n          : 0\n      }\n    }\n  };\n};\n\n// Main function to get quiz statistics with caching\nexport const getQuizStatistics = async (forceRefresh = false) => {\n  const now = Date.now();\n  \n  // Return cached data if it's still valid and not forcing refresh\n  if (!forceRefresh && \n      statisticsCache.data && \n      (now - statisticsCache.timestamp) < CACHE_DURATION) {\n    return {\n      ...statisticsCache.data,\n      fromCache: true,\n      lastUpdated: new Date(statisticsCache.timestamp).toISOString()\n    };\n  }\n\n  // If already loading, return a promise that waits for the loading to complete\n  if (statisticsCache.loading) {\n    return new Promise((resolve) => {\n      const checkLoading = () => {\n        if (!statisticsCache.loading) {\n          resolve({\n            ...statisticsCache.data,\n            fromCache: true,\n            lastUpdated: new Date(statisticsCache.timestamp).toISOString()\n          });\n        } else {\n          setTimeout(checkLoading, 100);\n        }\n      };\n      checkLoading();\n    });\n  }\n\n  try {\n    statisticsCache.loading = true;\n\n    // Fetch all quiz results\n    const quizResults = await quizAPI.getAllQuizResults();\n    \n    // Calculate statistics\n    const statistics = calculateQuizStatistics(quizResults);\n    \n    // Update cache\n    statisticsCache = {\n      data: statistics,\n      timestamp: now,\n      loading: false\n    };\n\n    return {\n      ...statistics,\n      fromCache: false,\n      lastUpdated: new Date(now).toISOString()\n    };\n\n  } catch (error) {\n    console.error('Error calculating quiz statistics:', error);\n    statisticsCache.loading = false;\n    \n    // Return cached data if available, otherwise return empty statistics\n    if (statisticsCache.data) {\n      return {\n        ...statisticsCache.data,\n        fromCache: true,\n        error: error.message,\n        lastUpdated: new Date(statisticsCache.timestamp).toISOString()\n      };\n    }\n    \n    return {\n      ...calculateQuizStatistics([]),\n      fromCache: false,\n      error: error.message,\n      lastUpdated: new Date(now).toISOString()\n    };\n  }\n};\n\n// Get statistics for a specific subject\nexport const getSubjectStatistics = async (subject, forceRefresh = false) => {\n  try {\n    const quizResults = await quizAPI.getAllQuizResults();\n    const filteredResults = filterBySubject(quizResults, subject);\n    return calculateQuizStatistics(filteredResults);\n  } catch (error) {\n    console.error(`Error calculating statistics for ${subject}:`, error);\n    return calculateQuizStatistics([]);\n  }\n};\n\n// Get statistics for a specific module\nexport const getModuleStatistics = async (moduleId, forceRefresh = false) => {\n  try {\n    const quizResults = await quizAPI.getAllQuizResults();\n    const filteredResults = filterByModule(quizResults, moduleId);\n    return calculateQuizStatistics(filteredResults);\n  } catch (error) {\n    console.error(`Error calculating statistics for module ${moduleId}:`, error);\n    return calculateQuizStatistics([]);\n  }\n};\n\n// Get statistics for a specific date range\nexport const getDateRangeStatistics = async (startDate, endDate = null, subject = null) => {\n  try {\n    const quizResults = await quizAPI.getAllQuizResults();\n    let filteredResults = filterByDateRange(quizResults, startDate, endDate);\n    \n    if (subject) {\n      filteredResults = filterBySubject(filteredResults, subject);\n    }\n    \n    return calculateQuizStatistics(filteredResults);\n  } catch (error) {\n    console.error('Error calculating date range statistics:', error);\n    return calculateQuizStatistics([]);\n  }\n};\n\n// Clear the statistics cache\nexport const clearStatisticsCache = () => {\n  statisticsCache = {\n    data: null,\n    timestamp: 0,\n    loading: false\n  };\n};\n\n// Get cache status\nexport const getCacheStatus = () => {\n  const now = Date.now();\n  const isValid = statisticsCache.data && (now - statisticsCache.timestamp) < CACHE_DURATION;\n  const age = statisticsCache.timestamp ? now - statisticsCache.timestamp : 0;\n  \n  return {\n    hasData: !!statisticsCache.data,\n    isValid,\n    age,\n    lastUpdated: statisticsCache.timestamp ? new Date(statisticsCache.timestamp).toISOString() : null,\n    loading: statisticsCache.loading\n  };\n};\n\nexport default {\n  getQuizStatistics,\n  getSubjectStatistics,\n  getModuleStatistics,\n  getDateRangeStatistics,\n  clearStatisticsCache,\n  getCacheStatus\n};","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\utils\\syncManager.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'retryCount' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":273,"column":55,"nodeType":"Identifier","messageId":"unusedVar","endLine":273,"endColumn":65},{"ruleId":"no-unused-vars","severity":1,"message":"'clientId' is assigned a value but never used. Allowed unused vars must match /^React$/u.","line":349,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":349,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'event' is defined but never used. Allowed unused args must match /^_/u.","line":466,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":466,"endColumn":39}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react';\nimport { useOfflineStorage } from '../hooks/useOfflineStorage';\nimport { progressAPI } from './progressAPI.js';\n\nconst PROGRESS_SYNC_QUEUE_KEY = 'progress_sync_queue';\nconst RETRY_DELAYS = [1000, 2000, 4000, 8000, 16000, 32000]; // Exponential backoff in ms\n\nlet offlineStorageClient = null;\nlet syncManagerInstance = null;\n\nconst registerOfflineStorageClient = (client) => {\n  offlineStorageClient = client;\n  if (client && syncManagerInstance?.flushInMemoryPendingRequests) {\n    syncManagerInstance.flushInMemoryPendingRequests();\n  }\n};\n\nconst getOfflineStorageClient = () => offlineStorageClient;\n\nconst getOfflineStorageOrWarn = () => {\n  const client = getOfflineStorageClient();\n  if (!client) {\n    console.warn('[SyncManager] Offline storage client not ready. Operation will be skipped.');\n  }\n  return client;\n};\n\nclass SyncManager {\n  constructor() {\n    this.isOnline = navigator.onLine;\n    this.syncInProgress = false;\n    this.retryAttempts = new Map();\n    this.maxRetries = 6;\n    this.retryDelay = 1000; // Start with 1 second\n    this.progressQueue = this.loadProgressQueue();\n    this.inMemoryPendingRequests = [];\n    \n    // Listen for online/offline events\n    window.addEventListener('online', this.handleOnline.bind(this));\n    window.addEventListener('offline', this.handleOffline.bind(this));\n  }\n\n  // Load progress sync queue from localStorage\n  loadProgressQueue() {\n    try {\n      const stored = localStorage.getItem(PROGRESS_SYNC_QUEUE_KEY);\n      return stored ? JSON.parse(stored) : [];\n    } catch (error) {\n      console.error('Error loading progress sync queue:', error);\n      return [];\n    }\n  }\n\n  // Save progress queue to localStorage\n  saveProgressQueue() {\n    try {\n      localStorage.setItem(PROGRESS_SYNC_QUEUE_KEY, JSON.stringify(this.progressQueue));\n    } catch (error) {\n      console.error('Error saving progress sync queue:', error);\n    }\n  }\n\n  // Add progress operation to sync queue\n  addProgressToQueue(operation) {\n    const queueItem = {\n      id: Date.now() + Math.random(),\n      timestamp: Date.now(),\n      retryCount: 0,\n      operation,\n      priority: operation.priority || 1,\n      type: 'progress'\n    };\n\n    this.progressQueue.push(queueItem);\n    this.progressQueue.sort((a, b) => b.priority - a.priority); // Sort by priority desc\n    this.saveProgressQueue();\n\n    // Try to process immediately if online\n    if (this.isOnline) {\n      this.syncProgressQueue();\n    }\n\n    return queueItem.id;\n  }\n\n  // Process progress sync queue\n  async syncProgressQueue() {\n    if (this.syncInProgress || !this.isOnline || this.progressQueue.length === 0) {\n      return;\n    }\n\n    this.syncInProgress = true;\n\n    try {\n      // Check if backend is available\n      const healthCheck = await progressAPI.checkSyncHealth();\n      if (!healthCheck.available) {\n        console.log('Progress API not available, skipping sync');\n        return;\n      }\n\n      // Process items by priority\n      const itemsToProcess = [...this.progressQueue];\n      \n      for (const item of itemsToProcess) {\n        try {\n          await this.processProgressItem(item);\n          this.removeFromProgressQueue(item.id);\n        } catch (error) {\n          await this.handleFailedProgressSync(item, error);\n        }\n      }\n    } catch (error) {\n      console.error('Error processing progress sync queue:', error);\n    } finally {\n      this.syncInProgress = false;\n    }\n  }\n\n  // Process a single progress queue item\n  async processProgressItem(item) {\n    const { operation } = item;\n    \n    switch (operation.action) {\n      case 'SAVE_PROGRESS':\n        return await progressAPI.saveProgress(operation.data);\n      \n      case 'QUIZ_COMPLETION':\n        return await progressAPI.saveQuizCompletion(operation.data);\n      \n      case 'UPDATE_DAILY_GOAL':\n        return await progressAPI.updateDailyGoal(operation.data.goal);\n      \n      case 'RESET_SUBJECT':\n        return await progressAPI.resetSubjectProgress(operation.data.subjectId);\n      \n      case 'BULK_SYNC':\n        return await progressAPI.bulkSync(operation.data);\n      \n      default:\n        throw new Error(`Unknown progress operation: ${operation.action}`);\n    }\n  }\n\n  // Handle failed progress sync with exponential backoff\n  async handleFailedProgressSync(item, error) {\n    item.retryCount++;\n    item.lastError = error.message;\n    item.lastRetryAt = Date.now();\n\n    if (item.retryCount >= this.maxRetries) {\n      console.error(`Max retries exceeded for progress sync item ${item.id}:`, error);\n      this.removeFromProgressQueue(item.id);\n      return;\n    }\n\n    // Calculate delay with exponential backoff\n    const delayIndex = Math.min(item.retryCount - 1, RETRY_DELAYS.length - 1);\n    const delay = RETRY_DELAYS[delayIndex];\n\n    console.log(`Retrying progress sync item ${item.id} in ${delay}ms (attempt ${item.retryCount}/${this.maxRetries})`);\n\n    // Schedule retry\n    setTimeout(() => {\n      this.syncProgressQueue();\n    }, delay);\n\n    this.saveProgressQueue();\n  }\n\n  // Remove operation from progress queue\n  removeFromProgressQueue(id) {\n    this.progressQueue = this.progressQueue.filter(item => item.id !== id);\n    this.saveProgressQueue();\n  }\n\n  // Get progress queue status\n  getProgressQueueStatus() {\n    return {\n      itemCount: this.progressQueue.length,\n      oldestItem: this.progressQueue.length > 0 ? Math.min(...this.progressQueue.map(item => item.timestamp)) : null,\n      failedItems: this.progressQueue.filter(item => item.retryCount > 0).length\n    };\n  }\n\n  async flushInMemoryPendingRequests() {\n    if (this.inMemoryPendingRequests.length === 0) {\n      return;\n    }\n\n    const offlineStorage = getOfflineStorageClient();\n    if (!offlineStorage?.addPendingRequest) {\n      return;\n    }\n\n    const pending = [...this.inMemoryPendingRequests];\n    this.inMemoryPendingRequests = [];\n\n    await Promise.all(\n      pending.map((request) => offlineStorage.addPendingRequest(request))\n    );\n  }\n\n  handleOnline() {\n    this.isOnline = true;\n    console.log('Back online - starting sync...');\n    this.flushInMemoryPendingRequests();\n    this.syncPendingRequests();\n    this.syncProgressQueue();\n  }\n\n  handleOffline() {\n    this.isOnline = false;\n    console.log('Gone offline - queuing requests...');\n  }\n\n  async syncPendingRequests() {\n    if (this.syncInProgress || !this.isOnline) {\n      return;\n    }\n\n    this.syncInProgress = true;\n    \n    try {\n      const offlineStorage = getOfflineStorageOrWarn();\n      let pendingRequests = [];\n\n      if (offlineStorage?.getPendingRequests) {\n        await this.flushInMemoryPendingRequests();\n        pendingRequests = await offlineStorage.getPendingRequests();\n      } else {\n        pendingRequests = [...this.inMemoryPendingRequests];\n        this.inMemoryPendingRequests = [];\n      }\n\n      if (pendingRequests.length === 0) {\n        console.log('No pending requests to sync');\n        return;\n      }\n\n      console.log(`Syncing ${pendingRequests.length} pending requests...`);\n      \n      // Sort by priority and timestamp\n      pendingRequests.sort((a, b) => {\n        if (a.priority !== b.priority) {\n          return b.priority - a.priority; // Higher priority first\n        }\n        return a.timestamp - b.timestamp; // Older first\n      });\n\n      const results = await Promise.allSettled(\n        pendingRequests.map(request => this.processRequest(request))\n      );\n\n      const successful = results.filter(r => r.status === 'fulfilled').length;\n      const failed = results.filter(r => r.status === 'rejected').length;\n      \n      console.log(`Sync completed: ${successful} successful, ${failed} failed`);\n      \n      // Trigger success event for UI updates\n      window.dispatchEvent(new CustomEvent('syncCompleted', {\n        detail: { successful, failed, total: pendingRequests.length }\n      }));\n      \n    } catch (error) {\n      console.error('Sync failed:', error);\n    } finally {\n      this.syncInProgress = false;\n    }\n  }\n\n  async processRequest(request) {\n    const { id, clientId, url, method, headers, body, retryCount = 0 } = request;\n    const requestKey = id ?? clientId ?? (request.clientId = `${Date.now()}-${Math.random()}`);\n    const offlineStorage = getOfflineStorageClient();\n    \n    try {\n      const response = await fetch(url, {\n        method,\n        headers: {\n          'Content-Type': 'application/json',\n          ...headers\n        },\n        body: body ? JSON.stringify(body) : undefined\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n\n      const data = await response.json();\n      \n      // Remove successful request from pending queue\n      if (offlineStorage?.removePendingRequest && id) {\n        await offlineStorage.removePendingRequest(id);\n      }\n      \n      // Cache the response if it's a GET request\n      if (method === 'GET' && offlineStorage?.cacheResponse) {\n        await offlineStorage.cacheResponse(url, data);\n      }\n      \n      console.log(`Successfully synced request ${requestKey}: ${method} ${url}`);\n      return data;\n      \n    } catch (error) {\n      console.error(`Failed to sync request ${requestKey}:`, error);\n      \n      const currentRetries = this.retryAttempts.get(requestKey) || 0;\n      \n      if (currentRetries < this.maxRetries) {\n        // Schedule retry with exponential backoff\n        const delay = this.retryDelay * Math.pow(2, currentRetries);\n        this.retryAttempts.set(requestKey, currentRetries + 1);\n        \n        setTimeout(() => {\n          this.processRequest(request);\n        }, delay);\n        \n        console.log(`Retrying request ${requestKey} in ${delay}ms (attempt ${currentRetries + 1}/${this.maxRetries})`);\n      } else {\n        // Max retries reached, remove from queue and log error\n        if (offlineStorage?.removePendingRequest && id) {\n          await offlineStorage.removePendingRequest(id);\n        }\n        this.retryAttempts.delete(requestKey);\n        console.error(`Max retries reached for request ${requestKey}, removing from queue`);\n      }\n      \n      throw error;\n    }\n  }\n\n  async queueRequest(url, options = {}) {\n    const offlineStorage = getOfflineStorageClient();\n    \n    const request = {\n      clientId: `${Date.now()}-${Math.random()}`,\n      url,\n      method: options.method || 'GET',\n      headers: options.headers || {},\n      body: options.body,\n      priority: options.priority || 1,\n      timestamp: Date.now()\n    };\n\n    const persistRequest = async () => {\n      if (offlineStorage?.addPendingRequest) {\n        const { clientId, ...payload } = request;\n        await offlineStorage.addPendingRequest(payload);\n      } else {\n        this.inMemoryPendingRequests.push({ ...request });\n      }\n    };\n    \n    if (this.isOnline) {\n      try {\n        // Try to execute immediately if online\n        return await this.processRequest(request);\n      } catch (error) {\n        // If immediate execution fails, queue for later\n        await persistRequest();\n        throw error;\n      }\n    }\n\n    // Queue for when online\n    await persistRequest();\n    console.log('Request queued for when online:', url);\n    return null;\n  }\n\n  async clearPendingRequests() {\n    const offlineStorage = getOfflineStorageClient();\n    if (offlineStorage?.getPendingRequests) {\n      const pendingRequests = await offlineStorage.getPendingRequests();\n      \n      await Promise.all(\n        pendingRequests.map(request => \n          request.id && offlineStorage.removePendingRequest\n            ? offlineStorage.removePendingRequest(request.id)\n            : Promise.resolve()\n        )\n      );\n    }\n\n    this.inMemoryPendingRequests = [];\n    this.retryAttempts.clear();\n    console.log('Cleared all pending requests');\n  }\n\n  getStatus() {\n    return {\n      isOnline: this.isOnline,\n      syncInProgress: this.syncInProgress,\n      pendingRetries: this.retryAttempts.size,\n      progressQueue: this.getProgressQueueStatus(),\n      inMemoryQueue: this.inMemoryPendingRequests.length\n    };\n  }\n}\n\n// Create singleton instance\nconst syncManager = new SyncManager();\nsyncManagerInstance = syncManager;\n\n// Enhanced fetch function that works offline\nexport const offlineFetch = async (url, options = {}) => {\n  const offlineStorage = getOfflineStorageClient();\n  \n  try {\n    if (navigator.onLine) {\n      // Online: try normal fetch\n      const response = await fetch(url, options);\n      \n      if (response.ok && options.method === 'GET') {\n        // Cache successful GET responses\n        const data = await response.json();\n        if (offlineStorage?.cacheResponse) {\n          await offlineStorage.cacheResponse(url, data);\n        }\n        return { data, fromCache: false };\n      }\n      \n      return { data: await response.json(), fromCache: false };\n    } else {\n      throw new Error('Offline');\n    }\n  } catch (error) {\n    // Offline or fetch failed: try cache for GET requests\n    if ((options.method === 'GET' || !options.method) && offlineStorage?.getCachedResponse) {\n      const cached = await offlineStorage.getCachedResponse(url);\n      if (cached) {\n        console.log('Serving from cache:', url);\n        return { data: cached.data, fromCache: true };\n      }\n    }\n    \n    // For non-GET requests or when no cache available, queue for sync\n    if (options.method && options.method !== 'GET') {\n      await syncManager.queueRequest(url, options);\n    }\n    \n    throw new Error(`Failed to fetch ${url}: ${error.message}`);\n  }\n};\n\n// Hook to use sync manager in React components\nexport const useSyncManager = () => {\n  const offlineStorage = useOfflineStorage();\n  const [status, setStatus] = useState(syncManager.getStatus());\n  \n  useEffect(() => {\n    registerOfflineStorageClient(offlineStorage);\n\n    return () => {\n      if (getOfflineStorageClient() === offlineStorage) {\n        registerOfflineStorageClient(null);\n      }\n    };\n  }, [offlineStorage]);\n\n  useEffect(() => {\n    const updateStatus = () => setStatus(syncManager.getStatus());\n    \n    const handleSyncCompleted = (event) => {\n      updateStatus();\n      // You can add UI notifications here\n    };\n    \n    window.addEventListener('online', updateStatus);\n    window.addEventListener('offline', updateStatus);\n    window.addEventListener('syncCompleted', handleSyncCompleted);\n    \n    return () => {\n      window.removeEventListener('online', updateStatus);\n      window.removeEventListener('offline', updateStatus);\n      window.removeEventListener('syncCompleted', handleSyncCompleted);\n    };\n  }, []);\n  \n  return {\n    ...status,\n    syncNow: () => syncManager.syncPendingRequests(),\n    clearQueue: () => syncManager.clearPendingRequests(),\n    queueRequest: (url, options) => syncManager.queueRequest(url, options)\n  };\n};\n\nexport default syncManager;\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\src\\utils\\userAPI.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\HSC-Learning-App\\mobile-ui-agent\\vite.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]}]
